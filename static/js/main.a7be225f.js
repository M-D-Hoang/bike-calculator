/*! For license information please see main.a7be225f.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={667:(t,e,i)=>{i.d(e,{A:()=>o});var r,s=i(533),n="1.9.1";r={version:n,licenseText:"JSXGraph v1.9.1 Copyright (C) see https://jsxgraph.org",COORDS_BY_USER:1,COORDS_BY_SCREEN:2,OBJECT_TYPE_ARC:1,OBJECT_TYPE_ARROW:2,OBJECT_TYPE_AXIS:3,OBJECT_TYPE_AXISPOINT:4,OBJECT_TYPE_TICKS:5,OBJECT_TYPE_CIRCLE:6,OBJECT_TYPE_CONIC:7,OBJECT_TYPE_CURVE:8,OBJECT_TYPE_GLIDER:9,OBJECT_TYPE_IMAGE:10,OBJECT_TYPE_LINE:11,OBJECT_TYPE_POINT:12,OBJECT_TYPE_SLIDER:13,OBJECT_TYPE_CAS:14,OBJECT_TYPE_GXTCAS:15,OBJECT_TYPE_POLYGON:16,OBJECT_TYPE_SECTOR:17,OBJECT_TYPE_TEXT:18,OBJECT_TYPE_ANGLE:19,OBJECT_TYPE_INTERSECTION:20,OBJECT_TYPE_TURTLE:21,OBJECT_TYPE_VECTOR:22,OBJECT_TYPE_OPROJECT:23,OBJECT_TYPE_GRID:24,OBJECT_TYPE_TANGENT:25,OBJECT_TYPE_HTMLSLIDER:26,OBJECT_TYPE_CHECKBOX:27,OBJECT_TYPE_INPUT:28,OBJECT_TYPE_BUTTON:29,OBJECT_TYPE_TRANSFORMATION:30,OBJECT_TYPE_FOREIGNOBJECT:31,OBJECT_TYPE_VIEW3D:32,OBJECT_TYPE_POINT3D:33,OBJECT_TYPE_LINE3D:34,OBJECT_TYPE_PLANE3D:35,OBJECT_TYPE_CURVE3D:36,OBJECT_TYPE_SURFACE3D:37,OBJECT_TYPE_MEASUREMENT:38,OBJECT_TYPE_INTERSECTION_LINE3D:39,OBJECT_TYPE_SPHERE3D:40,OBJECT_TYPE_CIRCLE3D:41,OBJECT_TYPE_INTERSECTION_CIRCLE3D:42,OBJECT_CLASS_POINT:1,OBJECT_CLASS_LINE:2,OBJECT_CLASS_CIRCLE:3,OBJECT_CLASS_CURVE:4,OBJECT_CLASS_AREA:5,OBJECT_CLASS_OTHER:6,OBJECT_CLASS_TEXT:7,OBJECT_CLASS_3D:8},s.A.extendConstants(s.A,r);const o=r},42:(t,e,i)=>{i.d(e,{A:()=>l});var r=i(533),s=i(667),n=i(512),o=i(514),a=i(259);r.A.Coords=function(t,e,i,r){this.board=i,this.usrCoords=[],this.scrCoords=[],this.emitter=!o.A.exists(r)||r,this.emitter&&n.A.eventify(this),this.setCoordinates(t,e,!1,!0)},r.A.extend(r.A.Coords.prototype,{normalizeUsrCoords:function(){Math.abs(this.usrCoords[0])>a.A.eps&&(this.usrCoords[1]/=this.usrCoords[0],this.usrCoords[2]/=this.usrCoords[0],this.usrCoords[0]=1)},usr2screen:function(t){var e=Math.round,i=this.board,r=this.usrCoords,s=i.origin.scrCoords;!0===t?(this.scrCoords[0]=e(r[0]),this.scrCoords[1]=e(r[0]*s[1]+r[1]*i.unitX),this.scrCoords[2]=e(r[0]*s[2]-r[2]*i.unitY)):(this.scrCoords[0]=r[0],this.scrCoords[1]=r[0]*s[1]+r[1]*i.unitX,this.scrCoords[2]=r[0]*s[2]-r[2]*i.unitY)},screen2usr:function(){var t=this.board.origin.scrCoords,e=this.scrCoords,i=this.board;this.usrCoords[0]=1,this.usrCoords[1]=(e[1]-t[1])/i.unitX,this.usrCoords[2]=(t[2]-e[2])/i.unitY},distance:function(t,e){var i,r,n=this.usrCoords,o=this.scrCoords;return t===s.A.COORDS_BY_USER?(i=e.usrCoords,(r=n[0]-i[0])*r>a.A.eps*a.A.eps?Number.POSITIVE_INFINITY:a.A.hypot(n[1]-i[1],n[2]-i[2])):(i=e.scrCoords,a.A.hypot(o[1]-i[1],o[2]-i[2]))},setCoordinates:function(t,e,i,r){var n=this.usrCoords,o=this.scrCoords,a=[n[0],n[1],n[2]],l=[o[0],o[1],o[2]];return t===s.A.COORDS_BY_USER?(2===e.length?(n[0]=1,n[1]=e[0],n[2]=e[1]):(n[0]=e[0],n[1]=e[1],n[2]=e[2],this.normalizeUsrCoords()),this.usr2screen(i)):(2===e.length?(o[1]=e[0],o[2]=e[1]):(o[1]=e[1],o[2]=e[2]),this.screen2usr()),!this.emitter||r||l[1]===o[1]&&l[2]===o[2]||this.triggerEventHandlers(["update"],[a,l]),this},copy:function(t,e){return void 0===e&&(e=0),this[t].slice(e)},isReal:function(){return!isNaN(this.usrCoords[1]+this.usrCoords[2])&&Math.abs(this.usrCoords[0])>a.A.eps},__evt__update:function(t,e){},__evt:function(){}});const l=r.A.Coords},744:(t,e,i)=>{i.d(e,{A:()=>h});var r=i(533),s=i(259),n=i(245),o=i(985),a=i(362),l=i(42),u=i(667),c=i(514);r.A.CoordsElement=function(t,e){var i;for(c.A.exists(t)||(t=[1,0,0]),i=0;i<t.length;++i)t[i]=parseFloat(t[i]);this.coords=new l.A(u.A.COORDS_BY_USER,t,this.board),this.initialCoords=new l.A(u.A.COORDS_BY_USER,t,this.board),this.position=null,this.isConstrained=!1,this.onPolygon=!1,this.slideObject=null,this.slideObjects=[],this.needsUpdateFromParent=!0,this.groups=[],this.Xjc=null,this.Yjc=null,this.methodMap=c.A.deepCopy(this.methodMap,{move:"moveTo",moveTo:"moveTo",moveAlong:"moveAlong",visit:"visit",glide:"makeGlider",makeGlider:"makeGlider",intersect:"makeIntersection",makeIntersection:"makeIntersection",X:"X",Y:"Y",Coords:"Coords",free:"free",setPosition:"setGliderPosition",setGliderPosition:"setGliderPosition",addConstraint:"addConstraint",dist:"Dist",Dist:"Dist",onPolygon:"onPolygon",startAnimation:"startAnimation",stopAnimation:"stopAnimation"}),c.A.exists(this.element)&&this.addAnchor(t,e),this.isDraggable=!0},r.A.extend(r.A.CoordsElement.prototype,{updateConstraint:function(){return this},updateCoords:function(t){return this.needsUpdate?(c.A.exists(t)||(t=!1),c.A.evaluate(this.visProp.frozen)||this.updateConstraint(),this.type===u.A.OBJECT_TYPE_GLIDER&&(this.isConstrained&&(t=!1),t?this.updateGliderFromParent():this.updateGlider()),this.updateTransform(t),this):this},updateGlider:function(){var t,e,i,r,o,a,h,d,p,f,_,m,g,y,v,A,b,C,x,P,E=2*Math.PI,w=!1,S=this.slideObject,O=[];if(this.needsUpdateFromParent=!1,S.elementClass===u.A.OBJECT_CLASS_CIRCLE)c.A.evaluate(this.visProp.isgeonext)&&(E=1),y=n.A.projectPointToCircle(this,S,this.board),v=n.A.rad([S.center.X()+1,S.center.Y()],S.center,this)/E;else if(S.elementClass===u.A.OBJECT_CLASS_LINE){if(this.onPolygon){if(r=S.point1.coords.usrCoords,e=(o=S.point2.coords.usrCoords)[t=1]-r[t],Math.abs(e)<s.A.eps&&(e=o[t=2]-r[t]),h=(n.A.projectPointToLine(this,S,this.board).usrCoords[t]-r[t])/e,a=S.parentPolygon,h<0){for(t=0;t<a.borders.length;t++)if(S===a.borders[t]){S=a.borders[(t-1+a.borders.length)%a.borders.length];break}}else if(h>1)for(t=0;t<a.borders.length;t++)if(S===a.borders[t]){S=a.borders[(t+1+a.borders.length)%a.borders.length];break}S.id!==this.slideObject.id&&(this.slideObject=S)}r=S.point1.coords,o=S.point2.coords,(e=r.distance(u.A.COORDS_BY_USER,o))<s.A.eps?(y=r,w=!0,v=0):(y=n.A.projectPointToLine(this,S,this.board),r=r.usrCoords.slice(0),o=o.usrCoords.slice(0),Math.abs(o[0])<s.A.eps?(e=o[t=1],Math.abs(e)<s.A.eps&&(e=o[t=2]),v=((e=(y.usrCoords[t]-r[t])/e)>=0?1:-1)*(e=Math.abs(e))/(e+1)):Math.abs(r[0])<s.A.eps?(e=r[t=1],Math.abs(e)<s.A.eps&&(e=r[t=2]),v=(e=(y.usrCoords[t]-o[t])/e)<0?(1-2*e)/(1-e):1/(e+1)):(e=o[t=1]-r[t],Math.abs(e)<s.A.eps&&(e=o[t=2]-r[t]),v=(y.usrCoords[t]-r[t])/e)),null!==(b=this.findClosestSnapValue(v))?(v=(c.A.evaluate(this.visProp.snapvalues)[b]-this._smin)/(this._smax-this._smin),this.update(!0)):(A=c.A.evaluate(this.visProp.snapwidth),c.A.evaluate(A)>0&&Math.abs(this._smax-this._smin)>=s.A.eps&&(i=(v=Math.max(Math.min(v,1),0))*(this._smax-this._smin)+this._smin,v=((i=Math.round(i/A)*A)-this._smin)/(this._smax-this._smin),this.update(!0))),r=S.point1.coords,!c.A.evaluate(S.visProp.straightfirst)&&Math.abs(r.usrCoords[0])>s.A.eps&&v<0&&(y=r,w=!0,v=0),o=S.point2.coords,!c.A.evaluate(S.visProp.straightlast)&&Math.abs(o.usrCoords[0])>s.A.eps&&v>1&&(y=o,w=!0,v=1)}else if(S.type===u.A.OBJECT_TYPE_TURTLE)this.updateConstraint(),y=(C=n.A.projectPointToTurtle(this,S,this.board))[0],v=C[1];else if(S.elementClass===u.A.OBJECT_CLASS_CURVE)if(S.type===u.A.OBJECT_TYPE_ARC||S.type===u.A.OBJECT_TYPE_SECTOR)y=n.A.projectPointToCircle(this,S,this.board),d=n.A.rad(S.radiuspoint,S.center,this),p=0,f=n.A.rad(S.radiuspoint,S.center,S.anglepoint),v=d,("minor"===(A=c.A.evaluate(S.visProp.selection))&&f>Math.PI||"major"===A&&f<Math.PI)&&(p=f,f=2*Math.PI),(d<p||d>f)&&(v=f,(d<p&&d>.5*p||d>f&&d>.5*f+Math.PI)&&(v=p),this.needsUpdateFromParent=!0,this.updateGliderFromParent()),E=f-p,this.visProp.isgeonext&&(E=1),Math.abs(E)>s.A.eps&&(v/=E);else if(this.updateConstraint(),S.transformations.length>0){for(P=!1,(C=S.getTransformationSource())[0]&&(P=C[0],O.push(S),O.push(C[1]));C[0]&&c.A.exists(C[1]._transformationSource);)C=C[1].getTransformationSource(),O.push(C[1]);if(x=this.coords.usrCoords,P){for(t=0;t<O.length;t++)O[t].updateTransformMatrix(),g=s.A.inverse(O[t].transformMat),x=s.A.matVecMult(g,x);for(_=new l.A(u.A.COORDS_BY_USER,x,this.board).usrCoords,x=(m=n.A.projectCoordsToCurve(_[1],_[2],this.position||0,O[O.length-1],this.board))[0].usrCoords,t=O.length-2;t>=0;t--)x=s.A.matVecMult(O[t].transformMat,x);m[0]=new l.A(u.A.COORDS_BY_USER,x,this.board)}else S.updateTransformMatrix(),g=s.A.inverse(S.transformMat),x=s.A.matVecMult(g,x),_=new l.A(u.A.COORDS_BY_USER,x,this.board).usrCoords,m=n.A.projectCoordsToCurve(_[1],_[2],this.position||0,S,this.board);y=m[0],v=m[1]}else y=(C=n.A.projectPointToCurve(this,S,this.board))[0],v=C[1];else c.A.isPoint(S)&&(y=n.A.projectPointToPoint(this,S,this.board),v=this.position);this.coords.setCoordinates(u.A.COORDS_BY_USER,y.usrCoords,w),this.position=v},findClosestSnapValue:function(t){var e,i,r,n,o=null;if(r=c.A.evaluate(this.visProp.snapvalues),n=c.A.evaluate(this.visProp.snapvaluedistance),c.A.isArray(r)&&Math.abs(this._smax-this._smin)>=s.A.eps&&n>0)for(e=0;e<r.length;e++)(i=Math.abs(t*(this._smax-this._smin)+this._smin-r[e]))<n&&(n=i,o=e);return o},updateGliderFromParent:function(){var t,e,i,r,o,a,h,d,p,f,_,m,g=this.slideObject,y=[],v=2*Math.PI;if(this.needsUpdateFromParent){if(g.elementClass===u.A.OBJECT_CLASS_CIRCLE)i=g.Radius(),c.A.evaluate(this.visProp.isgeonext)&&(v=1),o=[g.center.X()+i*Math.cos(this.position*v),g.center.Y()+i*Math.sin(this.position*v)];else if(g.elementClass===u.A.OBJECT_CLASS_LINE)t=g.point1.coords.usrCoords,e=g.point2.coords.usrCoords,0===t[0]&&0===t[1]&&0===t[2]||0===e[0]&&0===e[1]&&0===e[2]?o=[0,0,0]:Math.abs(e[0])<s.A.eps?(r=Math.min(Math.abs(this.position),1-s.A.eps),r/=1-r,this.position<0&&(r=-r),o=[t[0]+r*e[0],t[1]+r*e[1],t[2]+r*e[2]]):Math.abs(t[0])<s.A.eps?(r=Math.max(this.position,s.A.eps),r=(r=Math.min(r,2-s.A.eps))>1?(r-1)/(r-2):(1-r)/r,o=[e[0]+r*t[0],e[1]+r*t[1],e[2]+r*t[2]]):(r=this.position,o=[t[0]+r*(e[0]-t[0]),t[1]+r*(e[1]-t[1]),t[2]+r*(e[2]-t[2])]);else if(g.type===u.A.OBJECT_TYPE_TURTLE)this.coords.setCoordinates(u.A.COORDS_BY_USER,[g.Z(this.position),g.X(this.position),g.Y(this.position)]),this.updateConstraint(),o=n.A.projectPointToTurtle(this,g,this.board)[0].usrCoords;else if(g.elementClass===u.A.OBJECT_CLASS_CURVE){for(d=!1,(a=g.getTransformationSource())[0]&&(d=a[0],y.push(g),y.push(a[1]));a[0]&&c.A.exists(a[1]._transformationSource);)a=a[1].getTransformationSource(),y.push(a[1]);if(d?this.coords.setCoordinates(u.A.COORDS_BY_USER,[y[y.length-1].Z(this.position),y[y.length-1].X(this.position),y[y.length-1].Y(this.position)]):this.coords.setCoordinates(u.A.COORDS_BY_USER,[g.Z(this.position),g.X(this.position),g.Y(this.position)]),g.type===u.A.OBJECT_TYPE_ARC||g.type===u.A.OBJECT_TYPE_SECTOR)p=n.A.rad([g.center.X()+1,g.center.Y()],g.center,g.radiuspoint),f=0,m=n.A.rad(g.radiuspoint,g.center,g.anglepoint),("minor"===g.visProp.selection&&m>Math.PI||"major"===g.visProp.selection&&m<Math.PI)&&(f=m,m=2*Math.PI),v=m-f,c.A.evaluate(this.visProp.isgeonext)&&(v=1),((_=this.position*v)<f||_>m)&&(((_=m)<f&&_>.5*f||_>m&&_>.5*m+Math.PI)&&(_=f),this.position=_,Math.abs(v)>s.A.eps&&(this.position/=v)),i=g.Radius(),o=[g.center.X()+i*Math.cos(this.position*v+p),g.center.Y()+i*Math.sin(this.position*v+p)];else if(this.updateConstraint(),d)for(o=n.A.projectPointToCurve(this,y[y.length-1],this.board)[0].usrCoords,h=y.length-2;h>=0;h--)o=new l.A(u.A.COORDS_BY_USER,s.A.matVecMult(y[h].transformMat,o),this.board).usrCoords;else o=n.A.projectPointToCurve(this,g,this.board)[0].usrCoords}else c.A.isPoint(g)&&(o=n.A.projectPointToPoint(this,g,this.board).usrCoords);this.coords.setCoordinates(u.A.COORDS_BY_USER,o,!1)}else this.needsUpdateFromParent=!0},updateRendererGeneric:function(t){return this.needsUpdate&&this.board.renderer?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.coords.usrCoords[1]+this.coords.usrCoords[2]),this.isReal=Math.abs(this.coords.usrCoords[0])>s.A.eps&&this.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer[t](this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},X:function(){return this.coords.usrCoords[1]},Y:function(){return this.coords.usrCoords[2]},Z:function(){return this.coords.usrCoords[0]},Coords:function(t){return t?this.coords.usrCoords.slice():this.coords.usrCoords.slice(1)},XEval:function(){return this.coords.usrCoords[1]},YEval:function(){return this.coords.usrCoords[2]},ZEval:function(){return this.coords.usrCoords[0]},Dist:function(t){return this.isReal&&t.isReal?this.coords.distance(u.A.COORDS_BY_USER,t.coords):NaN},snapToGrid:function(t){return this.handleSnapToGrid(t)},handleSnapToPoints:function(t){var e,i,r,s,o,a,l,h,d=0,p=1/0,f=null,_=c.A.evaluate(this.visProp.ignoredsnaptopoints),m=!1;if(s=this.board.objectsList.length,_&&(l=_.length),c.A.evaluate(this.visProp.snaptopoints)||t){for(o=c.A.evaluate(this.visProp.attractorunit),a=c.A.evaluate(this.visProp.attractordistance),e=0;e<s;e++){if(i=this.board.objectsList[e],_){for(m=!1,h=0;h<l;h++)if(i===this.board.select(_[h])){m=!0;break}if(m)continue}c.A.isPoint(i)&&i!==this&&i.visPropCalc.visible&&(r=n.A.projectPointToPoint(this,i,this.board),(d="screen"===o?r.distance(u.A.COORDS_BY_SCREEN,this.coords):r.distance(u.A.COORDS_BY_USER,this.coords))<a&&d<p&&(p=d,f=r))}null!==f&&this.coords.setCoordinates(u.A.COORDS_BY_USER,f.usrCoords)}return this},snapToPoints:function(t){return this.handleSnapToPoints(t)},handleAttractors:function(){var t,e,i,r,s=0,o=c.A.evaluate(this.visProp.attractorunit),a=c.A.evaluate(this.visProp.attractordistance),h=c.A.evaluate(this.visProp.snatchdistance),d=c.A.evaluate(this.visProp.attractors),p=d.length;if(0!==a){for(t=0;t<p;t++)if(e=this.board.select(d[t]),c.A.exists(e)&&e!==this){if(c.A.isPoint(e)?i=n.A.projectPointToPoint(this,e,this.board):e.elementClass===u.A.OBJECT_CLASS_LINE?(r=n.A.projectCoordsToSegment(this.coords.usrCoords,e.point1.coords.usrCoords,e.point2.coords.usrCoords),i=!c.A.evaluate(e.visProp.straightfirst)&&r[1]<0?e.point1.coords:!c.A.evaluate(e.visProp.straightlast)&&r[1]>1?e.point2.coords:new l.A(u.A.COORDS_BY_USER,r[0],this.board)):e.elementClass===u.A.OBJECT_CLASS_CIRCLE?i=n.A.projectPointToCircle(this,e,this.board):e.elementClass===u.A.OBJECT_CLASS_CURVE?i=n.A.projectPointToCurve(this,e,this.board)[0]:e.type===u.A.OBJECT_TYPE_TURTLE?i=n.A.projectPointToTurtle(this,e,this.board)[0]:e.type===u.A.OBJECT_TYPE_POLYGON&&(i=new l.A(u.A.COORDS_BY_USER,n.A.projectCoordsToPolygon(this.coords.usrCoords,e),this.board)),(s="screen"===o?i.distance(u.A.COORDS_BY_SCREEN,this.coords):i.distance(u.A.COORDS_BY_USER,this.coords))<a){this.type===u.A.OBJECT_TYPE_GLIDER&&(e===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===e)||this.makeGlider(e);break}s>=h&&(e===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===e)&&this.popSlideObject()}return this}},setPositionDirectly:function(t,e){var i,r,n,o,h=this.coords;if(this.relativeCoords)return r=new l.A(t,e,this.board),c.A.evaluate(this.visProp.islabel)?(n=a.A.subtract(r.scrCoords,h.scrCoords),this.relativeCoords.scrCoords[1]+=n[1],this.relativeCoords.scrCoords[2]+=n[2]):(n=a.A.subtract(r.usrCoords,h.usrCoords),this.relativeCoords.usrCoords[1]+=n[1],this.relativeCoords.usrCoords[2]+=n[2]),this;for(this.coords.setCoordinates(t,e),this.handleSnapToGrid(),this.handleSnapToPoints(),this.handleAttractors(),i=this.transformations.length-1;i>=0;i--)t===u.A.COORDS_BY_SCREEN?o=new l.A(t,e,this.board).usrCoords:(2===e.length&&(e=[1].concat(e)),o=e),this.initialCoords.setCoordinates(u.A.COORDS_BY_USER,s.A.matVecMult(s.A.inverse(this.transformations[i].matrix),o));return this.prepareUpdate().update(),this.board.isSuspendedUpdate&&this.type===u.A.OBJECT_TYPE_GLIDER&&this.updateGlider(),this},setPositionByTransform:function(t,e){var i;return e=new l.A(t,e,this.board),i=this.board.create("transform",e.usrCoords.slice(1),{type:"translate"}),this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(i):this.addTransform(this,i),this.prepareUpdate().update(),this},setPosition:function(t,e){return this.setPositionDirectly(t,e)},setGliderPosition:function(t){return this.type===u.A.OBJECT_TYPE_GLIDER&&(this.position=t,this.board.update()),this},makeGlider:function(t){var e,i,s,n=this.board.select(t),o=!1;if(n.type===u.A.OBJECT_TYPE_POLYGON){for(e=Number.MAX_VALUE,i=0;i<n.borders.length;i++)(s=r.A.Math.Geometry.distPointLine(this.coords.usrCoords,n.borders[i].stdform))<e&&(e=s,t=n.borders[i]);n=this.board.select(t),o=!0}if(!c.A.exists(n))throw new Error("JSXGraph: slide object undefined.");if(n.type===u.A.OBJECT_TYPE_TICKS)throw new Error("JSXGraph: gliders on ticks are not possible.");return this.slideObject=this.board.select(t),this.slideObjects.push(this.slideObject),this.addParents(t),this.type=u.A.OBJECT_TYPE_GLIDER,this.elType="glider",this.visProp.snapwidth=-1,this.slideObject.addChild(this),this.isDraggable=!0,this.onPolygon=o,this.generatePolynomial=function(){return this.slideObject.generatePolynomial(this)},this.updateGlider(),this.needsUpdateFromParent=!0,this.updateGliderFromParent(),this},popSlideObject:function(){this.slideObjects.length>0&&(this.slideObjects.pop(),this.slideObject.removeChild(this),0===this.slideObjects.length?(this.type=this._org_type,this.type===u.A.OBJECT_TYPE_POINT?this.elType="point":this.elementClass===u.A.OBJECT_CLASS_TEXT?this.elType="text":this.type===u.A.OBJECT_TYPE_IMAGE?this.elType="image":this.type===u.A.OBJECT_TYPE_FOREIGNOBJECT&&(this.elType="foreignobject"),this.slideObject=null):this.slideObject=this.slideObjects[this.slideObjects.length-1])},free:function(){var t,e;if(this.type!==u.A.OBJECT_TYPE_GLIDER){if(this.transformations.length=0,delete this.updateConstraint,this.isConstrained=!1,this.isDraggable)return;this.isDraggable=!0,this.elementClass===u.A.OBJECT_CLASS_POINT&&(this.type=u.A.OBJECT_TYPE_POINT,this.elType="point"),this.XEval=function(){return this.coords.usrCoords[1]},this.YEval=function(){return this.coords.usrCoords[2]},this.ZEval=function(){return this.coords.usrCoords[0]},this.Xjc=null,this.Yjc=null}for(t in this.board.objects)this.board.objects.hasOwnProperty(t)&&(e=this.board.objects[t]).descendants&&(delete e.descendants[this.id],delete e.childElements[this.id],this.hasLabel&&(delete e.descendants[this.label.id],delete e.childElements[this.label.id]));this.ancestors={},this.parents=[],this.slideObject=null,this.slideObjects=[],this.elementClass===u.A.OBJECT_CLASS_POINT?(this.type=u.A.OBJECT_TYPE_POINT,this.elType="point"):this.elementClass===u.A.OBJECT_CLASS_TEXT?(this.type=this._org_type,this.elType="text"):this.elementClass===u.A.OBJECT_CLASS_OTHER&&(this.type=this._org_type,this.elType="image")},addConstraint:function(t){var e,i,r=[],s=["X","Y"],n=function(t){return function(){return t}},o=function(t){return function(){return t.Value()}};for(this.elementClass===u.A.OBJECT_CLASS_POINT&&(this.type=u.A.OBJECT_TYPE_CAS),this.isDraggable=!1,e=0;e<t.length;e++)i=t[e],c.A.isString(i)?(r[e]=this.board.jc.snippet(i,!0,null,!0),this.addParentsFromJCFunctions([r[e]]),2===t.length&&(this[s[e]+"jc"]=t[e])):c.A.isFunction(i)?r[e]=i:c.A.isNumber(i)?r[e]=n(i):c.A.isObject(i)&&c.A.isFunction(i.Value)&&(r[e]=o(i)),r[e].origin=i;return 1===t.length?this.updateConstraint=function(){var t=r[0]();return c.A.isArray(t)?this.coords.setCoordinates(u.A.COORDS_BY_USER,t):this.coords=t,this}:2===t.length?(this.XEval=r[0],this.YEval=r[1],this.addParents([r[0].origin,r[1].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(u.A.COORDS_BY_USER,[this.XEval(),this.YEval()]),this}):(this.ZEval=r[0],this.XEval=r[1],this.YEval=r[2],this.addParents([r[0].origin,r[1].origin,r[2].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(u.A.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()]),this}),this.isConstrained=!0,this.prepareUpdate().update(),this.board.isSuspendedUpdate||(this.updateVisibility().updateRenderer(),this.hasLabel&&this.label.fullUpdate()),this},addAnchor:function(t,e){this.relativeCoords=e?new l.A(u.A.COORDS_BY_SCREEN,t.slice(0,2),this.board):new l.A(u.A.COORDS_BY_USER,t,this.board),this.element.addChild(this),e&&this.addParents(this.element),this.XEval=function(){var t,e,i;return c.A.evaluate(this.visProp.islabel)?(i=c.A.evaluate(this.visProp.offset),t=parseFloat(i[0]),e=this.element.getLabelAnchor(),new l.A(u.A.COORDS_BY_SCREEN,[t+this.relativeCoords.scrCoords[1]+e.scrCoords[1],0],this.board).usrCoords[1]):(e=this.element.getTextAnchor(),this.relativeCoords.usrCoords[1]+e.usrCoords[1])},this.YEval=function(){var t,e,i;return c.A.evaluate(this.visProp.islabel)?(i=c.A.evaluate(this.visProp.offset),t=-parseFloat(i[1]),e=this.element.getLabelAnchor(),new l.A(u.A.COORDS_BY_SCREEN,[0,t+this.relativeCoords.scrCoords[2]+e.scrCoords[2]],this.board).usrCoords[2]):(e=this.element.getTextAnchor(),this.relativeCoords.usrCoords[2]+e.usrCoords[2])},this.ZEval=c.A.createFunction(1,this.board,""),this.updateConstraint=function(){this.coords.setCoordinates(u.A.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()])},this.isConstrained=!0,this.updateConstraint()},updateTransform:function(t){var e;if(0===this.transformations.length)return this;for(e=0;e<this.transformations.length;e++)this.transformations[e].update();return this},addTransform:function(t,e){var i,r=c.A.isArray(e)?e:[e],s=r.length;for(0===this.transformations.length&&(this.baseElement=t),i=0;i<s;i++)this.transformations.push(r[i]);return this},startAnimation:function(t,e,i){var r=c.A.evaluate(t),s=c.A.evaluate(e),n=this;return i=c.A.evaluate(i)||250,this.type!==u.A.OBJECT_TYPE_GLIDER||c.A.exists(this.intervalCode)||(this.intervalCode=window.setInterval((function(){n._anim(r,s)}),i),c.A.exists(this.intervalCount)||(this.intervalCount=0)),this},stopAnimation:function(){return c.A.exists(this.intervalCode)&&(window.clearInterval(this.intervalCode),delete this.intervalCode),this},moveAlong:function(t,e,i){i=i||{};var r,s,n,a,l,h=[],d=[],p=e/this.board.attr.animationdelay,f=function(e,i){return function(){return t[e][i]}};if(c.A.isArray(t)){for(n=t.length,r=0;r<n;r++)c.A.isPoint(t[r])?d[r]=t[r]:d[r]={elementClass:u.A.OBJECT_CLASS_POINT,X:f(r,0),Y:f(r,1)};if(0===(e=e||0))return this.setPosition(u.A.COORDS_BY_USER,[d[d.length-1].X(),d[d.length-1].Y()]),this.board.update(this);if(!c.A.exists(i.interpolate)||i.interpolate)for(s=o.A.Neville(d),r=0;r<p;r++)h[r]=[],h[r][0]=s[0]((p-r)/p*s[3]()),h[r][1]=s[1]((p-r)/p*s[3]());else{for(n=t.length-1,r=0;r<p;++r)l=r/p*n-(a=Math.floor(r/p*n)),h[r]=[],h[r][0]=(1-l)*d[a].X()+l*d[a+1].X(),h[r][1]=(1-l)*d[a].Y()+l*d[a+1].Y();h.push([d[n].X(),d[n].Y()]),h.reverse()}this.animationPath=h}else c.A.isFunction(t)&&(this.animationPath=t,this.animationStart=(new Date).getTime());return this.animationCallback=i.callback,this.board.addAnimation(this),this},moveTo:function(t,e,i){i=i||{},t=new l.A(u.A.COORDS_BY_USER,t,this.board);var r,n=this.board.attr.animationdelay,o=Math.ceil(e/n),a=[],h=this.coords.usrCoords[1],d=this.coords.usrCoords[2],p=t.usrCoords[1]-h,f=t.usrCoords[2]-d,_=function(t){return i.effect&&"<>"===i.effect?Math.pow(Math.sin(t/o*Math.PI/2),2):t/o};if(!c.A.exists(e)||0===e||Math.abs(t.usrCoords[0]-this.coords.usrCoords[0])>s.A.eps)return this.setPosition(u.A.COORDS_BY_USER,t.usrCoords),this.board.update(this);if(!c.A.exists(i.callback)&&Math.abs(p)<s.A.eps&&Math.abs(f)<s.A.eps)return this;for(r=o;r>=0;r--)a[o-r]=[t.usrCoords[0],h+p*_(r),d+f*_(r)];return this.animationPath=a,this.animationCallback=i.callback,this.board.addAnimation(this),this},visit:function(t,e,i){t=new l.A(u.A.COORDS_BY_USER,t,this.board);var r,s,n,o=this.board.attr.animationdelay,a=[],h=this.coords.usrCoords[1],d=this.coords.usrCoords[2],p=t.usrCoords[1]-h,f=t.usrCoords[2]-d,_=function(t){var e=t<n/2?2*t/n:2*(n-t)/n;return i.effect&&"<>"===i.effect?Math.pow(Math.sin(e*Math.PI/2),2):e};for(c.A.isNumber(i)?i={repeat:i}:(i=i||{},c.A.exists(i.repeat)||(i.repeat=1)),n=Math.ceil(e/(o*i.repeat)),s=0;s<i.repeat;s++)for(r=n;r>=0;r--)a[s*(n+1)+n-r]=[t.usrCoords[0],h+p*_(r),d+f*_(r)];return this.animationPath=a,this.animationCallback=i.callback,this.board.addAnimation(this),this},_anim:function(t,e){var i,r,s,o,a,l,c,h,d;return this.intervalCount+=1,this.intervalCount>e&&(this.intervalCount=0),this.slideObject.elementClass===u.A.OBJECT_CLASS_LINE?(c=this.slideObject.point1.coords.scrCoords,h=this.slideObject.point2.coords.scrCoords,i=Math.round((h[1]-c[1])*this.intervalCount/e),r=Math.round((h[2]-c[2])*this.intervalCount/e),t>0?o=this.slideObject.point1:(o=this.slideObject.point2,i*=-1,r*=-1),this.coords.setCoordinates(u.A.COORDS_BY_SCREEN,[o.coords.scrCoords[1]+i,o.coords.scrCoords[2]+r])):this.slideObject.elementClass===u.A.OBJECT_CLASS_CURVE?(a=t>0?Math.round(this.intervalCount/e*this.board.canvasWidth):Math.round((e-this.intervalCount)/e*this.board.canvasWidth),this.coords.setCoordinates(u.A.COORDS_BY_SCREEN,[a,0]),d=n.A.projectPointToCurve(this,this.slideObject,this.board),this.coords=d[0],this.position=d[1]):this.slideObject.elementClass===u.A.OBJECT_CLASS_CIRCLE&&(s=2*Math.PI,s*=t<0?this.intervalCount/e:(e-this.intervalCount)/e,l=this.slideObject.Radius(),this.coords.setCoordinates(u.A.COORDS_BY_USER,[this.slideObject.center.coords.usrCoords[1]+l*Math.cos(s),this.slideObject.center.coords.usrCoords[2]+l*Math.sin(s)])),this.board.update(this),this},getTextAnchor:function(){return this.coords},getLabelAnchor:function(){return this.coords},getParents:function(){var t=[this.Z(),this.X(),this.Y()];return 0!==this.parents.length&&(t=this.parents),this.type===u.A.OBJECT_TYPE_GLIDER&&(t=[this.X(),this.Y(),this.slideObject.id]),t}}),r.A.CoordsElement.create=function(t,e,i,r,s,n){var o,a,l=!1;for(a=0;a<i.length;a++)(c.A.isFunction(i[a])||c.A.isString(i[a]))&&(l=!0);if(l)(o=new t(e,[0,0],r,s,n)).addConstraint(i);else if(c.A.isNumber(i[0])&&c.A.isNumber(i[1]))o=new t(e,i,r,s,n),c.A.exists(r.slideobject)?o.makeGlider(r.slideobject):o.baseElement=o,o.isDraggable=!0;else{if(!c.A.isObject(i[0])||!c.A.isTransformationOrArray(i[1]))return!1;(o=new t(e,[0,0],r,s,n)).addTransform(i[0],i[1]),o.isDraggable=!1}return o.handleSnapToGrid(),o.handleSnapToPoints(),o.handleAttractors(),o.addParents(i),o};const h=r.A.CoordsElement},774:(t,e,i)=>{i.d(e,{A:()=>d});var r=i(533),s=i(667),n=i(42),o=i(259),a=i(362),l=i(412),u=i(512),c=i(339),h=i(514);r.A.GeometryElement=function(t,e,i,r){var n,o,a;if(this.needsUpdate=!0,this.isDraggable=!1,this.isReal=!0,this.childElements={},this.hasLabel=!1,this.highlighted=!1,this.notExistingParents={},this.traces={},this.numTraces=0,this.transformations=[],this.baseElement=null,this.descendants={},this.ancestors={},this.parents=[],this.symbolic={},this.rendNode=null,this.elType="",this.dump=!0,this.subs={},this.inherits=[],this._pos=-1,this.stdform=[1,0,0,0,1,1,0,0],this.methodMap={setLabel:"setLabel",label:"label",setName:"setName",getName:"getName",Name:"getName",addTransform:"addTransform",setProperty:"setAttribute",setAttribute:"setAttribute",addChild:"addChild",animate:"animate",on:"on",off:"off",trigger:"trigger",addTicks:"addTicks",removeTicks:"removeTicks",removeAllTicks:"removeAllTicks",Bounds:"bounds"},this.quadraticform=[[1,0,0],[0,1,0],[0,0,1]],this.visProp={},this.visPropCalc={visible:!1},u.A.eventify(this),this.mouseover=!1,this.lastDragTime=new Date,arguments.length>0){for(o in this.board=t,this.type=i,this._org_type=i,this.elementClass=r||s.A.OBJECT_CLASS_OTHER,this.id=e.id,n=e.name,h.A.exists(n)||(n=this.board.generateName(this)),""!==n&&(this.board.elementsByName[n]=this),this.name=n,this.needsRegularUpdate=e.needsregularupdate,h.A.clearVisPropOld(this),a=this.resolveShortcuts(e))a.hasOwnProperty(o)&&this._set(o,a[o]);this.visProp.draft=a.draft&&a.draft.draft}},r.A.extend(r.A.GeometryElement.prototype,{addChild:function(t){var e,i;for(e in this.childElements[t.id]=t,this.addDescendants(t),t.ancestors[this.id]=this,this.descendants)if(this.descendants.hasOwnProperty(e))for(i in this.descendants[e].ancestors[this.id]=this,this.ancestors)this.ancestors.hasOwnProperty(i)&&(this.descendants[e].ancestors[this.ancestors[i].id]=this.ancestors[i]);for(e in this.ancestors)if(this.ancestors.hasOwnProperty(e))for(i in this.descendants)this.descendants.hasOwnProperty(i)&&(this.ancestors[e].descendants[this.descendants[i].id]=this.descendants[i]);return this},addDescendants:function(t){var e;for(e in this.descendants[t.id]=t,t.childElements)t.childElements.hasOwnProperty(e)&&this.addDescendants(t.childElements[e]);return this},addParents:function(t){var e,i,r;for(i=(r=h.A.isArray(t)?t:arguments).length,e=0;e<i;++e)h.A.exists(r[e])&&(h.A.isId(this.board,r[e])?this.parents.push(r[e]):h.A.exists(r[e].id)&&this.parents.push(r[e].id));this.parents=h.A.uniqueArray(this.parents)},setParents:function(t){this.parents=[],this.addParents(t)},addParentsFromJCFunctions:function(t){var e,i,r;for(e=0;e<t.length;e++)for(i in t[e].deps)r=t[e].deps[i],this.addParents(r),r.addChild(this);return this},removeChild:function(t){return delete this.childElements[t.id],this.removeDescendants(t),delete t.ancestors[this.id],this},removeDescendants:function(t){var e;for(e in delete this.descendants[t.id],t.childElements)t.childElements.hasOwnProperty(e)&&this.removeDescendants(t.childElements[e]);return this},countChildren:function(){var t,e,i=0;for(t in e=this.childElements)e.hasOwnProperty(t)&&t.indexOf("Label")<0&&i++;return i},getName:function(){return this.name},addTransform:function(t){return this},draggable:function(){return this.isDraggable&&!h.A.evaluate(this.visProp.fixed)&&this.type!==s.A.OBJECT_TYPE_GLIDER},setPosition:function(t,e){var i,r,n,o,a=[];if(!h.A.exists(this.parents))return this;for(n=this.parents.length,r=0;r<n;++r)if(i=this.board.select(this.parents[r]),h.A.isPoint(i)){if(!i.draggable())return this;a.push(i)}for(3===e.length&&(e=e.slice(1)),o=this.board.create("transform",e,{type:"translate"}),(n=a.length)>0?o.applyOnce(a):this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(o):this.addTransform(o),r=0;r<n;++r)a[r].type===s.A.OBJECT_TYPE_GLIDER&&a[r].updateGlider();return this},setPositionDirectly:function(t,e,i){var r=new n.A(t,e,this.board,!1),o=new n.A(t,i,this.board,!1),l=a.A.subtract(r.usrCoords,o.usrCoords);return this.setPosition(s.A.COORDS_BY_USER,l),this},generatePolynomial:function(){return[]},animate:function(t,e,i){i=i||{};var r,s,n,o=this.board.attr.animationdelay,a=Math.ceil(e/o),l=this,u=function(t,e,i){var r,s,o,u,h;for(r=c.A.rgb2hsv(t),o=((s=c.A.rgb2hsv(e))[0]-r[0])/a,u=(s[1]-r[1])/a,h=(s[2]-r[2])/a,l.animationData[i]=[],n=0;n<a;n++)l.animationData[i][a-n-1]=c.A.hsv2rgb(r[0]+(n+1)*o,r[1]+(n+1)*u,r[2]+(n+1)*h)},d=function(t,e,i,r){var s,o;if(t=parseFloat(t),e=parseFloat(e),!isNaN(t)&&!isNaN(e))for(o=(e-t)/a,l.animationData[i]=[],n=0;n<a;n++)s=t+(n+1)*o,l.animationData[i][a-n-1]=r?Math.floor(s):s};for(r in this.animationData={},t)if(t.hasOwnProperty(r))switch(s=r.toLowerCase()){case"strokecolor":case"fillcolor":u(this.visProp[s],t[r],s);break;case"size":if(!h.A.isPoint(this))break;d(this.visProp[s],t[r],s,!0);break;case"strokeopacity":case"strokewidth":case"fillopacity":d(this.visProp[s],t[r],s,!1)}return this.animationCallback=i.callback,this.board.addAnimation(this),this},update:function(){return h.A.evaluate(this.visProp.trace)&&this.cloneToBackground(),this},updateRenderer:function(){return this},fullUpdate:function(t){return this.prepareUpdate().update().updateVisibility(t).updateRenderer()},setDisplayRendNode:function(t){var e,i,r,s,n;if(void 0===t&&(t=this.visPropCalc.visible),t===this.visPropOld.visible)return this;for(this.board.renderer.display(this,t),i=this.inherits.length,r=0;r<i;r++)if(n=this.inherits[r],h.A.isArray(n))for(s=n.length,e=0;e<s;e++)h.A.exists(n[e])&&h.A.exists(n[e].rendNode)&&"inherit"===h.A.evaluate(n[e].visProp.visible)&&n[e].setDisplayRendNode(t);else h.A.exists(n)&&h.A.exists(n.rendNode)&&"inherit"===h.A.evaluate(n.visProp.visible)&&n.setDisplayRendNode(t);return this.hasLabel&&h.A.exists(this.label)&&h.A.exists(this.label.rendNode)&&"inherit"===h.A.evaluate(this.label.visProp.visible)&&this.label.setDisplayRendNode(t),this},hide:function(){return this.setAttribute({visible:!1}),this},hideElement:function(){return this.hide(),this},show:function(){return this.setAttribute({visible:!0}),this},showElement:function(){return this.show(),this},updateVisibility:function(t){var e,i,r,s,n,o;if(this.needsUpdate){for(void 0!==t?this.visPropCalc.visible=t:(o=h.A.evaluate(this.visProp.visible),h.A.exists(this.hiddenByParent)&&this.hiddenByParent&&(o=!1),"inherit"!==o&&(this.visPropCalc.visible=o)),i=this.inherits.length,r=0;r<i;r++)if(n=this.inherits[r],h.A.isArray(n))for(s=n.length,e=0;e<s;e++)h.A.exists(n[e])&&"inherit"===h.A.evaluate(n[e].visProp.visible)&&n[e].prepareUpdate().updateVisibility(this.visPropCalc.visible);else h.A.exists(n)&&"inherit"===h.A.evaluate(n.visProp.visible)&&n.prepareUpdate().updateVisibility(this.visPropCalc.visible);h.A.exists(this.label)&&h.A.exists(this.label.visProp)&&h.A.evaluate(this.label.visProp.visible)&&this.label.prepareUpdate().updateVisibility(this.visPropCalc.visible)}return this},_set:function(t,e){var i;if(t=t.toLocaleLowerCase(),this.visProp.hasOwnProperty(t)&&t.indexOf("color")>=0&&h.A.isString(e)&&9===e.length&&"#"===e.charAt(0))e=c.A.rgba2rgbo(e),this.visProp[t]=e[0],this.visProp[t.replace("color","opacity")]=e[1];else if(null===e||!h.A.isObject(e)||h.A.exists(e.id)||h.A.exists(e.name))this.visProp[t]=e;else for(i in this.visProp[t]={},e)e.hasOwnProperty(i)&&(this.visProp[t][i.toLocaleLowerCase()]=e[i])},resolveShortcuts:function(t){var e,i,r,s=["traceattributes","traceAttributes"];for(e in l.A.shortcuts)if(l.A.shortcuts.hasOwnProperty(e)){if(h.A.exists(t[e]))for(i=0;i<l.A.shortcuts[e].length;i++)h.A.exists(t[l.A.shortcuts[e][i]])||(t[l.A.shortcuts[e][i]]=t[e]);for(r=0;r<s.length;r++)h.A.isObject(t[s[r]])&&(t[s[r]]=this.resolveShortcuts(t[s[r]]))}return t},setLabel:function(t){this.hasLabel||this.setAttribute({withlabel:!0}),this.setLabelText(t)},setLabelText:function(t){return h.A.exists(this.label)&&(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.label.setText(t)),this},setName:function(t){t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),"slider"!==this.elType&&this.setLabelText(t),this.setAttribute({name:t})},setProperty:function(){r.A.deprecated("setProperty()","setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(t){var e,i,n,o,a,l,u,d,p,f={};for(e=0;e<arguments.length;e++)l=arguments[e],h.A.isString(l)?(d=l.split(":"),f[h.A.trim(d[0])]=h.A.trim(d[1])):h.A.isArray(l)?f[l[0]]=l[1]:r.A.extend(f,l);for(e in f=this.resolveShortcuts(f))if(f.hasOwnProperty(e)){if(o=e.replace(/\s+/g,"").toLowerCase(),a=f[e],h.A.isObject(a)&&h.A.exists(this.visProp[o])){if(this.visProp[o]=h.A.merge(this.visProp[o],a),this.type===s.A.OBJECT_TYPE_TICKS&&h.A.exists(this.labels))for(n=this.labels.length,i=0;i<n;i++)this.labels[i].setAttribute(a);else if(h.A.exists(this[o]))if(h.A.isArray(this[o]))for(i=0;i<this[o].length;i++)this[o][i].setAttribute(a);else this[o].setAttribute(a);continue}switch(p=this.visProp[o],o){case"checked":h.A.exists(this.rendNodeTag)&&(this.rendNodeCheckbox.checked=!!a);break;case"disabled":h.A.exists(this.rendNodeTag)&&(this.rendNodeTag.disabled=!!a);break;case"face":h.A.isPoint(this)&&(this.visProp.face=a,this.board.renderer.changePointStyle(this));break;case"generatelabelvalue":this.type===s.A.OBJECT_TYPE_TICKS&&h.A.isFunction(a)&&(this.generateLabelValue=a);break;case"gradient":this.visProp.gradient=a,this.board.renderer.setGradient(this);break;case"gradientsecondcolor":a=c.A.rgba2rgbo(a),this.visProp.gradientsecondcolor=a[0],this.visProp.gradientsecondopacity=a[1],this.board.renderer.updateGradient(this);break;case"gradientsecondopacity":this.visProp.gradientsecondopacity=a,this.board.renderer.updateGradient(this);break;case"infoboxtext":h.A.isString(a)?this.infoboxText=a:this.infoboxText=!1;break;case"labelcolor":u=(a=c.A.rgba2rgbo(a))[1],a=a[0],0===u&&h.A.exists(this.label)&&this.hasLabel&&this.label.hideElement(),h.A.exists(this.label)&&this.hasLabel&&(this.label.visProp.strokecolor=a,this.board.renderer.setObjectStrokeColor(this.label,a,u)),this.elementClass===s.A.OBJECT_CLASS_TEXT&&(this.visProp.strokecolor=a,this.visProp.strokeopacity=u,this.board.renderer.setObjectStrokeColor(this,a,u));break;case"layer":this.board.renderer.setLayer(this,h.A.evaluate(a)),this._set(o,a);break;case"maxlength":h.A.exists(this.rendNodeTag)&&(this.rendNodeTag.maxlength=!!a);break;case"name":p=this.name,delete this.board.elementsByName[this.name],this.name=a,this.board.elementsByName[this.name]=this;break;case"needsregularupdate":this.needsRegularUpdate=!("false"===a||!1===a),this.board.renderer.setBuffering(this,this.needsRegularUpdate?"auto":"static");break;case"onpolygon":this.type===s.A.OBJECT_TYPE_GLIDER&&(this.onPolygon=!!a);break;case"radius":this.type!==s.A.OBJECT_TYPE_ANGLE&&this.type!==s.A.OBJECT_TYPE_SECTOR||this.setRadius(a);break;case"rotate":(this.elementClass===s.A.OBJECT_CLASS_TEXT&&"internal"===h.A.evaluate(this.visProp.display)||this.type===s.A.OBJECT_TYPE_IMAGE)&&this.addRotation(a);break;case"tabindex":h.A.exists(this.rendNode)&&(this.rendNode.setAttribute("tabindex",a),this._set(o,a));break;case"trace":"false"===a||!1===a?(this.clearTrace(),this.visProp.trace=!1):this.visProp.trace="pause"!==a;break;case"visible":this.visProp.visible="false"!==a&&("true"===a||a),this.setDisplayRendNode(h.A.evaluate(this.visProp.visible)),h.A.evaluate(this.visProp.visible)&&h.A.exists(this.updateSize)&&this.updateSize();break;case"withlabel":this.visProp.withlabel=a,h.A.evaluate(a)?(this.label||this.createLabel(),this.label.setAttribute({visible:"inherit"})):this.label&&this.hasLabel&&this.label.setAttribute({visible:!1}),this.hasLabel=a;break;case"straightfirst":case"straightlast":for(i in this._set(o,a),this.childElements)this.childElements.hasOwnProperty(i)&&"glider"===this.childElements[i].elType&&this.childElements[i].fullUpdate();break;default:h.A.exists(this.visProp[o])&&(!r.A.Validator[o]||r.A.Validator[o]&&r.A.Validator[o](a)||r.A.Validator[o]&&h.A.isFunction(a)&&r.A.Validator[o](a()))&&(a=(!a.toLowerCase||"false"!==a.toLowerCase())&&a,this._set(o,a))}this.triggerEventHandlers(["attribute:"+o],[p,a,this])}return this.triggerEventHandlers(["attribute"],[f,this]),h.A.evaluate(this.visProp.needsregularupdate)?this.board.update(this):this.board.fullUpdate(),this.elementClass===s.A.OBJECT_CLASS_TEXT&&this.updateSize(),this},getProperty:function(){r.A.deprecated("getProperty()","getAttribute()"),this.getProperty.apply(this,arguments)},getAttribute:function(t){var e;switch(t=t.toLowerCase()){case"needsregularupdate":e=this.needsRegularUpdate;break;case"labelcolor":e=this.label.visProp.strokecolor;break;case"infoboxtext":e=this.infoboxText;break;case"withlabel":e=this.hasLabel;break;default:e=this.visProp[t]}return e},setDash:function(t){return this.setAttribute({dash:t}),this},prepareUpdate:function(){return this.needsUpdate=!0,this},remove:function(){return this.board.renderer.remove(this.rendNode),this.hasLabel&&this.board.renderer.remove(this.board.renderer.getElementById(this.label.id)),this},getTextAnchor:function(){return new n.A(s.A.COORDS_BY_USER,[0,0],this.board)},getLabelAnchor:function(){return new n.A(s.A.COORDS_BY_USER,[0,0],this.board)},setArrow:function(t,e){return this.visProp.firstarrow=t,this.visProp.lastarrow=e,e&&(this.type=s.A.OBJECT_TYPE_VECTOR,this.elType="arrow"),this.prepareUpdate().update().updateVisibility().updateRenderer(),this},createGradient:function(){var t=h.A.evaluate(this.visProp.gradient);"linear"!==t&&"radial"!==t||this.board.renderer.setGradient(this)},createLabel:function(){var t,e=this;return r.A.elements.text?((t=h.A.deepCopy(this.visProp.label,null)).id=this.id+"Label",t.isLabel=!0,t.anchor=this,t.priv=this.visProp.priv,this.visProp.withlabel&&(this.label=r.A.elements.text(this.board,[0,0,function(){return h.A.isFunction(e.name)?e.name():e.name}],t),this.label.needsUpdate=!0,this.label.dump=!1,this.label.fullUpdate(),this.hasLabel=!0)):r.A.debug("JSXGraph: Can't create label: text element is not available. Make sure you include base/text"),this},highlight:function(t){return t=h.A.def(t,!1),!h.A.evaluate(this.visProp.highlight)||this.highlighted&&!t||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this)),this},noHighlight:function(){return this.highlighted&&(this.highlighted=!1,delete this.board.highlightedObjects[this.id],this.board.renderer.noHighlight(this)),this},clearTrace:function(){var t;for(t in this.traces)this.traces.hasOwnProperty(t)&&this.board.renderer.remove(this.traces[t]);return this.numTraces=0,this},cloneToBackground:function(){return this},bounds:function(){return[0,0,0,0]},normalize:function(){return this.stdform=o.A.normalize(this.stdform),this},toJSON:function(){var t,e,i=['{"name":',this.name];for(e in i.push(', "id":'+this.id),t=[],this.visProp)this.visProp.hasOwnProperty(e)&&h.A.exists(this.visProp[e])&&t.push('"'+e+'":'+this.visProp[e]);return i.push(', "visProp":{'+t.toString()+"}"),i.push("}"),i.join("")},addRotation:function(t){var e,i,r,n,o,a=this;return this.elementClass!==s.A.OBJECT_CLASS_TEXT&&this.type!==s.A.OBJECT_TYPE_IMAGE||0===t||(e=this.board.create("transform",[function(){return-a.X()},function(){return-a.Y()}],{type:"translate"}),i=this.board.create("transform",[function(){return a.X()},function(){return a.Y()}],{type:"translate"}),r=this.board.create("transform",[function(){return a.board.unitX/a.board.unitY},function(){return 1}],{type:"scale"}),n=this.board.create("transform",[function(){return a.board.unitY/a.board.unitX},function(){return 1}],{type:"scale"}),o=this.board.create("transform",[function(){return h.A.evaluate(t)*Math.PI/180}],{type:"rotate"}),e.bindTo(this),r.bindTo(this),o.bindTo(this),n.bindTo(this),i.bindTo(this)),this},highlightStrokeColor:function(t){return r.A.deprecated("highlightStrokeColor()","setAttribute()"),this.setAttribute({highlightStrokeColor:t}),this},strokeColor:function(t){return r.A.deprecated("strokeColor()","setAttribute()"),this.setAttribute({strokeColor:t}),this},strokeWidth:function(t){return r.A.deprecated("strokeWidth()","setAttribute()"),this.setAttribute({strokeWidth:t}),this},fillColor:function(t){return r.A.deprecated("fillColor()","setAttribute()"),this.setAttribute({fillColor:t}),this},highlightFillColor:function(t){return r.A.deprecated("highlightFillColor()","setAttribute()"),this.setAttribute({highlightFillColor:t}),this},labelColor:function(t){return r.A.deprecated("labelColor()","setAttribute()"),this.setAttribute({labelColor:t}),this},dash:function(t){return r.A.deprecated("dash()","setAttribute()"),this.setAttribute({dash:t}),this},visible:function(t){return r.A.deprecated("visible()","setAttribute()"),this.setAttribute({visible:t}),this},shadow:function(t){return r.A.deprecated("shadow()","setAttribute()"),this.setAttribute({shadow:t}),this},getType:function(){return this.elType},getParents:function(){return h.A.isArray(this.parents)?this.parents:[]},snapToGrid:function(){return this},snapToPoints:function(){return this},getAttributes:function(){var t,e=h.A.deepCopy(this.visProp),i=[],r=i.length;for(e.id=this.id,e.name=this.name,t=0;t<r;t++)delete e[i[t]];return e},hasPoint:function(t,e){return!1},addTicks:function(t){return""!==t.id&&h.A.exists(t.id)||(t.id=this.id+"_ticks_"+(this.ticks.length+1)),this.board.renderer.drawTicks(t),this.ticks.push(t),t.id},removeAllTicks:function(){var t;if(h.A.exists(this.ticks)){for(t=this.ticks.length-1;t>=0;t--)this.removeTicks(this.ticks[t]);this.ticks=[],this.board.update()}},removeTicks:function(t){var e,i;if(h.A.exists(this.defaultTicks)&&this.defaultTicks===t&&(this.defaultTicks=null),h.A.exists(this.ticks))for(e=this.ticks.length-1;e>=0;e--)if(this.ticks[e]===t){if(this.board.removeObject(this.ticks[e]),this.ticks[e].ticks)for(i=0;i<this.ticks[e].ticks.length;i++)h.A.exists(this.ticks[e].labels[i])&&this.board.removeObject(this.ticks[e].labels[i]);delete this.ticks[e];break}},getSnapSizes:function(){var t,e,i;return t=h.A.evaluate(this.visProp.snapsizex),e=h.A.evaluate(this.visProp.snapsizey),t<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(t=(i=this.board.defaultAxes.x.defaultTicks).ticksDelta*(h.A.evaluate(i.visProp.minorticks)+1)),e<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(e=(i=this.board.defaultAxes.y.defaultTicks).ticksDelta*(h.A.evaluate(i.visProp.minorticks)+1)),[t,e]},handleSnapToGrid:function(t,e){var i,n,o,a,l,u,c,d,p,f,_,m=h.A.evaluate(this.visProp.attracttogrid),g=h.A.evaluate(this.visProp.attractorunit),y=h.A.evaluate(this.visProp.attractordistance);return!h.A.exists(this.coords)||h.A.evaluate(this.visProp.fixed)||(h.A.evaluate(this.visProp.snaptogrid)||m||!0===t)&&(i=this.coords.usrCoords[1],n=this.coords.usrCoords[2],f=(p=this.getSnapSizes())[0],_=p[1],f>0&&_>0&&(d=this.board.getBoundingBox(),o=Math.round(i/f)*f,a=Math.round(n/_)*_,l=new r.A.Coords(s.A.COORDS_BY_USER,[o,a],this.board),(!m||l.distance("screen"===g?s.A.COORDS_BY_SCREEN:s.A.COORDS_BY_USER,this.coords)<y)&&(i=o,n=a,e||(u=Math.min(d[0],d[2]),c=Math.max(d[0],d[2]),i<u&&i>u-f?i+=f:i>c&&i<c+f&&(i-=f),u=Math.min(d[1],d[3]),c=Math.max(d[1],d[3]),n<u&&n>u-_?n+=_:n>c&&n<c+_&&(n-=_)),this.coords.setCoordinates(s.A.COORDS_BY_USER,[i,n])))),this},getBoundingBox:function(){var t,e,i,r,n,o=[1/0,1/0,-1/0,-1/0];if(this.type===s.A.OBJECT_TYPE_POLYGON){if((e=this.vertices.length-1)<=0)return o;for(t=0;t<e;t++)i=this.vertices[t].X(),o[0]=i<o[0]?i:o[0],o[2]=i>o[2]?i:o[2],i=this.vertices[t].Y(),o[1]=i<o[1]?i:o[1],o[3]=i>o[3]?i:o[3]}else if(this.elementClass===s.A.OBJECT_CLASS_CIRCLE)r=this.center.X(),n=this.center.Y(),o=[r-this.radius,n+this.radius,r+this.radius,n-this.radius];else if(this.elementClass===s.A.OBJECT_CLASS_CURVE){if(0===(e=this.vertices.length))return o;for(t=0;t<e;t++)i=this.points[t].coords.usrCoords[1],o[0]=i<o[0]?i:o[0],o[2]=i>o[2]?i:o[2],i=this.points[t].coords.usrCoords[1],o[1]=i<o[1]?i:o[1],o[3]=i>o[3]?i:o[3]}return o},addEvent:r.A.shortcut(r.A.GeometryElement.prototype,"on"),removeEvent:r.A.shortcut(r.A.GeometryElement.prototype,"off"),formatNumberLocale:function(t,e){var i,r,s,n={},o={maximumfractiondigits:"maximumFractionDigits",minimumfractiondigits:"minimumFractionDigits",compactdisplay:"compactDisplay",currencydisplay:"currencyDisplay",currencysign:"currencySign",localematcher:"localeMatcher",numberingsystem:"numberingSystem",signdisplay:"signDisplay",unitdisplay:"unitDisplay",usegrouping:"useGrouping",roundingmode:"roundingMode",roundingpriority:"roundingPriority",roundingincrement:"roundingIncrement",trailingzerodisplay:"trailingZeroDisplay",minimumintegerdigits:"minimumIntegerDigits",minimumsignificantdigits:"minimumSignificantDigits",maximumsignificantdigits:"maximumSignificantDigits"};if(h.A.exists(Intl)&&this.useLocale()){for(s in i=h.A.evaluate(this.visProp.intl.locale)||h.A.evaluate(this.board.attr.intl.locale),r=h.A.evaluate(this.visProp.intl.options)||{})r.hasOwnProperty(s)&&(o.hasOwnProperty(s)?n[o[s]]=h.A.evaluate(r[s]):n[s]=h.A.evaluate(r[s]));return s="maximumfractiondigits",h.A.exists(r[s])||(n[o[s]]=e),Intl.NumberFormat(i,n).format(t)}return t},useLocale:function(){var t;return!(!h.A.exists(this.visProp.intl)||!h.A.exists(this.visProp.intl.enabled))&&(!0===(t=h.A.evaluate(this.visProp.intl.enabled))||"inherit"===t&&!0===h.A.evaluate(this.board.attr.intl.enabled))},__evt__over:function(t){},__evt__mouseover:function(t){},__evt__out:function(t){},__evt__mouseout:function(t){},__evt__move:function(t){},__evt__mousemove:function(t){},__evt__drag:function(t){},__evt__mousedrag:function(t){},__evt__pendrag:function(t){},__evt__touchdrag:function(t){},__evt__keydrag:function(t){},__evt__down:function(t){},__evt__mousedown:function(t){},__evt__pendown:function(t){},__evt__touchdown:function(t){},__evt__click:function(t){},__evt__dblclick:function(t){},__evt__mouseclick:function(t){},__evt__mousedblclick:function(t){},__evt__pointerclick:function(t){},__evt__pointerdblclick:function(t){},__evt__up:function(t){},__evt__mouseup:function(t){},__evt__penup:function(t){},__evt__touchup:function(t){},__evt__attribute:function(t,e){},__evt__attribute_:function(t,e,i){},__evt:function(){}});const d=r.A.GeometryElement},995:(t,e,i)=>{i.d(e,{A:()=>d});var r=i(533),s=i(667),n=i(774),o=i(72),a=i(415),l=i(514),u=i(259),c=i(744),h=function(){this._val=parseFloat(this.rendNodeRange.value),this.rendNodeOut.value=this.rendNodeRange.value,this.board.update()};r.A.Text=function(t,e,i,r){var n;this.constructor(t,i,s.A.OBJECT_TYPE_TEXT,s.A.OBJECT_CLASS_TEXT),this.element=this.board.select(i.anchor),this.coordsConstructor(e,l.A.evaluate(this.visProp.islabel)),this.content="",this.plaintext="",this.plaintextOld=null,this.orgText="",this.needsSizeUpdate=!1,this.hiddenByParent=!1,this.size=[1,1],this.id=this.board.setId(this,"T"),this.board.renderer.drawText(this),this.board.finalizeAdding(this),n=this.visProp.visible,this.visProp.visible=!0,this.setText(r),this.visProp.visible=n,l.A.isString(this.content)&&this.notifyParents(this.content),this.elType="text",this.methodMap=l.A.deepCopy(this.methodMap,{setText:"setTextJessieCode",move:"setCoords",Size:"getSize",setAutoPosition:"setAutoPosition"})},r.A.Text.prototype=new n.A,l.A.copyPrototypeMethods(r.A.Text,c.A,"coordsConstructor"),r.A.extend(r.A.Text.prototype,{hasPoint:function(t,e){var i,r,s,n,o,a,c,h;return l.A.isObject(l.A.evaluate(this.visProp.precision))?(c=this.board._inputDevice,h=l.A.evaluate(this.visProp.precision[c])):h=this.board.options.precision.hasPoint,this.transformations.length>0&&(t=(i=u.A.matVecMult(u.A.inverse(this.board.renderer.joinTransforms(this,this.transformations)),[1,t,e]))[1],e=i[2]),r=(i="right"===(o=this.getAnchorX())?this.coords.scrCoords[1]-this.size[0]:"middle"===o?this.coords.scrCoords[1]-.5*this.size[0]:this.coords.scrCoords[1])+this.size[0],s=(n="top"===(a=this.getAnchorY())?this.coords.scrCoords[2]+this.size[1]:"middle"===a?this.coords.scrCoords[2]+.5*this.size[1]:this.coords.scrCoords[2])-this.size[1],"all"===l.A.evaluate(this.visProp.dragarea)?t>=i-h&&t<r+h&&e>=s-h&&e<=n+h:e>=s-h&&e<=n+h&&(t>=i-h&&t<=i+2*h||t>=r-2*h&&t<=r+h)},_createFctUpdateText:function(t){var e,i,r,s,n,o,a=l.A.evaluate(this.visProp.parse),u=l.A.evaluate(this.visProp.usemathjax),c=l.A.evaluate(this.visProp.usekatex),h=!1;if(this.orgText=t,l.A.isFunction(t))this.updateText=function(){s=t().toString(),this.plaintext=!a||u||c?s:this.replaceSub(this.replaceSup(this.convertGeonextAndSketchometry2CSS(s,!1)))};else if(l.A.isNumber(t)&&l.A.evaluate(this.visProp.formatnumber)?l.A.evaluate(this.visProp.tofraction)?this.content=u?"\\("+l.A.toFraction(t,!0)+"\\)":l.A.toFraction(t,c):(r=l.A.evaluate(this.visProp.digits),this.useLocale()?this.content=this.formatNumberLocale(t,r):this.content=l.A.toFixed(t,r)):l.A.isString(t)&&a?(l.A.evaluate(this.visProp.useasciimathml)?this.content="'`"+t+"`'":u||c?(this.content=this.valueTagToJessieCode(t),l.A.isArray(this.content)||(this.content=this.content.replace(/\\/g,"\\\\"))):this.content=this.poorMansTeX(this.valueTagToJessieCode(t)),h=!0):this.content=t,h){if(l.A.isArray(this.content)){for(o=this,n=0;n<this.content.length;n++)if('"'!==this.content[n][0])for(i in this.content[n]=this.board.jc.snippet(this.content[n],!0,"",!1),this.content[n].deps)this.addParents(this.content[n].deps[i]),this.content[n].deps[i].addChild(this);e=function(){var t,e,i=l.A.evaluate(o.visProp.digits),r="";for(t=0;t<o.content.length;t++)l.A.isFunction(o.content[t])?(e=o.content[t](),e=o.useLocale()?o.formatNumberLocale(e,i):l.A.toFixed(e,i)):'"'===(e=o.content[t])[0]&&'"'===e[e.length-1]&&(e=e.slice(1,-1)),r+=e;return r}}else for(i in(e=this.board.jc.snippet(this.content,!0,"",!1)).deps)this.addParents(e.deps[i]),e.deps[i].addChild(this);this.updateText=function(){this.plaintext=this.unescapeTicks(e())}}else this.updateText=function(){this.plaintext=this.content}},_setText:function(t){return this._createFctUpdateText(t),this.updateText(),this.fullUpdate(),this.board.infobox&&this.id===this.board.infobox.id||this.updateSize(),this},setTextJessieCode:function(t){var e;return this.visProp.castext=t,e=l.A.isFunction(t)?function(){return l.A.sanitizeHTML(t())}:l.A.isNumber(t)?t:l.A.sanitizeHTML(t),this._setText(e)},setText:function(t){return this._setText(t)},updateSize:function(){var t,e,i,r=l.A.evaluate(this.visProp.display);return a.A.isBrowser&&"no"!==this.board.renderer.type?(i=this.rendNode,"html"===r||"vml"===this.board.renderer.type?l.A.exists(i.offsetWidth)?(e=this,window.setTimeout((function(){e.size=[i.offsetWidth,i.offsetHeight],e.needsUpdate=!0,e.updateRenderer()}),0)):this.size=this.crudeSizeEstimate():"internal"===r&&("svg"===this.board.renderer.type?(e=this,window.setTimeout((function(){try{t=i.getBBox(),e.size=[t.width,t.height],e.needsUpdate=!0,e.updateRenderer()}catch(r){}}),0)):"canvas"===this.board.renderer.type&&(this.size=this.crudeSizeEstimate())),this):this},crudeSizeEstimate:function(){var t=parseFloat(l.A.evaluate(this.visProp.fontsize));return[t*this.plaintext.length*.45,.9*t]},utf8_decode:function(t){return t.replace(/&#x(\w+);/g,(function(t,e){return String.fromCharCode(parseInt(e,16))}))},replaceSub:function(t){if(!t.indexOf)return t;for(var e,i=t.indexOf("_{");i>=0;)(e=(t=t.slice(0,i)+t.slice(i).replace(/_\{/,"<sub>")).indexOf("}",i+4))>=0&&(t=t.slice(0,e)+t.slice(e).replace(/\}/,"</sub>")),i=t.indexOf("_{");for(i=t.indexOf("_");i>=0;)i=(t=t.slice(0,i)+t.slice(i).replace(/_(.?)/,"<sub>$1</sub>")).indexOf("_");return t},replaceSup:function(t){if(!t.indexOf)return t;for(var e,i=t.indexOf("^{");i>=0;)(e=(t=t.slice(0,i)+t.slice(i).replace(/\^\{/,"<sup>")).indexOf("}",i+4))>=0&&(t=t.slice(0,e)+t.slice(e).replace(/\}/,"</sup>")),i=t.indexOf("^{");for(i=t.indexOf("^");i>=0;)i=(t=t.slice(0,i)+t.slice(i).replace(/\^(.?)/,"<sup>$1</sup>")).indexOf("^");return t},getSize:function(){return this.size},setCoords:function(t,e){var i,r,n;return l.A.isArray(t)&&t.length>1&&(e=t[1],t=t[0]),l.A.evaluate(this.visProp.islabel)&&l.A.exists(this.element)?(r=(t-(i=this.element.getLabelAnchor()).usrCoords[1])*this.board.unitX,n=-(e-i.usrCoords[2])*this.board.unitY,this.relativeCoords.setCoordinates(s.A.COORDS_BY_SCREEN,[r,n])):this.coords.setCoordinates(s.A.COORDS_BY_USER,[t,e]),this.fullUpdate(),this},update:function(t){return this.needsUpdate?(this.updateCoords(t),this.updateText(),"internal"===l.A.evaluate(this.visProp.display)&&l.A.isString(this.plaintext)&&(this.plaintext=this.utf8_decode(this.plaintext)),this.checkForSizeUpdate(),this.needsSizeUpdate&&this.updateSize(),this):this},checkForSizeUpdate:function(){this.board.infobox&&this.id===this.board.infobox.id?this.needsSizeUpdate=!1:(this.needsSizeUpdate=this.plaintextOld!==this.plaintext,this.needsSizeUpdate&&(this.plaintextOld=this.plaintext))},updateRenderer:function(){return l.A.evaluate(this.visProp.autoposition)&&this.setAutoPosition().updateConstraint(),this.updateRendererGeneric("updateText")},expandShortMath:function(t){return t.replace(/([)0-9.])\s*([(a-zA-Z_])/g,"$1*$2")},generateTerm:function(t,e,i){var r,s,n,a,u='""';if(n=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/"/g,"'")).replace(/'/g,"\\'")).replace(/&amp;arc;/g,"&ang;")).replace(/<arc\s*\/>/g,"&ang;")).replace(/&lt;arc\s*\/&gt;/g,"&ang;")).replace(/&lt;sqrt\s*\/&gt;/g,"&radic;")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),a=t.indexOf("</value>"),n>=0)for(;n>=0;)u+=' + "'+this.replaceSub(this.replaceSup(t.slice(0,n)))+'"',s=(s=t.slice(n+7,a)).replace(/\s+/g,""),!0===e&&(s=this.expandShortMath(s)),(r=(r=(r=i?s:o.A.geonext2JS(s,this.board)).replace(/\\"/g,"'")).replace(/\\'/g,"'")).indexOf("toFixed")<0&&l.A.isNumber(l.A.bind(this.board.jc.snippet(r,!0,"",!1),this)())?u+="+("+r+").toFixed("+l.A.evaluate(this.visProp.digits)+")":u+="+("+r+")",n=(t=t.slice(a+8)).indexOf("<value>"),a=t.indexOf("</value>");return u+=' + "'+this.replaceSub(this.replaceSup(t))+'"',u=(u=(u=this.convertGeonextAndSketchometry2CSS(u)).replace(/&amp;/g,"&")).replace(/"/g,"'")},valueTagToJessieCode:function(t){var e,i,r,s,n=[],o='"';if(r=(t=(t=(t=(t=(t=t||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),s=t.indexOf("</value>"),r>=0)for(;r>=0;)n.push(o+this.escapeTicks(t.slice(0,r))+o),i=(i=t.slice(r+7,s)).replace(/\s+/g,""),e=(e=i=this.expandShortMath(i)).replace(/\\"/g,"'").replace(/\\'/g,"'"),n.push("("+e+")"),r=(t=t.slice(s+8)).indexOf("<value>"),s=t.indexOf("</value>");for(n.push(o+this.escapeTicks(t)+o),r=0;r<n.length;r++)n[r]=n[r].replace(/&amp;/g,"&");return n},poorMansTeX:function(t){var e,i;if(l.A.isArray(t)){for(i=[],e=0;e<t.length;e++)i.push(this.poorMansTeX(t[e]));return i}return t=t.replace(/<arc\s*\/*>/g,"&ang;").replace(/&lt;arc\s*\/*&gt;/g,"&ang;").replace(/<sqrt\s*\/*>/g,"&radic;").replace(/&lt;sqrt\s*\/*&gt;/g,"&radic;"),this.convertGeonextAndSketchometry2CSS(this.replaceSub(this.replaceSup(t)),!0)},escapeTicks:function(t){return t.replace(/"/g,"%22").replace(/'/g,"%27")},unescapeTicks:function(t){return t.replace(/%22/g,'"').replace(/%27/g,"'")},convertGeonext2CSS:function(t){return l.A.isString(t)&&(t=(t=(t=(t=t.replace(/(<|&lt;)overline(>|&gt;)/g,"<span style=text-decoration:overline;>")).replace(/(<|&lt;)\/overline(>|&gt;)/g,"</span>")).replace(/(<|&lt;)arrow(>|&gt;)/g,"<span style=text-decoration:overline;>")).replace(/(<|&lt;)\/arrow(>|&gt;)/g,"</span>")),t},convertSketchometry2CSS:function(t,e){var i='<span class="sketcho sketcho-inherit sketcho-',r='"></span>';return l.A.isString(t)&&(e&&(i=this.escapeTicks(i),r=this.escapeTicks(r)),t=(t=t.replace(/(<|&lt;)sketchofont(>|&gt;)/g,i)).replace(/(<|&lt;)\/sketchofont(>|&gt;)/g,r)),t},convertGeonextAndSketchometry2CSS:function(t,e){return t=this.convertGeonext2CSS(t),t=this.convertSketchometry2CSS(t,e)},notifyParents:function(t){var e,i=null;t=(t=t.replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>");do{null!==(i=(e=/<value>([\w\s*/^\-+()[\],<>=!]+)<\/value>/).exec(t))&&(o.A.findDependencies(this,i[1],this.board),t=(t=t.slice(i.index)).replace(e,""))}while(null!==i);return this},getParents:function(){var t;return t=void 0!==this.relativeCoords?[this.relativeCoords.usrCoords[1],this.relativeCoords.usrCoords[2],this.orgText]:[this.Z(),this.X(),this.Y(),this.orgText],0!==this.parents.length&&(t=this.parents),t},bounds:function(){var t=this.coords.usrCoords;return l.A.evaluate(this.visProp.islabel)||0===this.board.unitY||0===this.board.unitX?[0,0,0,0]:[t[1],t[2]+this.size[1]/this.board.unitY,t[1]+this.size[0]/this.board.unitX,t[2]]},getAnchorX:function(){var t=l.A.evaluate(this.visProp.anchorx);if("auto"===t)switch(this.visProp.position){case"top":case"bot":return"middle";case"rt":case"lrt":case"urt":return"left";default:return"right"}return t},getAnchorY:function(){var t=l.A.evaluate(this.visProp.anchory);if("auto"===t)switch(this.visProp.position){case"top":case"ulft":case"urt":return"bottom";case"bot":case"lrt":case"llft":return"top";default:return"middle"}return t},getNumberOfConflicts:function(t,e,i,r){var s,n,o,a,l=0;for(a=this.board.options.precision.hasPoint,this.board.options.precision.hasPoint=.25*(i+r),s=0,o=this.board.objectsList.length;s<o;s++)(n=this.board.objectsList[s]).visPropCalc.visible&&"axis"!==n.elType&&"ticks"!==n.elType&&n!==this.board.infobox&&n!==this&&n.hasPoint(t,e)&&l++;return this.board.options.precision.hasPoint=a,l},setAutoPosition:function(){var t,e,i,r,s,n,o,a,u,c,h,d,p,f,_,m,g,y=this.size[0],v=this.size[1],A={conflicts:1/0,angle:0,r:0},b=2*Math.PI/12;if(this===this.board.infobox||!this.visPropCalc.visible||!l.A.evaluate(this.visProp.islabel)||!this.element)return this;if(h=l.A.evaluate(this.visProp.offset),i=(s=this.element.getLabelAnchor()).scrCoords[1],r=s.scrCoords[2],f=h[0],_=h[1],0===(c=this.getNumberOfConflicts(i+f,r-_,y,v)))return this;for(d=l.A.evaluate(this.visProp.autopositionmindistance),a=l.A.evaluate(this.visProp.autopositionmaxdistance),u=.2*d,n=Math.atan2(_,f),A.conflicts=c,A.angle=n,A.r=d;A.conflicts>0&&d<=a;){for(p=1,o=n+b;p<12&&A.conflicts>0&&(t=i+d*(m=Math.cos(o)),e=r-d*(g=Math.sin(o)),(c=this.getNumberOfConflicts(t,e,y,v))<A.conflicts&&(A.conflicts=c,A.angle=o,A.r=d),0!==A.conflicts);p++)o+=b;d+=u}return d=A.r,m=Math.cos(A.angle),g=Math.sin(A.angle),this.visProp.offset=[d*m,d*g],this.visProp.anchorx=m<-.2?"right":m>.2?"left":"middle",this}}),r.A.createText=function(t,e,i){var s,n=l.A.copyAttributes(i,t.options,"text"),o=e.slice(0,-1),a=e[e.length-1];if(n.anchor=n.parent||n.anchor,!(s=c.A.create(r.A.Text,t,o,n,a)))throw new Error("JSXGraph: Can't create text with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return 0!==n.rotate&&s.addRotation(n.rotate),s},r.A.registerElement("text",r.A.createText),r.A.createHTMLSlider=function(t,e,i){var s,n,o=l.A.copyAttributes(i,t.options,"htmlslider");if(2!==e.length||2!==e[0].length||3!==e[1].length)throw new Error("JSXGraph: Can't create htmlslider with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parents are: [[x,y], [min, start, max]]");o.anchor=o.parent||o.anchor,o.fixed=o.fixed||!0,n=[e[0][0],e[0][1],'<form style="display:inline"><input type="range" /><span></span><input type="text" /></form>'],(s=r.A.createText(t,n,o)).type=l.A.OBJECT_TYPE_HTMLSLIDER,s.rendNodeForm=s.rendNode.childNodes[0],s.rendNodeRange=s.rendNodeForm.childNodes[0],s.rendNodeRange.min=e[1][0],s.rendNodeRange.max=e[1][2],s.rendNodeRange.step=o.step,s.rendNodeRange.value=e[1][1],s.rendNodeLabel=s.rendNodeForm.childNodes[1],s.rendNodeLabel.id=s.rendNode.id+"_label",o.withlabel&&(s.rendNodeLabel.innerHTML=s.name+"="),s.rendNodeOut=s.rendNodeForm.childNodes[2],s.rendNodeOut.value=e[1][1];try{s.rendNodeForm.id=s.rendNode.id+"_form",s.rendNodeRange.id=s.rendNode.id+"_range",s.rendNodeOut.id=s.rendNode.id+"_out"}catch(u){r.A.debug(u)}return s.rendNodeRange.style.width=o.widthrange+"px",s.rendNodeRange.style.verticalAlign="middle",s.rendNodeOut.style.width=o.widthout+"px",s._val=e[1][1],r.A.supportsVML()?a.A.addEvent(s.rendNodeForm,"change",h,s):a.A.addEvent(s.rendNodeForm,"input",h,s),s.Value=function(){return this._val},s},r.A.registerElement("htmlslider",r.A.createHTMLSlider);const d=r.A.Text},533:(t,e,i)=>{i.d(e,{A:()=>s});var r={};try{"object"!==typeof JXG||JXG.extend||(r=JXG)}catch(n){}r.extend=function(t,e,i,r){var s;for(s in i=i||!1,r=r||!1,e)(!i||i&&e.hasOwnProperty(s))&&(t[r?s.toLowerCase():s]=e[s])},r.defineConstant=function(t,e,i,s){(s=s||!1)&&r.exists(t[e])||Object.defineProperty(t,e,{value:i,writable:!1,enumerable:!0,configurable:!1})},r.extendConstants=function(t,e,i,r){var s,n;for(s in i=i||!1,r=r||!1,e)(!i||i&&e.hasOwnProperty(s))&&(n=r?s.toUpperCase():s,this.defineConstant(t,n,e[s]))},r.extend(r,{boards:{},readers:{},elements:{},registerElement:function(t,e){t=t.toLowerCase(),this.elements[t]=e},registerReader:function(t,e){var i,r;for(i=0;i<e.length;i++)r=e[i].toLowerCase(),"function"!==typeof this.readers[r]&&(this.readers[r]=t)},shortcut:function(t,e){return function(){return t[e].apply(this,arguments)}},getRef:function(t,e){return r.deprecated("JXG.getRef()","Board.select()"),t.select(e)},getReference:function(t,e){return r.deprecated("JXG.getReference()","Board.select()"),t.select(e)},getBoardByContainerId:function(t){var e;for(e in JXG.boards)if(JXG.boards.hasOwnProperty(e)&&JXG.boards[e].container===t)return JXG.boards[e];return null},deprecated:function(t,e){var i=t+" is deprecated.";e&&(i+=" Please use "+e+" instead."),r.warn(i)},warn:function(t){"object"===typeof window&&window.console&&console.warn?console.warn("WARNING:",t):"object"===typeof document&&document.getElementById("warning")&&(document.getElementById("debug").innerHTML+="WARNING: "+t+"<br />")},debugInt:function(t){var e,i;for(e=0;e<arguments.length;e++)i=arguments[e],"object"===typeof window&&window.console&&console.log?console.log(i):"object"===typeof document&&document.getElementById("debug")&&(document.getElementById("debug").innerHTML+=i+"<br/>")},debugWST:function(t){var e=new Error;r.debugInt.apply(this,arguments),e&&e.stack&&(r.debugInt("stacktrace"),r.debugInt(e.stack.split("\n").slice(1).join("\n")))},debugLine:function(t){var e=new Error;r.debugInt.apply(this,arguments),e&&e.stack&&r.debugInt("Called from",e.stack.split("\n").slice(2,3).join("\n"))},debug:function(t){r.debugInt.apply(this,arguments)},themes:{}});const s=r},245:(t,e,i)=>{i.d(e,{A:()=>c});var r=i(533),s=i(667),n=i(42),o=i(259),a=i(985),l=i(514),u=i(955);o.A.Geometry={},r.A.extend(o.A.Geometry,{angle:function(t,e,i){var s,n,o,a,l=[],u=[],c=[];return r.A.deprecated("Geometry.angle()","Geometry.rad()"),t.coords?(l[0]=t.coords.usrCoords[1],l[1]=t.coords.usrCoords[2]):(l[0]=t[0],l[1]=t[1]),e.coords?(u[0]=e.coords.usrCoords[1],u[1]=e.coords.usrCoords[2]):(u[0]=e[0],u[1]=e[1]),i.coords?(c[0]=i.coords.usrCoords[1],c[1]=i.coords.usrCoords[2]):(c[0]=i[0],c[1]=i[1]),s=l[0]-u[0],n=l[1]-u[1],o=c[0]-u[0],a=c[1]-u[1],Math.atan2(s*a-n*o,s*o+n*a)},trueAngle:function(t,e,i){return 57.29577951308232*this.rad(t,e,i)},rad:function(t,e,i){var r,s,n,o,a,l,u;return t.coords?(r=t.coords.usrCoords[1],s=t.coords.usrCoords[2]):(r=t[0],s=t[1]),e.coords?(n=e.coords.usrCoords[1],o=e.coords.usrCoords[2]):(n=e[0],o=e[1]),i.coords?(a=i.coords.usrCoords[1],l=i.coords.usrCoords[2]):(a=i[0],l=i[1]),(u=Math.atan2(l-o,a-n)-Math.atan2(s-o,r-n))<0&&(u+=6.283185307179586),u},angleBisector:function(t,e,i,r){var o,a,u,c,h,d=t.coords.usrCoords,p=e.coords.usrCoords,f=i.coords.usrCoords;return l.A.exists(r)||(r=t.board),0===p[0]?new n.A(s.A.COORDS_BY_USER,[1,.5*(d[1]+f[1]),.5*(d[2]+f[2])],r):(c=d[1]-p[1],h=d[2]-p[2],o=Math.atan2(h,c),c=f[1]-p[1],h=f[2]-p[2],u=.5*(o+(a=Math.atan2(h,c))),o>a&&(u+=Math.PI),c=Math.cos(u)+p[1],h=Math.sin(u)+p[2],new n.A(s.A.COORDS_BY_USER,[1,c,h],r))},reflection:function(t,e,i){var r,o,a,u,c,h,d=e.coords.usrCoords,p=t.point1.coords.usrCoords,f=t.point2.coords.usrCoords;return l.A.exists(i)||(i=e.board),u=f[1]-p[1],c=f[2]-p[2],r=d[1]-p[1],h=(u*(d[2]-p[2])-c*r)/(u*u+c*c),o=d[1]+2*h*c,a=d[2]-2*h*u,new n.A(s.A.COORDS_BY_USER,[o,a],i)},rotation:function(t,e,i,r){var o,a,u,c,h,d,p=e.coords.usrCoords,f=t.coords.usrCoords;return l.A.exists(r)||(r=e.board),o=p[1]-f[1],a=p[2]-f[2],h=o*(u=Math.cos(i))-a*(c=Math.sin(i))+f[1],d=o*c+a*u+f[2],new n.A(s.A.COORDS_BY_USER,[h,d],r)},perpendicular:function(t,e,i){var r,a,u,c,h,d=t.point1.coords.usrCoords,p=t.point2.coords.usrCoords,f=e.coords.usrCoords;return l.A.exists(i)||(i=e.board),e===t.point1?(r=d[1]+p[2]-d[2],a=d[2]-p[1]+d[1],h=d[0]*p[0],Math.abs(h)<o.A.eps&&(r=p[2],a=-p[1]),c=[h,r,a],u=!0):e===t.point2?(r=p[1]+d[2]-p[2],a=p[2]-d[1]+p[1],h=d[0]*p[0],Math.abs(h)<o.A.eps&&(r=d[2],a=-d[1]),c=[h,r,a],u=!1):Math.abs(o.A.innerProduct(f,t.stdform,3))<o.A.eps?(r=f[1]+p[2]-f[2],a=f[2]-p[1]+f[1],h=p[0],Math.abs(h)<o.A.eps&&(r=p[2],a=-p[1]),u=!0,Math.abs(h)>o.A.eps&&Math.abs(r-f[1])<o.A.eps&&Math.abs(a-f[2])<o.A.eps&&(r=f[1]+d[2]-f[2],a=f[2]-d[1]+f[1],u=!1),c=[h,r,a]):(c=[0,t.stdform[1],t.stdform[2]],c=o.A.crossProduct(c,f),c=o.A.crossProduct(c,t.stdform),u=!0),[new n.A(s.A.COORDS_BY_USER,c,i),u]},circumcenterMidpoint:function(){r.A.deprecated("Geometry.circumcenterMidpoint()","Geometry.circumcenter()"),this.circumcenter.apply(this,arguments)},circumcenter:function(t,e,i,r){var a,u,c,h,d=t.coords.usrCoords,p=e.coords.usrCoords,f=i.coords.usrCoords;return l.A.exists(r)||(r=t.board),a=[p[0]-d[0],-p[2]+d[2],p[1]-d[1]],u=[.5*(d[0]+p[0]),.5*(d[1]+p[1]),.5*(d[2]+p[2])],c=o.A.crossProduct(a,u),a=[f[0]-p[0],-f[2]+p[2],f[1]-p[1]],u=[.5*(p[0]+f[0]),.5*(p[1]+f[1]),.5*(p[2]+f[2])],h=o.A.crossProduct(a,u),new n.A(s.A.COORDS_BY_USER,o.A.crossProduct(c,h),r)},distance:function(t,e,i){var r,s=0;for(i||(i=Math.min(t.length,e.length)),r=0;r<i;r++)s+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(s)},affineDistance:function(t,e,i){var r;return(r=this.distance(t,e,i))>o.A.eps&&(Math.abs(t[0])<o.A.eps||Math.abs(e[0])<o.A.eps)?1/0:r},affineRatio:function(t,e,i){var r;return l.A.exists(t.usrCoords)&&(t=t.usrCoords),l.A.exists(e.usrCoords)&&(e=e.usrCoords),l.A.exists(i.usrCoords)&&(i=i.usrCoords),r=e[1]-t[1],Math.abs(r)>o.A.eps?(i[1]-t[1])/r:(i[2]-t[2])/(e[2]-t[2])},sortVertices:function(t){for(var e,i=u.A.each(t,u.A.coordsArray),r=i.length,s=null;i[0][0]===i[r-1][0]&&i[0][1]===i[r-1][1]&&i[0][2]===i[r-1][2];)s=i.pop(),r--;return e=i[0],i.sort((function(t,i){return(t[2]===e[2]&&t[1]===e[1]?-1/0:Math.atan2(t[2]-e[2],t[1]-e[1]))-(i[2]===e[2]&&i[1]===e[1]?-1/0:Math.atan2(i[2]-e[2],i[1]-e[1]))})),null!==s&&i.push(s),i},signedTriangle:function(t,e,i){var r=u.A.coordsArray(t),s=u.A.coordsArray(e),n=u.A.coordsArray(i);return.5*((s[1]-r[1])*(n[2]-r[2])-(s[2]-r[2])*(n[1]-r[1]))},signedPolygon:function(t,e){var i,r,s=0,n=u.A.each(t,u.A.coordsArray);for(void 0===e&&(e=!0),e?n.unshift(n[n.length-1]):n=this.sortVertices(n),r=n.length,i=1;i<r;i++)s+=n[i-1][1]*n[i][2]-n[i][1]*n[i-1][2];return.5*s},GrahamScan:function(t){var e,i=1,r=u.A.each(t,u.A.coordsArray),s=r.length;for(s=(r=this.sortVertices(r)).length,e=2;e<s;e++){for(;this.signedTriangle(r[i-1],r[i],r[e])<=0;){if(i>1)i-=1;else if(e===s-1)break;e+=1}i+=1,r=l.A.swap(r,i,e)}return r.slice(0,i)},calcStraight:function(t,e,i,r){var n,a,u,c,h,d,p,f,_,m;if(l.A.exists(r)||(r=10),d=l.A.evaluate(t.visProp.straightfirst),p=l.A.evaluate(t.visProp.straightlast),Math.abs(e.scrCoords[0])<o.A.eps&&(d=!0),Math.abs(i.scrCoords[0])<o.A.eps&&(p=!0),(d||p)&&((f=[])[0]=t.stdform[0]-t.stdform[1]*t.board.origin.scrCoords[1]/t.board.unitX+t.stdform[2]*t.board.origin.scrCoords[2]/t.board.unitY,f[1]=t.stdform[1]/t.board.unitX,f[2]=-t.stdform[2]/t.board.unitY,!isNaN(f[0]+f[1]+f[2]))){if(!1,!1,n=!d&&Math.abs(e.usrCoords[0])>=o.A.eps&&e.scrCoords[1]>=0&&e.scrCoords[1]<=t.board.canvasWidth&&e.scrCoords[2]>=0&&e.scrCoords[2]<=t.board.canvasHeight,a=!p&&Math.abs(i.usrCoords[0])>=o.A.eps&&i.scrCoords[1]>=0&&i.scrCoords[1]<=t.board.canvasWidth&&i.scrCoords[2]>=0&&i.scrCoords[2]<=t.board.canvasHeight,c=(u=this.meetLineBoard(f,t.board,r))[0],h=u[1],!n&&!a){if(!d&&p&&!this.isSameDirection(e,i,c)&&!this.isSameDirection(e,i,h))return;if(d&&!p&&!this.isSameDirection(i,e,c)&&!this.isSameDirection(i,e,h))return}n?a||(m=this.isSameDir(e,i,c,h)?h:c):a?_=this.isSameDir(e,i,c,h)?c:h:this.isSameDir(e,i,c,h)?(_=c,m=h):(m=c,_=h),_&&e.setCoordinates(s.A.COORDS_BY_USER,_.usrCoords),m&&i.setCoordinates(s.A.COORDS_BY_USER,m.usrCoords)}},calcLineDelimitingPoints:function(t,e,i){var r,n,a,u,c,h,d,p,f,_,m;if(c=l.A.evaluate(t.visProp.straightfirst),h=l.A.evaluate(t.visProp.straightlast),Math.abs(e.scrCoords[0])<o.A.eps&&(c=!0),Math.abs(i.scrCoords[0])<o.A.eps&&(h=!0),(d=[])[0]=t.stdform[0]-t.stdform[1]*t.board.origin.scrCoords[1]/t.board.unitX+t.stdform[2]*t.board.origin.scrCoords[2]/t.board.unitY,d[1]=t.stdform[1]/t.board.unitX,d[2]=-t.stdform[2]/t.board.unitY,!isNaN(d[0]+d[1]+d[2])){if(_=!c,m=!h,n=t.board.getBoundingBox(),t.getSlope()>=0?(a=this.projectPointToLine({coords:{usrCoords:[1,n[2],n[1]]}},t,t.board),u=this.projectPointToLine({coords:{usrCoords:[1,n[0],n[3]]}},t,t.board)):(a=this.projectPointToLine({coords:{usrCoords:[1,n[0],n[1]]}},t,t.board),u=this.projectPointToLine({coords:{usrCoords:[1,n[2],n[3]]}},t,t.board)),!_&&!m){if(!c&&!h){if(r=e.distance(s.A.COORDS_BY_USER,i),Math.abs(e.distance(s.A.COORDS_BY_USER,a)+a.distance(s.A.COORDS_BY_USER,i)-r)>o.A.eps)return;if(Math.abs(e.distance(s.A.COORDS_BY_USER,u)+u.distance(s.A.COORDS_BY_USER,i)-r)>o.A.eps)return}if(!c&&h&&!this.isSameDirection(e,i,a)&&!this.isSameDirection(e,i,u))return;if(c&&!h&&!this.isSameDirection(i,e,a)&&!this.isSameDirection(i,e,u))return}_?m||(f=this.isSameDir(e,i,a,u)?u:a):m?p=this.isSameDir(e,i,a,u)?a:u:this.isSameDir(e,i,a,u)?(p=a,f=u):(f=a,p=u),p&&e.setCoordinates(s.A.COORDS_BY_USER,p.usrCoords),f&&i.setCoordinates(s.A.COORDS_BY_USER,f.usrCoords)}},calcLabelQuadrant:function(t){return t<0&&(t+=2*Math.PI),["rt","urt","top","ulft","lft","llft","lrt"][Math.floor((t+Math.PI/8)/(Math.PI/4))%8]},isSameDir:function(t,e,i,r){var s=e.usrCoords[1]-t.usrCoords[1],n=e.usrCoords[2]-t.usrCoords[2],a=r.usrCoords[1]-i.usrCoords[1],l=r.usrCoords[2]-i.usrCoords[2];return Math.abs(e.usrCoords[0])<o.A.eps&&(s=e.usrCoords[1],n=e.usrCoords[2]),Math.abs(t.usrCoords[0])<o.A.eps&&(s=-t.usrCoords[1],n=-t.usrCoords[2]),s*a+n*l>=0},isSameDirection:function(t,e,i){var r,s,n,a,l=!1;return r=e.usrCoords[1]-t.usrCoords[1],s=e.usrCoords[2]-t.usrCoords[2],n=i.usrCoords[1]-t.usrCoords[1],a=i.usrCoords[2]-t.usrCoords[2],Math.abs(r)<o.A.eps&&(r=0),Math.abs(s)<o.A.eps&&(s=0),Math.abs(n)<o.A.eps&&(n=0),Math.abs(a)<o.A.eps&&(a=0),(r>=0&&n>=0||r<=0&&n<=0)&&(l=s>=0&&a>=0||s<=0&&a<=0),l},det3p:function(t,e,i){return(t[1]-i[1])*(e[2]-i[2])-(e[1]-i[1])*(t[2]-i[2])},windingNumber:function(t,e,i){var r,s,n,a,u,c,h=0,d=e.length,p=t[1],f=t[2],_=0;if(0===d)return 0;if((i=i||!1)&&(_=1),isNaN(p)||isNaN(f))return 1;if(l.A.exists(e[0].coords)?(r=e[0].coords,s=e[d-1].coords):(r=e[0],s=e[d-1]),r.usrCoords[1]===p&&r.usrCoords[2]===f)return 1;for(c=0;c<d-_;c++)if(l.A.exists(e[c].coords)?(s=e[c].coords.usrCoords,n=e[(c+1)%d].coords.usrCoords):(s=e[c].usrCoords,n=e[(c+1)%d].usrCoords),!(0===s[0]||0===n[0]||isNaN(s[1])||isNaN(n[1])||isNaN(s[2])||isNaN(n[2]))){if(n[2]===f){if(n[1]===p)return 1;if(s[2]===f&&n[1]>p===s[1]<p)return 0}if(s[2]<f!==n[2]<f)if(u=2*(n[2]>s[2]?1:0)-1,s[1]>=p)if(n[1]>p)h+=u;else{if(0===(a=this.det3p(s,n,t)))return 0;a>0+o.A.eps===n[2]>s[2]&&(h+=u)}else n[1]>p&&(a=this.det3p(s,n,t))>0+o.A.eps===n[2]>s[2]&&(h+=u)}return h},pnpoly:function(t,e,i,r){var o,a,u,c,h,d,p,f,_=i,m=!1;for(r===s.A.COORDS_BY_USER?(d=(f=new n.A(s.A.COORDS_BY_USER,[t,e],this.board)).scrCoords[1],p=f.scrCoords[2]):(d=t,p=e),o=0,a=(h=i.length)-2;o<h-1;a=o++)u=l.A.exists(_[o].coords)?_[o].coords:_[o],c=l.A.exists(_[a].coords)?_[a].coords:_[a],u.scrCoords[2]>p!==c.scrCoords[2]>p&&d<(c.scrCoords[1]-u.scrCoords[1])*(p-u.scrCoords[2])/(c.scrCoords[2]-u.scrCoords[2])+u.scrCoords[1]&&(m=!m);return m},intersectionFunction:function(t,e,i,a,u,c){var h,d,p=this;return h=e.elementClass===s.A.OBJECT_CLASS_CURVE&&(e.type===s.A.OBJECT_TYPE_ARC||e.type===s.A.OBJECT_TYPE_SECTOR),d=i.elementClass===s.A.OBJECT_CLASS_CURVE&&(i.type===s.A.OBJECT_TYPE_ARC||i.type===s.A.OBJECT_TYPE_SECTOR),e.elementClass!==s.A.OBJECT_CLASS_CURVE&&i.elementClass!==s.A.OBJECT_CLASS_CURVE||e.elementClass!==s.A.OBJECT_CLASS_CURVE&&e.elementClass!==s.A.OBJECT_CLASS_CIRCLE||i.elementClass!==s.A.OBJECT_CLASS_CURVE&&i.elementClass!==s.A.OBJECT_CLASS_CIRCLE?e.elementClass===s.A.OBJECT_CLASS_CURVE&&!h&&i.elementClass===s.A.OBJECT_CLASS_LINE||i.elementClass===s.A.OBJECT_CLASS_CURVE&&!d&&e.elementClass===s.A.OBJECT_CLASS_LINE?function(){return p.meetCurveLine(e,i,a,e.board,l.A.evaluate(c))}:e.type===s.A.OBJECT_TYPE_POLYGON||i.type===s.A.OBJECT_TYPE_POLYGON?e.elementClass===s.A.OBJECT_CLASS_LINE?function(){var t,r=l.A.evaluate(e.visProp.straightfirst),s=l.A.evaluate(e.visProp.straightlast),n=l.A.evaluate(i.visProp.straightfirst),o=l.A.evaluate(i.visProp.straightlast);return t=!l.A.evaluate(c)&&(!r||!s||!n||!o),p.meetPolygonLine(i,e,a,e.board,t)}:i.elementClass===s.A.OBJECT_CLASS_LINE?function(){var t,r=l.A.evaluate(e.visProp.straightfirst),s=l.A.evaluate(e.visProp.straightlast),n=l.A.evaluate(i.visProp.straightfirst),o=l.A.evaluate(i.visProp.straightlast);return t=!l.A.evaluate(c)&&(!r||!s||!n||!o),p.meetPolygonLine(e,i,a,e.board,t)}:function(){return p.meetPathPath(e,i,a,e.board)}:e.elementClass===s.A.OBJECT_CLASS_LINE&&i.elementClass===s.A.OBJECT_CLASS_LINE?function(){var t,r,o=l.A.evaluate(e.visProp.straightfirst),u=l.A.evaluate(e.visProp.straightlast),h=l.A.evaluate(i.visProp.straightfirst),d=l.A.evaluate(i.visProp.straightlast);return l.A.evaluate(c)||o&&u&&h&&d?p.meet(e.stdform,i.stdform,a,e.board):(t=p.meetSegmentSegment(e.point1.coords.usrCoords,e.point2.coords.usrCoords,i.point1.coords.usrCoords,i.point2.coords.usrCoords),r=!o&&t[1]<0||!u&&t[1]>1||!h&&t[2]<0||!d&&t[2]>1?[0,NaN,NaN]:t[0],new n.A(s.A.COORDS_BY_USER,r,e.board))}:function(){var t,u,f,_=p.meet(e.stdform,i.stdform,a,e.board),m=!0;return l.A.evaluate(c)?_:(e.elementClass!==s.A.OBJECT_CLASS_LINE||(t=l.A.evaluate(e.visProp.straightfirst),u=l.A.evaluate(e.visProp.straightlast),t&&u||(f=p.affineRatio(e.point1.coords,e.point2.coords,_),!(!u&&f>1+o.A.eps||!t&&f<0-o.A.eps))))&&(i.elementClass!==s.A.OBJECT_CLASS_LINE||(t=l.A.evaluate(i.visProp.straightfirst),u=l.A.evaluate(i.visProp.straightlast),t&&u||(f=p.affineRatio(i.point1.coords,i.point2.coords,_),!(!u&&f>1+o.A.eps||!t&&f<0-o.A.eps))))?h&&((m=p.coordsOnArc(e,_))&&d&&(m=p.coordsOnArc(i,_)),!m)?new n.A(r.A.COORDS_BY_USER,[0,NaN,NaN],e.board):_:new n.A(r.A.COORDS_BY_USER,[0,NaN,NaN],e.board)}:function(){return p.meetCurveCurve(e,i,a,u,e.board)}},otherIntersectionFunction:function(t,e,i,n){var o,a,u,c=this;return a=t[0],u=t[1],o=a.board,function(){var t,h,d,p,f=e.length,_=l.A.evaluate(n);for(t=f;t>=0;t--){for(a.elementClass===s.A.OBJECT_CLASS_CIRCLE&&[s.A.OBJECT_CLASS_CIRCLE,s.A.OBJECT_CLASS_LINE].indexOf(u.elementClass)>=0?d=c.meet(a.stdform,u.stdform,t,o):a.elementClass===s.A.OBJECT_CLASS_CURVE&&[s.A.OBJECT_CLASS_CURVE,s.A.OBJECT_CLASS_CIRCLE].indexOf(u.elementClass)>=0?d=c.meetCurveCurve(a,u,t,0,o,"segment"):a.elementClass===s.A.OBJECT_CLASS_CURVE&&u.elementClass===s.A.OBJECT_CLASS_LINE&&(d=l.A.exists(a.dataX)?r.A.Math.Geometry.meetCurveLine(a,u,t,a.board,l.A.evaluate(i)):r.A.Math.Geometry.meetCurveLineContinuous(a,u,t,a.board)),p=!1,h=0;!p&&h<f;h++)d.distance(r.A.COORDS_BY_USER,e[h].coords)<_&&(p=!0);if(!p)return d}return d}},intersectionFunction3D:function(t,e,i,r){var n,o=this;return e.type===s.A.OBJECT_TYPE_PLANE3D?i.type===s.A.OBJECT_TYPE_PLANE3D?n=()=>t.intersectionPlanePlane(e,i)[r]:i.type===s.A.OBJECT_TYPE_SPHERE3D&&(n=o.meetPlaneSphere(e,i)):e.type===s.A.OBJECT_TYPE_SPHERE3D&&(i.type===s.A.OBJECT_TYPE_PLANE3D?n=o.meetPlaneSphere(i,e):i.type===s.A.OBJECT_TYPE_SPHERE3D&&(n=o.meetSphereSphere(e,i))),n},coordsOnArc:function(t,e){var i=this.rad(t.radiuspoint,t.center,e.usrCoords.slice(1)),r=0,s=this.rad(t.radiuspoint,t.center,t.anglepoint),n=l.A.evaluate(t.visProp.selection);return("minor"===n&&s>Math.PI||"major"===n&&s<Math.PI)&&(r=s,s=2*Math.PI),!(i<r||i>s)},meet:function(t,e,i,r){var s=o.A.eps;return Math.abs(t[3])<s&&Math.abs(e[3])<s?this.meetLineLine(t,e,i,r):Math.abs(t[3])>=s&&Math.abs(e[3])<s?this.meetLineCircle(e,t,i,r):Math.abs(t[3])<s&&Math.abs(e[3])>=s?this.meetLineCircle(t,e,i,r):this.meetCircleCircle(t,e,i,r)},meetLineBoard:function(t,e,i){var r,a,u,c,h=[];for(l.A.exists(i)||(i=0),h[0]=o.A.crossProduct(t,[i,0,1]),h[1]=o.A.crossProduct(t,[i,1,0]),h[2]=o.A.crossProduct(t,[-i-e.canvasHeight,0,1]),h[3]=o.A.crossProduct(t,[-i-e.canvasWidth,1,0]),u=0;u<4;u++)if(Math.abs(h[u][0])>o.A.eps){for(c=2;c>0;c--)h[u][c]/=h[u][0];h[u][0]=1}return Math.abs(h[1][0])<o.A.eps?(r=h[0],a=h[2]):Math.abs(h[0][0])<o.A.eps?(r=h[1],a=h[3]):h[1][2]<0?(r=h[0],a=h[3][2]>e.canvasHeight?h[2]:h[3]):h[1][2]>e.canvasHeight?(r=h[2],a=h[3][2]<0?h[0]:h[3]):(r=h[1],a=h[3][2]<0?h[0]:h[3][2]>e.canvasHeight?h[2]:h[3]),[new n.A(s.A.COORDS_BY_SCREEN,r.slice(1),e),new n.A(s.A.COORDS_BY_SCREEN,a.slice(1),e)]},meetLineLine:function(t,e,i,r){var a=isNaN(t[5]+e[5])?[0,0,0]:o.A.crossProduct(t,e);return Math.abs(a[0])<1e-14&&(a[0]=0),new n.A(s.A.COORDS_BY_USER,a,r)},meetLineCircle:function(t,e,i,r){var a,u,c,h,d,p,f,_,m;return e[4]<o.A.eps?Math.abs(o.A.innerProduct([1,e[6],e[7]],t,3))<o.A.eps?new n.A(s.A.COORDS_BY_USER,e.slice(6,8),r):new n.A(s.A.COORDS_BY_USER,[NaN,NaN],r):(c=e[0],u=e.slice(1,3),a=e[3],h=t[0],d=t.slice(1,3),p=a,(_=(f=u[0]*d[1]-u[1]*d[0])*f-4*p*(a*h*h-(u[0]*d[0]+u[1]*d[1])*h+c))>-o.A.eps*o.A.eps?(m=[(-f+(_=Math.sqrt(Math.abs(_))))/(2*p),(-f-_)/(2*p)],0===l.A.evaluate(i)?new n.A(s.A.COORDS_BY_USER,[-m[0]*-d[1]-h*d[0],-m[0]*d[0]-h*d[1]],r):new n.A(s.A.COORDS_BY_USER,[-m[1]*-d[1]-h*d[0],-m[1]*d[0]-h*d[1]],r)):new n.A(s.A.COORDS_BY_USER,[0,0,0],r))},meetCircleCircle:function(t,e,i,r){var a;return t[4]<o.A.eps?Math.abs(this.distance(t.slice(6,2),e.slice(6,8))-e[4])<o.A.eps?new n.A(s.A.COORDS_BY_USER,t.slice(6,8),r):new n.A(s.A.COORDS_BY_USER,[0,0,0],r):e[4]<o.A.eps?Math.abs(this.distance(e.slice(6,2),t.slice(6,8))-t[4])<o.A.eps?new n.A(s.A.COORDS_BY_USER,e.slice(6,8),r):new n.A(s.A.COORDS_BY_USER,[0,0,0],r):(a=[e[3]*t[0]-t[3]*e[0],e[3]*t[1]-t[3]*e[1],e[3]*t[2]-t[3]*e[2],0,1,1/0,1/0,1/0],a=o.A.normalize(a),this.meetLineCircle(a,t,i,r))},meetCurveCurve:function(t,e,i,r,o,u){var c;return c=l.A.exists(u)&&"newton"===u?a.A.generalizedNewton(t,e,l.A.evaluate(i),r):3===t.bezierDegree||3===e.bezierDegree?this.meetBezierCurveRedBlueSegments(t,e,i):this.meetCurveRedBlueSegments(t,e,i),new n.A(s.A.COORDS_BY_USER,c,o)},meetCurveLine:function(t,e,i,r,n){var o,a;return l.A.exists(r)||(r=t.board),t.elementClass===s.A.OBJECT_CLASS_CURVE?(o=t,a=e):(o=e,a=t),this.meetCurveLineDiscrete(o,a,i,r,!n)},meetCurveLineContinuous:function(t,e,i,r,l){var u,c,h,d,p,f,_,m,g,y,v,A,b,C=o.A.eps,x=o.A.eps;for(d=this.meetCurveLineDiscrete(t,e,i,r,l),p=d.usrCoords[1],f=d.usrCoords[2],u=function(e){var i,r;return e>t.maxX()||e<t.minX()?1/0:(i=t.X(e)-p)*i+(r=t.Y(e)-f)*r},c=function(i){var r=e.stdform[0]+e.stdform[1]*t.X(i)+e.stdform[2]*t.Y(i);return r*r},m=(t.maxX()-t.minX())/50,g=t.minX(),v=1e-4,y=NaN,A=0;A<50&&(h=a.A.root(u,[Math.max(g,t.minX()),Math.min(g+m,t.maxX())]),!((b=Math.abs(u(h)))<=v&&(y=h,(v=b)<C)));A++)g+=m;return h=y,b=c(h=a.A.root(c,[Math.max(h-m,t.minX()),Math.min(h+m,t.maxX())])),_=isNaN(b)||Math.abs(b)>x?0:1,new n.A(s.A.COORDS_BY_USER,[_,t.X(h),t.Y(h)],r)},meetCurveLineDiscrete:function(t,e,i,r,a){var u,c,h,d,p,f,_,m=l.A.evaluate(i),g=e.point1.coords.usrCoords,y=e.point2.coords.usrCoords,v=0,A=t.numberPoints,b=l.A.evaluate(e.visProp.straightfirst),C=l.A.evaluate(e.visProp.straightlast);for(f=new n.A(s.A.COORDS_BY_USER,[0,NaN,NaN],r),0===g[0]?g=[1,y[1]+e.stdform[2],y[2]-e.stdform[1]]:0===y[0]&&(y=[1,g[1]+e.stdform[2],g[2]-e.stdform[1]]),d=t.points[0].usrCoords,u=1;u<A;u+=t.bezierDegree)if(h=d.slice(0),d=t.points[u].usrCoords,this.distance(h,d)>o.A.eps)for(_=3===t.bezierDegree?this.meetBeziersegmentBeziersegment([t.points[u-1].usrCoords.slice(1),t.points[u].usrCoords.slice(1),t.points[u+1].usrCoords.slice(1),t.points[u+2].usrCoords.slice(1)],[g.slice(1),y.slice(1)],a):[this.meetSegmentSegment(h,d,g,y)],c=0;c<_.length;c++)if(0<=(p=_[c])[1]&&p[1]<=1){if(v===m)return a&&(!b&&p[2]<0||!C&&p[2]>1)?f:f=new n.A(s.A.COORDS_BY_USER,p[0],r);v+=1}return f},meetCurveRedBlueSegments:function(t,e,i){var r,s,n,o,a,u,c,h,d,p=l.A.evaluate(i),f=0,_=e.numberPoints,m=t.numberPoints;if(_<=1||m<=1)return[0,NaN,NaN];for(r=1;r<m;r++)for(n=t.points[r-1].usrCoords,o=t.points[r].usrCoords,h=Math.min(n[1],o[1]),d=Math.max(n[1],o[1]),u=e.points[0].usrCoords,s=1;s<_;s++)if(a=u,u=e.points[s].usrCoords,Math.min(a[1],u[1])<d&&Math.max(a[1],u[1])>h&&(c=this.meetSegmentSegment(n,o,a,u))[1]>=0&&c[2]>=0&&(c[1]<1&&c[2]<1||r===m-1&&1===c[1]||s===_-1&&1===c[2])){if(f===p)return c[0];f++}return[0,NaN,NaN]},meetSegmentSegment:function(t,e,i,r){var s,n,a,l=o.A.crossProduct(t,e),u=o.A.crossProduct(i,r),c=o.A.crossProduct(l,u);return Math.abs(c[0])<o.A.eps?[c,1/0,1/0]:(c[1]/=c[0],c[2]/=c[0],c[0]/=c[0],a=t[n=Math.abs(e[1]-e[0]*t[1])<o.A.eps?2:1]/t[0],s=(c[n]-a)/(0!==e[0]?e[n]/e[0]-a:e[n]),a=i[n=Math.abs(r[1]-r[0]*i[1])<o.A.eps?2:1]/i[0],[c,s,(c[n]-a)/(0!==r[0]?r[n]/r[0]-a:r[n])])},meetPathPath:function(t,e,i,a){var u,c,h,d,p=l.A.evaluate(i);return(h=(u=r.A.Math.Clip._getPath(t,a)).length)>0&&this.distance(u[0].coords.usrCoords,u[h-1].coords.usrCoords,3)<o.A.eps&&u.pop(),(h=(c=r.A.Math.Clip._getPath(e,a)).length)>0&&this.distance(c[0].coords.usrCoords,c[h-1].coords.usrCoords,3)<o.A.eps*o.A.eps&&c.pop(),i<0||r.A.Math.Clip.isEmptyCase(u,c,"intersection")?new n.A(s.A.COORDS_BY_USER,[0,0,0],a):(r.A.Math.Clip.makeDoublyLinkedList(u),r.A.Math.Clip.makeDoublyLinkedList(c),p<(d=r.A.Math.Clip.findIntersections(u,c,a)[0]).length?d[p].coords:new n.A(s.A.COORDS_BY_USER,[0,0,0],a))},meetPolygonLine:function(t,e,i,r,o){var a,u,c,h=l.A.evaluate(i),d=[0,0,0],p=t.borders.length,f=[];for(a=0;a<p;a++)c=t.borders[a],u=this.meetSegmentSegment(c.point1.coords.usrCoords,c.point2.coords.usrCoords,e.point1.coords.usrCoords,e.point2.coords.usrCoords),(!o||u[2]>=0&&u[2]<1)&&u[1]>=0&&u[1]<1&&f.push(u[0]);return h>=0&&h<f.length&&(d=f[h]),new n.A(s.A.COORDS_BY_USER,d,r)},meetPlaneSphere:function(t,e){var i=function(){return t.normal[0]*e.center.X()+t.normal[1]*e.center.Y()+t.normal[2]*e.center.Z()-t.d};return[[function(){return e.center.X()-i()*t.normal[0]},function(){return e.center.Y()-i()*t.normal[1]},function(){return e.center.Z()-i()*t.normal[2]}],[()=>t.normal[0],()=>t.normal[1],()=>t.normal[2]],function(){let t=e.Radius(),r=i();return Math.sqrt(t*t-r*r)}]},meetSphereSphere:function(t,e){var i=function(){let i=t.center.distance(e.center),r=t.Radius(),s=e.Radius();return(r-s)*(r+s)/(i*i)};return[[function(){let r=i();return.5*((1-r)*t.center.X()+(1+r)*e.center.X())},function(){let r=i();return.5*((1-r)*t.center.Y()+(1+r)*e.center.Y())},function(){let r=i();return.5*((1-r)*t.center.Z()+(1+r)*e.center.Z())}],[()=>e.center.X()-t.center.X(),()=>e.center.Y()-t.center.Y(),()=>e.center.Z()-t.center.Z()],function(){let r=t.center.distance(e.center),s=t.Radius(),n=e.Radius(),o=i(),a=.5*(s*s+n*n-.5*r*r*(1+o*o));return Math.sqrt(a)}]},_bezierSplit:function(t){var e,i,r,s,n,o;return e=[.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])],i=[.5*(t[1][0]+t[2][0]),.5*(t[1][1]+t[2][1])],r=[.5*(t[2][0]+t[3][0]),.5*(t[2][1]+t[3][1])],o=[.5*((s=[.5*(e[0]+i[0]),.5*(e[1]+i[1])])[0]+(n=[.5*(i[0]+r[0]),.5*(i[1]+r[1])])[0]),.5*(s[1]+n[1])],[[t[0],e,s,o],[o,n,r,t[3]]]},_bezierBbox:function(t){var e=[];return 4===t.length?(e[0]=Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),e[1]=Math.max(t[0][1],t[1][1],t[2][1],t[3][1]),e[2]=Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),e[3]=Math.min(t[0][1],t[1][1],t[2][1],t[3][1])):(e[0]=Math.min(t[0][0],t[1][0]),e[1]=Math.max(t[0][1],t[1][1]),e[2]=Math.max(t[0][0],t[1][0]),e[3]=Math.min(t[0][1],t[1][1])),e},_bezierOverlap:function(t,e){return t[2]>=e[0]&&t[0]<=e[2]&&t[1]>=e[3]&&t[3]<=e[1]},_bezierListConcat:function(t,e,i,r){var s,n=l.A.exists(r),o=0,a=e.length,u=t.length;for(u>0&&a>0&&(1===t[u-1][1]&&0===e[0][1]||n&&1===t[u-1][2]&&0===e[0][2])&&(o=1),s=o;s<a;s++)n&&(e[s][2]*=.5,e[s][2]+=r),e[s][1]*=.5,e[s][1]+=i,t.push(e[s])},_bezierMeetSubdivision:function(t,e,i){var r,s,n,o,a,l,u,c,h,d,p,f,_=[];return s=this._bezierBbox(e),r=this._bezierBbox(t),this._bezierOverlap(s,r)?i<5?(l=(n=this._bezierSplit(t))[0],u=n[1],o=(n=this._bezierSplit(e))[0],a=n[1],this._bezierListConcat(_,this._bezierMeetSubdivision(l,o,i+1),0,0),this._bezierListConcat(_,this._bezierMeetSubdivision(l,a,i+1),0,.5),this._bezierListConcat(_,this._bezierMeetSubdivision(u,o,i+1),.5,0),this._bezierListConcat(_,this._bezierMeetSubdivision(u,a,i+1),.5,.5),_):(p=[1].concat(t[0]),f=[1].concat(t[3]),h=[1].concat(e[0]),d=[1].concat(e[3]),(c=this.meetSegmentSegment(p,f,h,d))[1]>=0&&c[2]>=0&&c[1]<=1&&c[2]<=1?[c]:[]):[]},_bezierLineMeetSubdivision:function(t,e,i,r){var s,n,o,a,l,u,c,h,d,p,f=[];return s=this._bezierBbox(e),n=this._bezierBbox(t),r&&!this._bezierOverlap(n,s)?[]:i<5?(a=(o=this._bezierSplit(t))[0],l=o[1],this._bezierListConcat(f,this._bezierLineMeetSubdivision(a,e,i+1),0),this._bezierListConcat(f,this._bezierLineMeetSubdivision(l,e,i+1),.5),f):(d=[1].concat(t[0]),p=[1].concat(t[3]),c=[1].concat(e[0]),h=[1].concat(e[1]),(u=this.meetSegmentSegment(d,p,c,h))[1]>=0&&u[1]<=1&&(!r||u[2]>=0&&u[2]<=1)?[u]:[])},meetBeziersegmentBeziersegment:function(t,e,i){var r,s,n;for((r=4===t.length&&4===e.length?this._bezierMeetSubdivision(t,e,0):this._bezierLineMeetSubdivision(t,e,0,i)).sort((function(t,e){return 1e7*(t[1]-e[1])+(t[2]-e[2])})),s=[],n=0;n<r.length;n++)0!==n&&r[n][1]===r[n-1][1]&&r[n][2]===r[n-1][2]||s.push(r[n]);return s},meetBezierCurveRedBlueSegments:function(t,e,i){var r,n,a,u,c,h,d,p,f,_,m,g,y,v=l.A.evaluate(i),A=0,b=0,C=[];if(e.numberPoints<e.bezierDegree+1||t.numberPoints<t.bezierDegree+1)return[0,NaN,NaN];for(1===t.bezierDegree&&3===e.bezierDegree&&(h=t,t=e,e=h),g=e.numberPoints-e.bezierDegree,y=t.numberPoints-t.bezierDegree,t.type===s.A.OBJECT_TYPE_SECTOR&&(A=3,y-=3),e.type===s.A.OBJECT_TYPE_SECTOR&&(b=3,g-=3),n=A;n<y;n+=t.bezierDegree)for(d=[(r=t.points)[n].usrCoords.slice(1),r[n+1].usrCoords.slice(1)],3===t.bezierDegree&&(d[2]=r[n+2].usrCoords.slice(1),d[3]=r[n+3].usrCoords.slice(1)),f=this._bezierBbox(d),a=b;a<g;a+=e.bezierDegree)if(p=[(r=e.points)[a].usrCoords.slice(1),r[a+1].usrCoords.slice(1)],3===e.bezierDegree&&(p[2]=r[a+2].usrCoords.slice(1),p[3]=r[a+3].usrCoords.slice(1)),_=this._bezierBbox(p),this._bezierOverlap(f,_)){if(0===(m=this.meetBeziersegmentBeziersegment(d,p)).length)continue;for(u=0;u<m.length;u++)(c=m[u])[1]<-o.A.eps||c[1]>1+o.A.eps||c[2]<-o.A.eps||c[2]>1+o.A.eps||C.push(c);if(C.length>v)return C[v][0]}return C.length>v?C[v][0]:[0,NaN,NaN]},bezierSegmentEval:function(t,e){var i,r,s,n=1-t;return r=0,s=0,r+=(i=n*n*n)*e[0][0],s+=i*e[0][1],r+=(i=3*t*n*n)*e[1][0],s+=i*e[1][1],r+=(i=3*t*t*n)*e[2][0],s+=i*e[2][1],[1,r+=(i=t*t*t)*e[3][0],s+=i*e[3][1]]},bezierArc:function(t,e,i,r,s){var n,a,u,c,h,d,p,f,_,m,g,y,v,A,b,C,x,P=.5*Math.PI,E=e[1],w=e[2],S=e[0],O=[],M=[];for(h=this.distance(e,t),E/=S,w/=S,d=this.rad(t.slice(1),e.slice(1),i.slice(1)),-1===s&&(d=2*Math.PI-d),(n=t)[1]/=n[0],n[2]/=n[0],n[0]/=n[0],c=n.slice(0),r?(O=[E,E+.333*(n[1]-E),E+.666*(n[1]-E),n[1]],M=[w,w+.333*(n[2]-w),w+.666*(n[2]-w),n[2]]):(O=[n[1]],M=[n[2]]);d>o.A.eps;)d>P?(p=P,d-=P):(p=d,d=0),x=[[1,0,0],[E*(1-(f=Math.cos(s*p)))+w*(_=Math.sin(s*p)),f,-_],[w*(1-f)-E*_,_,f]],c=[(b=o.A.matVecMult(x,n))[0]/b[0],b[1]/b[0],b[2]/b[0]],m=n[1]-E,g=n[2]-w,y=c[1]-E,v=c[2]-w,C=o.A.hypot(m+y,g+v),A=Math.abs(v-g)>o.A.eps?(m+y)*(h/C-.5)/(v-g)*8/3:(g+v)*(h/C-.5)/(m-y)*8/3,a=[1,n[1]-A*g,n[2]+A*m],u=[1,c[1]+A*v,c[2]-A*y],l.A.concat(O,[a[1],u[1],c[1]]),l.A.concat(M,[a[2],u[2],c[2]]),n=c.slice(0);return r&&(l.A.concat(O,[c[1]+.333*(E-c[1]),c[1]+.666*(E-c[1]),E]),l.A.concat(M,[c[2]+.333*(w-c[2]),c[2]+.666*(w-c[2]),w])),[O,M]},projectPointToCircle:function(t,e,i){var r,a,u,c,h,d=e.center.coords.usrCoords;return l.A.exists(i)||(i=t.board),l.A.isPoint(t)?(r=t.coords.distance(s.A.COORDS_BY_USER,e.center.coords),a=t.coords.usrCoords):(r=t.distance(s.A.COORDS_BY_USER,e.center.coords),a=t.usrCoords),Math.abs(r)<o.A.eps&&(r=o.A.eps),h=e.Radius()/r,u=d[1]+h*(a[1]-d[1]),c=d[2]+h*(a[2]-d[2]),new n.A(s.A.COORDS_BY_USER,[u,c],i)},projectPointToLine:function(t,e,i){var r,a=[0,e.stdform[1],e.stdform[2]];return l.A.exists(i)||(i=l.A.exists(t.coords)?t.board:e.board),r=l.A.exists(t.coords)?t.coords.usrCoords:t.usrCoords,a=o.A.crossProduct(a,r),new n.A(s.A.COORDS_BY_USER,o.A.crossProduct(a,e.stdform),i)},projectCoordsToSegment:function(t,e,i){var r,s=[i[1]-e[1],i[2]-e[2]],n=[t[1]-e[1],t[2]-e[2]];return Math.abs(s[0])<o.A.eps&&Math.abs(s[1])<o.A.eps?[e,0]:(r=o.A.innerProduct(n,s),[[1,(r/=o.A.innerProduct(s,s))*s[0]+e[1],r*s[1]+e[2]],r])},projectCoordsToBeziersegment:function(t,e,i){var s;return s=r.A.Math.Numerics.fminbr((function(r){var s=[1,e.X(i+r),e.Y(i+r)];return s[1]-=t[1],s[2]-=t[2],s[1]*s[1]+s[2]*s[2]}),[0,1]),[[1,e.X(s+i),e.Y(s+i)],s]},projectPointToCurve:function(t,e,i){l.A.exists(i)||(i=t.board);var r=t.X(),s=t.Y(),n=t.position||0;return this.projectCoordsToCurve(r,s,n,e,i)},projectCoordsToCurve:function(t,e,i,r,o){var u,c,h,d,p,f,_,m,g,y,v,A,b,C,x,P,E,w,S,O,M,T,j=Number.POSITIVE_INFINITY;if(l.A.exists(o)||(o=r.board),"plot"===l.A.evaluate(r.visProp.curvetype)){if(i=0,p=j,u=0===r.numberPoints?[0,1,1]:[r.Z(0),r.X(0),r.Y(0)],r.numberPoints>1)for(m=[1,t,e],3===r.bezierDegree?d=0:v=[r.Z(0),r.X(0),r.Y(0)],h=0;h<r.numberPoints-1;h++)3===r.bezierDegree?b=this.projectCoordsToBeziersegment(m,r,d):(A=[r.Z(h+1),r.X(h+1),r.Y(h+1)],b=this.projectCoordsToSegment(m,v,A)),_=b[1],g=b[0],0<=_&&_<=1?(f=this.distance(g,m),y=h+_):_<0?(g=v,f=this.distance(v,m),y=h):_>1&&h===r.numberPoints-2&&(g=A,f=this.distance(g,m),y=r.numberPoints-1),f<p&&(p=f,i=y,u=g),3===r.bezierDegree?(d++,h+=2):v=A;c=new n.A(s.A.COORDS_BY_USER,u,o)}else{for(C=function(i){var s,n;return i<r.minX()||i>r.maxX()?1/0:(s=t-r.X(i))*s+(n=e-r.Y(i))*n},E=C(i),M=r.minX(),w=((T=r.maxX())-M)/50,x=M,h=0;h<50;h++)((P=C(x))<E||E===1/0||isNaN(E))&&(i=x,E=P),x+=w;for(S=w,h=0;h<20&&isNaN(C(i-S));h++,S*=.5);for(isNaN(C(i-S))&&(S=0),O=w,h=0;h<20&&isNaN(C(i+O));h++,O*=.5);isNaN(C(i+O))&&(O=0),i=(i=(i=a.A.fminbr(C,[Math.max(i-S,M),Math.min(i+O,T)]))<M?M:i)>T?T:i,c=new n.A(s.A.COORDS_BY_USER,[r.X(i),r.Y(i)],o)}return[r.updateTransform(c),i]},projectCoordsToPolygon:function(t,e){var i,s,n,o,a,l=e.vertices.length,u=1/0;for(i=0;i<l-1;i++)0<=(n=r.A.Math.Geometry.projectCoordsToSegment(t,e.vertices[i].coords.usrCoords,e.vertices[i+1].coords.usrCoords))[1]&&n[1]<=1?(s=r.A.Math.Geometry.distance(n[0],t,3),o=n[0]):n[1]<0?(s=r.A.Math.Geometry.distance(e.vertices[i].coords.usrCoords,t,3),o=e.vertices[i].coords.usrCoords):(s=r.A.Math.Geometry.distance(e.vertices[i+1].coords.usrCoords,t,3),o=e.vertices[i+1].coords.usrCoords),s<u&&(a=o.slice(0),u=s);return a},projectPointToTurtle:function(t,e,i){var r,o,a,u,c,h,d,p,f,_,m=0,g=0,y=Number.POSITIVE_INFINITY,v=e.objects.length;for(l.A.exists(i)||(i=t.board),c=0;c<v;c++)(d=e.objects[c]).elementClass===s.A.OBJECT_CLASS_CURVE&&(r=(f=this.projectPointToCurve(t,d))[0],_=f[1],(h=this.distance(r.usrCoords,t.coords.usrCoords))<y&&(a=r.usrCoords[1],u=r.usrCoords[2],o=_,y=h,p=d,g=m),m+=d.numberPoints);return r=new n.A(s.A.COORDS_BY_USER,[a,u],i),[p.updateTransform(r),o+g]},projectPointToPoint:function(t,e){return e.coords},projectPointToBoard:function(t,e){var i,r,s,n=e||t.board,a=[[1,1,0,0,3,0,1],[-1,2,1,0,1,2,1],[-1,1,2,2,1,2,3],[1,2,3,0,3,2,3]],l=t.coords||t,u=n.getBoundingBox();for(i=0;i<4;i++)(s=a[i])[0]*l.usrCoords[s[1]]<s[0]*u[s[2]]&&((r=o.A.crossProduct([1,u[s[3]],u[s[4]]],[1,u[s[5]],u[s[6]]]))[3]=0,r=o.A.normalize(r),l=this.projectPointToLine({coords:l},{stdform:r},n));return l},projectCoordsToParametric:function(t,e,i){var r,s,n,a=i.length;return 1===a?r=.1*(e.range[1]-e.range[0]):2===a&&(r=.1*Math.min(e.range_u[1]-e.range_u[0],e.range_v[1]-e.range_v[0])),s=r/5e6,n=function(i,r,s,n){var o=t[0]-e.X.apply(null,s),a=t[1]-e.Y.apply(null,s),l=t[2]-e.Z.apply(null,s);return 1===i?(n[0]=s[0]-e.range[0],n[1]=-s[0]+e.range[1]):2===i&&(n[0]=s[0]-e.range_u[0],n[1]=-s[0]+e.range_u[1],n[2]=s[1]-e.range_v[0],n[3]=-s[1]+e.range_v[1]),o*o+a*a+l*l},o.A.Nlp.FindMinimum(n,a,2*a,i,r,s,0,200),[1,e.X.apply(null,i),e.Y.apply(null,i),e.Z.apply(null,i)]},projectScreenCoordsToParametric:function(t,e,i){var r,s,n,a=i.length;return 1===a?r=.1*(e.range[1]-e.range[0]):2===a&&(r=.1*Math.min(e.range_u[1]-e.range_u[0],e.range_v[1]-e.range_v[0])),s=r/5e6,n=function(i,r,s,n){var o=[1,e.X.apply(null,s),e.Y.apply(null,s),e.Z.apply(null,s)],a=e.view.project3DTo2D(o),l=t[0]-a[1],u=t[1]-a[2];return 1===i?(n[0]=s[0]-e.range[0],n[1]=-s[0]+e.range[1]):2===i&&(n[0]=s[0]-e.range_u[0],n[1]=-s[0]+e.range_u[1],n[2]=s[1]-e.range_v[0],n[3]=-s[1]+e.range_v[1]),l*l+u*u},o.A.Nlp.FindMinimum(n,a,2*a,i,r,s,0,200),[1,e.X.apply(null,i),e.Y.apply(null,i),e.Z.apply(null,i)]},distPointLine:function(t,e){var i,r=e[1],s=e[2],n=e[0];return Math.abs(r)+Math.abs(s)<o.A.eps?Number.POSITIVE_INFINITY:(i=r*t[1]+s*t[2]+n,r*=r,s*=s,Math.abs(i)/Math.sqrt(r+s))},distPointSegment:function(t,e,i){var r,s,n,a,l,u,c=o.A.eps*o.A.eps,h=1e6;return r=(r=t[1]-e[1])===1/0?h:r===-1/0?-h:r,s=(s=t[2]-e[2])===1/0?h:s===-1/0?-h:s,(l=(n=(n=i[1]-e[1])===1/0?h:n===-1/0?-h:n)*n+(a=(a=i[2]-e[2])===1/0?h:a===-1/0?-h:a)*a)>c&&((u=(r*n+s*a)/l)<0?u=0:u>1&&(u=1),r-=u*n,s-=u*a),o.A.hypot(r,s)},reuleauxPolygon:function(t,e){var i,r=2*Math.PI,s=r/e,n=(e-1)/2,a=0,l=function(l,u){return function(c,h){var d=(c%r+r)%r,p=Math.floor(d/s)%e;return h||(a=t[0].Dist(t[n]),i=o.A.Geometry.rad([t[0].X()+1,t[0].Y()],t[0],t[n%e])),isNaN(p)?p:(d=.5*d+p*s*.5+i,t[p][l]()+a*Math[u](d))}};return[l("X","cos"),l("Y","sin"),0,r]},meet3Planes:function(t,e,i,r,s,n){var a,l,u,c,h,d=[0,0,0];for(a=o.A.crossProduct(s,t),l=o.A.crossProduct(t,i),u=o.A.crossProduct(i,s),c=o.A.innerProduct(t,u,3),h=0;h<3;h++)d[h]=(e*u[h]+r*a[h]+n*l[h])/c;return d},meetPlanePlane:function(t,e,i,r){var s,n,a,u=[0,0,0],c=[0,0,0];for(s=0;s<3;s++)u[s]=l.A.evaluate(t[s]),c[s]=l.A.evaluate(e[s]);for(n=o.A.crossProduct(u,c),s=0;s<3;s++)u[s]=l.A.evaluate(i[s]),c[s]=l.A.evaluate(r[s]);return a=o.A.crossProduct(u,c),o.A.crossProduct(n,a)},project3DTo3DPlane:function(t,e,i){var r,s;return i=i||[0,0,0],r=o.A.norm(e),s=(o.A.innerProduct(t,e,3)-o.A.innerProduct(i,e,3))/r,o.A.axpy(-s,e,t)},getPlaneBounds:function(t,e,i,r,s){var n,o,l,u,c;return t[2]+e[0]!==0?(l=[[t[0],e[0]],[t[1],e[1]]],u=[r-i[0],r-i[1]],n=(c=a.A.Gauss(l,u))[0],o=c[1],u=[s-i[0],s-i[1]],[n,(c=a.A.Gauss(l,u))[0],o,c[1]]):null}});const c=o.A.Geometry},315:(t,e,i)=>{i.d(e,{A:()=>l});var r=i(533),s=i(259),n=i(514);r.A.Math.DoubleBits=function(){var t,e,i,r,s,n,o,a,l=new Float64Array(1),u=new Uint32Array(l.buffer);void 0!==Float64Array&&(l[0]=1,1072693248===u[1]?(t=function(t){return l[0]=t,[u[0],u[1]]},e=function(t,e){return u[0]=t,u[1]=e,l[0]},i=function(t){return l[0]=t,u[0]},r=function(t){return l[0]=t,u[1]},this.doubleBits=t,this.pack=e,this.lo=i,this.hi=r):1072693248===u[0]&&(s=function(t){return l[0]=t,[u[1],u[0]]},n=function(t,e){return u[1]=t,u[0]=e,l[0]},o=function(t){return l[0]=t,u[1]},a=function(t){return l[0]=t,u[0]},this.doubleBits=s,this.pack=n,this.lo=o,this.hi=a))},r.A.extend(r.A.Math.DoubleBits.prototype,{sign:function(t){return this.hi(t)>>>31},exponent:function(t){return(this.hi(t)<<1>>>21)-1023},fraction:function(t){var e=this.lo(t),i=this.hi(t),r=1048575&i;return 2146435072&i&&(r+=1<<20),[e,r]},denormalized:function(t){return!(2146435072&this.hi(t))}});var o=new r.A.Math.DoubleBits,a=function(t,e){if(void 0!==t&&void 0!==e){if(s.A.IntervalArithmetic.isInterval(t)){if(!s.A.IntervalArithmetic.isSingleton(t))throw new TypeError("JXG.Math.IntervalArithmetic: interval `lo` must be a singleton");this.lo=t.lo}else this.lo=t;if(s.A.IntervalArithmetic.isInterval(e)){if(!s.A.IntervalArithmetic.isSingleton(e))throw new TypeError("JXG.Math.IntervalArithmetic: interval `hi` must be a singleton");this.hi=e.hi}else this.hi=e}else{if(void 0!==t)return Array.isArray(t)?new a(t[0],t[1]):new a(t,t);this.lo=this.hi=0}};r.A.extend(a.prototype,{print:function(){console.log("[",this.lo,this.hi,"]")},set:function(t,e){return this.lo=t,this.hi=e,this},bounded:function(t,e){return this.set(s.A.IntervalArithmetic.prev(t),s.A.IntervalArithmetic.next(e))},boundedSingleton:function(t){return this.bounded(t,t)},assign:function(t,e){if("number"!==typeof t||"number"!==typeof e)throw new TypeError("JXG.Math.Interval#assign: arguments must be numbers");return isNaN(t)||isNaN(e)||t>e?this.setEmpty():this.set(t,e)},setEmpty:function(){return this.set(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},setWhole:function(){return this.set(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)},open:function(t,e){return this.assign(s.A.IntervalArithmetic.next(t),s.A.IntervalArithmetic.prev(e))},halfOpenLeft:function(t,e){return this.assign(s.A.IntervalArithmetic.next(t),e)},halfOpenRight:function(t,e){return this.assign(t,s.A.IntervalArithmetic.prev(e))},toArray:function(){return[this.lo,this.hi]},clone:function(){return(new a).set(this.lo,this.hi)}}),r.A.Math.IntervalArithmetic={Interval:function(t,e){return new a(t,e)},isInterval:function(t){return null!==t&&"object"===typeof t&&"number"===typeof t.lo&&"number"===typeof t.hi},isSingleton:function(t){return t.lo===t.hi},add:function(t,e){return n.A.isNumber(t)&&(t=this.Interval(t)),n.A.isNumber(e)&&(e=this.Interval(e)),new a(this.addLo(t.lo,e.lo),this.addHi(t.hi,e.hi))},sub:function(t,e){return n.A.isNumber(t)&&(t=this.Interval(t)),n.A.isNumber(e)&&(e=this.Interval(e)),new a(this.subLo(t.lo,e.hi),this.subHi(t.hi,e.lo))},mul:function(t,e){var i,r,s,o,l;return n.A.isNumber(t)&&(t=this.Interval(t)),n.A.isNumber(e)&&(e=this.Interval(e)),this.isEmpty(t)||this.isEmpty(e)?this.EMPTY.clone():(i=t.lo,r=t.hi,s=e.lo,o=e.hi,l=new a,i<0?r>0?s<0?o>0?(l.lo=Math.min(this.mulLo(i,o),this.mulLo(r,s)),l.hi=Math.max(this.mulHi(i,s),this.mulHi(r,o))):(l.lo=this.mulLo(r,s),l.hi=this.mulHi(i,s)):o>0?(l.lo=this.mulLo(i,o),l.hi=this.mulHi(r,o)):(l.lo=0,l.hi=0):s<0?o>0?(l.lo=this.mulLo(i,o),l.hi=this.mulHi(i,s)):(l.lo=this.mulLo(r,o),l.hi=this.mulHi(i,s)):o>0?(l.lo=this.mulLo(i,o),l.hi=this.mulHi(r,s)):(l.lo=0,l.hi=0):r>0?s<0?o>0?(l.lo=this.mulLo(r,s),l.hi=this.mulHi(r,o)):(l.lo=this.mulLo(r,s),l.hi=this.mulHi(i,o)):o>0?(l.lo=this.mulLo(i,s),l.hi=this.mulHi(r,o)):(l.lo=0,l.hi=0):(l.lo=0,l.hi=0),l)},div:function(t,e){return n.A.isNumber(t)&&(t=this.Interval(t)),n.A.isNumber(e)&&(e=this.Interval(e)),this.isEmpty(t)||this.isEmpty(e)?this.EMPTY.clone():this.zeroIn(e)?0!==e.lo?0!==e.hi?this.divZero(t):this.divNegative(t,e.lo):0!==e.hi?this.divPositive(t,e.hi):this.EMPTY.clone():this.divNonZero(t,e)},positive:function(t){return new a(t.lo,t.hi)},negative:function(t){return n.A.isNumber(t)?new a(-t):new a(-t.hi,-t.lo)},isEmpty:function(t){return t.lo>t.hi},isWhole:function(t){return t.lo===-1/0&&t.hi===1/0},zeroIn:function(t){return this.hasValue(t,0)},hasValue:function(t,e){return!this.isEmpty(t)&&(t.lo<=e&&e<=t.hi)},hasInterval:function(t,e){return!!this.isEmpty(t)||!this.isEmpty(e)&&e.lo<=t.lo&&t.hi<=e.hi},intervalsOverlap:function(t,e){return!this.isEmpty(t)&&!this.isEmpty(e)&&(t.lo<=e.lo&&e.lo<=t.hi||e.lo<=t.lo&&t.lo<=e.hi)},divNonZero:function(t,e){var i=t.lo,r=t.hi,s=e.lo,n=e.hi,o=new a;return r<0?n<0?(o.lo=this.divLo(r,s),o.hi=this.divHi(i,n)):(o.lo=this.divLo(i,s),o.hi=this.divHi(r,n)):i<0?n<0?(o.lo=this.divLo(r,n),o.hi=this.divHi(i,n)):(o.lo=this.divLo(i,s),o.hi=this.divHi(r,s)):n<0?(o.lo=this.divLo(r,n),o.hi=this.divHi(i,s)):(o.lo=this.divLo(i,n),o.hi=this.divHi(r,s)),o},divPositive:function(t,e){return 0===t.lo&&0===t.hi?t:this.zeroIn(t)?this.WHOLE:t.hi<0?new a(Number.NEGATIVE_INFINITY,this.divHi(t.hi,e)):new a(this.divLo(t.lo,e),Number.POSITIVE_INFINITY)},divNegative:function(t,e){return 0===t.lo&&0===t.hi?t:this.zeroIn(t)?this.WHOLE:t.hi<0?new a(this.divLo(t.hi,e),Number.POSITIVE_INFINITY):new a(Number.NEGATIVE_INFINITY,this.divHi(t.lo,e))},divZero:function(t){return 0===t.lo&&0===t.hi?t:this.WHOLE},fmod:function(t,e){var i,r;return n.A.isNumber(t)&&(t=this.Interval(t)),n.A.isNumber(e)&&(e=this.Interval(e)),this.isEmpty(t)||this.isEmpty(e)?this.EMPTY.clone():(i=t.lo<0?e.lo:e.hi,r=(r=t.lo/i)<0?Math.ceil(r):Math.floor(r),this.sub(t,this.mul(e,new a(r))))},multiplicativeInverse:function(t){return n.A.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t)?this.EMPTY.clone():this.zeroIn(t)?0!==t.lo?0!==t.hi?this.WHOLE:new a(Number.NEGATIVE_INFINITY,this.divHi(1,t.lo)):0!==t.hi?new a(this.divLo(1,t.hi),Number.POSITIVE_INFINITY):this.EMPTY.clone():new a(this.divLo(1,t.hi),this.divHi(1,t.lo))},pow:function(t,e){var i,r;if(n.A.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t))return this.EMPTY.clone();if(this.isInterval(e)){if(!this.isSingleton(e))return this.EMPTY.clone();e=e.lo}return 0===e?0===t.lo&&0===t.hi?this.EMPTY.clone():this.ONE.clone():e<0?this.pow(this.multiplicativeInverse(t),-e):e%1===0?t.hi<0?(i=this.powLo(-t.hi,e),r=this.powHi(-t.lo,e),1===(1&e)?new a(-r,-i):new a(i,r)):t.lo<0?1===(1&e)?new a(-this.powLo(-t.lo,e),this.powHi(t.hi,e)):new a(0,this.powHi(Math.max(-t.lo,t.hi),e)):new a(this.powLo(t.lo,e),this.powHi(t.hi,e)):(console.warn("power is not an integer, you should use nth-root instead, returning an empty interval"),this.EMPTY.clone())},sqrt:function(t){return n.A.isNumber(t)&&(t=this.Interval(t)),this.nthRoot(t,2)},nthRoot:function(t,e){var i,r,s,o,l;if(n.A.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t)||e<0)return this.EMPTY.clone();if(this.isInterval(e)){if(!this.isSingleton(e))return this.EMPTY.clone();e=e.lo}return i=1/e,t.hi<0?e%1===0&&1===(1&e)?(r=this.powHi(-t.lo,i),s=this.powLo(-t.hi,i),new a(-r,-s)):this.EMPTY.clone():t.lo<0?(o=this.powHi(t.hi,i),e%1===0&&1===(1&e)?(l=-this.powHi(-t.lo,i),new a(l,o)):new a(0,o)):new a(this.powLo(t.lo,i),this.powHi(t.hi,i))},exp:function(t){return n.A.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t)?this.EMPTY.clone():new a(this.expLo(t.lo),this.expHi(t.hi))},log:function(t){var e;return n.A.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t)?this.EMPTY.clone():(e=t.lo<=0?Number.NEGATIVE_INFINITY:this.logLo(t.lo),new a(e,this.logHi(t.hi)))},ln:function(t){return this.log(t)},log10:function(t){return this.isEmpty(t)?this.EMPTY.clone():this.div(this.log(t),this.log(new a(10,10)))},log2:function(t){return this.isEmpty(t)?this.EMPTY.clone():this.div(this.log(t),this.log(new a(2,2)))},hull:function(t,e){var i=this.isEmpty(t),r=this.isEmpty(e);return i&&r?this.EMPTY.clone():i?e.clone():r?t.clone():new a(Math.min(t.lo,e.lo),Math.max(t.hi,e.hi))},intersection:function(t,e){var i,r;return this.isEmpty(t)||this.isEmpty(e)?this.EMPTY.clone():(i=Math.max(t.lo,e.lo))<=(r=Math.min(t.hi,e.hi))?new a(i,r):this.EMPTY.clone()},union:function(t,e){if(!this.intervalsOverlap(t,e))throw new Error("Interval#unions do not overlap");return new a(Math.min(t.lo,e.lo),Math.max(t.hi,e.hi))},difference:function(t,e){if(this.isEmpty(t)||this.isWhole(e))return this.EMPTY.clone();if(this.intervalsOverlap(t,e)){if(t.lo<e.lo&&e.hi<t.hi)throw new Error("Interval.difference: difference creates multiple intervals");return e.lo<=t.lo&&e.hi===1/0||e.hi>=t.hi&&e.lo===-1/0?this.EMPTY.clone():e.lo<=t.lo?(new a).halfOpenLeft(e.hi,t.hi):(new a).halfOpenRight(t.lo,e.lo)}return t.clone()},width:function(t){return this.isEmpty(t)?0:this.subHi(t.hi,t.lo)},abs:function(t){return n.A.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t)?this.EMPTY.clone():t.lo>=0?t.clone():t.hi<=0?this.negative(t):new a(0,Math.max(-t.lo,t.hi))},max:function(t,e){var i=this.isEmpty(t),r=this.isEmpty(e);return i&&r?this.EMPTY.clone():i?e.clone():r?t.clone():new a(Math.max(t.lo,e.lo),Math.max(t.hi,e.hi))},min:function(t,e){var i=this.isEmpty(t),r=this.isEmpty(e);return i&&r?this.EMPTY.clone():i?e.clone():r?t.clone():new a(Math.min(t.lo,e.lo),Math.min(t.hi,e.hi))},onlyInfinity:function(t){return!isFinite(t.lo)&&t.lo===t.hi},_handleNegative:function(t){var e;return t.lo<0&&(t.lo===-1/0?(t.lo=0,t.hi=1/0):(e=Math.ceil(-t.lo/this.piTwiceLow),t.lo+=this.piTwiceLow*e,t.hi+=this.piTwiceLow*e)),t},cos:function(t){var e,i,r,s,n,o,l,u;return this.isEmpty(t)||this.onlyInfinity(t)?this.EMPTY.clone():(e=(new a).set(t.lo,t.hi),this._handleNegative(e),i=this.PI_TWICE,r=this.fmod(e,i),this.width(r)>=i.lo?new a(-1,1):r.lo>=this.piHigh?(s=this.cos(this.sub(r,this.PI)),this.negative(s)):(n=r.lo,o=r.hi,l=this.cosLo(o),u=this.cosHi(n),o<=this.piLow?new a(l,u):o<=i.lo?new a(-1,Math.max(l,u)):new a(-1,1)))},sin:function(t){return this.isEmpty(t)||this.onlyInfinity(t)?this.EMPTY.clone():this.cos(this.sub(t,this.PI_HALF))},tan:function(t){var e,i,r;return this.isEmpty(t)||this.onlyInfinity(t)?this.EMPTY.clone():(e=(new a).set(t.lo,t.hi),this._handleNegative(e),r=this.PI,(i=this.fmod(e,r)).lo>=this.piHalfLow&&(i=this.sub(i,r)),i.lo<=-this.piHalfLow||i.hi>=this.piHalfLow?this.WHOLE.clone():new a(this.tanLo(i.lo),this.tanHi(i.hi)))},asin:function(t){var e,i;return this.isEmpty(t)||t.hi<-1||t.lo>1?this.EMPTY.clone():(e=t.lo<=-1?-this.piHalfHigh:this.asinLo(t.lo),i=t.hi>=1?this.piHalfHigh:this.asinHi(t.hi),new a(e,i))},acos:function(t){var e,i;return this.isEmpty(t)||t.hi<-1||t.lo>1?this.EMPTY.clone():(e=t.hi>=1?0:this.acosLo(t.hi),i=t.lo<=-1?this.piHigh:this.acosHi(t.lo),new a(e,i))},acot:function(t){return this.isEmpty(t)?this.EMPTY.clone():new a(this.acotLo(t.lo),this.acotHi(t.hi))},atan:function(t){return this.isEmpty(t)?this.EMPTY.clone():new a(this.atanLo(t.lo),this.atanHi(t.hi))},sinh:function(t){return this.isEmpty(t)?this.EMPTY.clone():new a(this.sinhLo(t.lo),this.sinhHi(t.hi))},cosh:function(t){return this.isEmpty(t)?this.EMPTY.clone():t.hi<0?new a(this.coshLo(t.hi),this.coshHi(t.lo)):t.lo>=0?new a(this.coshLo(t.lo),this.coshHi(t.hi)):new a(1,this.coshHi(-t.lo>t.hi?t.lo:t.hi))},tanh:function(t){return this.isEmpty(t)?this.EMPTY.clone():new a(this.tanhLo(t.lo),this.tanhHi(t.hi))},equal:function(t,e){return this.isEmpty(t)?this.isEmpty(e):!this.isEmpty(e)&&t.lo===e.lo&&t.hi===e.hi},notEqual:function(t,e){return this.isEmpty(t)?!this.isEmpty(e):this.isEmpty(e)||t.hi<e.lo||t.lo>e.hi},lt:function(t,e){return n.A.isNumber(t)&&(t=this.Interval(t)),n.A.isNumber(e)&&(e=this.Interval(e)),!this.isEmpty(t)&&!this.isEmpty(e)&&t.hi<e.lo},gt:function(t,e){return n.A.isNumber(t)&&(t=this.Interval(t)),n.A.isNumber(e)&&(e=this.Interval(e)),!this.isEmpty(t)&&!this.isEmpty(e)&&t.lo>e.hi},leq:function(t,e){return n.A.isNumber(t)&&(t=this.Interval(t)),n.A.isNumber(e)&&(e=this.Interval(e)),!this.isEmpty(t)&&!this.isEmpty(e)&&t.hi<=e.lo},geq:function(t,e){return n.A.isNumber(t)&&(t=this.Interval(t)),n.A.isNumber(e)&&(e=this.Interval(e)),!this.isEmpty(t)&&!this.isEmpty(e)&&t.lo>=e.hi},piLow:3.141592653589793,piHigh:3.1415926535897936,piHalfLow:1.5707963267948966,piHalfHigh:1.5707963267948968,piTwiceLow:6.283185307179586,piTwiceHigh:6.283185307179587,identity:function(t){return t},_prev:function(t){return t===1/0?t:this.nextafter(t,-1/0)},_next:function(t){return t===-1/0?t:this.nextafter(t,1/0)},prev:function(t){return this._prev(t)},next:function(t){return this._next(t)},toInteger:function(t){return t<0?Math.ceil(t):Math.floor(t)},addLo:function(t,e){return this.prev(t+e)},addHi:function(t,e){return this.next(t+e)},subLo:function(t,e){return this.prev(t-e)},subHi:function(t,e){return this.next(t-e)},mulLo:function(t,e){return this.prev(t*e)},mulHi:function(t,e){return this.next(t*e)},divLo:function(t,e){return this.prev(t/e)},divHi:function(t,e){return this.next(t/e)},intLo:function(t){return this.toInteger(this.prev(t))},intHi:function(t){return this.toInteger(this.next(t))},logLo:function(t){return this.prev(Math.log(t))},logHi:function(t){return this.next(Math.log(t))},expLo:function(t){return this.prev(Math.exp(t))},expHi:function(t){return this.next(Math.exp(t))},sinLo:function(t){return this.prev(Math.sin(t))},sinHi:function(t){return this.next(Math.sin(t))},cosLo:function(t){return this.prev(Math.cos(t))},cosHi:function(t){return this.next(Math.cos(t))},tanLo:function(t){return this.prev(Math.tan(t))},tanHi:function(t){return this.next(Math.tan(t))},asinLo:function(t){return this.prev(Math.asin(t))},asinHi:function(t){return this.next(Math.asin(t))},acosLo:function(t){return this.prev(Math.acos(t))},acosHi:function(t){return this.next(Math.acos(t))},acotLo:function(t){return this.prev(s.A.acot(t))},acotHi:function(t){return this.next(s.A.acot(t))},atanLo:function(t){return this.prev(Math.atan(t))},atanHi:function(t){return this.next(Math.atan(t))},sinhLo:function(t){return this.prev(s.A.sinh(t))},sinhHi:function(t){return this.next(s.A.sinh(t))},coshLo:function(t){return this.prev(s.A.cosh(t))},coshHi:function(t){return this.next(s.A.cosh(t))},tanhLo:function(t){return this.prev(s.A.tanh(t))},tanhHi:function(t){return this.next(s.A.tanh(t))},sqrtLo:function(t){return this.prev(Math.sqrt(t))},sqrtHi:function(t){return this.next(Math.sqrt(t))},powLo:function(t,e){var i;if(e%1!==0)return this.prev(Math.pow(t,e));for(i=1===(1&e)?t:1,e>>=1;e>0;)t=this.mulLo(t,t),1===(1&e)&&(i=this.mulLo(t,i)),e>>=1;return i},powHi:function(t,e){var i;if(e%1!==0)return this.next(Math.pow(t,e));for(i=1===(1&e)?t:1,e>>=1;e>0;)t=this.mulHi(t,t),1===(1&e)&&(i=this.mulHi(t,i)),e>>=1;return i},disable:function(){this.next=this.prev=this.identity},enable:function(){this.prev=function(t){return this._prev(t)},this.next=function(t){return this._next(t)}},SMALLEST_DENORM:Math.pow(2,-1074),UINT_MAX:-1>>>0,nextafter:function(t,e){var i,r;return isNaN(t)||isNaN(e)?NaN:t===e?t:0===t?e<0?-this.SMALLEST_DENORM:this.SMALLEST_DENORM:(r=o.hi(t),i=o.lo(t),e>t===t>0?i===this.UINT_MAX?(r+=1,i=0):i+=1:0===i?(i=this.UINT_MAX,r-=1):i-=1,o.pack(i,r))}},r.A.Math.IntervalArithmetic.PI=new a(s.A.IntervalArithmetic.piLow,s.A.IntervalArithmetic.piHigh),r.A.Math.IntervalArithmetic.PI_HALF=new a(s.A.IntervalArithmetic.piHalfLow,s.A.IntervalArithmetic.piHalfHigh),r.A.Math.IntervalArithmetic.PI_TWICE=new a(s.A.IntervalArithmetic.piTwiceLow,s.A.IntervalArithmetic.piTwiceHigh),r.A.Math.IntervalArithmetic.ZERO=new a(0),r.A.Math.IntervalArithmetic.ONE=new a(1),r.A.Math.IntervalArithmetic.WHOLE=(new a).setWhole(),r.A.Math.IntervalArithmetic.EMPTY=(new a).setEmpty();const l=r.A.Math.IntervalArithmetic},259:(t,e,i)=>{i.d(e,{A:()=>a});var r,s=i(533),n=i(514),o=function(t){var e,i;return t.memo||(e={},i=Array.prototype.join,t.memo=function(){var s=i.call(arguments);return e[s]!==r?e[s]:e[s]=t.apply(this,arguments)}),t.memo};s.A.Math={eps:1e-6,relDif:function(t,e){var i=Math.abs(t),r=Math.abs(e);return 0===(r=Math.max(i,r))?0:Math.abs(t-e)/r},mod:function(t,e){return t-Math.floor(t/e)*e},vector:function(t,e){var i,r;for(e=e||0,i=[],r=0;r<t;r++)i[r]=e;return i},matrix:function(t,e,i){var r,s,n;for(i=i||0,e=e||t,r=[],s=0;s<t;s++)for(r[s]=[],n=0;n<e;n++)r[s][n]=i;return r},identity:function(t,e){var i,s;for(e===r&&"number"!==typeof e&&(e=t),i=this.matrix(t,e),s=0;s<Math.min(t,e);s++)i[s][s]=1;return i},frustum:function(t,e,i,r,s,n){var o=this.matrix(4,4);return o[0][0]=2*s/(e-t),o[0][1]=0,o[0][2]=(e+t)/(e-t),o[0][3]=0,o[1][0]=0,o[1][1]=2*s/(r-i),o[1][2]=(r+i)/(r-i),o[1][3]=0,o[2][0]=0,o[2][1]=0,o[2][2]=-(n+s)/(n-s),o[2][3]=-n*s*2/(n-s),o[3][0]=0,o[3][1]=0,o[3][2]=-1,o[3][3]=0,o},projection:function(t,e,i,r){var s=i*Math.tan(t/2),n=s*e;return this.frustum(-n,n,-s,s,i,r)},matVecMult:function(t,e){var i,r,s,n=t.length,o=e.length,a=[];if(3===o)for(i=0;i<n;i++)a[i]=t[i][0]*e[0]+t[i][1]*e[1]+t[i][2]*e[2];else for(i=0;i<n;i++){for(r=0,s=0;s<o;s++)r+=t[i][s]*e[s];a[i]=r}return a},matMatMult:function(t,e){var i,r,s,n,o=t.length,a=o>0?e[0].length:0,l=e.length,u=this.matrix(o,a);for(i=0;i<o;i++)for(r=0;r<a;r++){for(s=0,n=0;n<l;n++)s+=t[i][n]*e[n][r];u[i][r]=s}return u},transpose:function(t){var e,i,r,s,n;for(s=t.length,n=t.length>0?t[0].length:0,e=this.matrix(n,s),i=0;i<n;i++)for(r=0;r<s;r++)e[i][r]=t[r][i];return e},inverse:function(t){var e,i,r,s,n,o,a,l=t.length,u=[],c=[],h=[];for(e=0;e<l;e++){for(u[e]=[],i=0;i<l;i++)u[e][i]=t[e][i];c[e]=e}for(i=0;i<l;i++){for(n=Math.abs(u[i][i]),o=i,e=i+1;e<l;e++)Math.abs(u[e][i])>n&&(n=Math.abs(u[e][i]),o=e);if(n<=this.eps)return[];if(o>i){for(r=0;r<l;r++)a=u[i][r],u[i][r]=u[o][r],u[o][r]=a;a=c[i],c[i]=c[o],c[o]=a}for(s=1/u[i][i],e=0;e<l;e++)u[e][i]*=s;for(u[i][i]=s,r=0;r<l;r++)if(r!==i){for(e=0;e<l;e++)e!==i&&(u[e][r]-=u[e][i]*u[i][r]);u[i][r]=-s*u[i][r]}}for(e=0;e<l;e++){for(r=0;r<l;r++)h[c[r]]=u[e][r];for(r=0;r<l;r++)u[e][r]=h[r]}return u},innerProduct:function(t,e,i){var s,o=0;for(i!==r&&n.A.isNumber(i)||(i=t.length),s=0;s<i;s++)o+=t[s]*e[s];return o},crossProduct:function(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]},norm:function(t,e){var i,s=0;for(e!==r&&n.A.isNumber(e)||(e=t.length),i=0;i<e;i++)s+=t[i]*t[i];return Math.sqrt(s)},axpy:function(t,e,i){var r,s=e.length,n=[];for(r=0;r<s;r++)n[r]=t*e[r]+i[r];return n},factorial:o((function(t){return t<0?NaN:0===(t=Math.floor(t))||1===t?1:t*this.factorial(t-1)})),binomial:o((function(t,e){var i,r;if(e>t||e<0)return NaN;if(e=Math.round(e),t=Math.round(t),0===e||e===t)return 1;for(i=1,r=0;r<e;r++)i*=t-r,i/=r+1;return i})),cosh:Math.cosh||function(t){return.5*(Math.exp(t)+Math.exp(-t))},sinh:Math.sinh||function(t){return.5*(Math.exp(t)-Math.exp(-t))},acosh:Math.acosh||function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:Math.asinh||function(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))},cot:function(t){return 1/Math.tan(t)},acot:function(t){return(t>=0?.5:-.5)*Math.PI-Math.atan(t)},nthroot:function(t,e){var i=1/e;return e<=0||Math.floor(e)!==e?NaN:0===t?0:t>0?Math.exp(i*Math.log(t)):e%2===1?-Math.exp(i*Math.log(-t)):NaN},cbrt:Math.cbrt||function(t){return this.nthroot(t,3)},pow:function(t,e){return 0===t?0===e?1:0:Math.floor(e)===e?Math.pow(t,e):t>0?Math.exp(e*Math.log(t)):NaN},ratpow:function(t,e,i){var r;return 0===e?1:0===i?NaN:(r=this.gcd(e,i),this.nthroot(this.pow(t,e/r),i/r))},log10:function(t){return Math.log(t)/Math.log(10)},log2:function(t){return Math.log(t)/Math.log(2)},log:function(t,e){return void 0!==e&&n.A.isNumber(e)?Math.log(t)/Math.log(e):Math.log(t)},sign:Math.sign||function(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1},squampow:function(t,e){var i;if(Math.floor(e)===e){for(i=1,e<0&&(t=1/t,e*=-1);0!==e;)1&e&&(i*=t),e>>=1,t*=t;return i}return this.pow(t,e)},gcd:function(t,e){var i;if(t=Math.abs(t),e=Math.abs(e),!n.A.isNumber(t)||!n.A.isNumber(e))return NaN;for(e>t&&(i=t,t=e,e=i);;){if(0===(t%=e))return e;if(0===(e%=t))return t}},lcm:function(t,e){var i;return n.A.isNumber(t)&&n.A.isNumber(e)?0!==(i=t*e)?i/this.gcd(t,e):0:NaN},roundToStep:function(t,e,i,r){var o,a,l=t;if(!n.A.exists(e)&&!n.A.exists(i)&&!n.A.exists(r))return l;if(s.A.exists(r)&&(l=Math.min(l,r)),s.A.exists(i)&&(l=Math.max(l,i)),a=i||0,s.A.exists(e)){if(o=(l-a)/e,Number.isInteger(o))return l;l=a+(o=Math.round(o))*e}return s.A.exists(r)&&(l=Math.min(l,r)),s.A.exists(i)&&(l=Math.max(l,i)),l},erf:function(t){return this.ProbFuncs.erf(t)},erfc:function(t){return this.ProbFuncs.erfc(t)},erfi:function(t){return this.ProbFuncs.erfi(t)},ndtr:function(t){return this.ProbFuncs.ndtr(t)},ndtri:function(t){return this.ProbFuncs.ndtri(t)},hypot:function(){var t,e,i,r;for(e=arguments.length,t=0,r=0;t<e;t++)r+=(i=arguments[t])*i;return Math.sqrt(r)},hstep:function(t){return t>0?1:t<0?0:.5},gamma:function(t){var e,i,r,s,n,o=[1,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];if(t<.5)i=Math.PI/(Math.sin(Math.PI*t)*this.gamma(1-t));else{for(t-=1,e=o[0],n=o.length,s=1;s<n;s++)e+=o[s]/(t+s);r=t+7+.5,i=Math.sqrt(2*Math.PI)*Math.pow(r,t+.5)*Math.exp(-r)*e}return i},lt:function(t,e){return t<e},leq:function(t,e){return t<=e},gt:function(t,e){return t>e},geq:function(t,e){return t>=e},eq:function(t,e){return t===e},neq:function(t,e){return t!==e},and:function(t,e){return t&&e},not:function(t){return!t},or:function(t,e){return t||e},xor:function(t,e){return(t||e)&&!(t&&e)},decToFraction:function(t,e){var i,r,s,o,a,l,u,c,h,d=0;for(e=n.A.def(e,.001),r=(t=1e-12*Math.round(1e12*t))<0?-1:1,t=Math.abs(t),i=Math.floor(t),t-=Math.floor(t),l=1,o=a=s=0,h=0,u=c=1;t-Math.floor(t)>e&&d<20;)t=1/(t-s),o=l+(s=Math.floor(t))*a,u=h+s*c,l=a,h=c,a=o,c=u,d++;return[r,i,o,u]},normalize:function(t){var e,i,r=2*t[3],s=t[4]/r;return t[5]=s,t[6]=-t[1]/r,t[7]=-t[2]/r,isFinite(s)?Math.abs(s)>=1?(t[0]=(t[6]*t[6]+t[7]*t[7]-s*s)/(2*s),t[1]=-t[6]/s,t[2]=-t[7]/s,t[3]=1/(2*s),t[4]=1):(i=s<=0?-1:1,t[0]=i*(t[6]*t[6]+t[7]*t[7]-s*s)*.5,t[1]=-i*t[6],t[2]=-i*t[7],t[3]=i/2,t[4]=i*s):(e=this.hypot(t[1],t[2]),t[0]/=e,t[1]/=e,t[2]/=e,t[3]=0,t[4]=1),t},toGL:function(t){var e,i,r;if(e="function"===typeof Float32Array?new Float32Array(16):new Array(16),4!==t.length&&4!==t[0].length)return e;for(i=0;i<4;i++)for(r=0;r<4;r++)e[i+4*r]=t[i][r];return e},Vieta:function(t){var e,i,r,s=t.length,n=[];for(n=t.slice(),e=1;e<s;++e){for(r=n[e],n[e]*=n[e-1],i=e-1;i>=1;--i)n[i]+=n[i-1]*r;n[0]+=r}return n}};const a=s.A.Math},985:(t,e,i)=>{i.d(e,{A:()=>l});var r=i(533),s=i(514),n=i(415),o=i(259),a={rk4:{s:4,A:[[0,0,0,0],[.5,0,0,0],[0,.5,0,0],[0,0,1,0]],b:[1/6,1/3,1/3,1/6],c:[0,.5,.5,1]},heun:{s:2,A:[[0,0],[1,0]],b:[.5,.5],c:[0,1]},euler:{s:1,A:[[0]],b:[1],c:[0]}};o.A.Numerics={Gauss:function(t,e){var i,r,n,a,l,u=o.A.eps,c=t.length>0?t[0].length:0;if(c!==e.length||c!==t.length)throw new Error("JXG.Math.Numerics.Gauss: Dimensions don't match. A must be a square matrix and b must be of the same length as A.");for(a=[],l=e.slice(0,c),i=0;i<c;i++)a[i]=t[i].slice(0,c);for(r=0;r<c;r++){for(i=c-1;i>r;i--)if(Math.abs(a[i][r])>u)if(Math.abs(a[r][r])<u)s.A.swap(a,i,r),s.A.swap(l,i,r);else for(a[i][r]/=a[r][r],l[i]-=a[i][r]*l[r],n=r+1;n<c;n++)a[i][n]-=a[i][r]*a[r][n];if(Math.abs(a[r][r])<u)throw new Error("JXG.Math.Numerics.Gauss(): The given matrix seems to be singular.")}return this.backwardSolve(a,l,!0),l},backwardSolve:function(t,e,i){var r,s,n,o,a;for(r=i?e:e.slice(0,e.length),s=t.length,n=t.length>0?t[0].length:0,o=s-1;o>=0;o--){for(a=n-1;a>o;a--)r[o]-=t[o][a]*r[a];r[o]/=t[o][o]}return r},gaussBareiss:function(t){var e,i,r,s,n,a,l,u,c,h=o.A.eps;if((l=t.length)<=0)return 0;for(t[0].length<l&&(l=t[0].length),u=[],s=0;s<l;s++)u[s]=t[s].slice(0,l);for(i=1,r=1,e=0;e<l-1;e++){if(a=u[e][e],Math.abs(a)<h){for(s=e+1;s<l&&!(Math.abs(u[s][e])>=h);s++);if(s===l)return 0;for(n=e;n<l;n++)c=u[s][n],u[s][n]=u[e][n],u[e][n]=c;r=-r,a=u[e][e]}for(s=e+1;s<l;s++)for(n=e+1;n<l;n++)c=a*u[s][n]-u[s][e]*u[e][n],u[s][n]=c/i;i=a}return r*u[l-1][l-1]},det:function(t){return 2===t.length&&2===t[0].length?t[0][0]*t[1][1]-t[1][0]*t[0][1]:this.gaussBareiss(t)},Jacobi:function(t){var e,i,r,s,n,a,l,u,c,h=o.A.eps*o.A.eps,d=0,p=t.length,f=[[0,0,0],[0,0,0],[0,0,0]],_=[[0,0,0],[0,0,0],[0,0,0]],m=0;for(e=0;e<p;e++){for(i=0;i<p;i++)f[e][i]=0,_[e][i]=t[e][i],d+=Math.abs(_[e][i]);f[e][e]=1}if(1===p)return[_,f];if(d<=0)return[_,f];d/=p*p;do{for(u=0,c=0,i=1;i<p;i++)for(e=0;e<i;e++)if((s=Math.abs(_[e][i]))>c&&(c=s),u+=s,s>=h){for(s=.5*Math.atan2(2*_[e][i],_[e][e]-_[i][i]),n=Math.sin(s),a=Math.cos(s),r=0;r<p;r++)l=_[r][e],_[r][e]=a*l+n*_[r][i],_[r][i]=-n*l+a*_[r][i],l=f[r][e],f[r][e]=a*l+n*f[r][i],f[r][i]=-n*l+a*f[r][i];for(_[e][e]=a*_[e][e]+n*_[i][e],_[i][i]=-n*_[e][i]+a*_[i][i],_[e][i]=0,r=0;r<p;r++)_[e][r]=_[r][e],_[i][r]=_[r][i]}m+=1}while(Math.abs(u)/d>h&&m<2e3);return[_,f]},NewtonCotes:function(t,e,i){var r,n,o,a=0,l=i&&s.A.isNumber(i.number_of_nodes)?i.number_of_nodes:28,u={trapez:!0,simpson:!0,milne:!0},c=i&&i.integration_type&&u.hasOwnProperty(i.integration_type)&&u[i.integration_type]?i.integration_type:"milne",h=(t[1]-t[0])/l;switch(c){case"trapez":for(a=.5*(e(t[0])+e(t[1])),r=t[0],n=0;n<l-1;n++)a+=e(r+=h);a*=h;break;case"simpson":if(l%2>0)throw new Error("JSXGraph:  INT_SIMPSON requires config.number_of_nodes dividable by 2.");for(o=l/2,a=e(t[0])+e(t[1]),r=t[0],n=0;n<o-1;n++)a+=2*e(r+=2*h);for(r=t[0]-h,n=0;n<o;n++)a+=4*e(r+=2*h);a*=h/3;break;default:if(l%4>0)throw new Error("JSXGraph: Error in INT_MILNE: config.number_of_nodes must be a multiple of 4");for(o=.25*l,a=7*(e(t[0])+e(t[1])),r=t[0],n=0;n<o-1;n++)a+=14*e(r+=4*h);for(r=t[0]-3*h,n=0;n<o;n++)a+=32*(e(r+=4*h)+e(r+2*h));for(r=t[0]-2*h,n=0;n<o;n++)a+=12*e(r+=4*h);a*=2*h/45}return a},Romberg:function(t,e,i){var r,n,o,a,l,u,c,h,d=[],p=0,f=1/0,_=i&&s.A.isNumber(i.max_iterations)?i.max_iterations:20,m=i&&s.A.isNumber(i.eps)?i.eps:i.eps||1e-7;for(r=t[0],o=(n=t[1])-r,l=1,d[0]=.5*o*(e(r)+e(n)),u=0;u<_;++u){for(a=0,o*=.5,l*=2,h=1,c=1;c<l;c+=2)a+=e(r+c*o);for(d[u+1]=.5*d[u]+a*o,p=d[u+1],c=u-1;c>=0;--c)h*=4,d[c]=d[c+1]+(d[c+1]-d[c])/(h-1),p=d[c];if(Math.abs(p-f)<m*Math.abs(p))break;f=p}return p},GaussLegendre:function(t,e,i){var r,n,o,a,l,u,c,h,d=0,p=[],f=[],_=i&&s.A.isNumber(i.n)?i.n:12;if(_>18&&(_=18),p[2]=[.5773502691896257],f[2]=[1],p[4]=[.33998104358485626,.8611363115940526],f[4]=[.6521451548625461,.34785484513745385],p[6]=[.2386191860831969,.6612093864662645,.932469514203152],f[6]=[.46791393457269104,.3607615730481386,.17132449237917036],p[8]=[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],f[8]=[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],p[10]=[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],f[10]=[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],p[12]=[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],f[12]=[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],p[14]=[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],f[14]=[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],p[16]=[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499],f[16]=[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096],p[18]=[.0847750130417353,.2518862256915055,.41175116146284263,.5597708310739475,.6916870430603532,.8037049589725231,.8926024664975557,.9558239495713977,.9915651684209309],f[18]=[.1691423829631436,.16427648374583273,.15468467512626524,.14064291467065065,.12255520671147846,.10094204410628717,.07642573025488905,.0497145488949698,.02161601352648331],p[3]=[0,.7745966692414834],f[3]=[.8888888888888888,.5555555555555556],p[5]=[0,.5384693101056831,.906179845938664],f[5]=[.5688888888888889,.47862867049936647,.23692688505618908],p[7]=[0,.4058451513773972,.7415311855993945,.9491079123427585],f[7]=[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],p[9]=[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],f[9]=[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],p[11]=[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],f[11]=[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],p[13]=[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],f[13]=[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],p[15]=[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],f[15]=[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],p[17]=[0,.17848418149584785,.3512317634538763,.5126905370864769,.6576711592166907,.7815140038968014,.8802391537269859,.9506755217687678,.9905754753144174],f[17]=[.17944647035620653,.17656270536699264,.16800410215645004,.15404576107681028,.13513636846852548,.11188384719340397,.08503614831717918,.0554595293739872,.02414830286854793],r=t[0],n=t[1],a=_+1>>1,c=p[_],h=f[_],u=.5*(n-r),l=.5*(n+r),!0&_)for(d=h[0]*e(l),o=1;o<a;++o)d+=h[o]*(e(l+u*c[o])+e(l-u*c[o]));else for(d=0,o=0;o<a;++o)d+=h[o]*(e(l+u*c[o])+e(l-u*c[o]));return u*d},_rescale_error:function(t,e,i){var r,s,n=2220446049250313e-31;return t=Math.abs(t),0!==i&&0!==t&&(t=(r=Math.pow(200*t/i,1.5))<1?i*r:i),e>20041683600089728e-310&&(s=50*n*e)>t&&(t=s),t},_gaussKronrod:function(t,e,i,r,s,n,o){var a,l,u,c,h,d,p,f,_,m,g,y=t[0],v=t[1],A=.5*(y+v),b=.5*(v-y),C=Math.abs(b),x=e(A),P=0,E=x*n[i-1],w=Math.abs(E),S=0,O=[],M=[];for(i%2===0&&(P=x*s[i/2-1]),a=Math.floor((i-1)/2),h=0;h<a;h++)m=(f=e(A-(p=b*r[d=2*h+1])))+(_=e(A+p)),O[d]=f,M[d]=_,P+=s[h]*m,E+=n[d]*m,w+=n[d]*(Math.abs(f)+Math.abs(_));for(a=Math.floor(i/2),h=0;h<a;h++)f=e(A-(p=b*r[g=2*h])),_=e(A+p),O[g]=f,M[g]=_,E+=n[g]*(f+_),w+=n[g]*(Math.abs(f)+Math.abs(_));for(u=.5*E,S=n[i-1]*Math.abs(x-u),h=0;h<i-1;h++)S+=n[h]*(Math.abs(O[h]-u)+Math.abs(M[h]-u));return c=(E-P)*b,w*=C,S*=C,l=E*=b,o.abserr=this._rescale_error(c,w,S),o.resabs=w,o.resasc=S,l},GaussKronrod15:function(t,e,i){return this._gaussKronrod(t,e,8,[.9914553711208126,.9491079123427585,.8648644233597691,.7415311855993945,.5860872354676911,.4058451513773972,.20778495500789848,0],[.1294849661688697,.27970539148927664,.3818300505051189,.4179591836734694],[.022935322010529224,.06309209262997856,.10479001032225019,.14065325971552592,.1690047266392679,.19035057806478542,.20443294007529889,.20948214108472782],i)},GaussKronrod21:function(t,e,i){return this._gaussKronrod(t,e,11,[.9956571630258081,.9739065285171717,.9301574913557082,.8650633666889845,.7808177265864169,.6794095682990244,.5627571346686047,.4333953941292472,.2943928627014602,.14887433898163122,0],[.06667134430868814,.1494513491505806,.21908636251598204,.26926671930999635,.29552422471475287],[.011694638867371874,.032558162307964725,.054755896574351995,.07503967481091996,.0931254545836976,.10938715880229764,.12349197626206584,.13470921731147334,.14277593857706009,.14773910490133849,.1494455540029169],i)},GaussKronrod31:function(t,e,i){return this._gaussKronrod(t,e,16,[.9980022986933971,.9879925180204854,.9677390756791391,.937273392400706,.8972645323440819,.8482065834104272,.790418501442466,.7244177313601701,.650996741297417,.5709721726085388,.4850818636402397,.3941513470775634,.29918000715316884,.20119409399743451,.1011420669187175,0],[.03075324199611727,.07036604748810812,.10715922046717194,.13957067792615432,.16626920581699392,.1861610000155622,.19843148532711158,.2025782419255613],[.005377479872923349,.015007947329316122,.02546084732671532,.03534636079137585,.04458975132476488,.05348152469092809,.06200956780067064,.06985412131872826,.07684968075772038,.08308050282313302,.08856444305621176,.09312659817082532,.09664272698362368,.09917359872179196,.10076984552387559,.10133000701479154],i)},_workspace:function(t,e){return{limit:e,size:0,nrmax:0,i:0,alist:[t[0]],blist:[t[1]],rlist:[0],elist:[0],order:[0],level:[0],qpsrt:function(){var t,e,i,r,s,n=this.size-1,o=this.limit,a=this.nrmax,l=this.order[a];if(n<2)return this.order[0]=0,this.order[1]=1,void(this.i=l);for(t=this.elist[l];a>0&&t>this.elist[this.order[a-1]];)this.order[a]=this.order[a-1],a--;for(s=n<o/2+2?n:o-n+1,i=a+1;i<s&&t<this.elist[this.order[i]];)this.order[i-1]=this.order[i],i++;for(this.order[i-1]=l,e=this.elist[n],r=s-1;r>i-2&&e>=this.elist[this.order[r]];)this.order[r+1]=this.order[r],r--;this.order[r+1]=n,l=this.order[a],this.i=l,this.nrmax=a},set_initial_result:function(t,e){this.size=1,this.rlist[0]=t,this.elist[0]=e},update:function(t,e,i,r,s,n,o,a){var l=this.i,u=this.size,c=this.level[this.i]+1;a>r?(this.alist[l]=s,this.rlist[l]=o,this.elist[l]=a,this.level[l]=c,this.alist[u]=t,this.blist[u]=e,this.rlist[u]=i,this.elist[u]=r,this.level[u]=c):(this.blist[l]=e,this.rlist[l]=i,this.elist[l]=r,this.level[l]=c,this.alist[u]=s,this.blist[u]=n,this.rlist[u]=o,this.elist[u]=a,this.level[u]=c),this.size++,c>this.maximum_level&&(this.maximum_level=c),this.qpsrt()},retrieve:function(){var t=this.i;return{a:this.alist[t],b:this.blist[t],r:this.rlist[t],e:this.elist[t]}},sum_results:function(){var t,e=this.size,i=0;for(t=0;t<e;t++)i+=this.rlist[t];return i},subinterval_too_small:function(t,e,i){var r=1.0000000000000222*(Math.abs(e)+22250738585072014e-321);return Math.abs(t)<=r&&Math.abs(i)<=r}}},Qag:function(t,e,i){var n,a,l,u,c,h,d,p,f,_,m,g,y,v,A,b,C,x,P=this._workspace(t,1e3),E=i&&s.A.isNumber(i.limit)?i.limit:15,w=i&&s.A.isNumber(i.epsrel)?i.epsrel:1e-7,S=i&&s.A.isNumber(i.epsabs)?i.epsabs:1e-7,O=i&&s.A.isFunction(i.q)?i.q:this.GaussKronrod15,M={},T=0,j=0,N=0,R=0,k=0,D=0,L=0,I=0,B=0,F=0;if(E>P.limit&&r.A.warn("iteration limit exceeds available workspace"),S<=0&&(w<50*o.A.eps||w<5e-29)&&r.A.warn("tolerance cannot be acheived with given epsabs and epsrel"),l=O.apply(this,[t,e,M]),u=M.abserr,c=M.resabs,h=M.resasc,P.set_initial_result(l,u),d=Math.max(S,w*Math.abs(l)),u<=11102230246251565e-30*c&&u>d)return r.A.warn("cannot reach tolerance because of roundoff error on first attempt"),-1/0;if(u<=d&&u!==h||0===u)return l;if(1===E)return r.A.warn("a maximum of one iteration was insufficient"),-1/0;n=l,a=u,T=1;do{k=0,D=0,L=0,I=0,B=0,F=0,g=(C=P.retrieve()).a,y=C.b,v=C.r,A=C.e,p=g,_=f=.5*(g+y),m=y,k=O.apply(this,[[p,f],e,M]),I=M.abserr,b=M.resasc,D=O.apply(this,[[_,m],e,M]),a+=(F=I+(B=M.abserr))-A,n+=(L=k+D)-v,b!==I&&M.resasc!==B&&(x=v-L,Math.abs(x)<=1e-5*Math.abs(L)&&F>=.99*A&&j++,T>=10&&F>A&&N++),a>(d=Math.max(S,w*Math.abs(n)))&&((j>=6||N>=20)&&(R=2),P.subinterval_too_small(p,_,m)&&(R=3)),P.update(p,f,k,I,_,m,D,B),g=(C=P.retrieve()).a_i,y=C.b_i,v=C.r_i,A=C.e_i,T++}while(T<E&&!R&&a>d);return P.sum_results()},I:function(t,e){return this.Qag(t,e,{q:this.GaussKronrod15,limit:15,epsrel:1e-7,epsabs:1e-7})},Newton:function(t,e,i){var r,n=0,a=o.A.eps,l=t.apply(i,[e]);for(s.A.isArray(e)&&(e=e[0]);n<50&&Math.abs(l)>a;)r=this.D(t,i)(e),Math.abs(r)>a?e-=l/r:e+=.2*Math.random()-1,l=t.apply(i,[e]),n+=1;return e},root:function(t,e,i){return this.chandrupatla(t,e,i)},generalizedNewton:function(t,e,i,r){var s,n,a,l,u,c,h,d,p,f,_,m,g,y,v=0;for(this.generalizedNewton.t1memo?(s=this.generalizedNewton.t1memo,n=this.generalizedNewton.t2memo):(s=i,n=r),f=(d=t.X(s)-e.X(n))*d+(p=t.Y(s)-e.Y(n))*p,_=this.D(t.X,t),m=this.D(e.X,e),g=this.D(t.Y,t),y=this.D(e.Y,e);f>o.A.eps&&v<10;)a=_(s),l=-m(n),u=g(s),s-=((c=-y(n))*d-l*p)/(h=a*c-l*u),n-=(a*p-u*d)/h,f=(d=t.X(s)-e.X(n))*d+(p=t.Y(s)-e.Y(n))*p,v+=1;return this.generalizedNewton.t1memo=s,this.generalizedNewton.t2memo=n,Math.abs(s)<Math.abs(n)?[t.X(s),t.Y(s)]:[e.X(n),e.Y(n)]},Neville:function(t){var e=[],i=function(i){return function(r,s){var n,a,l,u=o.A.binomial,c=t.length,h=c-1,d=0,p=0;if(!s)for(l=1,n=0;n<c;n++)e[n]=u(h,n)*l,l*=-1;for(a=r,n=0;n<c;n++){if(0===a)return t[n][i]();l=e[n]/a,a-=1,d+=t[n][i]()*l,p+=l}return d/p}};return[i("X"),i("Y"),0,function(){return t.length-1}]},splineDef:function(t,e){var i,r,s,n=Math.min(t.length,e.length),o=[],a=[],l=[],u=[],c=[],h=[];if(2===n)return[0,0];for(r=0;r<n;r++)i={X:t[r],Y:e[r]},l.push(i);for(l.sort((function(t,e){return t.X-e.X})),r=0;r<n;r++)t[r]=l[r].X,e[r]=l[r].Y;for(r=0;r<n-1;r++)u.push(t[r+1]-t[r]);for(r=0;r<n-2;r++)c.push(6*(e[r+2]-e[r+1])/u[r+1]-6*(e[r+1]-e[r])/u[r]);for(o.push(2*(u[0]+u[1])),a.push(c[0]),r=0;r<n-3;r++)s=u[r+1]/o[r],o.push(2*(u[r+1]+u[r+2])-s*u[r+1]),a.push(c[r+1]-s*a[r]);for(h[n-3]=a[n-3]/o[n-3],r=n-4;r>=0;r--)h[r]=(a[r]-u[r+1]*h[r+1])/o[r];for(r=n-3;r>=0;r--)h[r+1]=h[r];return h[0]=0,h[n-1]=0,h},splineEval:function(t,e,i,r){var n,o,a,l,u,c,h,d=Math.min(e.length,i.length),p=1,f=!1,_=[];for(s.A.isArray(t)?(p=t.length,f=!0):t=[t],n=0;n<p;n++){if(t[n]<e[0]||e[n]>e[d-1])return NaN;for(o=1;o<d&&!(t[n]<=e[o]);o++);a=i[o-=1],l=(i[o+1]-i[o])/(e[o+1]-e[o])-(e[o+1]-e[o])/6*(r[o+1]+2*r[o]),u=r[o]/2,c=(r[o+1]-r[o])/(6*(e[o+1]-e[o])),h=t[n]-e[o],_.push(a+(l+(u+c*h)*h)*h)}return f?_:_[0]},generatePolynomialTerm:function(t,e,i,r){var n,o=[];for(n=e;n>=0;n--)s.A.concat(o,["(",t[n].toPrecision(r),")"]),n>1?s.A.concat(o,["*",i,"<sup>",n,"<","/sup> + "]):1===n&&s.A.concat(o,["*",i," + "]);return o.join("")},lagrangePolynomial:function(t){var e=[],i=this,r=function(i,r){var s,n,o,a,l=t.length,u=0,c=0;if(!r)for(s=0;s<l;s++){for(e[s]=1,o=t[s].X(),n=0;n<l;n++)n!==s&&(e[s]*=o-t[n].X());e[s]=1/e[s]}for(s=0;s<l;s++){if(i===(o=t[s].X()))return t[s].Y();c+=a=e[s]/(i-o),u+=a*t[s].Y()}return u/c};return r.getTerm=function(e,r,s){return i.lagrangePolynomialTerm(t,e,r,s)()},r.getCoefficients=function(){return i.lagrangePolynomialCoefficients(t)()},r},lagrangePolynomialTerm:function(t,e,i,s){var a=this;return function(){var l,u,c,h,d,p=t.length,f=!0;for(i=i||"x",void 0===s&&(s=" * "),u=p-1,l=a.lagrangePolynomialCoefficients(t)(),c="",h=0;h<l.length;h++)d=l[h],Math.abs(d)<o.A.eps||(r.A.exists(e)&&(d=n.A._round10(d,-e)),f?(c+=d>0?d:"-"+-d,f=!1):c+=d>0?" + "+d:" - "+-d,u-h>1?c+=s+i+"^"+(u-h):u-h===1&&(c+=s+i));return c}},lagrangePolynomialCoefficients:function(t){return function(){var e,i,r,s,n=t.length,a=[],l=[],u=[];for(i=0;i<n;i++)u[i]=0;for(e=0;e<n;e++){for(r=t[e].Y(),s=t[e].X(),a=[],i=0;i<n;i++)i!==e&&(r/=s-t[i].X(),a.push(t[i].X()));for(l=[1].concat(o.A.Vieta(a)),i=0;i<l.length;i++)u[i]+=(i%2===1?-1:1)*l[i]*r}return u}},_initCubicPoly:function(t,e,i,r){return[t,i,-3*t+3*e-2*i-r,2*t-2*e+i+r]},CardinalSpline:function(t,e,i){var r,n,a,l,u=[],c=this;return l=s.A.isFunction(e)?e:function(){return e},void 0===i&&(i="uniform"),n=function(e){return function(s,n){var h,d,p,f,_,m,g,y,v,A;if(t.length<2)return NaN;if(!n)for(a=l(),p={X:function(){return 2*t[0].X()-t[1].X()},Y:function(){return 2*t[0].Y()-t[1].Y()},Dist:function(t){var e=this.X()-t.X(),i=this.Y()-t.Y();return o.A.hypot(e,i)}},f={X:function(){return 2*t[t.length-1].X()-t[t.length-2].X()},Y:function(){return 2*t[t.length-1].Y()-t[t.length-2].Y()},Dist:function(t){var e=this.X()-t.X(),i=this.Y()-t.Y();return o.A.hypot(e,i)}},A=(r=[p].concat(t,[f])).length,u[e]=[],h=0;h<A-3;h++)"centripetal"===i?(g=r[h].Dist(r[h+1]),y=r[h+2].Dist(r[h+1]),v=r[h+3].Dist(r[h+2]),g=Math.sqrt(g),y=Math.sqrt(y),v=Math.sqrt(v),y<o.A.eps&&(y=1),g<o.A.eps&&(g=y),v<o.A.eps&&(v=y),_=(r[h+1][e]()-r[h][e]())/g-(r[h+2][e]()-r[h][e]())/(y+g)+(r[h+2][e]()-r[h+1][e]())/y,m=(r[h+2][e]()-r[h+1][e]())/y-(r[h+3][e]()-r[h+1][e]())/(v+y)+(r[h+3][e]()-r[h+2][e]())/v,_*=y,m*=y,u[e][h]=c._initCubicPoly(r[h+1][e](),r[h+2][e](),a*_,a*m)):u[e][h]=c._initCubicPoly(r[h+1][e](),r[h+2][e](),a*(r[h+2][e]()-r[h][e]()),a*(r[h+3][e]()-r[h+1][e]()));return isNaN(s)?NaN:(A=t.length,s<=0?t[0][e]():s>=A?t[A-1][e]():(h=Math.floor(s))===s?t[h][e]():(s-=h,void 0===(d=u[e][h])?NaN:((d[3]*s+d[2])*s+d[1])*s+d[0]))}},[n("X"),n("Y"),0,function(){return t.length-1}]},CatmullRomSpline:function(t,e){return this.CardinalSpline(t,.5,e)},regressionPolynomial:function(t,e,i){var r,n,a,l,u,c,h="";if(s.A.isPoint(t)&&s.A.isFunction(t.Value))n=function(){return t.Value()};else if(s.A.isFunction(t))n=t;else{if(!s.A.isNumber(t))throw new Error("JSXGraph: Can't create regressionPolynomial from degree of type'"+typeof t+"'.");n=function(){return t}}if(3===arguments.length&&s.A.isArray(e)&&s.A.isArray(i))u=0;else if(2===arguments.length&&s.A.isArray(e)&&e.length>0&&s.A.isPoint(e[0]))u=1;else{if(!(2===arguments.length&&s.A.isArray(e)&&e.length>0&&e[0].usrCoords&&e[0].scrCoords))throw new Error("JSXGraph: Can't create regressionPolynomial. Wrong parameters.");u=2}return c=function(t,c){var d,p,f,_,m,g,y,v,A,b=e.length;if(A=Math.floor(n()),!c){if(1===u)for(a=[],l=[],d=0;d<b;d++)a[d]=e[d].X(),l[d]=e[d].Y();if(2===u)for(a=[],l=[],d=0;d<b;d++)a[d]=e[d].usrCoords[1],l[d]=e[d].usrCoords[2];if(0===u)for(a=[],l=[],d=0;d<b;d++)s.A.isFunction(e[d])?a.push(e[d]()):a.push(e[d]),s.A.isFunction(i[d])?l.push(i[d]()):l.push(i[d]);for(f=[],p=0;p<b;p++)f.push([1]);for(d=1;d<=A;d++)for(p=0;p<b;p++)f[p][d]=f[p][d-1]*a[p];m=l,_=o.A.transpose(f),g=o.A.matMatMult(_,f),y=o.A.matVecMult(_,m),r=o.A.Numerics.Gauss(g,y),h=o.A.Numerics.generatePolynomialTerm(r,A,"x",3)}for(v=r[A],d=A-1;d>=0;d--)v=v*t+r[d];return v},c.getTerm=function(){return h},c},bezier:function(t){var e,i,r=function(r){return function(s,n){var o=3*Math.floor(s),a=s%1,l=1-a;return n||(i=3*Math.floor((t.length-1)/3),e=Math.floor(i/3)),s<0?t[0][r]():s>=e?t[i][r]():isNaN(s)?NaN:l*l*(l*t[o][r]()+3*a*t[o+1][r]())+(3*l*t[o+2][r]()+a*t[o+3][r]())*a*a}};return[r("X"),r("Y"),0,function(){return Math.floor(t.length/3)}]},bspline:function(t,e){var i,r=function(r){return function(s,n){var o,a,l,u,c=t.length,h=c-1,d=e;if(h<=0)return NaN;if(h+2<=d&&(d=h+1),s<=0)return t[0][r]();if(s>=h-d+2)return t[h][r]();for(l=Math.floor(s)+d-1,i=function(t,e){var i,r=[];for(i=0;i<t+e+1;i++)r[i]=i<e?0:i<=t?i-e+1:t-e+2;return r}(h,d),u=function(t,e,i,r){var s,n,o,a,l,u=[];for(e[r]<=t&&t<e[r+1]?u[r]=1:u[r]=0,s=2;s<=i;s++)for(n=r-s+1;n<=r;n++)o=n<=r-s+1||n<0?0:u[n],a=n>=r?0:u[n+1],l=e[n+s-1]-e[n],u[n]=0===l?0:(t-e[n])/l*o,0!==(l=e[n+s]-e[n+1])&&(u[n]+=(e[n+s]-t)/l*a);return u}(s,i,d,l),o=0,a=l-d+1;a<=l;a++)a<c&&a>=0&&(o+=t[a][r]()*u[a]);return o}};return[r("X"),r("Y"),0,function(){return t.length-1}]},D:function(t,e){return s.A.exists(e)?function(i,r){var s=1e-5;return(t.apply(e,[i+s,r])-t.apply(e,[i-s,r]))/2e-5}:function(e,i){var r=1e-5;return(t(e+r,i)-t(e-r,i))/2e-5}},_riemannValue:function(t,e,i,r){var s,n,o,a;if(r<0&&("trapezoidal"!==i&&(t+=r),r*=-1,"lower"===i?i="upper":"upper"===i&&(i="lower")),a=.01*r,"right"===i)s=e(t+r);else if("middle"===i)s=e(t+.5*r);else if("left"===i||"trapezoidal"===i)s=e(t);else if("lower"===i){for(s=e(t),o=t+a;o<=t+r;o+=a)(n=e(o))<s&&(s=n);(n=e(t+r))<s&&(s=n)}else if("upper"===i){for(s=e(t),o=t+a;o<=t+r;o+=a)(n=e(o))>s&&(s=n);(n=e(t+r))>s&&(s=n)}else s="random"===i?e(t+r*Math.random()):"simpson"===i?(e(t)+4*e(t+.5*r)+e(t+r))/6:e(t);return s},riemann:function(t,e,i,r,n){var o,a,l,u,c,h,d,p,f,_,m,g,y,v,A=[],b=[],C=r,x=0;if(s.A.isArray(t)?(v=t[0],y=t[1]):y=t,(e=Math.floor(e))<=0)return[A,b,x];for(a=(n-r)/e,o=0;o<e;o++){if("simpson"===i){for(x+=this._riemannValue(C,y,i,a)*a,m=.5*a,d=y(C),p=y(C+m),u=((f=y(C+2*m))+d-2*p)/(m*m)*.5,c=(f-d)/(2*m),h=p,l=0;l<30;l++)_=l*a/30-m,A.push(C+_+m),b.push(u*_*_+c*_+h);C+=a,g=f}else g=this._riemannValue(C,y,i,a),A.push(C),b.push(g),C+=a,"trapezoidal"===i?(x+=.5*(g+(f=y(C)))*a,g=f):x+=g*a,A.push(C),b.push(g);A.push(C),b.push(g)}for(o=0;o<e;o++){if("simpson"===i&&v){for(x-=this._riemannValue(C,v,i,-a)*a,m=.5*a,d=v(C),p=v(C-m),u=((f=v(C-2*m))+d-2*p)/(m*m)*.5,c=(f-d)/(2*m),h=p,l=0;l<30;l++)_=l*a/30-m,A.push(C-_-m),b.push(u*_*_+c*_+h);C-=a,g=f}else g=v?this._riemannValue(C,v,i,-a):0,A.push(C),b.push(g),C-=a,v&&("trapezoidal"===i?(x-=.5*(g+(f=v(C)))*a,g=f):x-=g*a);A.push(C),b.push(g),A.push(C),b.push(y(C))}return[A,b,x]},riemannsum:function(t,e,i,s,n){return r.A.deprecated("Numerics.riemannsum()","Numerics.riemann()[2]"),this.riemann(t,e,i,s,n)[2]},rungeKutta:function(t,e,i,r,n){var o,l,u,c,h,d,p=[],f=[],_=(i[1]-i[0])/r,m=i[0],g=e.length,y=[],v=0;for(s.A.isString(t)&&(t=a[t]||a.euler),d=t.s,p=e.slice(),l=0;l<=r;l++){for(y[v]=p.slice(),v++,c=[],u=0;u<d;u++){for(o=0;o<g;o++)f[o]=0;for(h=0;h<u;h++)for(o=0;o<g;o++)f[o]+=t.A[u][h]*_*c[h][o];for(o=0;o<g;o++)f[o]+=p[o];c.push(n(m+t.c[u]*_,f))}for(o=0;o<g;o++)f[o]=0;for(h=0;h<d;h++)for(o=0;o<g;o++)f[o]+=t.b[h]*c[h][o];for(o=0;o<g;o++)p[o]=p[o]+_*f[o];m+=_}return y},maxIterationsRoot:80,maxIterationsMinimize:500,findBracket:function(t,e,i){var r,n,o,a,l,u,c,h,d,p;if(s.A.isArray(e))return e;for(r=e,o=t.call(i,r),p=(a=[r-.1*(n=0===r?1:r),r+.1*n,r-1,r+1,r-.5*n,r+.5*n,r-.6*n,r+.6*n,r-1*n,r+1*n,r-2*n,r+2*n,r-5*n,r+5*n,r-10*n,r+10*n,r-50*n,r+50*n,r-100*n,r+100*n]).length,d=0;d<p&&(l=a[d],!(o*(u=t.call(i,l))<=0));d++);return l<r&&(c=r,r=l,l=c,h=o,o=u,u=h),[r,o,l,u]},fzero:function(t,e,i){var r,n,a,l,u,c,h,d,p,f,_,m,g,y,v,A=o.A.eps,b=this.maxIterationsRoot,C=0;if(s.A.isArray(e)){if(e.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");r=e[0],l=t.call(i,r),n=e[1],u=t.call(i,n)}else r=(h=this.findBracket(t,e,i))[0],l=h[1],n=h[2],u=h[3];if(Math.abs(l)<=A)return r;if(Math.abs(u)<=A)return n;if(l*u>0)return s.A.isArray(e)?this.fminbr(t,[r,n],i):this.Newton(t,r,i);for(a=r,c=l;C<b;){if(d=n-r,Math.abs(c)<Math.abs(u)&&(r=n,n=a,a=r,l=u,u=c,c=l),m=2*A*Math.abs(n)+.5*A,v=.5*(a-n),Math.abs(v)<=m||Math.abs(u)<=A)return n;Math.abs(d)>=m&&Math.abs(l)>Math.abs(u)&&(_=a-n,r===a?(g=_*(p=u/l),y=1-p):(g=(f=u/l)*(_*(y=l/c)*(y-(p=u/c))-(n-r)*(p-1)),y=(y-1)*(p-1)*(f-1)),g>0?y=-y:g=-g,g<.75*_*y-.5*Math.abs(m*y)&&g<Math.abs(d*y*.5)&&(v=g/y)),Math.abs(v)<m&&(v=v>0?m:-m),r=n,l=u,n+=v,((u=t.call(i,n))>0&&c>0||u<0&&c<0)&&(a=r,c=l),C++}return n},chandrupatla:function(t,e,i){var r,n,a,l,u,c,h,d,p,f,_,m,g,y,v,A,b,C,x,P,E=0,w=this.maxIterationsRoot,S=1+.001*Math.random(),O=.5*S,M=o.A.eps;if(s.A.isArray(e)){if(e.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");r=e[0],a=t.call(i,r),n=e[1],l=t.call(i,n)}else r=(u=this.findBracket(t,e,i))[0],a=u[1],n=u[2],l=u[3];if(a*l>0)return s.A.isArray(e)?this.fminbr(t,[r,n],i):this.Newton(t,r,i);c=r,h=n,f=a,_=l;do{if(p=c+O*(h-c),g=t.call(i,p),Math.sign(g)===Math.sign(f)?(d=c,c=p,m=f,f=g):(d=h,h=c,m=_,_=f),y=c=p,v=f=g,Math.abs(_)<Math.abs(f)&&(y=h,v=_),(A=(2*M*Math.abs(y)+5e-6)/Math.abs(h-c))>.5||0===v)break;b=(c-h)/(d-h),C=(f-_)/(m-_),x=1-Math.sqrt(1-b),P=Math.sqrt(b),(O=x<C&&C<P?f/(_-f)*(m/(_-m))+f/(m-f)*(_/(m-_))*((d-c)/(h-c)):.5*S)<A&&(O=A),O>1-A&&(O=1-A),E++}while(E<=w);return y},fminbr:function(t,e,i){var r,n,a,l,u,c,h,d,p,f,_,m,g,y,v,A,b=.5*(3-Math.sqrt(5)),C=o.A.eps,x=o.A.eps,P=this.maxIterationsMinimize,E=0;if(!s.A.isArray(e)||e.length<2)throw new Error("JXG.Math.Numerics.fminbr: length of array x0 has to be at least two.");for(a=l=(r=e[0])+b*((n=e[1])-r),u=l,c=h=t.call(i,l),d=h;E<P;){if(p=n-r,f=.5*(r+n),_=x*Math.abs(a)+C/3,Math.abs(a-f)+.5*p<=2*_)return a;m=b*(a<f?n-a:r-a),Math.abs(a-u)>=_&&(g=(a-l)*(y=(a-l)*(c-d))-(a-u)*(v=(a-u)*(c-h)),(y=2*(y-v))>0?g=-g:y=-y,Math.abs(g)<Math.abs(m*y)&&g>y*(r-a+2*_)&&g<y*(n-a-2*_)&&(m=g/y)),Math.abs(m)<_&&(m=m>0?_:-_),v=a+m,(A=t.call(i,v))<=c?(v<a?n=a:r=a,l=u,u=a,a=v,h=d,d=c,c=A):(v<a?r=v:n=v,A<=d||u===a?(l=u,u=v,h=d,d=A):(A<=h||l===a||l===u)&&(l=v,h=A)),E+=1}return a},glomin:function(t,e){var i,r,s,n,a,l,u,c,h,d,p,f,_,m,g,y,v,A,b,C,x,P,E,w,S,O,M,T,j=1e7,N=o.A.eps,R=o.A.eps*o.A.eps,k=o.A.eps*o.A.eps*o.A.eps;if(S=e[0],O=e[1],M=t(S)<t(O)?S:O,T=i=O,r=S,x=v=t(O),v<(y=b=t(S))?y=v:T=S,O<=S)return y;for(h=.5*(1+16*k)*j,c=3,n=r-(g=M<=S||O<=M?.5*(S+O):M),u=9/11,(A=t(g))<y&&(T=g,y=A);;){if(l=g-i,w=O-r,d=_=(a=r-i)*a*(P=b-A)-n*n*(E=b-v),p=f=2*(n*E-a*P),c<1e6||b<=y)for(;p*(_*(x-b)+w*p*(b-y+N))<w*h*_*(w*p-_)&&(C=t(s=r+_/p))<y&&(T=s,y=C),p=1,!(w<=(_=1e-5*(O-S)*(c=1611*c%1048576))););else for(p=1,_=1e-5*(O-S)*(c=1611*c%1048576);_<w;)p*(_*(x-b)+w*p*(b-y+N))<w*h*_*(w*p-_)&&(C=t(s=r+_/p))<y&&(T=s,y=C),p=1,_=1e-5*(O-S)*(c=1611*c%1048576);for(d=(u=.5*(1+u))*(d+2*(_=h*n*a*l)*(m=Math.sqrt((b-y+N)/h))),_=(_=-.5*(n+(P+2.01*R)/(n*h)))<m||n<0?r+m:r+_,s=0<d*(p+=.5*f)?r+d/p:_;(O<=(s=Math.max(s,_))?(s=O,C=x):C=t(s),C<y&&(T=s,y=C),n=s-r,!(s<=_))&&(d=2*(b-C)/(j*n),!((1+9*k)*n<=Math.abs(d)))&&!(.5*h*(n*n+d*d)<=b-y+(C-y)+2*N);)s=.5*(r+s),u*=.9;if(O<=s)break;i=g,g=r,r=s,v=A,A=b,b=C}return[T,y]},polzeros:function(t,e,i,s,n){var o,a,l,u=[],c=[],h=[],d=function(t,e,i){var s,n,o=t.length-1;if(i=i||!1)for(n=r.A.C.mult(o,t[o]),s=o-1;s>0;s--)n.mult(e),n.add(r.A.C.mult(t[s],s));else for(n=r.A.C.copy(t[o]),s=o-1;s>=0;s--)n.mult(e),n.add(t[s]);return n},p=function(t,e,i){var s,n,o=t.length-1;if(i=i||!1)for(n=r.A.C.mult(o,t[0]),s=o-1;s>0;s--)n.mult(e),n.add(r.A.C.mult(t[o-s],s));else for(n=r.A.C.copy(t[0]),s=o-1;s>=0;s--)n.mult(e),n.add(t[o-s]);return n},f=function(t,e){var i,r,s=t.length-1;for(r=t[s],i=s-1;i>=0;i--)r=r*e+t[i];return r};for(i=i||Number.EPSILON,s=s||30,a=t.length,r.A.isNumber(e)&&e>=0&&e<a-1&&(a=e+1),o=0;o<a;o++)u.push(new r.A.Complex(t[o]));for(o=0;o<a;o++)if(0!==u[o].real||0!==u[o].imaginary){l=o;break}for(o=0;o<l;o++)c.push(new r.A.Complex(0));for(o=(a=(u=u.slice(l)).length)-1;o>=0&&(0===u[o].real&&0===u[o].imaginary);o--)u.pop();if(0===(a=u.length))return[];if(n)for(o=0;o<a-1;o++)h.push(new r.A.Complex(n[o]));else h=function(t){var e,i,s,n,o=t.length-1,a=2*Math.PI/o,l=Math.PI/o*.5,u=[];for((s=r.A.C.mult(-1,t[o-1])).div(r.A.C.mult(o,t[o])),n=r.A.C.div(d(t,s),t[o]),0===(i=Math.pow(r.A.C.abs(n),1/o))&&(i=1),e=0;e<o;e++)t=new r.A.Complex(i*Math.cos(a*e+l),i*Math.sin(a*e+l)),u[e]=r.A.C.add(s,t);return u}(u);return function(t,e,i,s){var n,o,a,l,u,c,h,_,m,g=[],y=[],v=0,A=s.length;for(o=0;o<A;o++)g.push(!1);for(o=0;o<t.length;o++)y.push(r.A.C.abs(t[o])*(4*o+1));for(n=0;n<i&&v<A;n++)for(o=0;o<A;o++)if(!g[o])if(c=d(t,s[o]),u=r.A.C.abs(s[o]),r.A.C.abs(c)<e*f(y,u)){if(g[o]=!0,++v===A)break}else{for(u>1?(l=r.A.C.div(1,s[o]),(m=p(t,l,!0)).div(p(t,l)),m.mult(l),c=r.A.C.sub(A,m),c=r.A.C.div(s[o],c)):c.div(d(t,s[o],!0)),h=new r.A.Complex(0),a=0;a<A;a++)a!==o&&(_=r.A.C.sub(s[o],s[a]),_=r.A.C.div(1,_),h.add(_));h.mult(c),h=r.A.C.sub(1,h),c.div(h),s[o].sub(c)}return n}(u,i,s,h),(h=c.concat(h)).sort((function(t,e){return t.real<e.real?-1:t.real>e.real?1:0})),h},RamerDouglasPeucker:function(t,e){var i,r,s,n=[],a=[],l=function(t,e,i,r,s){var n=function(t,e,i){var r,s,n,a,l,u,c,h,d,p,f,_=o.A.eps*o.A.eps,m=1e4,g=0,y=e;if(i-e<2)return[-1,0];if(n=t[e].scrCoords,a=t[i].scrCoords,isNaN(n[1])||isNaN(n[2]))return[NaN,e];if(isNaN(a[1])||isNaN(a[2]))return[NaN,i];for(s=e+1;s<i;s++){if(l=t[s].scrCoords,isNaN(l[1])||isNaN(l[2]))return[NaN,s];u=(u=(u=l[1]-n[1])===1/0?m:u)===-1/0?-m:u,c=(c=(c=l[2]-n[2])===1/0?m:c)===-1/0?-m:c,(p=(h=(h=(h=a[1]-n[1])===1/0?m:h)===-1/0?-m:h)*h+(d=(d=(d=a[2]-n[2])===1/0?m:d)===-1/0?-m:d)*d)>_?((f=(u*h+c*d)/p)<0?f=0:f>1&&(f=1),r=(u-=f*h)*u+(c-=f*d)*c):(f=0,r=u*u+c*c),r>g&&(g=r,y=s)}return[Math.sqrt(g),y]}(t,e,i),a=n[1];if(isNaN(n[0])){l(t,e,a-1,r,s),s.push(t[a]);do{++a}while(a<=i&&isNaN(t[a].scrCoords[1]+t[a].scrCoords[2]));a<=i&&s.push(t[a]),l(t,a+1,i,r,s)}else n[0]>r?(l(t,e,a,r,s),l(t,a,i,r,s)):s.push(t[i])};for(s=t.length,i=0;;){for(;i<s&&isNaN(t[i].scrCoords[1]+t[i].scrCoords[2]);)i+=1;for(r=i+1;r<s&&!isNaN(t[r].scrCoords[1]+t[r].scrCoords[2]);)r+=1;if(r--,i<s&&r>i&&((a=[])[0]=t[i],l(t,i,r,e,a),n=n.concat(a)),i>=s)break;r<s-1&&n.push(t[r+1]),i=r+1}return n},RamerDouglasPeuker:function(t,e){return r.A.deprecated("Numerics.RamerDouglasPeuker()","Numerics.RamerDouglasPeucker()"),this.RamerDouglasPeucker(t,e)},Visvalingam:function(t,e){var i,s,n,o,a,l,u,c,h,d=[],p=[],f=[];if((s=t.length)<=2)return t;for(d[0]={used:!0,lft:null,node:null},a=0,i=1;i<s-1;i++)n=Math.abs(r.A.Math.Numerics.det([t[i-1].usrCoords,t[i].usrCoords,t[i+1].usrCoords])),isNaN(n)||(h={v:n,idx:i},p.push(h),d[i]={used:!0,lft:a,node:h},d[a].rt=i,a=i);for(d[s-1]={used:!0,rt:null,lft:a,node:null},d[a].rt=s-1,o=-1/0;p.length>e;)p.sort((function(t,e){return e.v-t.v})),d[i=p.pop().idx].used=!1,o=d[i].node.v,a=d[i].lft,l=d[i].rt,d[a].rt=l,d[l].lft=a,null!==(u=d[a].lft)&&(n=Math.abs(r.A.Math.Numerics.det([t[u].usrCoords,t[a].usrCoords,t[l].usrCoords])),d[a].node.v=n>=o?n:o),null!==(c=d[l].rt)&&(n=Math.abs(r.A.Math.Numerics.det([t[a].usrCoords,t[l].usrCoords,t[c].usrCoords])),d[l].node.v=n>=o?n:o);f=[t[i=0]];do{i=d[i].rt,f.push(t[i])}while(null!==d[i].rt);return f}};const l=o.A.Numerics},362:(t,e,i)=>{i.d(e,{A:()=>o});var r=i(533),s=i(259),n=i(514);s.A.Statistics={sum:function(t){var e,i=t.length,r=0;for(e=0;e<i;e++)r+=t[e];return r},prod:function(t){var e,i=t.length,r=1;for(e=0;e<i;e++)r*=t[e];return r},mean:function(t){return t.length>0?this.sum(t)/t.length:0},median:function(t){var e,i;return t.length>0?(ArrayBuffer.isView(t)?(e=new Float64Array(t)).sort():(e=t.slice(0)).sort((function(t,e){return t-e})),1&(i=e.length)?e[parseInt(.5*i,10)]:.5*(e[.5*i-1]+e[.5*i])):0},percentile:function(t,e){var i,r,s,o,a,l=[];if(t.length>0){for(ArrayBuffer.isView(t)?(i=new Float64Array(t)).sort():(i=t.slice(0)).sort((function(t,e){return t-e})),r=i.length,o=n.A.isArray(e)?e:[e],s=0;s<o.length;s++)a=r*o[s]*.01,parseInt(a,10)===a?l.push(.5*(i[a-1]+i[a])):l.push(i[parseInt(a,10)]);return n.A.isArray(e)?l:l[0]}return 0},variance:function(t){var e,i,r,s=t.length;if(s>1){for(e=this.mean(t),i=0,r=0;r<s;r++)i+=(t[r]-e)*(t[r]-e);return i/(t.length-1)}return 0},sd:function(t){return Math.sqrt(this.variance(t))},weightedMean:function(t,e){if(t.length!==e.length)throw new Error("JSXGraph error (Math.Statistics.weightedMean): Array dimension mismatch.");return t.length>0?this.mean(this.multiply(t,e)):0},max:function(t){return Math.max.apply(this,t)},min:function(t){return Math.min.apply(this,t)},range:function(t){return[this.min(t),this.max(t)]},abs:function(t){var e,i,r;if(n.A.isArray(t))if(t.map)r=t.map(Math.abs);else for(i=t.length,r=[],e=0;e<i;e++)r[e]=Math.abs(t[e]);else r=ArrayBuffer.isView(t)?t.map(Math.abs):Math.abs(t);return r},add:function(t,e){var i,r,s=[];if(t=n.A.evalSlider(t),e=n.A.evalSlider(e),n.A.isArray(t)&&n.A.isNumber(e))for(r=t.length,i=0;i<r;i++)s[i]=t[i]+e;else if(n.A.isNumber(t)&&n.A.isArray(e))for(r=e.length,i=0;i<r;i++)s[i]=t+e[i];else if(n.A.isArray(t)&&n.A.isArray(e))for(r=Math.min(t.length,e.length),i=0;i<r;i++)s[i]=t[i]+e[i];else s=t+e;return s},div:function(t,e){var i,r,s=[];if(t=n.A.evalSlider(t),e=n.A.evalSlider(e),n.A.isArray(t)&&n.A.isNumber(e))for(r=t.length,i=0;i<r;i++)s[i]=t[i]/e;else if(n.A.isNumber(t)&&n.A.isArray(e))for(r=e.length,i=0;i<r;i++)s[i]=t/e[i];else if(n.A.isArray(t)&&n.A.isArray(e))for(r=Math.min(t.length,e.length),i=0;i<r;i++)s[i]=t[i]/e[i];else s=t/e;return s},divide:function(){r.A.deprecated("Statistics.divide()","Statistics.div()"),s.A.Statistics.div.apply(s.A.Statistics,arguments)},mod:function(t,e,i){var r,o,a=[],l=function(t,e){return t%e};if((i=n.A.def(i,!1))&&(l=s.A.mod),t=n.A.evalSlider(t),e=n.A.evalSlider(e),n.A.isArray(t)&&n.A.isNumber(e))for(o=t.length,r=0;r<o;r++)a[r]=l(t[r],e);else if(n.A.isNumber(t)&&n.A.isArray(e))for(o=e.length,r=0;r<o;r++)a[r]=l(t,e[r]);else if(n.A.isArray(t)&&n.A.isArray(e))for(o=Math.min(t.length,e.length),r=0;r<o;r++)a[r]=l(t[r],e[r]);else a=l(t,e);return a},multiply:function(t,e){var i,r,s=[];if(t=n.A.evalSlider(t),e=n.A.evalSlider(e),n.A.isArray(t)&&n.A.isNumber(e))for(r=t.length,i=0;i<r;i++)s[i]=t[i]*e;else if(n.A.isNumber(t)&&n.A.isArray(e))for(r=e.length,i=0;i<r;i++)s[i]=t*e[i];else if(n.A.isArray(t)&&n.A.isArray(e))for(r=Math.min(t.length,e.length),i=0;i<r;i++)s[i]=t[i]*e[i];else s=t*e;return s},subtract:function(t,e){var i,r,s=[];if(t=n.A.evalSlider(t),e=n.A.evalSlider(e),n.A.isArray(t)&&n.A.isNumber(e))for(r=t.length,i=0;i<r;i++)s[i]=t[i]-e;else if(n.A.isNumber(t)&&n.A.isArray(e))for(r=e.length,i=0;i<r;i++)s[i]=t-e[i];else if(n.A.isArray(t)&&n.A.isArray(e))for(r=Math.min(t.length,e.length),i=0;i<r;i++)s[i]=t[i]-e[i];else s=t-e;return s},TheilSenRegression:function(t){var e,i,r=[],n=[],o=[];for(e=0;e<t.length;e++){for(n.length=0,i=0;i<t.length;i++)Math.abs(t[i].usrCoords[1]-t[e].usrCoords[1])>s.A.eps&&(n[i]=(t[i].usrCoords[2]-t[e].usrCoords[2])/(t[i].usrCoords[1]-t[e].usrCoords[1]));r[e]=this.median(n),o.push(t[e].usrCoords[2]-r[e]*t[e].usrCoords[1])}return[this.median(o),this.median(r),-1]},generateGaussian:function(t,e){var i,r,s;if(this.hasSpare)return this.hasSpare=!1,this.spare*e+t;do{s=(i=2*Math.random()-1)*i+(r=2*Math.random()-1)*r}while(s>=1||0===s);return s=Math.sqrt(-2*Math.log(s)/s),this.spare=r*s,this.hasSpare=!0,t+e*i*s},randomNormal:function(t,e){return this.generateGaussian(t,e)},randomUniform:function(t,e){return Math.random()*(e-t)+t},randomExponential:function(t){var e;if(t<=0)return NaN;do{e=Math.random()}while(0===e);return-Math.log(e)/t},randomGamma:function(t,e,i){var r,s,n,o,a,l;if(t<=0)return NaN;if(e=e||1,i=i||0,1===t)return e*this.randomExponential(1)+i;if(t<1){a=Math.E/(t+Math.E);do{r=Math.random();do{s=Math.random()}while(0===s);r<a?(n=Math.pow(s,1/t),l=Math.exp(-n)):(n=1-Math.log(s),l=Math.pow(n,t-1)),r=Math.random()}while(r>=l);return e*n+i}do{o=Math.tan(Math.PI*Math.random()),(n=Math.sqrt(2*t-1)*o+t-1)>0&&(s=Math.random())}while(n<=0||s>(1+o*o)*Math.exp((t-1)*Math.log(n/(t-1))-Math.sqrt(2*t-1)*o));return e*n+i},randomBeta:function(t,e){var i;return t<=0||e<=0?NaN:(i=this.randomGamma(t))/(i+this.randomGamma(e))},randomChisquare:function(t){return t<=0?NaN:2*this.randomGamma(.5*t)},randomF:function(t,e){return t<=0||e<=0?NaN:this.randomChisquare(t)*e/(this.randomChisquare(e)*t)},randomT:function(t){var e,i;return t<=0?NaN:(e=this.randomNormal(0,1),i=this.randomChisquare(t),e/Math.sqrt(i/t))},randomBinomial:function(t,e){var i,r,s,n,o;if(e<0||e>1||t<0)return NaN;if(0===e)return 0;if(1===e)return t;if(0===t)return 0;if(1===t)return Math.random()<e?1:0;if(e>.5)return t-this.randomBinomial(t,1-e);if(t<100){if(i=-1,r=0,0===(s=Math.log(1-e)))return 0;do{i+=1,r+=Math.floor(Math.log(Math.random())/s)+1}while(r<t)}else o=t-(n=1+Math.floor(.5*t))+1,i=(i=this.randomBeta(n,o))>=e?this.randomBinomial(n-1,e/i):n+this.randomBinomial(o-1,(e-i)/(1-i));return i},randomGeometric:function(t){var e;return t<0||t>1?NaN:(e=Math.random(),Math.ceil(Math.log(e)/Math.log(1-t)))},randomPoisson:function(t){var e,i,r=Math.exp(-t),s=0,n=1;if(t<=0)return NaN;if(t<10){do{n*=Math.random(),s+=1}while(n>r);e=s-1}else s=Math.floor(7/8*t),e=(i=this.randomGamma(s))<t?s+this.randomPoisson(t-i):this.randomBinomial(s-1,t/i);return e},randomHypergeometric:function(t,e,i){var r,s,n,o=t+e-i,a=Math.min(t,e),l=a;if(t<1||e<1||i>t+e)return NaN;for(r=i;l*r>0;)s=Math.random(),l-=Math.floor(s+l/(o+r)),r-=1;return n=a-l,t<=e?n:i-n},histogram:function(t,e){var i,s,n,o,a,l,u,c,h,d=[],p=[];for(l=e.bins||10,!1===(c=e.range||!1)?(o=Math.min.apply(null,t),a=Math.max.apply(null,t)):(o=c[0],a=c[1]),u=l>0?(a-o)/(l-1):0,i=0;i<l;i++)d.push(0),p.push(o+i*u);for(s=t.length,i=0;i<s;i++)(n=Math.floor((t[i]-o)/u))>=0&&n<l&&(d[n]+=1);if(e.density)for(h=r.A.Math.Statistics.sum(d),i=0;i<l;i++)d[i]/=h;if(e.cumulative)for(i=1;i<l;i++)d[i]+=d[i-1];return[d,p]}};const o=s.A.Statistics},412:(t,e,i)=>{i.d(e,{A:()=>l});var r=i(533),s=i(667),n=i(259),o=i(339),a=i(514);r.A.Options={jc:{enabled:!0,compile:!0},board:{animationDelay:35,axis:!1,boundingBox:[-5,5,5,-5],browserPan:!1,clickDelay:600,dblClickSuppressClick:!1,defaultAxes:{x:{name:"x",fixed:!0,ticks:{label:{visible:"inherit",anchorX:"middle",anchorY:"top",fontSize:12,offset:[0,-3]},tickEndings:[0,1],majorTickEndings:[1,1],drawZero:!1,needsRegularUpdate:!1,visible:"inherit"}},y:{name:"y",fixed:!0,ticks:{label:{visible:"inherit",anchorX:"right",anchorY:"middle",fontSize:12,offset:[-6,0]},tickEndings:[1,0],majorTickEndings:[1,1],drawZero:!1,needsRegularUpdate:!1,visible:"inherit"}}},description:"",document:!1,drag:{enabled:!0},fullscreen:{symbol:'<svg height="1em" width="1em" version="1.1" viewBox="10 10 18 18"><path fill="#666" d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"></path><path fill="#666" d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"></path><path fill="#666" d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"></path><path fill="#666" d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"></path></svg>',scale:.85,id:null},ignoreLabels:!0,intl:{enabled:!1},keepAspectRatio:!1,keyboard:{enabled:!0,dx:10,dy:10,panShift:!0,panCtrl:!1},logging:{enabled:!1},minimizeReflow:"none",maxBoundingBox:[-1/0,1/0,1/0,-1/0],maxFrameRate:40,maxNameLength:1,moveTarget:null,offsetX:0,offsetY:0,pan:{enabled:!0,needShift:!0,needTwoFingers:!1},registerEvents:!0,renderer:"auto",resize:{enabled:!0,throttle:10},screenshot:{scale:1,type:"png",symbol:"\u2318",css:"background-color:#eeeeee; opacity:1.0; border:2px solid black; border-radius:10px; text-align:center",cssButton:"padding: 4px 10px; border: solid #356AA0 1px; border-radius: 5px; position: absolute; right: 2ex; top: 2ex; background-color: rgba(255, 255, 255, 0.3);"},selection:{enabled:!1,name:"selectionPolygon",needShift:!1,needCtrl:!0,fillColor:"#ffff00",visible:!1,withLines:!1,vertices:{visible:!1}},showClearTraces:!1,showCopyright:!0,showFullscreen:!1,showInfobox:!0,showNavigation:!0,showReload:!1,showScreenshot:!1,showZoom:!0,takeFirst:!1,takeSizeFromFile:!1,theme:"default",title:"",viewport:[0,0,0,0],zoom:{enabled:!0,factorX:1.25,factorY:1.25,wheel:!0,needShift:!0,center:"auto",min:1e-4,max:1e4,pinch:!0,pinchHorizontal:!0,pinchVertical:!0,pinchSensitivity:7},zoomX:1,zoomY:1},navbar:{strokeColor:"#333333",fillColor:"transparent",highlightFillColor:"#aaaaaa",padding:"2px",position:"absolute",fontSize:"14px",cursor:"pointer",zIndex:"100",right:"5px",bottom:"5px"},elements:{dash:0,dashScale:!1,draft:{draft:!1,strokeColor:"#565656",fillColor:"#565656",strokeOpacity:.8,fillOpacity:.8,strokeWidth:1},dragToTopOfLayer:!1,fillColor:o.A.palette.red,fillOpacity:1,fixed:!1,frozen:!1,gradient:null,gradientAngle:0,gradientCX:.5,gradientCY:.5,gradientEndOffset:1,gradientFX:.5,gradientFY:.5,gradientFR:0,gradientR:.5,gradientSecondColor:"#ffffff",gradientSecondOpacity:1,gradientStartOffset:0,highlight:!0,highlightFillColor:"none",highlightFillOpacity:1,highlightStrokeColor:"#c3d9ff",highlightStrokeOpacity:1,highlightStrokeWidth:2,isLabel:!1,layer:0,lineCap:"butt",needsRegularUpdate:!0,precision:"inherit",priv:!1,rotatable:!0,scalable:!0,shadow:{enabled:!1,color:[0,0,0],opacity:1,blur:3,blend:.1,offset:[5,5]},snapToGrid:!1,strokeColor:o.A.palette.blue,strokeOpacity:1,strokeWidth:2,tabindex:0,trace:!1,traceAttributes:{},transitionDuration:100,transitionProperties:["fill","fill-opacity","stroke","stroke-opacity","stroke-width"],visible:!0,viewport:"inherit",withLabel:!1},ticks:{generateLabelText:null,generateLabelValue:null,drawLabels:!1,label:{},beautifulScientificTickLabels:!1,useUnicodeMinus:!0,anchor:"left",drawZero:!1,insertTicks:!1,minTicksDistance:10,minorHeight:4,majorHeight:10,tickEndings:[1,1],majorTickEndings:[1,1],ignoreInfiniteTickEndings:!0,minorTicks:4,ticksPerLabel:!1,scale:1,scaleSymbol:"",labels:[],maxLabelLength:5,precision:3,digits:3,ticksDistance:1,face:"|",strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"none",highlightFillColor:"none",visible:"inherit",includeBoundaries:!1,type:"linear",intl:{enabled:"inherit",options:{}},minorTicksInArrow:!1,majorTicksInArrow:!0,labelInArrow:!0,minorTicksInMargin:!1,majorTicksInMargin:!0,labelInMargin:!0},hatch:{drawLabels:!1,drawZero:!0,majorHeight:20,anchor:"middle",face:"|",strokeWidth:2,strokeColor:o.A.palette.blue,ticksDistance:.2},precision:{touch:30,touchMax:100,mouse:4,pen:4,epsilon:1e-4,hasPoint:4},layer:{numlayers:20,unused9:19,unused8:18,unused7:17,unused6:16,unused5:15,unused4:14,unused3:13,unused2:12,unused1:11,unused0:10,text:9,point:9,glider:9,arc:8,line:7,circle:6,curve:5,turtle:5,polygon:3,sector:3,angle:3,integral:3,axis:2,ticks:2,grid:1,image:0,trace:0},angle:{withLabel:!0,radius:"auto",type:"sector",orthoType:"square",orthoSensitivity:1,fillColor:o.A.palette.orange,highlightFillColor:o.A.palette.orange,strokeColor:o.A.palette.orange,fillOpacity:.3,highlightFillOpacity:.3,radiuspoint:{withLabel:!1,visible:!1,name:""},pointsquare:{withLabel:!1,visible:!1,name:""},dot:{visible:!1,strokeColor:"none",fillColor:"#000000",size:2,face:"o",withLabel:!1,name:""},label:{position:"top",offset:[0,0],strokeColor:o.A.palette.blue},arc:{visible:!1,fillColor:"none"}},arc:{selection:"auto",hasInnerPoints:!1,label:{anchorX:"auto",anchorY:"auto"},firstArrow:!1,lastArrow:!1,fillColor:"none",highlightFillColor:"none",strokeColor:o.A.palette.blue,highlightStrokeColor:"#c3d9ff",useDirection:!1,center:{},radiusPoint:{},anglePoint:{}},arrow:{firstArrow:!1,lastArrow:{type:1,highlightSize:6,size:6}},arrowparallel:{firstArrow:!1,lastArrow:{type:1,highlightSize:6,size:6}},axis:{name:"",needsRegularUpdate:!1,strokeWidth:1,lastArrow:{type:1,highlightSize:8,size:8},strokeColor:"#666666",highlightStrokeWidth:1,highlightStrokeColor:"#888888",position:"static",anchor:"",anchorDist:"10%",ticksAutoPos:!1,ticksAutoPosThreshold:"5%",withTicks:!0,straightFirst:!0,straightLast:!0,margin:-4,withLabel:!1,scalable:!1,ticks:{label:{offset:[4,-9],parse:!1,needsRegularUpdate:!1,display:"internal",visible:"inherit",layer:9},visible:"inherit",needsRegularUpdate:!1,strokeWidth:1,strokeColor:"#666666",highlightStrokeColor:"#888888",drawLabels:!0,drawZero:!1,insertTicks:!0,minTicksDistance:5,minorHeight:10,majorHeight:-1,tickEndings:[0,1],majorTickEndings:[1,1],minorTicks:4,ticksDistance:1,strokeOpacity:.25},point1:{needsRegularUpdate:!1,visible:!1},point2:{needsRegularUpdate:!1,visible:!1},tabindex:-1,label:{position:"lft",offset:[10,10]}},bisector:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},bisectorlines:{line1:{strokeColor:"#000000"},line2:{strokeColor:"#000000"}},boxplot:{dir:"vertical",smallWidth:.5,strokeWidth:2,strokeColor:o.A.palette.blue,fillColor:o.A.palette.blue,fillOpacity:.2,highlightStrokeWidth:2,highlightStrokeColor:o.A.palette.blue,highlightFillColor:o.A.palette.blue,highlightFillOpacity:.1},button:{disabled:!1,display:"html"},cardinalspline:{createPoints:!0,isArrayOfCoordinates:!0,points:{strokeOpacity:.05,fillOpacity:.05,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},chart:{chartStyle:"line",colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],highlightcolors:null,fillcolor:null,highlightonsector:!1,highlightbysize:!1,fillOpacity:.6,withLines:!1,label:{}},checkbox:{disabled:!1,checked:!1,display:"html"},circle:{hasInnerPoints:!1,fillColor:"none",highlightFillColor:"none",strokeColor:o.A.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,withLabel:!1,fixed:!1,fillColor:o.A.palette.red,strokeColor:o.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,name:""},point2:{fillColor:o.A.palette.red,strokeColor:o.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},label:{position:"urt"}},circumcircle:{fillColor:"none",highlightFillColor:"none",strokeColor:o.A.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:o.A.palette.red,strokeColor:o.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},circumcirclearc:{fillColor:"none",highlightFillColor:"none",strokeColor:o.A.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,withLabel:!1,fixed:!1,name:""}},circumcirclesector:{useDirection:!0,fillColor:o.A.palette.yellow,highlightFillColor:o.A.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,strokeColor:o.A.palette.blue,highlightStrokeColor:"#c3d9ff",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},comb:{frequency:.2,width:.4,angle:Math.PI/3,reverse:!1,point1:{visible:!1,withLabel:!1,fixed:!1,name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},strokeWidth:1,strokeColor:"#0000ff",fillColor:"none"},conic:{fillColor:"none",highlightFillColor:"none",strokeColor:o.A.palette.blue,highlightStrokeColor:"#c3d9ff",foci:{fixed:!1,visible:!1,withLabel:!1,name:""},center:{visible:!1,withLabel:!1,name:""},point:{withLabel:!1,name:""},line:{visible:!1}},curve:{strokeWidth:1,strokeColor:o.A.palette.blue,fillColor:"none",fixed:!0,curveType:null,doAdvancedPlot:!0,doAdvancedPlotOld:!1,firstArrow:!1,handDrawing:!1,label:{position:"lft"},lastArrow:!1,lineCap:"round",numberPointsHigh:1600,numberPointsLow:400,plotVersion:2,recursionDepthHigh:17,recursionDepthLow:15},foreignobject:{fixed:!0,visible:!0,needsRegularUpdate:!1,attractors:[]},functiongraph:{},glider:{label:{}},grid:{needsRegularUpdate:!1,hasGrid:!1,highlight:!1,gridX:null,gridY:null,majorStep:"auto",minorElements:0,forceSquare:!1,includeBoundaries:!1,size:void 0,face:void 0,margin:void 0,drawZero:void 0,polygonVertices:void 0,major:{size:5,face:"line",margin:0,drawZero:!0,polygonVertices:6},minor:{visible:"inherit",size:3,face:"point",margin:0,drawZero:!0,polygonVertices:6},snapToGrid:!1,strokeColor:"#c0c0c0",strokeWidth:1,strokeOpacity:.5,dash:0,theme:0,themes:[{},{forceSquare:"min",major:{face:"line"}},{major:{face:"line"},minor:{size:3,face:"point"},minorElements:"auto"},{major:{face:"line"},minor:{face:"line",strokeOpacity:.25},minorElements:"auto"},{major:{face:"line"},minor:{face:"+",size:"95%"},minorElements:"auto"},{major:{face:"+",size:10,strokeOpacity:1},minor:{face:"point",size:3},minorElements:"auto"},{major:{face:"circle",size:8,fillColor:"#c0c0c0"},minor:{face:"point",size:3},minorElements:"auto"}]},group:{needsRegularUpdate:!0},htmlslider:{widthRange:100,widthOut:34,step:.01,frozen:!0,isLabel:!1,strokeColor:"#000000",display:"html",anchorX:"left",anchorY:"middle",withLabel:!1},image:{imageString:null,fillOpacity:1,highlightFillOpacity:.6,cssClass:"JXGimage",highlightCssClass:"JXGimageHighlight",rotate:0,snapSizeX:1,snapSizeY:1,attractors:[]},implicitcurve:{margin:1,resolution_outer:5,resolution_inner:5,max_steps:1024,alpha_0:.05,tol_u0:n.A.eps,tol_newton:1e-7,tol_cusp:.05,tol_progress:1e-4,qdt_box:.2,kappa_0:.2,delta_0:.05,h_initial:.1,h_critical:.001,h_max:1,loop_dist:.09,loop_dir:.99,loop_detection:!0},incircle:{fillColor:"none",highlightFillColor:"none",strokeColor:o.A.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:o.A.palette.red,strokeColor:o.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},inequality:{fillColor:o.A.palette.red,fillOpacity:.2,strokeColor:"none",inverse:!1},infobox:{distanceX:-20,distanceY:25,intl:{enabled:"inherit",options:{}},fontSize:12,isLabel:!1,strokeColor:"#bbbbbb",display:"html",anchorX:"left",anchorY:"middle",cssClass:"JXGinfobox",rotate:0,visible:!0,parse:!1,transitionDuration:0,needsRegularUpdate:!1,tabindex:null,viewport:[0,0,0,0]},integral:{axis:"x",withLabel:!0,fixed:!0,strokeWidth:0,strokeOpacity:0,fillColor:o.A.palette.red,fillOpacity:.3,highlightFillColor:o.A.palette.red,highlightFillOpacity:.2,curveLeft:{visible:!0,withLabel:!1,color:o.A.palette.red,fillOpacity:.8,layer:9},baseLeft:{visible:!1,fixed:!1,withLabel:!1,name:""},curveRight:{visible:!0,withLabel:!1,color:o.A.palette.red,fillOpacity:.8,layer:9},baseRight:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{fontSize:20,digits:4,intl:{enabled:!1,options:{}}}},input:{disabled:!1,maxlength:524288,display:"html"},intersection:{alwaysIntersect:!0},label:{visible:"inherit",strokeColor:"#000000",strokeOpacity:1,highlightStrokeOpacity:.666666,highlightStrokeColor:"#000000",fixed:!0,position:"urt",distance:1.5,offset:[10,10],autoPosition:!1,autoPositionMinDistance:12,autoPositionMaxDistance:28},legend:{style:"vertical",labels:["1","2","3","4","5","6","7","8"],colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],rowHeight:20,strokeWidth:5},line:{firstArrow:!1,lastArrow:!1,margin:0,straightFirst:!0,straightLast:!0,fillColor:"none",highlightFillColor:"none",strokeColor:o.A.palette.blue,highlightStrokeColor:"#c3d9ff",withTicks:!1,point1:{fillColor:o.A.palette.red,strokeColor:o.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},point2:{fillColor:o.A.palette.red,strokeColor:o.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",layer:9,visible:!1,withLabel:!1,fixed:!1,name:""},ticks:{drawLabels:!0,label:{offset:[4,-9]},drawZero:!1,insertTicks:!1,ticksDistance:1,minTicksDistance:50,minorHeight:4,majorHeight:-1,minorTicks:4,strokeOpacity:.3,visible:"inherit"},label:{position:"llft"},snapToGrid:!1,snapSizeX:1,snapSizeY:1,touchFirstPoint:!1,touchLastPoint:!1},locus:{translateToOrigin:!1,translateTo10:!1,stretch:!1,toOrigin:null,to10:null},measurement:{baseUnit:"",units:{},dim:null,showPrefix:!0,showSuffix:!0,prefix:"",suffix:"",formatPrefix:function(t){return t},formatSuffix:function(t){return t},formatCoords:function(t,e,i){return"("+t+", "+e+")"},formatDirection:function(t,e){return"("+t+", "+e+")"}},metapostspline:{createPoints:!0,isArrayOfCoordinates:!0,points:{strokeOpacity:.5,fillOpacity:.5,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},mirrorelement:{fixed:!0,point:{},center:{},type:"Euclidean"},nonreflexangle:{},normal:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},orthogonalprojection:{},otherintersection:{alwaysIntersect:!0,precision:.001},parallel:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{position:"llft"}},parallelogram:{parallelpoint:{withLabel:!1,name:""}},parallelpoint:{},perpendicular:{strokeColor:"#000000",straightFirst:!0,straightLast:!0},perpendicularsegment:{strokeColor:"#000000",straightFirst:!1,straightLast:!1,point:{visible:!1,fixed:!0,withLabel:!1,name:""}},point:{withLabel:!0,label:{},style:5,face:"o",size:3,sizeUnit:"screen",strokeWidth:2,transitionProperties:["fill","fill-opacity","stroke","stroke-opacity","stroke-width","width","height","rx","ry"],fillColor:o.A.palette.red,strokeColor:o.A.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",zoom:!1,showInfobox:"inherit",infoboxDigits:"auto",draft:!1,attractors:[],attractorUnit:"user",attractorDistance:0,snatchDistance:0,snapToGrid:!1,attractToGrid:!1,snapSizeX:1,snapSizeY:1,snapToPoints:!1,ignoredSnapToPoints:[]},polygon:{hasInnerPoints:!1,fillColor:o.A.palette.yellow,highlightFillColor:o.A.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"},visible:"inherit"},highlightByStrokeWidth:!1,vertices:{layer:9,withLabel:!1,name:"",strokeColor:o.A.palette.red,fillColor:o.A.palette.red,fixed:!1,visible:"inherit"},label:{offset:[0,0]}},polygonalchain:{fillColor:"none",highlightFillColor:"none"},prescribedangle:{anglePoint:{size:2,visible:!1,withLabel:!1}},reflection:{fixed:!0,center:{},type:"Euclidean"},reflexangle:{},regularpolygon:{hasInnerPoints:!1,fillColor:o.A.palette.yellow,highlightFillColor:o.A.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"}},vertices:{layer:9,withLabel:!0,strokeColor:o.A.palette.red,fillColor:o.A.palette.red,fixed:!1},label:{offset:[0,0]}},riemannsum:{withLabel:!1,fillOpacity:.3,fillColor:o.A.palette.yellow},sector:{fillColor:o.A.palette.yellow,highlightFillColor:o.A.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,highlightOnSector:!1,highlightStrokeWidth:0,selection:"auto",arc:{visible:!1,fillColor:"none",withLabel:!1,name:"",center:{visible:!1,withLabel:!1,name:""},radiusPoint:{visible:!1,withLabel:!1,name:""},anglePoint:{visible:!1,withLabel:!1,name:""}},radiusPoint:{visible:!1,withLabel:!1},center:{visible:!1,withLabel:!1},anglePoint:{visible:!1,withLabel:!1},label:{offset:[0,0],anchorX:"auto",anchorY:"auto"}},segment:{label:{position:"top"}},semicircle:{center:{visible:!1,withLabel:!1,fixed:!1,fillColor:o.A.palette.red,strokeColor:o.A.palette.red,highlightFillColor:"#eeeeee",highlightStrokeColor:o.A.palette.red,name:""}},slider:{snapWidth:-1,snapValues:[],snapValueDistance:0,precision:2,digits:2,intl:{enabled:"inherit",options:{}},firstArrow:!1,lastArrow:!1,withTicks:!0,withLabel:!0,suffixLabel:null,unitLabel:null,postLabel:null,layer:9,showInfobox:!1,name:"",visible:!0,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"#ffffff",highlightFillColor:"none",size:6,point1:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,name:""},point2:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,name:""},baseline:{needsRegularUpdate:!1,visible:"inherit",fixed:!0,scalable:!1,tabindex:null,name:"",strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888"},ticks:{needsRegularUpdate:!1,fixed:!0,drawLabels:!1,digits:2,includeBoundaries:!0,drawZero:!0,label:{offset:[-4,-14],display:"internal"},minTicksDistance:30,insertTicks:!0,ticksDistance:1,minorHeight:4,majorHeight:5,minorTicks:0,strokeOpacity:1,strokeWidth:1,tickEndings:[0,1],majortickEndings:[0,1],strokeColor:"#000000",visible:"inherit"},highline:{strokeWidth:3,visible:"inherit",fixed:!0,tabindex:null,name:"",strokeColor:"#000000",highlightStrokeColor:"#888888"},label:{visible:"inherit",strokeColor:"#000000"},moveOnUp:!0},slopefield:{strokeWidth:.5,highlightStrokeWidth:.5,highlightStrokeColor:o.A.palette.blue,highlightStrokeOpacity:.8,scale:1,arrowhead:{enabled:!1,size:5,angle:.125*Math.PI}},slopetriangle:{fillColor:o.A.palette.red,fillOpacity:.4,highlightFillColor:o.A.palette.red,highlightFillOpacity:.3,borders:{lastArrow:{type:1,size:6}},glider:{fixed:!0,visible:!1,withLabel:!1},baseline:{visible:!1,withLabel:!1,name:""},basepoint:{visible:!1,withLabel:!1,name:""},tangent:{visible:!1,withLabel:!1,name:""},toppoint:{visible:!1,withLabel:!1,name:""},label:{visible:!0,position:"first"}},smartlabelangle:{cssClass:"smart-label-solid smart-label-angle",highlightCssClass:"smart-label-solid smart-label-angle",anchorX:"left",anchorY:"middle",unit:"",prefix:"",suffix:"",measure:"deg",useMathJax:!0},smartlabelcircle:{cssClass:"smart-label-solid smart-label-circle",highlightCssClass:"smart-label-solid smart-label-circle",anchorX:"middle",useMathJax:!0,unit:"",prefix:"",suffix:"",measure:"radius"},smartlabelline:{cssClass:"smart-label-solid smart-label-line",highlightCssClass:"smart-label-solid smart-label-line",anchorX:"middle",useMathJax:!0,unit:"",measure:"length"},smartlabelpoint:{cssClass:"smart-label-solid smart-label-point",highlightCssClass:"smart-label-solid smart-label-point",anchorX:"middle",anchorY:"top",useMathJax:!0,dir:"row",unit:""},smartlabelpolygon:{cssClass:"smart-label-solid smart-label-polygon",highlightCssClass:"smart-label-solid smart-label-polygon",anchorX:"middle",useMathJax:!0,unit:"",measure:"area"},stepfunction:{},tangent:{},tapemeasure:{strokeColor:"#000000",strokeWidth:2,highlightStrokeColor:"#000000",withTicks:!0,withLabel:!0,rotate:0,precision:2,digits:2,point1:{visible:!0,strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},point2:{visible:!0,strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},ticks:{drawLabels:!1,drawZero:!0,insertTicks:!0,ticksDistance:.1,minorHeight:8,majorHeight:16,minorTicks:4,tickEndings:[0,1],majorTickEndings:[0,1],strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",visible:"inherit",label:{anchorY:"top",anchorX:"middle",offset:[0,-10]}},label:{position:"top"}},text:{fontSize:12,fontUnit:"px",formatNumber:!1,digits:2,intl:{enabled:"inherit",options:{minimumFractionDigits:0,maximumFractionDigits:2}},parse:!0,useCaja:!1,isLabel:!1,strokeColor:"#000000",highlightStrokeColor:"#000000",highlightStrokeOpacity:.666666,cssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",highlightCssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",cssStyle:"",highlightCssStyle:"",transitionProperties:["color","opacity"],useASCIIMathML:!1,useMathJax:!1,useKatex:!1,katexMacros:{},toFraction:!1,display:"html",anchor:null,anchorX:"left",anchorY:"middle",cssClass:"JXGtext",highlightCssClass:"JXGtext",dragArea:"all",withLabel:!1,rotate:0,visible:!0,snapSizeX:1,snapSizeY:1,attractors:[]},tracecurve:{strokeColor:"#000000",fillColor:"none",numberPoints:100},turtle:{strokeWidth:1,fillColor:"none",strokeColor:"#000000",arrow:{strokeWidth:2,withLabel:!1,strokeColor:o.A.palette.red,lastArrow:!0}},vectorfield:{strokeWidth:.5,highlightStrokeWidth:.5,highlightStrokeColor:o.A.palette.blue,highlightStrokeOpacity:.8,scale:1,arrowhead:{enabled:!0,size:5,angle:.125*Math.PI}},shortcuts:{color:["strokeColor","fillColor"],opacity:["strokeOpacity","fillOpacity"],highlightColor:["highlightStrokeColor","highlightFillColor"],highlightOpacity:["highlightStrokeOpacity","highlightFillOpacity"],strokeWidth:["strokeWidth","highlightStrokeWidth"]}},r.A.Validator=function(){var t,e=function(t){return a.A.isString(t)},i=function(t){return Math.abs(t-Math.round(t))<n.A.eps},s=function(t){return i(t)&&t>0},o=function(t){return t>0},l=function(t){return t>=0},u={},c={attractorDistance:l,color:e,display:function(t){return"html"===t||"internal"===t},doAdvancedPlot:!1,draft:!1,drawLabels:!1,drawZero:!1,face:function(t){return a.A.exists(r.A.normalizePointFace(t))},factor:a.A.isNumber,fillColor:e,fillOpacity:a.A.isNumber,firstArrow:!1,fontSize:i,dash:i,gridX:a.A.isNumber,gridY:a.A.isNumber,hasGrid:!1,highlightFillColor:e,highlightFillOpacity:a.A.isNumber,highlightStrokeColor:e,highlightStrokeOpacity:a.A.isNumber,insertTicks:!1,lastArrow:!1,layer:function(t){return i(t)&&t>=0},majorHeight:i,minorHeight:i,minorTicks:l,minTicksDistance:s,numberPointsHigh:s,numberPointsLow:s,opacity:a.A.isNumber,radius:a.A.isNumber,RDPsmoothing:!1,renderer:function(t){return"vml"===t||"svg"===t||"canvas"===t||"no"===t},right:function(t){return/^[0-9]+px$/.test(t)},showCopyright:!1,showInfobox:!1,showNavigation:!1,size:l,snapSizeX:o,snapSizeY:o,snapWidth:a.A.isNumber,snapToGrid:!1,snatchDistance:l,straightFirst:!1,straightLast:!1,stretch:!1,strokeColor:e,strokeOpacity:a.A.isNumber,strokeWidth:l,takeFirst:!1,takeSizeFromFile:!1,to10:!1,toOrigin:!1,translateTo10:!1,translateToOrigin:!1,useASCIIMathML:!1,useDirection:!1,useMathJax:!1,withLabel:!1,withTicks:!1,zoom:!1};for(t in c)c.hasOwnProperty(t)&&(u[t.toLowerCase()]=c[t]);return u}(),r.A.normalizePointFace=function(t){return{cross:"x",x:"x",circle:"o",o:"o",square:"[]","[]":"[]",plus:"+","+":"+",divide:"|","|":"|",minus:"-","-":"-",diamond:"<>","<>":"<>",diamond2:"<<>>","<<>>":"<<>>",triangleup:"^",A:"^",a:"^","^":"^",triangledown:"v",v:"v",triangleleft:"<","<":"<",triangleright:">",">":">"}[t]},r.A.useStandardOptions=function(t){var e,i,n,o,a=r.A.Options,l=t.hasGrid;for(e in t.options.grid.hasGrid=a.grid.hasGrid,t.options.grid.gridX=a.grid.gridX,t.options.grid.gridY=a.grid.gridY,t.options.grid.gridColor=a.grid.gridColor,t.options.grid.gridOpacity=a.grid.gridOpacity,t.options.grid.gridDash=a.grid.gridDash,t.options.grid.snapToGrid=a.grid.snapToGrid,t.options.grid.snapSizeX=a.grid.SnapSizeX,t.options.grid.snapSizeY=a.grid.SnapSizeY,t.takeSizeFromFile=a.takeSizeFromFile,o=function(t,e){t.visProp.fillcolor=e.fillColor,t.visProp.highlightfillcolor=e.highlightFillColor,t.visProp.strokecolor=e.strokeColor,t.visProp.highlightstrokecolor=e.highlightStrokeColor},t.objects)if(t.objects.hasOwnProperty(e))if((n=t.objects[e]).elementClass===s.A.OBJECT_CLASS_POINT)o(n,a.point);else if(n.elementClass===s.A.OBJECT_CLASS_LINE)for(o(n,a.line),i=0;i<n.ticks.length;i++)n.ticks[i].majorTicks=a.line.ticks.majorTicks,n.ticks[i].minTicksDistance=a.line.ticks.minTicksDistance,n.ticks[i].visProp.minorheight=a.line.ticks.minorHeight,n.ticks[i].visProp.majorheight=a.line.ticks.majorHeight;else n.elementClass===s.A.OBJECT_CLASS_CIRCLE?o(n,a.circle):n.type===s.A.OBJECT_TYPE_ANGLE?o(n,a.angle):n.type===s.A.OBJECT_TYPE_ARC?o(n,a.arc):n.type===s.A.OBJECT_TYPE_POLYGON?o(n,a.polygon):n.type===s.A.OBJECT_TYPE_CONIC?o(n,a.conic):n.type===s.A.OBJECT_TYPE_CURVE?o(n,a.curve):n.type===s.A.OBJECT_TYPE_SECTOR&&(n.arc.visProp.fillcolor=a.sector.fillColor,n.arc.visProp.highlightfillcolor=a.sector.highlightFillColor,n.arc.visProp.fillopacity=a.sector.fillOpacity,n.arc.visProp.highlightfillopacity=a.sector.highlightFillOpacity);t.fullUpdate(),l&&!t.hasGrid?t.removeGrids(t):!l&&t.hasGrid&&t.create("grid",[])},r.A.useBlackWhiteOptions=function(t){var e=r.A.Options;e.point.fillColor=o.A.rgb2bw(e.point.fillColor),e.point.highlightFillColor=o.A.rgb2bw(e.point.highlightFillColor),e.point.strokeColor=o.A.rgb2bw(e.point.strokeColor),e.point.highlightStrokeColor=o.A.rgb2bw(e.point.highlightStrokeColor),e.line.fillColor=o.A.rgb2bw(e.line.fillColor),e.line.highlightFillColor=o.A.rgb2bw(e.line.highlightFillColor),e.line.strokeColor=o.A.rgb2bw(e.line.strokeColor),e.line.highlightStrokeColor=o.A.rgb2bw(e.line.highlightStrokeColor),e.circle.fillColor=o.A.rgb2bw(e.circle.fillColor),e.circle.highlightFillColor=o.A.rgb2bw(e.circle.highlightFillColor),e.circle.strokeColor=o.A.rgb2bw(e.circle.strokeColor),e.circle.highlightStrokeColor=o.A.rgb2bw(e.circle.highlightStrokeColor),e.arc.fillColor=o.A.rgb2bw(e.arc.fillColor),e.arc.highlightFillColor=o.A.rgb2bw(e.arc.highlightFillColor),e.arc.strokeColor=o.A.rgb2bw(e.arc.strokeColor),e.arc.highlightStrokeColor=o.A.rgb2bw(e.arc.highlightStrokeColor),e.polygon.fillColor=o.A.rgb2bw(e.polygon.fillColor),e.polygon.highlightFillColor=o.A.rgb2bw(e.polygon.highlightFillColor),e.sector.fillColor=o.A.rgb2bw(e.sector.fillColor),e.sector.highlightFillColor=o.A.rgb2bw(e.sector.highlightFillColor),e.curve.strokeColor=o.A.rgb2bw(e.curve.strokeColor),e.grid.gridColor=o.A.rgb2bw(e.grid.gridColor),r.A.useStandardOptions(t)},r.A.Options.normalizePointFace=r.A.normalizePointFace;const l=r.A.Options},72:(t,e,i)=>{i.d(e,{A:()=>o});var r=i(533),s=i(667),n=i(514);r.A.GeonextParser={replacePow:function(t){var e,i,r,s,n,o,a,l,u,c,h,d;for(c=(t=t.replace(/(\s*)\^(\s*)/g,"^")).indexOf("^"),s=-1;c>=0&&c<t.length-1;){if(s===c)throw new Error("JSXGraph: Error while parsing expression '"+t+"'");if(s=c,u=t.slice(0,c),h=t.slice(c+1),")"===u.charAt(u.length-1)){for(e=1,i=u.length-2;i>=0&&e>0;)")"===(r=u.charAt(i))?e++:"("===r&&(e-=1),i-=1;if(0!==e)throw new Error("JSXGraph: Missing '(' in expression");for(n="",a=u.substring(0,i+1),l=i;l>=0&&a.slice(l,l+1).match(/([\w.]+)/);)n=RegExp.$1+n,l-=1;n=(n+=u.substring(i+1,u.length)).replace(/([()+*%^\-/\][])/g,"\\$1")}else n="[\\w\\.]+";if(h.match(/^([\w.]*\()/)){for(e=1,i=RegExp.$1.length;i<h.length&&e>0;)")"===(r=h.charAt(i))?e-=1:"("===r&&(e+=1),i+=1;if(0!==e)throw new Error("JSXGraph: Missing ')' in expression");o=(o=h.substring(0,i)).replace(/([()+*%^\-/[\]])/g,"\\$1")}else o="[\\w\\.]+";d=new RegExp("("+n+")\\^("+o+")"),c=(t=t.replace(d,"pow($1,$2)")).indexOf("^")}return t},replaceIf:function(t){var e,i,r,s,n,o,a,l,u,c="",h=null,d=null,p=null;if((r=t.indexOf("If("))<0)return t;for(t=t.replace(/""/g,"0");r>=0;){for(e=t.slice(0,r),i=t.slice(r+3),n=1,s=0,o=-1,a=-1;s<i.length&&n>0;)")"===(l=i.charAt(s))?n-=1:"("===l?n+=1:","===l&&1===n&&(o<0?o=s:a=s),s+=1;if(u=i.slice(0,s-1),i=i.slice(s),o<0)return"";if(a<0)return"";h=u.slice(0,o),d=u.slice(o+1,a),p=u.slice(a+1),c+=e+"(("+(h=this.replaceIf(h))+")?("+(d=this.replaceIf(d))+"):("+(p=this.replaceIf(p))+"))",h=null,d=null,r=(t=i).indexOf("If(")}return c+=i},replaceNameById:function(t,e,i){var r,s,n,o,a=0,l=["X","Y","L","V"],u=function(t){return i?"$('"+t+"')":t};for(o=0;o<l.length;o++)for(a=t.indexOf(l[o]+"(");a>=0;)a>=0&&(r=t.indexOf(")",a+2))>=0&&(s=(s=t.slice(a+2,r)).replace(/\\(['"])?/g,"$1"),(n=e.elementsByName[s])&&(t=t.slice(0,a+2)+(i?"$('":"")+u(n.id)+t.slice(r))),r=t.indexOf(")",a+2),a=t.indexOf(l[o]+"(",r);for(a=t.indexOf("Dist(");a>=0;)a>=0&&(r=t.indexOf(",",a+5))>=0&&(s=(s=t.slice(a+5,r)).replace(/\\(['"])?/g,"$1"),(n=e.elementsByName[s])&&(t=t.slice(0,a+5)+u(n.id)+t.slice(r))),r=t.indexOf(",",a+5),a=t.indexOf(",",r),(r=t.indexOf(")",a+1))>=0&&(s=(s=t.slice(a+1,r)).replace(/\\(['"])?/g,"$1"),(n=e.elementsByName[s])&&(t=t.slice(0,a+1)+u(n.id)+t.slice(r))),r=t.indexOf(")",a+1),a=t.indexOf("Dist(",r);for(l=["Deg","Rad"],o=0;o<l.length;o++)for(a=t.indexOf(l[o]+"(");a>=0;)a>=0&&(r=t.indexOf(",",a+4))>=0&&(s=(s=t.slice(a+4,r)).replace(/\\(['"])?/g,"$1"),(n=e.elementsByName[s])&&(t=t.slice(0,a+4)+u(n.id)+t.slice(r))),r=t.indexOf(",",a+4),a=t.indexOf(",",r),(r=t.indexOf(",",a+1))>=0&&(s=(s=t.slice(a+1,r)).replace(/\\(['"])?/g,"$1"),(n=e.elementsByName[s])&&(t=t.slice(0,a+1)+u(n.id)+t.slice(r))),r=t.indexOf(",",a+1),a=t.indexOf(",",r),(r=t.indexOf(")",a+1))>=0&&(s=(s=t.slice(a+1,r)).replace(/\\(['"])?/g,"$1"),(n=e.elementsByName[s])&&(t=t.slice(0,a+1)+u(n.id)+t.slice(r))),r=t.indexOf(")",a+1),a=t.indexOf(l[o]+"(",r);return t},replaceIdByObj:function(t){var e=/(X|Y|L)\(([\w_]+)\)/g;return t=t.replace(e,"$('$2').$1()"),e=/(V)\(([\w_]+)\)/g,t=t.replace(e,"$('$2').Value()"),e=/(Dist)\(([\w_]+),([\w_]+)\)/g,t=t.replace(e,"dist($('$2'), $('$3'))"),e=/(Deg)\(([\w_]+),([ \w[\w_]+),([\w_]+)\)/g,t=t.replace(e,"deg($('$2'),$('$3'),$('$4'))"),e=/Rad\(([\w_]+),([\w_]+),([\w_]+)\)/g,t=t.replace(e,"rad($('$1'),$('$2'),$('$3'))"),e=/N\((.+)\)/g,t=t.replace(e,"($1)")},geonext2JS:function(t,e){var i,r,s,n=["Abs","ACos","ASin","ATan","Ceil","Cos","Exp","Factorial","Floor","Log","Max","Min","Random","Round","Sin","Sqrt","Tan","Trunc"],o=["abs","acos","asin","atan","ceil","cos","exp","factorial","floor","log","max","min","random","round","sin","sqrt","tan","ceil"];for(r=t=(t=(t=t.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),r=this.replaceNameById(r,e),r=this.replaceIf(r),r=this.replacePow(r),r=this.replaceIdByObj(r),s=0;s<n.length;s++)i=new RegExp(["(\\W|^)(",n[s],")"].join(""),"ig"),r=r.replace(i,["$1",o[s]].join(""));return r=(r=(r=(r=(r=r.replace(/True/g,"true")).replace(/False/g,"false")).replace(/fasle/g,"false")).replace(/Pi/g,"PI")).replace(/"/g,"'")},findDependencies:function(t,e,i){var r,o,a,l;for(o in n.A.exists(i)||(i=t.board),r=i.elementsByName)r.hasOwnProperty(o)&&o!==t.name&&(r[o].elementClass===s.A.OBJECT_CLASS_TEXT&&n.A.evaluate(r[o].visProp.islabel)||(l=(l=o.replace(/\[/g,"\\[")).replace(/\]/g,"\\]"),a=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+l+")(,[\\w\\[\\]'_ ]+)*\\)","g"),e.search(a)>=0&&r[o].addChild(t)))},gxt2jc:function(t,e){var i;return i=t=(t=(t=t.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),i=(i=(i=(i=this.replaceNameById(i,e,!0)).replace(/True/g,"true")).replace(/False/g,"false")).replace(/fasle/g,"false")}};const o=r.A.GeonextParser},922:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _jxg_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(533),_base_constants_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(667),_base_text_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(995),_math_math_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(259),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(315),_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(245),_math_statistics_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(362),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(514),_utils_env_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(415);Object.create||(Object.create=function(t,e){if("object"!==typeof t&&"function"!==typeof t)throw new TypeError("Object prototype may only be an Object: "+t);if(null===t)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");if("undefined"!=typeof e)throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");function i(){}return i.prototype=t,new i});var priv={modules:{math:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A,"math/geometry":_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__.A,"math/statistics":_math_statistics_js__WEBPACK_IMPORTED_MODULE_6__.A,"math/numerics":_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.Numerics}};_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.JessieCode=function(t,e){this.scope={id:0,hasChild:!0,args:[],locals:{},context:null,previous:null},this.scopes=[],this.scopes.push(this.scope),this.dpstack=[[]],this.pscope=0,this.propstack=[{}],this.propscope=0,this.lhs=[],this.isLHS=!1,this.warnLog="jcwarn",this.$log=[],this.builtIn=this.defineBuiltIn(),this.operands=this.getPossibleOperands(),this.board=null,this.forceValueCall=!1,this.lineToElement={},this.parCurLine=1,this.parCurColumn=0,this.line=1,this.col=1,_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.CA&&(this.CA=new _jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.CA(this.node,this.createNode,this)),this.code="","string"===typeof t&&this.parse(t,e)},_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.extend(_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.JessieCode.prototype,{node:function(t,e,i){return{type:t,value:e,children:i}},createNode:function(t,e,i){var r,s=this.node(t,e,[]);for(r=2;r<arguments.length;r++)s.children.push(arguments[r]);return"node_const"===s.type&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(s.value)&&(s.isMath=!0),s.line=this.parCurLine,s.col=this.parCurColumn,s},pushScope:function(t){var e={args:t,locals:{},context:null,previous:this.scope};return this.scope.hasChild=!0,this.scope=e,e.id=this.scopes.push(e)-1,e},popScope:function(){var t=this.scope.previous;return this.scope=null!==t?t:this.scope,this.scope},getElementById:function(t){return this.board.objects[t]},log:function(){this.$log.push(arguments),"object"===typeof console&&console.log&&console.log.apply(console,arguments)},creator:function(){var t,e={};return(t=function(t){var i,r;return"function"===typeof e[this.board.id+t]?i=e[this.board.id+t]:(r=this,(i=function(e,i){var s;return void 0===(s=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(i)?i:{}).name&&void 0===s.id&&(s.name=0!==r.lhs[r.scope.id]?r.lhs[r.scope.id]:""),r.board.create(t,e,s)}).creator=!0,e[this.board.id+t]=i),i}).clearCache=function(){e={}},t}(),letvar:function(t,e){this.builtIn[t]&&this._warn('"'+t+'" is a predefined value.'),this.scope.locals[t]=e},isLocalVariable:function(t){for(var e=this.scope;null!==e;){if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(e.locals[t]))return e;e=e.previous}return null},isParameter:function(t){for(var e=this.scope;null!==e;){if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.indexOf(e.args,t)>-1)return e;e=e.previous}return null},isCreator:function(t){return!!_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.elements[t]},isMathMethod:function(t){return"E"!==t&&!!Math[t]},isBuiltIn:function(t){return!!this.builtIn[t]},getvar:function(t,e,i){var r;if(e=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(e,!1),null!==(r=this.isLocalVariable(t)))return r.locals[t];if("$board"===t||"EULER"===t||"PI"===t)return this.builtIn[t];if(i){if(this.isBuiltIn(t))return this.builtIn[t];if(this.isMathMethod(t))return Math[t];if(this.isCreator(t))return this.creator(t)}return e||(r=this.board.select(t))===t?void 0:r},resolve:function(t){for(var e=this.scope;null!==e;){if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(e.locals[t]))return e.locals[t];e=e.previous}},getvarJS:function(t,e,i){var r,s="";return e=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(e,!1),i=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(i,!1),null!==this.isParameter(t)?t:null===this.isLocalVariable(t)||i?this.isCreator(t)?"(function () { var a = Array.prototype.slice.call(arguments, 0), props = "+(i?"a.pop()":"{}")+"; return $jc$.board.create.apply($jc$.board, ['"+t+"'].concat([a, props])); })":(i&&this._error("Syntax error (attribute values are allowed with element creators only)"),this.isBuiltIn(t)?(s=this.builtIn[t].src||this.builtIn[t],_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(s)||s.match(/board\.select/)?s:(t=s.split(".").pop(),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.board.mathLib)&&null!==(r=new RegExp("^Math."+t)).exec(s)?s.replace(r,"$jc$.board.mathLib."+t):_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.board.mathLibJXG)&&null!==(r=new RegExp("^JXG.Math.")).exec(s)?s.replace(r,"$jc$.board.mathLibJXG."):s)):this.isMathMethod(t)?"$jc$.board.mathLib."+t:e?"":(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isId(this.board,t)?(s="$jc$.board.objects['"+t+"']","slider"===this.board.objects[t].elType&&(s+=".Value()")):_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isName(this.board,t)?(s="$jc$.board.elementsByName['"+t+"']","slider"===this.board.elementsByName[t].elType&&(s+=".Value()")):_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isGroup(this.board,t)&&(s="$jc$.board.groups['"+t+"']"),s)):"$jc$.resolve('"+t+"')"},makeMap:function(t){return t.isMap=!0,t},functionCodeJS:function(t){var e=t.children[0].join(", "),i="",r="";return"op_map"===t.value&&(i="{ return  ",r=" }"),"function ("+e+") {\nvar $oldscope$ = $jc$.scope;\n$jc$.scope = $jc$.scopes["+this.scope.id+"];\nvar r = (function () "+i+this.compile(t.children[1],!0)+r+")();\n$jc$.scope = $oldscope$;\nreturn r;\n}"},defineFunction:function(node){var fun,i,that=this,list=node.children[0],scope=this.pushScope(list),_that;if(this.board.options.jc.compile){for(this.isLHS=!1,i=0;i<list.length;i++)scope.locals[list[i]]=list[i];this.replaceNames(node.children[1]),fun=function(jc){var fun,str="var f = function($jc$) { return "+jc.functionCodeJS(node)+"}; f;";try{for(fun=eval(str)(jc),scope.argtypes=[],i=0;i<list.length;i++)scope.argtypes.push(that.resolveType(list[i],node));return fun}catch(e){return jc._warn("error compiling function\n\n"+str+"\n\n"+e.toString()),function(){}}}(this),this.popScope()}else fun=function(t,e,i){return function(){var r,s;for(s=e.scope,e.scope=e.scopes[i],r=0;r<t.length;r++)e.scope.locals[t[r]]=arguments[r];return r=e.execute(node.children[1]),e.scope=s,r}}(list,this,scope.id);return fun.node=node,fun.scope=scope,fun.toJS=fun.toString,fun.toString=(_that=this,function(){return _that.compile(_that.replaceIDs(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.deepCopy(node)))}),fun.deps={},this.collectDependencies(node.children[1],node.children[0],fun.deps),fun},mergeAttributes:function(t){var e,i={};for(e=0;e<arguments.length;e++)i=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.deepCopy(i,arguments[e],!0);return i},setProp:function(t,e,i){var r,s,n={};t.elementClass!==_base_constants_js__WEBPACK_IMPORTED_MODULE_1__.A.OBJECT_CLASS_POINT||"X"!==e&&"Y"!==e?t.elementClass!==_base_constants_js__WEBPACK_IMPORTED_MODULE_1__.A.OBJECT_CLASS_TEXT||"X"!==e&&"Y"!==e?t.type&&t.elementClass&&t.visProp?_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t[t.methodMap[e]])&&"function"!==typeof t[t.methodMap[e]]?t[t.methodMap[e]]=i:(n[e]=i,t.setAttribute(n)):t[e]=i:("number"===typeof i?t[e]=function(){return i}:"function"===typeof i?(t.isDraggable=!1,t[e]=i):"string"===typeof i&&(t.isDraggable=!1,t[e]=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.createFunction(i,this.board),t[e+"jc"]=i),t[e].origin=i,this.board.update()):(e=e.toLowerCase(),t.isDraggable&&"number"===typeof i?(r="x"===e?i:t.X(),s="y"===e?i:t.Y(),t.setPosition(_base_constants_js__WEBPACK_IMPORTED_MODULE_1__.A.COORDS_BY_USER,[r,s])):!t.isDraggable||"function"!==typeof i&&"string"!==typeof i?t.isDraggable||(r="x"===e?i:t.XEval.origin,s="y"===e?i:t.YEval.origin,t.addConstraint([r,s])):(r="x"===e?i:t.coords.usrCoords[1],s="y"===e?i:t.coords.usrCoords[2],t.addConstraint([r,s])),this.board.update())},_genericParse:function(t,e,i,r){var s,n,o,a,l=t.replace(/\r\n/g,"\n").split("\n"),u=[];r||(this.code+=t+"\n"),_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A&&(n=_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A.prototype.setText,_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A.prototype.setText=_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A.prototype.setTextJessieCode);try{for(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(i)||(i=!1),s=0;s<l.length;s++)i&&(l[s]=_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.GeonextParser.geonext2JS(l[s],this.board)),u.push(l[s]);switch(t=u.join("\n"),o=parser.parse(t),this.CA&&(o=this.CA.expandDerivatives(o,null,o),o=this.CA.removeTrivialNodes(o)),e){case"parse":a=this.execute(o);break;case"manipulate":a=this.compile(o);break;case"getAst":a=o;break;default:a=!1}}catch(c){throw c}finally{_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A&&(_base_text_js__WEBPACK_IMPORTED_MODULE_2__.A.prototype.setText=n)}return a},parse:function(t,e,i){return this._genericParse(t,"parse",e,i)},manipulate:function(t,e,i){return this._genericParse(t,"manipulate",e,i)},getAST:function(t,e,i){return this._genericParse(t,"getAst",e,i)},snippet:function(t,e,i,r,s){var n;return e=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(e,!0),i=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(i,""),r=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(r,!1),this.forceValueCall=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(s,!0),n=(e?" function ("+i+") { return ":"")+t+(e?"; }":"")+";",this.parse(n,r,!0)},replaceIDs:function(t){var e,i;if(t.replaced&&(i=this.board.objects[t.children[1][0].value],_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(i)&&""!==i.name&&(t.type="node_var",t.value=i.name,t.children.length=0,delete t.replaced)),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(t))for(e=0;e<t.length;e++)t[e]=this.replaceIDs(t[e]);if(t.children)for(e=t.children.length;e>0;e--)_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t.children[e-1])&&(t.children[e-1]=this.replaceIDs(t.children[e-1]));return t},replaceNames:function(t,e){var i,r,s=!1;if(void 0!==e&&(s=e),r=t.value,"node_op"===t.type&&"op_lhs"===r&&1===t.children.length?this.isLHS=!0:"node_var"===t.type&&(this.isLHS?this.letvar(r,!0):!_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.getvar(r,!0))&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.board.elementsByName[r])&&(s&&"slider"!==this.board.elementsByName[r].elType&&(s=!1),t=this.createReplacementNode(t,s))),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(t))for(i=0;i<t.length;i++)t[i]=this.replaceNames(t[i],s);if(t.children)for(this.forceValueCall&&("op_execfun"===t.value&&"V"!==t.children[0].value&&"$"!==t.children[0].value&&(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(Math[t.children[0].value])||_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A[t.children[0].value]))&&"node_var"===t.children[1][0].type||"op_return"===t.value&&1===t.children.length&&"node_var"===t.children[0].type)&&(s=!0),i=t.children.length;i>0;i--)_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t.children[i-1])&&(t.children[i-1]=this.replaceNames(t.children[i-1],s));return"node_op"===t.type&&"op_lhs"===t.value&&1===t.children.length&&(this.isLHS=!1),t},createReplacementNode:function(t,e){var i=t.value,r=this.board.elementsByName[i];return(t=this.createNode("node_op","op_execfun",this.createNode("node_var",!0===e?"$value":"$"),[this.createNode("node_str",r.id)])).replaced=!0,t},collectDependencies:function(t,e,i){var r,s,n,o;if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(t))for(o=t.length,r=0;r<o;r++)this.collectDependencies(t[r],e,i);else if(s=t.value,"node_var"===t.type&&e.indexOf(s)<0&&(n=this.getvar(s))&&n.visProp&&n.elType&&n.elementClass&&n.id&&"slider"===n.elType&&(i[n.id]=n),"node_op"===t.type&&"op_execfun"===t.value&&t.children.length>1&&"$"===t.children[0].value&&t.children[1].length>0&&(i[n=t.children[1][0].value]=this.board.objects[n]),t.children)for(r=t.children.length;r>0;r--)_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t.children[r-1])&&this.collectDependencies(t.children[r-1],e,i)},resolveProperty:function(t,e,i){return i=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(i,!1),t&&t.methodMap&&(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t.subs)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t.subs[e])?t=t.subs:_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t.methodMap[e])?e=t.methodMap[e]:(t=t.visProp,e=e.toLowerCase())),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isFunction(t)&&this._error("Accessing function properties is not allowed."),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t)||this._error(t+" is not an object"),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t[e])||this._error("unknown property "+e),i&&"function"===typeof t[e]?function(){return t[e].apply(t,arguments)}:t[e]},resolveType:function(t,e){var i,r;if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(e))for(i=0;i<e.length;i++)if("any"!==(r=this.resolveType(t,e[i])))return r;if("node_op"===e.type&&"op_execfun"===e.value&&"node_var"===e.children[0].type&&e.children[0].value===t)return"function";if("node_op"===e.type){for(i=0;i<e.children.length;i++)if("node_var"===e.children[0].type&&e.children[0].value===t&&("op_add"===e.value||"op_sub"===e.value||"op_mul"===e.value||"op_div"===e.value||"op_mod"===e.value||"op_exp"===e.value||"op_neg"===e.value))return"any";for(i=0;i<e.children.length;i++)if("any"!==(r=this.resolveType(t,e.children[i])))return r}return"any"},getLHS:function(t){var e;if("node_var"===t.type)e={o:this.scope.locals,what:t.value};else if("node_op"===t.type&&"op_property"===t.value)e={o:this.execute(t.children[0]),what:t.children[1]};else{if("node_op"!==t.type||"op_extvalue"!==t.value)throw new Error("Syntax error: Invalid left-hand side of assignment.");e={o:this.execute(t.children[0]),what:this.execute(t.children[1])}}return e},getLHSCompiler:function(t,e){var i;if("node_var"===t.type)i=t.value;else if("node_op"===t.type&&"op_property"===t.value)i=[this.compile(t.children[0],e),"'"+t.children[1]+"'"];else{if("node_op"!==t.type||"op_extvalue"!==t.value)throw new Error("Syntax error: Invalid left-hand side of assignment.");i=[this.compile(t.children[0],e),"node_const"===t.children[1].type?t.children[1].value:this.compile(t.children[1],e)]}return i},execute:function(t){var e,i,r,s,n,o,a,l,u,c,h=[];if(e=0,!t)return e;switch(this.line=t.line,this.col=t.col,t.type){case"node_op":switch(t.value){case"op_none":t.children[0]&&this.execute(t.children[0]),t.children[1]&&(e=this.execute(t.children[1]));break;case"op_assign":i=this.getLHS(t.children[0]),this.lhs[this.scope.id]=i.what,i.o.type&&i.o.elementClass&&i.o.methodMap&&"label"===i.what&&this._error("Left-hand side of assignment is read-only."),e=this.execute(t.children[1]),i.o!==this.scope.locals||_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(i.o)&&"number"===typeof i.what?this.setProp(i.o,i.what,e):this.letvar(i.what,e),this.lhs[this.scope.id]=0;break;case"op_if":this.execute(t.children[0])&&(e=this.execute(t.children[1]));break;case"op_conditional":case"op_if_else":e=this.execute(t.children[0])?this.execute(t.children[1]):this.execute(t.children[2]);break;case"op_while":for(;this.execute(t.children[0]);)this.execute(t.children[1]);break;case"op_do":do{this.execute(t.children[0])}while(this.execute(t.children[1]));break;case"op_for":for(this.execute(t.children[0]);this.execute(t.children[1]);this.execute(t.children[2]))this.execute(t.children[3]);break;case"op_proplst":t.children[0]&&this.execute(t.children[0]),t.children[1]&&this.execute(t.children[1]);break;case"op_emptyobject":e={};break;case"op_proplst_val":this.propstack.push({}),this.propscope++,this.execute(t.children[0]),e=this.propstack[this.propscope],this.propstack.pop(),this.propscope--;break;case"op_prop":this.propstack[this.propscope][t.children[0]]=this.execute(t.children[1]);break;case"op_array":for(e=[],n=t.children[0].length,r=0;r<n;r++)e.push(this.execute(t.children[0][r]));break;case"op_extvalue":e=this.execute(t.children[0]),e="number"===typeof(r=this.execute(t.children[1]))&&Math.abs(Math.round(r)-r)<_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.eps?e[r]:undefined;break;case"op_return":if(0!==this.scope)return this.execute(t.children[0]);this._error("Unexpected return.");break;case"op_map":t.children[1].isMath||"node_var"===t.children[1].type||this._error("execute: In a map only function calls and mathematical expressions are allowed."),(l=this.defineFunction(t)).isMap=!0,e=l;break;case"op_function":(l=this.defineFunction(t)).isMap=!1,e=l;break;case"op_execfun":if(this.dpstack.push([]),this.pscope++,o=t.children[1],_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t.children[2]))if(t.children[3])for(a=t.children[2],u={},r=0;r<a.length;r++)u=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.deepCopy(u,this.execute(a[r]),!0);else u=this.execute(t.children[2]);for(t.children[0]._isFunctionName=!0,l=this.execute(t.children[0]),delete t.children[0]._isFunctionName,c=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(l)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(l.sc)?l.sc:this,!l.creator&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t.children[2])&&this._error("Unexpected value. Only element creators are allowed to have a value after the function call."),r=0;r<o.length;r++)_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(l.scope)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(l.scope.argtypes)&&"function"===l.scope.argtypes[r]?(o[r]._isFunctionName=!0,h[r]=this.execute(o[r]),delete o[r]._isFunctionName):h[r]=this.execute(o[r]),this.dpstack[this.pscope].push({line:t.children[1][r].line,col:t.children[1][r].ecol});if("function"!==typeof l||l.creator)if("function"===typeof l&&l.creator){s=this.line;try{for((e=l(h,u)).jcLineStart=s,e.jcLineEnd=t.eline,r=s;r<=t.line;r++)this.lineToElement[r]=e;e.debugParents=this.dpstack[this.pscope]}catch(d){this._error(d.toString())}}else this._error("Function '"+l+"' is undefined.");else e=l.apply(c,h);this.dpstack.pop(),this.pscope--;break;case"op_property":s=this.execute(t.children[0]),i=t.children[1],e=this.resolveProperty(s,i,!1),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(e)&&["number","string","boolean"].indexOf(typeof e)<0&&(e.sc=s);break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),this.use(t.children[0].toString());break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),i=this.getvar(t.children[0]),e=this.del(i);break;case"op_eq":e=this.execute(t.children[0])==this.execute(t.children[1]);break;case"op_neq":e=this.execute(t.children[0])!=this.execute(t.children[1]);break;case"op_approx":e=Math.abs(this.execute(t.children[0])-this.execute(t.children[1]))<_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.eps;break;case"op_gt":e=this.execute(t.children[0])>this.execute(t.children[1]);break;case"op_lt":e=this.execute(t.children[0])<this.execute(t.children[1]);break;case"op_geq":e=this.execute(t.children[0])>=this.execute(t.children[1]);break;case"op_leq":e=this.execute(t.children[0])<=this.execute(t.children[1]);break;case"op_or":e=this.execute(t.children[0])||this.execute(t.children[1]);break;case"op_and":e=this.execute(t.children[0])&&this.execute(t.children[1]);break;case"op_not":e=!this.execute(t.children[0]);break;case"op_add":e=this.add(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_sub":e=this.sub(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_div":e=this.div(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_mod":e=this.mod(this.execute(t.children[0]),this.execute(t.children[1]),!0);break;case"op_mul":e=this.mul(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_exp":e=this.pow(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_neg":e=this.neg(this.execute(t.children[0]))}break;case"node_var":e=this.getvar(t.value,!1,t._isFunctionName);break;case"node_const":e=null===t.value?null:Number(t.value);break;case"node_const_bool":e=t.value;break;case"node_str":e=t.value.replace(/\\(.)/g,"$1")}return e},compile:function(t,e){var i,r,s,n="";if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(e)||(e=!1),!t)return n;switch(t.type){case"node_op":switch(t.value){case"op_none":t.children[0]&&(n=this.compile(t.children[0],e)),t.children[1]&&(n+=this.compile(t.children[1],e));break;case"op_assign":e?(i=this.getLHSCompiler(t.children[0],e),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(i)?n="$jc$.setProp("+i[0]+", "+i[1]+", "+this.compile(t.children[1],e)+");\n":(this.isLocalVariable(i)!==this.scope&&(this.scope.locals[i]=!0),n="$jc$.scopes["+this.scope.id+"].locals['"+i+"'] = "+this.compile(t.children[1],e)+";\n")):n=(i=this.compile(t.children[0]))+" = "+this.compile(t.children[1],e)+";\n";break;case"op_if":n=" if ("+this.compile(t.children[0],e)+") "+this.compile(t.children[1],e);break;case"op_if_else":n=" if ("+this.compile(t.children[0],e)+")"+this.compile(t.children[1],e),n+=" else "+this.compile(t.children[2],e);break;case"op_conditional":n="(("+this.compile(t.children[0],e)+")?("+this.compile(t.children[1],e),n+="):("+this.compile(t.children[2],e)+"))";break;case"op_while":n=" while ("+this.compile(t.children[0],e)+") {\n"+this.compile(t.children[1],e)+"}\n";break;case"op_do":n=" do {\n"+this.compile(t.children[0],e)+"} while ("+this.compile(t.children[1],e)+");\n";break;case"op_for":n=" for ("+this.compile(t.children[0],e)+this.compile(t.children[1],e)+"; "+this.compile(t.children[2],e).slice(0,-2)+") {\n"+this.compile(t.children[3],e)+"\n}\n";break;case"op_proplst":t.children[0]&&(n=this.compile(t.children[0],e)+", "),n+=this.compile(t.children[1],e);break;case"op_prop":n=t.children[0]+": "+this.compile(t.children[1],e);break;case"op_emptyobject":n=e?"{}":"<< >>";break;case"op_proplst_val":n=this.compile(t.children[0],e);break;case"op_array":for(s=[],r=0;r<t.children[0].length;r++)s.push(this.compile(t.children[0][r],e));n="["+s.join(", ")+"]";break;case"op_extvalue":n=this.compile(t.children[0],e)+"["+this.compile(t.children[1],e)+"]";break;case"op_return":n=" return "+this.compile(t.children[0],e)+";\n";break;case"op_map":t.children[1].isMath||"node_var"===t.children[1].type||this._error("compile: In a map only function calls and mathematical expressions are allowed."),s=t.children[0],n=e?" $jc$.makeMap(function ("+s.join(", ")+") { return "+this.compile(t.children[1],e)+"; })":"map ("+s.join(", ")+") -> "+this.compile(t.children[1],e);break;case"op_function":s=t.children[0],this.pushScope(s),n=e?this.functionCodeJS(t):" function ("+s.join(", ")+") "+this.compile(t.children[1],e),this.popScope();break;case"op_execfunmath":console.log("op_execfunmath: TODO"),n="-1";break;case"op_execfun":if(t.children[2]){for(s=[],r=0;r<t.children[2].length;r++)s.push(this.compile(t.children[2][r],e));i=e?"$jc$.mergeAttributes("+s.join(", ")+")":s.join(", ")}for(t.children[0].withProps=!!t.children[2],s=[],r=0;r<t.children[1].length;r++)s.push(this.compile(t.children[1][r],e));n=this.compile(t.children[0],e)+"("+s.join(", ")+(t.children[2]&&e?", "+i:"")+")"+(t.children[2]&&!e?" "+i:""),e&&(n+="\n"),e&&"$"===t.children[0].value&&(n="$jc$.board.objects["+this.compile(t.children[1][0],e)+"]");break;case"op_property":n=e&&"X"!==t.children[1]&&"Y"!==t.children[1]?"$jc$.resolveProperty("+this.compile(t.children[0],e)+", '"+t.children[1]+"', true)":this.compile(t.children[0],e)+"."+t.children[1];break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),n=e?"$jc$.use('":"use('",n+=t.children[0].toString()+"');";break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),n=e?"$jc$.del(":"remove(",n+=this.compile(t.children[0],e)+")";break;case"op_eq":n="("+this.compile(t.children[0],e)+" === "+this.compile(t.children[1],e)+")";break;case"op_neq":n="("+this.compile(t.children[0],e)+" !== "+this.compile(t.children[1],e)+")";break;case"op_approx":n="("+this.compile(t.children[0],e)+" ~= "+this.compile(t.children[1],e)+")";break;case"op_gt":n=e?"$jc$.gt("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" > "+this.compile(t.children[1],e)+")";break;case"op_lt":n=e?"$jc$.lt("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" < "+this.compile(t.children[1],e)+")";break;case"op_geq":n=e?"$jc$.geq("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" >= "+this.compile(t.children[1],e)+")";break;case"op_leq":n=e?"$jc$.leq("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" <= "+this.compile(t.children[1],e)+")";break;case"op_or":n="("+this.compile(t.children[0],e)+" || "+this.compile(t.children[1],e)+")";break;case"op_and":n="("+this.compile(t.children[0],e)+" && "+this.compile(t.children[1],e)+")";break;case"op_not":n="!("+this.compile(t.children[0],e)+")";break;case"op_add":n=e?"$jc$.add("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" + "+this.compile(t.children[1],e)+")";break;case"op_sub":n=e?"$jc$.sub("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" - "+this.compile(t.children[1],e)+")";break;case"op_div":n=e?"$jc$.div("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" / "+this.compile(t.children[1],e)+")";break;case"op_mod":n=e?"$jc$.mod("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+", true)":"("+this.compile(t.children[0],e)+" % "+this.compile(t.children[1],e)+")";break;case"op_mul":n=e?"$jc$.mul("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" * "+this.compile(t.children[1],e)+")";break;case"op_exp":n=e?"$jc$.pow("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+"^"+this.compile(t.children[1],e)+")";break;case"op_neg":n=e?"$jc$.neg("+this.compile(t.children[0],e)+")":"(-"+this.compile(t.children[0],e)+")"}break;case"node_var":n=e?this.getvarJS(t.value,!1,t.withProps):t.value;break;case"node_const":case"node_const_bool":n=t.value;break;case"node_str":n="'"+t.value+"'"}return t.needsBrackets&&(n="{\n"+n+" }\n"),t.needsAngleBrackets&&(n=e?"{\n"+n+" }\n":"<< "+n+" >>\n"),n},getName:function(t,e){var i="";return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t.getName)?(i=t.getName(),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(i)&&""!==i||!e||(i=t.id)):e&&(i=t.id),i},X:function(t){return t.X()},Y:function(t){return t.Y()},V:function(t){return t.Value()},L:function(t){return t.L()},area:function(t){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t.Area)||this._error("Error: Can't calculate area."),t.Area()},perimeter:function(t){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t.Perimeter)||this._error("Error: Can't calculate perimeter."),t.Perimeter()},dist:function(t,e){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t.Dist)||this._error("Error: Can't calculate distance."),t.Dist(e)},radius:function(t){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t.Radius)||this._error("Error: Can't calculate radius."),t.Radius()},slope:function(t){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(t.Slope)||this._error("Error: Can't calculate slope."),t.Slope()},add:function(t,e){var i,r,s;if(t=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(t),e=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(e),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(t)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(e))s=_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.add(t,e);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(e))for(r=Math.min(t.length,e.length),s=[],i=0;i<r;i++)s[i]=t[i]+e[i];else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(e)?s=t+e:_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isString(t)||_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isString(e)?s=t.toString()+e.toString():this._error("Operation + not defined on operands "+typeof t+" and "+typeof e);return s},sub:function(t,e){var i,r,s;if(t=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(t),e=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(e),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(t)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(e))s=_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.sub(t,e);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(e))for(r=Math.min(t.length,e.length),s=[],i=0;i<r;i++)s[i]=t[i]-e[i];else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(e)?s=t-e:this._error("Operation - not defined on operands "+typeof t+" and "+typeof e);return s},neg:function(t){var e,i,r;if(t=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(t),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(t))r=_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.negative(t);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(t))for(i=t.length,r=[],e=0;e<i;e++)r[e]=-t[e];else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(t)?r=-t:this._error("Unary operation - not defined on operand "+typeof t);return r},mul:function(t,e){var i,r,s;if(t=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(t),e=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(e),_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(e)&&(i=t,e=t=e),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(t)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(e))s=_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.mul(t,e);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(e))r=Math.min(t.length,e.length),s=_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.innerProduct(t,e,r);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(e))for(r=e.length,s=[],i=0;i<r;i++)s[i]=t*e[i];else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(e)?s=t*e:this._error("Operation * not defined on operands "+typeof t+" and "+typeof e);return s},div:function(t,e){var i,r,s;if(t=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(t),e=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(e),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(t)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(e))s=_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.div(t,e);else if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(e))for(r=t.length,s=[],i=0;i<r;i++)s[i]=t[i]/e;else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(e)?s=t/e:this._error("Operation * not defined on operands "+typeof t+" and "+typeof e);return s},mod:function(t,e){var i,r,s;if(t=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(t),e=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(e),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(t)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(e))return _math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.fmod(t,e);if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isArray(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(e))for(r=t.length,s=[],i=0;i<r;i++)s[i]=_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.mod(t[i],e,!0);else _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(t)&&_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.isNumber(e)?s=_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.mod(t,e,!0):this._error("Operation * not defined on operands "+typeof t+" and "+typeof e);return s},pow:function(t,e){return t=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(t),e=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.evalSlider(e),_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(t)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(e)?_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.pow(t,e):_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.pow(t,e)},lt:function(t,e){return _math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(t)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(e)?_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.lt(t,e):t<e},leq:function(t,e){return _math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(t)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(e)?_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.leq(t,e):t<=e},gt:function(t,e){return _math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(t)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(e)?_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.gt(t,e):t>e},geq:function(t,e){return _math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(t)||_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.isInterval(e)?_math_ia_js__WEBPACK_IMPORTED_MODULE_4__.A.geq(t,e):t>=e},randint:function(t,e,i){return _utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(i)||(i=1),Math.round(Math.random()*(e-t)/i)*i+t},DDD:function(t){console.log("Dummy derivative function. This should never appear!")},ifthen:function(t,e,i){return t?e:i},del:function(t){"object"===typeof t&&_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(t.type)&&_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(t.elementClass)&&this.board.removeObject(t)},eval:function(t){return _jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.evaluate(t)},use:function(t){var e,i,r=!1;if("string"===typeof t){for(e in _jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.boards)if(_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.boards.hasOwnProperty(e)&&_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.boards[e].container===t){i=_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.boards[e],r=!0;break}}else i=t,r=!0;r?(this.board=i,this.builtIn.$board=i,this.builtIn.$board.src="$jc$.board"):this._error("Board '"+t+"' not found!")},findSymbol:function(t,e){var i,r;for(r=-1===(e=_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.def(e,-1))?this.scope:this.scopes[e];null!==r;){for(i in r.locals)if(r.locals.hasOwnProperty(i)&&r.locals[i]===t)return[i,r];r=r.previous}return[]},importModule:function(t){return priv.modules[t.toLowerCase()]},defineBuiltIn:function(){var t=this,e={PI:Math.PI,EULER:Math.E,D:t.DDD,X:t.X,Y:t.Y,V:t.V,Value:t.V,L:t.L,Length:t.L,acosh:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.acosh,acot:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.acot,asinh:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.asinh,binomial:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.binomial,cbrt:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.cbrt,cosh:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.cosh,cot:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.cot,deg:_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__.A.trueAngle,A:t.area,area:t.area,Area:t.area,perimeter:t.perimeter,Perimeter:t.perimeter,dist:t.dist,Dist:t.dist,R:t.radius,radius:t.radius,Radius:t.radius,erf:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.erf,erfc:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.erfc,erfi:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.erfi,factorial:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.factorial,gcd:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.gcd,lb:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log2,lcm:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.lcm,ld:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log2,lg:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log10,ln:Math.log,log:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log,log10:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log10,log2:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.log2,ndtr:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.ndtr,ndtri:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.ndtri,nthroot:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.nthroot,pow:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.pow,rad:_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__.A.rad,ratpow:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.ratpow,trunc:_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.trunc,sinh:_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A.sinh,slope:t.slope,Slope:t.slope,randint:t.randint,IfThen:t.ifthen,import:t.importModule,eval:t.eval,use:t.use,remove:t.del,$:t.getElementById,$value:function(e){return t.getElementById(e).Value()},getName:t.getName,name:t.getName,$board:t.board,$log:t.log};return e.rad.sc=_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__.A,e.deg.sc=_math_geometry_js__WEBPACK_IMPORTED_MODULE_5__.A,e.factorial.sc=_math_math_js__WEBPACK_IMPORTED_MODULE_3__.A,e.X.src="$jc$.X",e.Y.src="$jc$.Y",e.V.src="$jc$.V",e.Value.src="$jc$.V",e.L.src="$jc$.L",e.Length.src="$jc$.L",e.acosh.src="JXG.Math.acosh",e.acot.src="JXG.Math.acot",e.asinh.src="JXG.Math.asinh",e.binomial.src="JXG.Math.binomial",e.cbrt.src="JXG.Math.cbrt",e.cot.src="JXG.Math.cot",e.cosh.src="JXG.Math.cosh",e.deg.src="JXG.Math.Geometry.trueAngle",e.erf.src="JXG.Math.erf",e.erfc.src="JXG.Math.erfc",e.erfi.src="JXG.Math.erfi",e.A.src="$jc$.area",e.area.src="$jc$.area",e.Area.src="$jc$.area",e.perimeter.src="$jc$.perimeter",e.Perimeter.src="$jc$.perimeter",e.dist.src="$jc$.dist",e.Dist.src="$jc$.dist",e.R.src="$jc$.radius",e.radius.src="$jc$.radius",e.Radius.src="$jc$.radius",e.factorial.src="JXG.Math.factorial",e.gcd.src="JXG.Math.gcd",e.lb.src="JXG.Math.log2",e.lcm.src="JXG.Math.lcm",e.ld.src="JXG.Math.log2",e.lg.src="JXG.Math.log10",e.ln.src="Math.log",e.log.src="JXG.Math.log",e.log10.src="JXG.Math.log10",e.log2.src="JXG.Math.log2",e.ndtr.src="JXG.Math.ndtr",e.ndtri.src="JXG.Math.ndtri",e.nthroot.src="JXG.Math.nthroot",e.pow.src="JXG.Math.pow",e.rad.src="JXG.Math.Geometry.rad",e.ratpow.src="JXG.Math.ratpow",e.trunc.src="JXG.trunc",e.sinh.src="JXG.Math.sinh",e.slope.src="$jc$.slope",e.Slope.src="$jc$.slope",e.randint.src="$jc$.randint",e.import.src="$jc$.importModule",e.eval.src="$jc$.eval",e.use.src="$jc$.use",e.remove.src="$jc$.del",e.IfThen.src="$jc$.ifthen",e.$.src="(function (n) { return $jc$.board.select(n); })",e.$value.src="(function (n) { return $jc$.board.select(n).Value(); })",e.getName.src="$jc$.getName",e.name.src="$jc$.getName",e.$board&&(e.$board.src="$jc$.board"),e.$log.src="$jc$.log",e=_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.merge(e,t._addedBuiltIn)},_addedBuiltIn:{},addBuiltIn:function(t,e){if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.builtIn)){if(_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this.builtIn[t]))return;this.builtIn[t]=e,this.builtIn[t].src="$jc$."+t}_utils_type_js__WEBPACK_IMPORTED_MODULE_7__.A.exists(this._addedBuiltIn[t])||(this._addedBuiltIn[t]=e,this._addedBuiltIn[t].src="$jc$."+t,_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.JessieCode.prototype[t]=e)},getPossibleOperands:function(){var t,e,i,r,s,n,o,a,l,u,c,h,d,p,f=["E"],_=this.builtIn||this.defineBuiltIn(),m=Math;for(d=function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())},p=function(t,e){var i=null;if("jc"===e)i=_[t];else{if("Math"!==e)return;i=m[t]}if(!(f.indexOf(t)>=0))return _jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.isFunction(i)?{name:t,type:"function",numParams:i.length,origin:e}:_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.isNumber(i)?{name:t,type:"constant",value:i,origin:e}:void(t.startsWith("$")||void 0!==i&&console.error("undefined type",i))},t=Object.getOwnPropertyNames(_).sort(d),e=Object.getOwnPropertyNames(m).sort(d),i=[],r=0,s=0;r<t.length||s<e.length;)t[r]===e[s]?(n=p(e[s],"Math"),_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(n)&&i.push(n),r++,s++):!_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(e[s])||t[r].toLowerCase().localeCompare(e[s].toLowerCase())<0?(n=p(t[r],"jc"),_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(n)&&i.push(n),r++):(n=p(e[s],"Math"),_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.exists(n)&&i.push(n),s++);for(l=[],u=[],c=[],h={},o=i.length,r=0;r<o;r++){switch((a=i[r]).type){case"function":l.push(a.name),"jc"===a.origin&&u.push(a.name);break;case"constant":c.push(a.name)}h[a.name]=a}return{all:h,list:i,functions:l,functions_jessiecode:u,constants:c}},_debug:function(t){"object"===typeof console?console.log(t):_utils_env_js__WEBPACK_IMPORTED_MODULE_8__.A.isBrowser&&document&&null!==document.getElementById("debug")&&(document.getElementById("debug").innerHTML+=t+"<br />")},_error:function(t){var e=new Error("Error("+this.line+"): "+t);throw e.line=this.line,e},_warn:function(t){"object"===typeof console?console.log("Warning("+this.line+"): "+t):_utils_env_js__WEBPACK_IMPORTED_MODULE_8__.A.isBrowser&&document&&null!==document.getElementById(this.warnLog)&&(document.getElementById(this.warnLog).innerHTML+="Warning("+this.line+"): "+t+"<br />")},_log:function(t){"object"!==typeof window&&"object"===typeof self&&self.postMessage?self.postMessage({type:"log",msg:"Log: "+t.toString()}):console.log("Log: ",arguments)}});var parser=function(){var t=function(t,e,i,r){for(i=i||{},r=t.length;r--;i[t[r]]=e);return i},e=[2,14],i=[1,13],r=[1,37],s=[1,14],n=[1,15],o=[1,21],a=[1,16],l=[1,17],u=[1,33],c=[1,18],h=[1,19],d=[1,12],p=[1,59],f=[1,60],_=[1,58],m=[1,46],g=[1,48],y=[1,49],v=[1,50],A=[1,51],b=[1,52],C=[1,53],x=[1,54],P=[1,45],E=[1,38],w=[1,39],S=[5,7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],O=[5,7,8,12,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],M=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],T=[2,48],j=[1,72],N=[10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,66,83,86],R=[1,78],k=[8,10,16,32,34,35,37,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],D=[1,82],L=[8,10,16,32,34,35,37,39,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],I=[1,83],B=[1,84],F=[1,85],Y=[8,10,16,32,34,35,37,39,41,42,43,50,51,53,54,55,57,64,65,66,83,86],U=[1,89],z=[1,90],X=[1,91],J=[1,92],H=[1,97],G=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,53,54,55,57,64,65,66,83,86],W=[1,103],V=[1,104],q=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,57,64,65,66,83,86],$=[1,105],K=[1,106],Q=[1,107],Z=[1,126],tt=[1,139],et=[83,86],it=[1,150],rt=[10,66,86],st=[8,10,16,20,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,82,83,86],nt=[1,167],ot=[10,86],at={trace:function(){},yy:{},symbols_:{error:2,Program:3,StatementList:4,EOF:5,IfStatement:6,IF:7,"(":8,Expression:9,")":10,Statement:11,ELSE:12,LoopStatement:13,WHILE:14,FOR:15,";":16,DO:17,UnaryStatement:18,USE:19,IDENTIFIER:20,DELETE:21,ReturnStatement:22,RETURN:23,EmptyStatement:24,StatementBlock:25,"{":26,"}":27,ExpressionStatement:28,AssignmentExpression:29,ConditionalExpression:30,LeftHandSideExpression:31,"=":32,LogicalORExpression:33,"?":34,":":35,LogicalANDExpression:36,"||":37,EqualityExpression:38,"&&":39,RelationalExpression:40,"==":41,"!=":42,"~=":43,AdditiveExpression:44,"<":45,">":46,"<=":47,">=":48,MultiplicativeExpression:49,"+":50,"-":51,UnaryExpression:52,"*":53,"/":54,"%":55,ExponentExpression:56,"^":57,"!":58,MemberExpression:59,CallExpression:60,PrimaryExpression:61,FunctionExpression:62,MapExpression:63,".":64,"[":65,"]":66,BasicLiteral:67,ObjectLiteral:68,ArrayLiteral:69,NullLiteral:70,BooleanLiteral:71,StringLiteral:72,NumberLiteral:73,NULL:74,TRUE:75,FALSE:76,STRING:77,NUMBER:78,NAN:79,INFINITY:80,ElementList:81,"<<":82,">>":83,PropertyList:84,Property:85,",":86,PropertyName:87,Arguments:88,AttributeList:89,Attribute:90,FUNCTION:91,ParameterDefinitionList:92,MAP:93,"->":94,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"IF",8:"(",10:")",12:"ELSE",14:"WHILE",15:"FOR",16:";",17:"DO",19:"USE",20:"IDENTIFIER",21:"DELETE",23:"RETURN",26:"{",27:"}",32:"=",34:"?",35:":",37:"||",39:"&&",41:"==",42:"!=",43:"~=",45:"<",46:">",47:"<=",48:">=",50:"+",51:"-",53:"*",54:"/",55:"%",57:"^",58:"!",64:".",65:"[",66:"]",74:"NULL",75:"TRUE",76:"FALSE",77:"STRING",78:"NUMBER",79:"NAN",80:"INFINITY",82:"<<",83:">>",86:",",91:"FUNCTION",93:"MAP",94:"->"},productions_:[0,[3,2],[6,5],[6,7],[13,5],[13,9],[13,7],[18,2],[18,2],[22,2],[22,3],[24,1],[25,3],[4,2],[4,0],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[28,2],[9,1],[29,1],[29,3],[30,1],[30,5],[33,1],[33,3],[36,1],[36,3],[38,1],[38,3],[38,3],[38,3],[40,1],[40,3],[40,3],[40,3],[40,3],[44,1],[44,3],[44,3],[49,1],[49,3],[49,3],[49,3],[56,1],[56,3],[52,1],[52,2],[52,2],[52,2],[31,1],[31,1],[59,1],[59,1],[59,1],[59,3],[59,4],[61,1],[61,1],[61,1],[61,1],[61,3],[67,1],[67,1],[67,1],[67,1],[70,1],[71,1],[71,1],[72,1],[73,1],[73,1],[73,1],[69,2],[69,3],[68,2],[68,3],[84,1],[84,3],[85,3],[87,1],[87,1],[87,1],[60,2],[60,3],[60,2],[60,4],[60,3],[88,2],[88,3],[89,1],[89,3],[90,1],[90,1],[81,1],[81,3],[62,4],[62,5],[63,5],[63,6],[92,1],[92,3]],performAction:function(t,e,i,r,s,n,o){var a=n.length-1;switch(s){case 1:return n[a-1];case 2:this.$=lt.createNode(ut(o[a-4]),"node_op","op_if",n[a-2],n[a]);break;case 3:this.$=lt.createNode(ut(o[a-6]),"node_op","op_if_else",n[a-4],n[a-2],n[a]);break;case 4:this.$=lt.createNode(ut(o[a-4]),"node_op","op_while",n[a-2],n[a]);break;case 5:this.$=lt.createNode(ut(o[a-8]),"node_op","op_for",n[a-6],n[a-4],n[a-2],n[a]);break;case 6:this.$=lt.createNode(ut(o[a-6]),"node_op","op_do",n[a-5],n[a-2]);break;case 7:this.$=lt.createNode(ut(o[a-1]),"node_op","op_use",n[a]);break;case 8:this.$=lt.createNode(ut(o[a-1]),"node_op","op_delete",n[a]);break;case 9:this.$=lt.createNode(ut(o[a-1]),"node_op","op_return",void 0);break;case 10:this.$=lt.createNode(ut(o[a-2]),"node_op","op_return",n[a-1]);break;case 11:case 14:this.$=lt.createNode(ut(o[a]),"node_op","op_none");break;case 12:this.$=n[a-1],this.$.needsBrackets=!0;break;case 13:this.$=lt.createNode(ut(o[a-1]),"node_op","op_none",n[a-1],n[a]);break;case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 23:case 24:case 26:case 28:case 30:case 32:case 36:case 41:case 44:case 48:case 50:case 52:case 54:case 55:case 56:case 58:case 62:case 81:case 84:case 85:case 86:this.$=n[a];break;case 22:case 65:case 93:this.$=n[a-1];break;case 25:this.$=lt.createNode(ut(o[a-2]),"node_op","op_assign",n[a-2],n[a]),this.$.isMath=!1;break;case 27:this.$=lt.createNode(ut(o[a-4]),"node_op","op_conditional",n[a-4],n[a-2],n[a]),this.$.isMath=!1;break;case 29:this.$=lt.createNode(ut(o[a-2]),"node_op","op_or",n[a-2],n[a]),this.$.isMath=!1;break;case 31:this.$=lt.createNode(ut(o[a-2]),"node_op","op_and",n[a-2],n[a]),this.$.isMath=!1;break;case 33:this.$=lt.createNode(ut(o[a-2]),"node_op","op_eq",n[a-2],n[a]),this.$.isMath=!1;break;case 34:this.$=lt.createNode(ut(o[a-2]),"node_op","op_neq",n[a-2],n[a]),this.$.isMath=!1;break;case 35:this.$=lt.createNode(ut(o[a-2]),"node_op","op_approx",n[a-2],n[a]),this.$.isMath=!1;break;case 37:this.$=lt.createNode(ut(o[a-2]),"node_op","op_lt",n[a-2],n[a]),this.$.isMath=!1;break;case 38:this.$=lt.createNode(ut(o[a-2]),"node_op","op_gt",n[a-2],n[a]),this.$.isMath=!1;break;case 39:this.$=lt.createNode(ut(o[a-2]),"node_op","op_leq",n[a-2],n[a]),this.$.isMath=!1;break;case 40:this.$=lt.createNode(ut(o[a-2]),"node_op","op_geq",n[a-2],n[a]),this.$.isMath=!1;break;case 42:this.$=lt.createNode(ut(o[a-2]),"node_op","op_add",n[a-2],n[a]),this.$.isMath=!0;break;case 43:this.$=lt.createNode(ut(o[a-2]),"node_op","op_sub",n[a-2],n[a]),this.$.isMath=!0;break;case 45:this.$=lt.createNode(ut(o[a-2]),"node_op","op_mul",n[a-2],n[a]),this.$.isMath=!0;break;case 46:this.$=lt.createNode(ut(o[a-2]),"node_op","op_div",n[a-2],n[a]),this.$.isMath=!0;break;case 47:this.$=lt.createNode(ut(o[a-2]),"node_op","op_mod",n[a-2],n[a]),this.$.isMath=!0;break;case 49:this.$=lt.createNode(ut(o[a-2]),"node_op","op_exp",n[a-2],n[a]),this.$.isMath=!0;break;case 51:this.$=lt.createNode(ut(o[a-1]),"node_op","op_not",n[a]),this.$.isMath=!1;break;case 53:this.$=lt.createNode(ut(o[a-1]),"node_op","op_neg",n[a]),this.$.isMath=!0;break;case 57:case 63:case 64:case 66:case 67:case 68:case 97:this.$=n[a],this.$.isMath=!1;break;case 59:case 91:this.$=lt.createNode(ut(o[a-2]),"node_op","op_property",n[a-2],n[a]),this.$.isMath=!0;break;case 60:case 90:this.$=lt.createNode(ut(o[a-3]),"node_op","op_extvalue",n[a-3],n[a-1]),this.$.isMath=!0;break;case 61:this.$=lt.createNode(ut(o[a]),"node_var",n[a]);break;case 69:this.$=n[a],this.$.isMath=!0;break;case 70:this.$=lt.createNode(ut(o[a]),"node_const",null);break;case 71:this.$=lt.createNode(ut(o[a]),"node_const_bool",!0);break;case 72:this.$=lt.createNode(ut(o[a]),"node_const_bool",!1);break;case 73:this.$=lt.createNode(ut(o[a]),"node_str",n[a].substring(1,n[a].length-1));break;case 74:this.$=lt.createNode(ut(o[a]),"node_const",parseFloat(n[a]));break;case 75:this.$=lt.createNode(ut(o[a]),"node_const",NaN);break;case 76:this.$=lt.createNode(ut(o[a]),"node_const",1/0);break;case 77:this.$=lt.createNode(ut(o[a-1]),"node_op","op_array",[]);break;case 78:this.$=lt.createNode(ut(o[a-2]),"node_op","op_array",n[a-1]);break;case 79:this.$=lt.createNode(ut(o[a-1]),"node_op","op_emptyobject",{}),this.$.needsAngleBrackets=!0;break;case 80:this.$=lt.createNode(ut(o[a-2]),"node_op","op_proplst_val",n[a-1]),this.$.needsAngleBrackets=!0;break;case 82:this.$=lt.createNode(ut(o[a-2]),"node_op","op_proplst",n[a-2],n[a]);break;case 83:this.$=lt.createNode(ut(o[a-2]),"node_op","op_prop",n[a-2],n[a]);break;case 87:case 89:this.$=lt.createNode(ut(o[a-1]),"node_op","op_execfun",n[a-1],n[a]),this.$.isMath=!0;break;case 88:this.$=lt.createNode(ut(o[a-2]),"node_op","op_execfun",n[a-2],n[a-1],n[a],!0),this.$.isMath=!1;break;case 92:this.$=[];break;case 94:case 98:case 104:this.$=[n[a]];break;case 95:case 99:case 105:this.$=n[a-2].concat(n[a]);break;case 96:this.$=lt.createNode(ut(o[a]),"node_var",n[a]),this.$.isMath=!0;break;case 100:this.$=lt.createNode(ut(o[a-3]),"node_op","op_function",[],n[a]),this.$.isMath=!1;break;case 101:this.$=lt.createNode(ut(o[a-4]),"node_op","op_function",n[a-2],n[a]),this.$.isMath=!1;break;case 102:this.$=lt.createNode(ut(o[a-4]),"node_op","op_map",[],n[a]);break;case 103:this.$=lt.createNode(ut(o[a-5]),"node_op","op_map",n[a-3],n[a])}},table:[t([5,7,8,14,15,16,17,19,20,21,23,26,50,51,58,65,74,75,76,77,78,79,80,82,91,93],e,{3:1,4:2}),{1:[3]},{5:[1,3],6:6,7:i,8:r,9:20,11:4,13:7,14:s,15:n,16:o,17:a,18:8,19:l,20:u,21:c,22:9,23:h,24:11,25:5,26:d,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{1:[2,1]},t(S,[2,13]),t(O,[2,15]),t(O,[2,16]),t(O,[2,17]),t(O,[2,18]),t(O,[2,19]),t(O,[2,20]),t(O,[2,21]),t([7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],e,{4:61}),{8:[1,62]},{8:[1,63]},{8:[1,64]},{6:6,7:i,8:r,9:20,11:65,13:7,14:s,15:n,16:o,17:a,18:8,19:l,20:u,21:c,22:9,23:h,24:11,25:5,26:d,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{20:[1,66]},{20:[1,67]},{8:r,9:69,16:[1,68],20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{16:[1,70]},t(O,[2,11]),t(M,[2,23]),t(M,[2,24]),t([8,10,16,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],T,{32:[1,71],57:j}),t([8,10,16,32,35,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],[2,26],{34:[1,73],37:[1,74]}),t(N,[2,54],{88:77,8:R,64:[1,75],65:[1,76]}),t(N,[2,55],{88:79,8:R,64:[1,81],65:[1,80]}),t(k,[2,28],{39:D}),t(M,[2,56]),t(M,[2,57]),t(M,[2,58]),t(L,[2,30],{41:I,42:B,43:F}),t(M,[2,61]),t(M,[2,62]),t(M,[2,63]),t(M,[2,64]),{8:r,9:86,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:[1,87]},{8:[1,88]},t(Y,[2,32],{45:U,46:z,47:X,48:J}),t(M,[2,66]),t(M,[2,67]),t(M,[2,68]),t(M,[2,69]),{20:H,72:98,73:99,77:A,78:b,79:C,80:x,83:[1,93],84:94,85:95,87:96},{8:r,20:u,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,66:[1,100],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,81:101,82:P,91:E,93:w},t(G,[2,36],{50:W,51:V}),t(M,[2,70]),t(M,[2,71]),t(M,[2,72]),t(M,[2,73]),t(M,[2,74]),t(M,[2,75]),t(M,[2,76]),t(q,[2,41],{53:$,54:K,55:Q}),t(M,[2,44]),t(M,[2,50]),{8:r,20:u,31:109,50:p,51:f,52:108,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,20:u,31:109,50:p,51:f,52:110,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,20:u,31:109,50:p,51:f,52:111,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{6:6,7:i,8:r,9:20,11:4,13:7,14:s,15:n,16:o,17:a,18:8,19:l,20:u,21:c,22:9,23:h,24:11,25:5,26:d,27:[1,112],28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,9:113,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,9:114,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,9:115,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{14:[1,116]},t(O,[2,7]),t(O,[2,8]),t(O,[2,9]),{16:[1,117]},t(O,[2,22]),{8:r,20:u,29:118,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,20:u,31:109,50:p,51:f,52:119,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,20:u,29:120,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,20:u,31:109,36:121,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{20:[1,122]},{8:r,9:123,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},t(M,[2,87],{89:124,90:125,68:127,20:Z,82:P}),{8:r,10:[1,128],20:u,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,81:129,82:P,91:E,93:w},t(M,[2,89]),{8:r,9:130,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{20:[1,131]},{8:r,20:u,31:109,38:132,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,20:u,31:109,40:133,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,20:u,31:109,40:134,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,20:u,31:109,40:135,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{10:[1,136]},{10:[1,137],20:tt,92:138},{10:[1,140],20:tt,92:141},{8:r,20:u,31:109,44:142,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,20:u,31:109,44:143,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,20:u,31:109,44:144,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,20:u,31:109,44:145,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},t(M,[2,79]),{83:[1,146],86:[1,147]},t(et,[2,81]),{35:[1,148]},{35:[2,84]},{35:[2,85]},{35:[2,86]},t(M,[2,77]),{66:[1,149],86:it},t(rt,[2,98]),{8:r,20:u,31:109,49:151,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,20:u,31:109,49:152,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,20:u,31:109,50:p,51:f,52:153,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,20:u,31:109,50:p,51:f,52:154,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,20:u,31:109,50:p,51:f,52:155,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},t(M,[2,51]),t([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],T,{57:j}),t(M,[2,52]),t(M,[2,53]),t([5,7,8,10,12,14,15,16,17,19,20,21,23,26,27,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,58,64,65,66,74,75,76,77,78,79,80,82,83,86,91,93],[2,12]),{10:[1,156]},{10:[1,157]},{16:[1,158]},{8:[1,159]},t(O,[2,10]),t(M,[2,25]),t(M,[2,49]),{35:[1,160]},t(k,[2,29],{39:D}),t(M,[2,59]),{66:[1,161]},t([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83],[2,88],{86:[1,162]}),t(M,[2,94]),t(M,[2,96]),t(M,[2,97]),t(st,[2,92]),{10:[1,163],86:it},{66:[1,164]},t(M,[2,91]),t(L,[2,31],{41:I,42:B,43:F}),t(Y,[2,33],{45:U,46:z,47:X,48:J}),t(Y,[2,34],{45:U,46:z,47:X,48:J}),t(Y,[2,35],{45:U,46:z,47:X,48:J}),t(M,[2,65]),{25:165,26:d},{10:[1,166],86:nt},t(ot,[2,104]),{94:[1,168]},{10:[1,169],86:nt},t(G,[2,37],{50:W,51:V}),t(G,[2,38],{50:W,51:V}),t(G,[2,39],{50:W,51:V}),t(G,[2,40],{50:W,51:V}),t(M,[2,80]),{20:H,72:98,73:99,77:A,78:b,79:C,80:x,85:170,87:96},{8:r,20:u,29:171,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},t(M,[2,78]),{8:r,20:u,29:172,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},t(q,[2,42],{53:$,54:K,55:Q}),t(q,[2,43],{53:$,54:K,55:Q}),t(M,[2,45]),t(M,[2,46]),t(M,[2,47]),{6:6,7:i,8:r,9:20,11:173,13:7,14:s,15:n,16:o,17:a,18:8,19:l,20:u,21:c,22:9,23:h,24:11,25:5,26:d,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{6:6,7:i,8:r,9:20,11:174,13:7,14:s,15:n,16:o,17:a,18:8,19:l,20:u,21:c,22:9,23:h,24:11,25:5,26:d,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,9:175,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,9:176,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,20:u,29:177,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},t(M,[2,60]),{20:Z,68:127,82:P,90:178},t(st,[2,93]),t(M,[2,90]),t(M,[2,100]),{25:179,26:d},{20:[1,180]},{8:r,9:181,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{94:[1,182]},t(et,[2,82]),t(et,[2,83]),t(rt,[2,99]),t(S,[2,2],{12:[1,183]}),t(O,[2,4]),{16:[1,184]},{10:[1,185]},t(M,[2,27]),t(M,[2,95]),t(M,[2,101]),t(ot,[2,105]),t(M,[2,102]),{8:r,9:186,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{6:6,7:i,8:r,9:20,11:187,13:7,14:s,15:n,16:o,17:a,18:8,19:l,20:u,21:c,22:9,23:h,24:11,25:5,26:d,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{8:r,9:188,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},{16:[1,189]},t(M,[2,103]),t(O,[2,3]),{10:[1,190]},t(O,[2,6]),{6:6,7:i,8:r,9:20,11:191,13:7,14:s,15:n,16:o,17:a,18:8,19:l,20:u,21:c,22:9,23:h,24:11,25:5,26:d,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:p,51:f,52:56,56:57,58:_,59:26,60:27,61:29,62:30,63:31,65:m,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:v,77:A,78:b,79:C,80:x,82:P,91:E,93:w},t(O,[2,5])],defaultActions:{3:[2,1],97:[2,84],98:[2,85],99:[2,86]},parseError:function(t,e){if(!e.recoverable){var i=new Error(t);throw i.hash=e,i}this.trace(t)},parse:function(t){var e=this,i=[0],r=[null],s=[],n=this.table,o="",a=0,l=0,u=0,c=s.slice.call(arguments,1),h=Object.create(this.lexer),d={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(d.yy[p]=this.yy[p]);h.setInput(t,d.yy),d.yy.lexer=h,d.yy.parser=this,"undefined"==typeof h.yylloc&&(h.yylloc={});var f=h.yylloc;s.push(f);var _=h.options&&h.options.ranges;"function"===typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,g,y,v,A,b,C,x,P,E=function(){var t;return"number"!==typeof(t=h.lex()||1)&&(t=e.symbols_[t]||t),t},w={};;){if(y=i[i.length-1],this.defaultActions[y]?v=this.defaultActions[y]:(null!==m&&"undefined"!=typeof m||(m=E()),v=n[y]&&n[y][m]),"undefined"===typeof v||!v.length||!v[0]){var S="";for(b in P=[],n[y])this.terminals_[b]&&b>2&&P.push("'"+this.terminals_[b]+"'");S=h.showPosition?"Parse error on line "+(a+1)+":\n"+h.showPosition()+"\nExpecting "+P.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==m?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(S,{text:h.match,token:this.terminals_[m]||m,line:h.yylineno,loc:f,expected:P})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+m);switch(v[0]){case 1:i.push(m),r.push(h.yytext),s.push(h.yylloc),i.push(v[1]),m=null,g?(m=g,g=null):(l=h.yyleng,o=h.yytext,a=h.yylineno,f=h.yylloc,u>0&&u--);break;case 2:if(C=this.productions_[v[1]][1],w.$=r[r.length-C],w._$={first_line:s[s.length-(C||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(C||1)].first_column,last_column:s[s.length-1].last_column},_&&(w._$.range=[s[s.length-(C||1)].range[0],s[s.length-1].range[1]]),"undefined"!==typeof(A=this.performAction.apply(w,[o,l,a,d.yy,v[1],r,s].concat(c))))return A;C&&(i=i.slice(0,-1*C*2),r=r.slice(0,-1*C),s=s.slice(0,-1*C)),i.push(this.productions_[v[1]][0]),r.push(w.$),s.push(w._$),x=n[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},lt={node:function(t,e,i){return{type:t,value:e,children:i}},createNode:function(t,e,i,r){var s,n=this.node(e,i,[]);for(s=3;s<arguments.length;s++)n.children.push(arguments[s]);return n.line=t[0],n.col=t[1],n.eline=t[2],n.ecol=t[3],n}},ut=function(t){return[t.first_line,t.first_column,t.last_line,t.last_column]},ct={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===r.length?this.yylloc.first_column:0)+r[r.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,r,s;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack){for(var n in s)this[n]=s[n];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),n=0;n<s.length;n++)if((i=this._input.match(this.rules[s[n]]))&&(!e||i[0].length>e[0].length)){if(e=i,r=n,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,s[n])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,s[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,i,r){switch(i){case 0:case 5:case 6:break;case 1:case 2:return 78;case 3:case 4:return 77;case 7:return 7;case 8:return 12;case 9:return 14;case 10:return 17;case 11:return 15;case 12:return 91;case 13:return 93;case 14:return 19;case 15:return 23;case 16:return 21;case 17:return 75;case 18:return 76;case 19:return 74;case 20:return 80;case 21:case 22:return 94;case 23:return 82;case 24:return 83;case 25:return 26;case 26:return 27;case 27:return 16;case 28:return"#";case 29:return 34;case 30:return 35;case 31:return 79;case 32:return 64;case 33:return 65;case 34:return 66;case 35:return 8;case 36:return 10;case 37:return 58;case 38:case 39:return 57;case 40:return 53;case 41:return 54;case 42:return 55;case 43:return 50;case 44:return 51;case 45:return 47;case 46:return 45;case 47:return 48;case 48:return 46;case 49:return 41;case 50:return 43;case 51:return 42;case 52:return 39;case 53:return 37;case 54:return 32;case 55:return 86;case 56:return 5;case 57:return 20;case 58:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:[0-9]+\.[0-9]*|[0-9]*\.[0-9]+\b)/,/^(?:[0-9]+)/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:\/\/.*)/,/^(?:\/\*(.|\n|\r)*?\*\/)/,/^(?:if\b)/,/^(?:else\b)/,/^(?:while\b)/,/^(?:do\b)/,/^(?:for\b)/,/^(?:function\b)/,/^(?:map\b)/,/^(?:use\b)/,/^(?:return\b)/,/^(?:delete\b)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:Infinity\b)/,/^(?:->)/,/^(?:=>)/,/^(?:<<)/,/^(?:>>)/,/^(?:\{)/,/^(?:\})/,/^(?:;)/,/^(?:#)/,/^(?:\?)/,/^(?::)/,/^(?:NaN\b)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?:\()/,/^(?:\))/,/^(?:!)/,/^(?:\^)/,/^(?:\*\*)/,/^(?:\*)/,/^(?:\/)/,/^(?:%)/,/^(?:\+)/,/^(?:-)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:==)/,/^(?:~=)/,/^(?:!=)/,/^(?:&&)/,/^(?:\|\|)/,/^(?:=)/,/^(?:,)/,/^(?:$)/,/^(?:[A-Za-z_\$][A-Za-z0-9_]*)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58],inclusive:!0}}};function ht(){this.yy={}}return at.lexer=ct,ht.prototype=at,at.Parser=ht,new ht}();parser.yy.parseError=parser.parseError;const __WEBPACK_DEFAULT_EXPORT__=_jxg_js__WEBPACK_IMPORTED_MODULE_0__.A.JessieCode},339:(t,e,i)=>{i.d(e,{A:()=>l});var r=i(533),s=i(514),n=i(259),o={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},a=[{re:/^\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d.]{1,3})\s*\)\s*$/,example:["rgba(123, 234, 45, 0.5)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}];r.A.rgbParser=function(t,e,i){var r,n,l,u,c,h,d,p,f,_,m=t;if(!s.A.exists(t))return[];if(s.A.exists(e)&&s.A.exists(i)&&(m=[t,e,i]),r=m,_=!1,s.A.isArray(r)){for(h=0;h<3;h++)_=_||/\./.test(m[h].toString());for(h=0;h<3;h++)_=_&&m[h]>=0&&m[h]<=1;return _?[Math.ceil(255*m[0]),Math.ceil(255*m[1]),Math.ceil(255*m[2])]:m}for("string"===typeof m&&(r=m),"#"===r.charAt(0)&&(r=r.slice(1,7)),r=r.replace(/ /g,"").toLowerCase(),r=o[r]||r,h=0;h<a.length;h++)l=a[h].re,u=a[h].process,(c=l.exec(r))&&(d=(n=u(c))[0],p=n[1],f=n[2]);return isNaN(d)||isNaN(p)||isNaN(f)?[]:[d=d<0||isNaN(d)?0:d>255?255:d,p=p<0||isNaN(p)?0:p>255?255:p,f=f<0||isNaN(f)?0:f>255?255:f]},r.A.isColor=function(t){var e=(new Option).style;return e.color=t,""!==e.color},r.A.rgb2css=function(t,e,i){var s;return"rgb("+(s=r.A.rgbParser(t,e,i))[0]+", "+s[1]+", "+s[2]+")"},r.A.rgb2hex=function(t,e,i){var s,n,o;return n=(s=r.A.rgbParser(t,e,i))[1],o=s[2],s=(s=s[0]).toString(16),n=n.toString(16),o=o.toString(16),1===s.length&&(s="0"+s),1===n.length&&(n="0"+n),1===o.length&&(o="0"+o),"#"+s+n+o},r.A.hex2rgb=function(t){return r.A.deprecated("JXG.hex2rgb()","JXG.rgb2css()"),r.A.rgb2css(t)},r.A.hsv2rgb=function(t,e,i){var r,s,o,a,l,u,c,h,d;if(t=(t%360+360)%360,0===e){if(!(isNaN(t)||t<n.A.eps))return"#ffffff";r=i,s=i,o=i}else switch(u=t>=360?0:t,c=i*(1-e),h=i*(1-e*(a=(u/=60)-(l=Math.floor(u)))),d=i*(1-e*(1-a)),l){case 0:r=i,s=d,o=c;break;case 1:r=h,s=i,o=c;break;case 2:r=c,s=i,o=d;break;case 3:r=c,s=h,o=i;break;case 4:r=d,s=c,o=i;break;case 5:r=i,s=c,o=h}return["#",r=2===(r=Math.round(255*r).toString(16)).length?r:1===r.length?"0"+r:"00",s=2===(s=Math.round(255*s).toString(16)).length?s:1===s.length?"0"+s:"00",o=2===(o=Math.round(255*o).toString(16)).length?o:1===o.length?"0"+o:"00"].join("")},r.A.rgb2hsv=function(t,e,i){var s,n,o,a,l,u,c,h,d,p,f,_,m;return n=(s=r.A.rgbParser(t,e,i))[1],o=s[2],a=(s=s[0])/255,l=n/255,u=o/255,_=Math.max(s,n,o),h=(m=Math.min(s,n,o))/255,p=0,(f=c=_/255)>0&&(p=(f-h)/f),d=1/(c-h),p>0&&(_===s?d*=l-u:d=_===n?2+(u-a)*d:4+(a-l)*d),(d*=60)<0&&(d+=360),_===m&&(d=0),[d,p,f]},r.A.rgb2LMS=function(t,e,i){var s,n,o,a,l,u,c,h=[[.05059983,.08585369,.0095242],[.01893033,.08925308,.01370054],[.00292202,.00975732,.07145979]];return n=(s=r.A.rgbParser(t,e,i))[1],o=s[2],s=s[0],s=Math.pow(s,.476190476),n=Math.pow(n,.476190476),o=Math.pow(o,.476190476),(c=[a=s*h[0][0]+n*h[0][1]+o*h[0][2],l=s*h[1][0]+n*h[1][1]+o*h[1][2],u=s*h[2][0]+n*h[2][1]+o*h[2][2]]).l=a,c.m=l,c.s=u,c},r.A.LMS2rgb=function(t,e,i){var r,s,n,o,a=[[30.830854,-29.832659,1.610474],[-6.481468,17.715578,-2.532642],[-.37569,-1.199062,14.273846]],l=function(t){for(var e=127,i=64;i>0;){if(Math.pow(e,.476190476)>t)e-=i;else{if(Math.pow(e+1,.476190476)>t)return e;e+=i}i/=2}return 254===e&&13.994955247<t?255:e};return r=t*a[0][0]+e*a[0][1]+i*a[0][2],s=t*a[1][0]+e*a[1][1]+i*a[1][2],n=t*a[2][0]+e*a[2][1]+i*a[2][2],(o=[r=l(r),s=l(s),n=l(n)]).r=r,o.g=s,o.b=n,o},r.A.rgba2rgbo=function(t){var e;return 9===t.length&&"#"===t.charAt(0)?(e=parseInt(t.slice(7,9).toUpperCase(),16)/255,t=t.slice(0,7)):e=1,[t,e]},r.A.rgbo2rgba=function(t,e){var i;return"none"===t||"transparent"===t?t:(1===(i=Math.round(255*e).toString(16)).length&&(i="0"+i),r.A.rgb2hex(t)+i)},r.A.rgb2bw=function(t){var e,i,s,n="0123456789ABCDEF";return"none"===t?t:(s=r.A.rgbParser(t),e=Math.floor(.3*s[0]+.59*s[1]+.11*s[2]),t="#"+(i=n.charAt(e>>4&15)+n.charAt(15&e))+i+i)},r.A.rgb2cb=function(t,e){var i,s,n,o,a,l,u,c,h,d,p,f="0123456789ABCDEF";if("none"===t)return t;switch(s=(a=r.A.rgb2LMS(t))[0],n=a[1],o=a[2],e=e.toLowerCase()){case"protanopia":l=-.06150039994295001,u=.08277001656812001,c=-.013200141220000003,h=.05858939668799999,d=-.07934519995360001,p=.013289415272000003,s=o/n<.6903216543277437?-(u*n+c*o)/l:-(d*n+p*o)/h;break;case"tritanopia":l=-.00058973116217,u=.007690316482,c=-.01011703519052,h=.025495080838999994,d=-.0422740347,p=.017005316784,o=n/s<.8349489908460004?-(l*s+u*n)/c:-(h*s+d*n)/p;break;default:l=-.06150039994295001,u=.08277001656812001,c=-.013200141220000003,h=.05858939668799999,d=-.07934519995360001,p=.013289415272000003,n=o/s<.5763833686400911?-(l*s+c*o)/u:-(h*s+p*o)/d}return i=r.A.LMS2rgb(s,n,o),t="#"+(f.charAt(i[0]>>4&15)+f.charAt(15&i[0])),t+=f.charAt(i[1]>>4&15)+f.charAt(15&i[1]),t+=f.charAt(i[2]>>4&15)+f.charAt(15&i[2])},r.A.shadeColor=function(t,e){var i=r.A.rgbParser(t),s=i[0],n=i[1],o=i[2];return s=(s=(s=parseInt(s+255*e))>0?s:0)<255?s:255,n=(n=(n=parseInt(n+255*e))>0?n:0)<255?n:255,o=(o=(o=parseInt(o+255*e))>0?o:0)<255?o:255,s=Math.round(s),n=Math.round(n),o=Math.round(o),r.A.rgb2hex([s,n,o])},r.A.lightenColor=function(t,e){return r.A.shadeColor(t,e)},r.A.darkenColor=function(t,e){return r.A.shadeColor(t,-1*e)},r.A.autoHighlight=function(t){var e=r.A.rgba2rgbo(t),i=e[0],s=e[1];return"#"===t.charAt(0)?(s*=s<.3?1.8:.4,r.A.rgbo2rgba(i,s)):t},r.A.contrast=function(t,e,i,s){var n,o,a,l,u;return e=e||"#000000",i=i||"#ffffff",s=s||7,n=r.A.rgbParser(t),o=r.A.rgbParser("#000000"),u=(a=.2126*Math.pow(n[0]/255,2.2)+.7152*Math.pow(n[1]/255,2.2)+.0722*Math.pow(n[2]/255,2.2))>(l=.2126*Math.pow(o[0]/255,2.2)+.7152*Math.pow(o[1]/255,2.2)+.0722*Math.pow(o[2]/255,2.2))?Math.floor((a+.05)/(l+.05)):Math.floor((l+.05)/(a+.05)),(u-=1)>s?e:i},r.A.setClassicColors=function(){r.A.Options.elements.strokeColor="blue",r.A.Options.elements.fillColor="red",r.A.Options.hatch.strokeColor="blue",r.A.Options.angle.fillColor="#ff7f00",r.A.Options.angle.highlightFillColor="#ff7f00",r.A.Options.angle.strokeColor="#ff7f00",r.A.Options.angle.label.strokeColor="blue",r.A.Options.arc.strokeColor="blue",r.A.Options.circle.center.fillColor="red",r.A.Options.circle.center.strokeColor="blue",r.A.Options.circumcircle.strokeColor="blue",r.A.Options.circumcircle.center.fillColor="red",r.A.Options.circumcircle.center.strokeColor="blue",r.A.Options.circumcirclearc.strokeColor="blue",r.A.Options.circumcirclesector.strokeColor="blue",r.A.Options.circumcirclesector.fillColor="green",r.A.Options.circumcirclesector.highlightFillColor="green",r.A.Options.conic.strokeColor="blue",r.A.Options.curve.strokeColor="blue",r.A.Options.incircle.strokeColor="blue",r.A.Options.incircle.center.fillColor="red",r.A.Options.incircle.center.strokeColor="blue",r.A.Options.inequality.fillColor="red",r.A.Options.integral.fillColor="red",r.A.Options.integral.curveLeft.color="red",r.A.Options.integral.curveRight.color="red",r.A.Options.line.strokeColor="blue",r.A.Options.point.fillColor="red",r.A.Options.point.strokeColor="red",r.A.Options.polygon.fillColor="green",r.A.Options.polygon.highlightFillColor="green",r.A.Options.polygon.vertices.strokeColor="red",r.A.Options.polygon.vertices.fillColor="red",r.A.Options.regularpolygon.fillColor="green",r.A.Options.regularpolygon.highlightFillColor="green",r.A.Options.regularpolygon.vertices.strokeColor="red",r.A.Options.regularpolygon.vertices.fillColor="red",r.A.Options.riemannsum.fillColor="yellow",r.A.Options.sector.fillColor="green",r.A.Options.sector.highlightFillColor="green",r.A.Options.semicircle.center.fillColor="red",r.A.Options.semicircle.center.strokeColor="blue",r.A.Options.slopetriangle.fillColor="red",r.A.Options.slopetriangle.highlightFillColor="red",r.A.Options.turtle.arrow.strokeColor="blue"},r.A.extend(r.A,{paletteWong:{black:"#000000",orange:"#E69F00",skyblue:"#56B4E9",bluishgreen:"#009E73",yellow:"#F0E442",darkblue:"#0072B2",vermillion:"#D55E00",reddishpurple:"#CC79A7",blue:"#0072B2",red:"#D55E00",green:"#009E73",purple:"#CC79A7",white:"#ffffff"}}),r.A.palette=r.A.paletteWong;const l=r.A},415:(t,e,i)=>{i.d(e,{A:()=>n});var r=i(533),s=i(514);r.A.extendConstants(r.A,{}),r.A.extend(r.A,{isTouchEvent:function(t){return r.A.exists(t.touches)},isPointerEvent:function(t){return r.A.exists(t.pointerId)},isMouseEvent:function(t){return!r.A.isTouchEvent(t)&&!r.A.isPointerEvent(t)},getNumberOfTouchPoints:function(t){var e=-1;return r.A.isTouchEvent(t)&&(e=t.touches.length),e},isFirstTouch:function(t){var e=r.A.getNumberOfTouchPoints(t);return r.A.isPointerEvent(t)?t.isPrimary:1===e},isBrowser:"object"===typeof window&&"object"===typeof document,supportsES6:function(){try{return new Function("(a = 0) => a"),!0}catch(t){return!1}},supportsVML:function(){return this.isBrowser&&!!document.namespaces},supportsSVG:function(){return!!this.isBrowser&&(!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)},supportsCanvas:function(){var t=!1;return this.isNode()&&(t=!0),t||this.isBrowser&&!!document.createElement("canvas").getContext},isNode:function(){return!this.isBrowser&&"undefined"!==typeof process&&-1!==process.release.name.search(/node|io.js/)},isWebWorker:function(){return!this.isBrowser&&"object"===typeof self&&"function"===typeof self.postMessage},supportsPointerEvents:function(){return!!(this.isBrowser&&window.navigator&&(window.PointerEvent||window.navigator.pointerEnabled||window.navigator.msPointerEnabled))},isTouchDevice:function(){return this.isBrowser&&void 0!==window.ontouchstart},isAndroid:function(){return s.A.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")>-1},isWebkitAndroid:function(){return this.isAndroid()&&navigator.userAgent.indexOf(" AppleWebKit/")>-1},isApple:function(){return s.A.exists(navigator)&&(navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1)},isWebkitApple:function(){return this.isApple()&&navigator.userAgent.search(/Mobile\/[0-9A-Za-z.]*Safari/)>-1},isMetroApp:function(){return"object"===typeof window&&window.clientInformation&&window.clientInformation.appVersion&&window.clientInformation.appVersion.indexOf("MSAppHost")>-1},isMozilla:function(){return s.A.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1&&-1===navigator.userAgent.toLowerCase().indexOf("apple")},isFirefoxOS:function(){return s.A.exists(navigator)&&-1===navigator.userAgent.toLowerCase().indexOf("android")&&-1===navigator.userAgent.toLowerCase().indexOf("apple")&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1},isDesktop:function(){return!0},isMobile:function(){return!0},ieVersion:function(){var t,e,i=3;if("object"!==typeof document)return 0;e=(t=document.createElement("div")).getElementsByTagName("i");do{t.innerHTML="\x3c!--[if gt IE "+ ++i+"]><i></i><![endif]--\x3e"}while(e[0]);return i>4?i:void 0}(),getDimensions:function(t,e){var i,r,n,o,a,l,u,c,h,d=/\d+(\.\d*)?px/;if(!this.isBrowser||null===t)return{width:500,height:500};if(e=e||document,i=s.A.isString(t)?e.getElementById(t):t,!s.A.exists(i))throw new Error("\nJSXGraph: HTML container element '"+t+"' not found.");return"none"!==(r=i.style.display)&&null!==r?i.clientWidth>0&&i.clientHeight>0?{width:i.clientWidth,height:i.clientHeight}:(h=window.getComputedStyle?window.getComputedStyle(i):i.style,{width:d.test(h.width)?parseFloat(h.width):0,height:d.test(h.height)?parseFloat(h.height):0}):(o=(n=i.style).visibility,a=n.position,l=n.display,n.visibility="hidden",n.position="absolute",n.display="block",u=i.clientWidth,c=i.clientHeight,n.display=l,n.position=a,n.visibility=o,{width:u,height:c})},addEvent:function(t,e,i,r,n){var o=function(){return i.apply(r,arguments)};o.origin=i,"object"===typeof r&&s.A.exists(r.BOARD_MODE_NONE)&&(r["x_internal"+e]=r["x_internal"+e]||[],r["x_internal"+e].push(o)),s.A.exists(t)&&s.A.exists(t.addEventListener)&&(n=n||!1,t.addEventListener(e,o,n)),s.A.exists(t)&&s.A.exists(t.attachEvent)&&t.attachEvent("on"+e,o)},removeEvent:function(t,e,i,n){var o;if(s.A.exists(n))if(s.A.exists(n["x_internal"+e]))if(s.A.isArray(n["x_internal"+e]))if(-1!==(o=s.A.indexOf(n["x_internal"+e],i,"origin"))){try{s.A.exists(t)&&s.A.exists(t.removeEventListener)&&t.removeEventListener(e,n["x_internal"+e][o],!1),s.A.exists(t)&&s.A.exists(t.detachEvent)&&t.detachEvent("on"+e,n["x_internal"+e][o])}catch(a){r.A.debug("event not registered in browser: ("+e+" -- "+i+")")}n["x_internal"+e].splice(o,1)}else r.A.debug("removeEvent: no such event function in internal list: "+i);else r.A.debug("owner[x_internal + "+e+"] is not an array");else r.A.debug("no such type: "+e);else r.A.debug("no such owner")},removeAllEvents:function(t,e,i){var s;if(i["x_internal"+e]){for(s=i["x_internal"+e].length-1;s>=0;s--)r.A.removeEvent(t,e,i["x_internal"+e][s].origin,i);i["x_internal"+e].length>0&&r.A.debug("removeAllEvents: Not all events could be removed.")}},getPosition:function(t,e,i){var r,n,o,a=0,l=0;if(t||(t=window.event),i=i||document,o=t.touches,s.A.exists(o)&&0===o.length&&(o=t.changedTouches),s.A.exists(e)&&s.A.exists(o))if(-1===e){for(n=o.length,r=0;r<n;r++)if(o[r]){t=o[r];break}}else t=o[e];return t.clientX&&(a=t.clientX,l=t.clientY),[a,l]},getOffset:function(t){var e,i=t,r=t,s=i.offsetLeft-i.scrollLeft,n=i.offsetTop-i.scrollTop;for(s=(e=this.getCSSTransform([s,n],i))[0],n=e[1],i=i.offsetParent;i;){for(s+=i.offsetLeft,n+=i.offsetTop,i.offsetParent&&(s+=i.clientLeft-i.scrollLeft,n+=i.clientTop-i.scrollTop),s=(e=this.getCSSTransform([s,n],i))[0],n=e[1],r=r.parentNode;r!==i;)s+=r.clientLeft-r.scrollLeft,n+=r.clientTop-r.scrollTop,s=(e=this.getCSSTransform([s,n],r))[0],n=e[1],r=r.parentNode;i=i.offsetParent}return[s,n]},getStyle:function(t,e){var i,s=t.ownerDocument;return s.defaultView&&s.defaultView.getComputedStyle?i=s.defaultView.getComputedStyle(t,null).getPropertyValue(e):t.currentStyle&&r.A.ieVersion>=9?i=t.currentStyle[e]:t.style&&(e=e.replace(/-([a-z]|[0-9])/gi,(function(t,e){return e.toUpperCase()})),i=t.style[e]),i},getProp:function(t,e){var i=parseInt(this.getStyle(t,e),10);return isNaN(i)?0:i},getCSSTransform:function(t,e){var i,r,n,o,a,l,u,c=["transform","webkitTransform","MozTransform","msTransform","oTransform"];for(a=c.length,i=0,n="";i<a;i++)if(s.A.exists(e.style[c[i]])){n=e.style[c[i]];break}if(""!==n&&(o=n.indexOf("("))>0){for(a=n.length,r=0,l=(u=n.substring(o+1,a-1).split(",")).length;r<l;r++)u[r]=parseFloat(u[r]);0===n.indexOf("matrix")?(t[0]+=u[4],t[1]+=u[5]):0===n.indexOf("translateX")?t[0]+=u[0]:0===n.indexOf("translateY")?t[1]+=u[0]:0===n.indexOf("translate")&&(t[0]+=u[0],t[1]+=u[1])}return s.A.exists(e.style.zoom)&&""!==(n=e.style.zoom)&&(t[0]*=parseFloat(n),t[1]*=parseFloat(n)),t},getCSSTransformMatrix:function(t){var e,i,r,n,o,a,l,u,c=t.ownerDocument,h=["transform","webkitTransform","MozTransform","msTransform","oTransform"],d=[[1,0,0],[0,1,0],[0,0,1]];if(c.defaultView&&c.defaultView.getComputedStyle)r=(u=c.defaultView.getComputedStyle(t,null)).getPropertyValue("-webkit-transform")||u.getPropertyValue("-moz-transform")||u.getPropertyValue("-ms-transform")||u.getPropertyValue("-o-transform")||u.getPropertyValue("transform");else for(a=h.length,e=0,r="";e<a;e++)if(s.A.exists(t.style[h[e]])){r=t.style[h[e]];break}if(""!==r&&(o=r.indexOf("("))>0){for(a=r.length,i=0,l=(n=r.substring(o+1,a-1).split(",")).length;i<l;i++)n[i]=parseFloat(n[i]);0===r.indexOf("matrix")?d=[[1,0,0],[0,n[0],n[1]],[0,n[2],n[3]]]:0===r.indexOf("scaleX")?d[1][1]=n[0]:0===r.indexOf("scaleY")?d[2][2]=n[0]:0===r.indexOf("scale")&&(d[1][1]=n[0],d[2][2]=n[1])}return s.A.exists(t.style.zoom)&&""!==(r=t.style.zoom)&&(d[1][1]*=parseFloat(r),d[2][2]*=parseFloat(r)),d},timedChunk:function(t,e,i,r){var s=t.slice(),n=function(){var o=+new Date;do{e.call(i,s.shift())}while(s.length>0&&+new Date-o<300);s.length>0?window.setTimeout(n,1):r(t)};window.setTimeout(n,1)},scaleJSXGraphDiv:function(t,e,i,s){var n,o,a,l,u,c,h,d,p,f,_,m,g=s;for(o=(a=i.getElementById(t).getBoundingClientRect()).height,n=a.width,c=(d=i.getElementById(e))._cssFullscreenStore.w,_=(h=d._cssFullscreenStore.h)/c,c>n*g&&(h=(c=n*g)*_),h>o*g&&(c=(h=o*g)/_),l=c,p=_<o/n?n*g/c:o*g/h,f=.5*(o-(u=h)),m=0;m<4;m++)try{d.style.width=l+"px !important",d.style.height=u+"px !important",d.style.margin="0 auto",d.style.transform=d._cssFullscreenStore.transform+" matrix("+p+",0,0,"+p+",0,"+f+")";break}catch(y){r.A.debug("JXG.scaleJSXGraphDiv:\n"+y)}4===m&&r.A.debug("JXG.scaleJSXGraphDiv: Could not set any CSS property.")}});const n=r.A},512:(t,e,i)=>{i.d(e,{A:()=>n});var r=i(533),s=i(514);r.A.EventEmitter={eventHandlers:{},suspended:{},trigger:function(t,e){var i,r,s,n,o,a;for(o=t.length,r=0;r<o;r++)if(n=this.eventHandlers[t[r]],!this.suspended[t[r]]){if(this.suspended[t[r]]=!0,n)for(a=n.length,i=0;i<a;i++)(s=n[i]).handler.apply(s.context,e);this.suspended[t[r]]=!1}return this},on:function(t,e,i){return s.A.isArray(this.eventHandlers[t])||(this.eventHandlers[t]=[]),i=s.A.def(i,this),this.eventHandlers[t].push({handler:e,context:i}),this},off:function(t,e){var i;return t&&s.A.isArray(this.eventHandlers[t])?(e?((i=s.A.indexOf(this.eventHandlers[t],e,"handler"))>-1&&this.eventHandlers[t].splice(i,1),0===this.eventHandlers[t].length&&delete this.eventHandlers[t]):delete this.eventHandlers[t],this):this},eventify:function(t){t.eventHandlers={clicks:0},t.on=this.on,t.off=this.off,t.triggerEventHandlers=this.trigger,t.trigger=this.trigger,t.suspended={}}};const n=r.A.EventEmitter},955:(t,e,i)=>{i.d(e,{A:()=>a});var r=i(533),s=i(514),n=i(667),o=i(42);r.A.Expect={each:function(t,e,i){var r,n,o=[];if(s.A.exists(t.length))for(n=t.length,r=0;r<n;r++)o.push(e.call(this,t[r],i));return o},coords:function(t,e){var i=t;return t&&t.elementClass===n.A.OBJECT_CLASS_POINT?i=t.coords:t.usrCoords&&t.scrCoords&&t.usr2screen&&(i=t),e&&(i=new o.A(n.A.COORDS_BY_USER,i.usrCoords,i.board)),i},coordsArray:function(t,e){var i;return(i=s.A.isArray(t)?t:this.coords(t).usrCoords).length<3&&i.unshift(1),e&&(i=[i[0],i[1],i[2]]),i}};const a=r.A.Expect},514:(t,e,i)=>{i.d(e,{A:()=>o});var r=i(533),s=i(667),n=i(259);r.A.extend(r.A,{isBoard:function(t){return null!==t&&"object"===typeof t&&this.isNumber(t.BOARD_MODE_NONE)&&this.isObject(t.objects)&&this.isObject(t.jc)&&this.isFunction(t.update)&&!!t.containerObj&&this.isString(t.id)},isId:function(t,e){return"string"===typeof e&&!!t.objects[e]},isName:function(t,e){return"string"===typeof e&&!!t.elementsByName[e]},isGroup:function(t,e){return"string"===typeof e&&!!t.groups[e]},isString:function(t){return"string"===typeof t},isNumber:function(t,e,i){var r="number"===typeof t||"[Object Number]"===Object.prototype.toString.call(t);return i=void 0===i||i,(e=e||!1)&&(r=r||""+parseFloat(t)===t),i||(r=r&&!isNaN(t)),r},isFunction:function(t){return"function"===typeof t},isArray:function(t){return Array.isArray?Array.isArray(t):null!==t&&"object"===typeof t&&"function"===typeof t.splice&&"function"===typeof t.join},isObject:function(t){return"object"===typeof t&&!this.isArray(t)},isDocumentOrFragment:function(t){return this.isObject(t)&&(9===t.nodeType||11===t.nodeType)},isPoint:function(t){return!(null===t||"object"!==typeof t||!this.exists(t.elementClass))&&t.elementClass===s.A.OBJECT_CLASS_POINT},isPoint3D:function(t){return!(null===t||"object"!==typeof t||!this.exists(t.elType))&&"point3d"===t.elType},isPointType:function(t,e){var i,r;return!!this.isArray(e)||(!!(this.isFunction(e)&&(i=e(),this.isArray(i)&&i.length>1))||(r=t.select(e),this.isPoint(r)))},isPointType3D:function(t,e){var i,r;return!!(this.isArray(e)&&e.length>=3)||(!!(this.isFunction(e)&&(i=e(),this.isArray(i)&&i.length>=3))||(r=t.select(e),this.isPoint3D(r)))},isTransformationOrArray:function(t){if(null!==t){if(this.isArray(t)&&t.length>0)return this.isTransformationOrArray(t[0]);if("object"===typeof t)return t.type===s.A.OBJECT_TYPE_TRANSFORMATION}return!1},isEmpty:function(t){return 0===Object.keys(t).length},exists:function(t,e){var i=!(void 0==t||null===t);return(e=e||!1)?i&&""!==t:i},def:function(t,e){return this.exists(t)?t:e},str2Bool:function(t){return!this.exists(t)||("boolean"===typeof t?t:!!this.isString(t)&&"true"===t.toLowerCase())},cssParse:function(t){var e=t;return this.isString(e)?(e='{"'+(e=(e=(e=(e=e.replace(/\s*;\s*$/g,"")).replace(/\s*;\s*/g,'","')).replace(/\s*:\s*/g,'":"')).trim())+'"}',JSON.parse(e)):{}},cssStringify:function(t){var e,i,r="";if(!this.isObject(t))return"";for(e in t)t.hasOwnProperty(e)&&(i=t[e],(this.isString(i)||this.isNumber(i))&&(r+=e+":"+i+"; "));return r=r.trim()},createEvalFunction:function(t,e,i){var s,n,o,a=[],l={};for(n=0;n<i;n++)for(o in a[n]=r.A.createFunction(e[n],t),a[n].deps)l[o]=a[n].deps;return(s=function(t){return a[t]()}).deps=l,s},createFunction:function(t,e,i,r){var s=null;return this.isString(t)?s=e.jc.snippet(t,!0,i,!1):this.isFunction(t)?(s=t).deps={}:this.isNumber(t)&&((s=function(){return t}).deps={}),null!==s&&(s.origin=t),s},providePoints:function(t,e,i,r,s){var n,o,a,l,u,c=0,h=[];for(this.isArray(e)||(e=[e]),a=e.length,this.exists(s)&&(c=s.length),0===c&&(l=this.copyAttributes(i,t.options,r)),n=0;n<a;++n)if(c>0&&(o=Math.min(n,c-1),l=this.copyAttributes(i,t.options,r,s[o].toLowerCase())),this.isArray(e[n])&&e[n].length>1?(h.push(t.create("point",e[n],l)),h[h.length-1]._is_new=!0):this.isFunction(e[n])?(u=e[n](),this.isArray(u)&&u.length>1&&(h.push(t.create("point",[e[n]],l)),h[h.length-1]._is_new=!0)):h.push(t.select(e[n])),!this.isPoint(h[n]))return!1;return h},providePoints3D:function(t,e,i,r,s){var n,o,a,l,u,c=0,h=[];for(this.isArray(e)||(e=[e]),a=e.length,this.exists(s)&&(c=s.length),0===c&&(l=this.copyAttributes(i,t.board.options,r)),n=0;n<a;++n)if(c>0&&(o=Math.min(n,c-1),l=this.copyAttributes(i,t.board.options,r,s[o])),this.isArray(e[n])&&e[n].length>1?(h.push(t.create("point3d",e[n],l)),h[h.length-1]._is_new=!0):this.isFunction(e[n])?(u=e[n](),this.isArray(u)&&u.length>1&&(h.push(t.create("point3d",[e[n]],l)),h[h.length-1]._is_new=!0)):h.push(t.select(e[n])),!this.isPoint3D(h[n]))return!1;return h},bind:function(t,e){return function(){return t.apply(e,arguments)}},evaluate:function(t){return this.isFunction(t)?t():t},indexOf:function(t,e,i){var r,s=this.exists(i);if(Array.indexOf&&!s)return t.indexOf(e);for(r=0;r<t.length;r++)if(s&&t[r][i]===e||!s&&t[r]===e)return r;return-1},eliminateDuplicates:function(t){var e,i=t.length,r=[],s={};for(e=0;e<i;e++)s[t[e]]=0;for(e in s)s.hasOwnProperty(e)&&r.push(e);return r},swap:function(t,e,i){var r;return r=t[e],t[e]=t[i],t[i]=r,t},uniqueArray:function(t){var e,i,s,n=[];if(0===t.length)return[];for(e=0;e<t.length;e++)if(s=this.isArray(t[e]),this.exists(t[e]))for(i=e+1;i<t.length;i++)s&&r.A.cmpArrays(t[e],t[i])?t[e]=[]:s||t[e]!==t[i]||(t[e]="");else t[e]="";for(i=0,e=0;e<t.length;e++)(s=this.isArray(t[e]))||""===t[e]?s&&0!==t[e].length&&(n[i]=t[e].slice(0),i++):(n[i]=t[e],i++);return t=n,n},isInArray:function(t,e){return r.A.indexOf(t,e)>-1},coordsArrayToMatrix:function(t,e){var i,r=[],s=[];for(i=0;i<t.length;i++)e?(r.push(t[i].usrCoords[1]),s.push(t[i].usrCoords[2])):s.push([t[i].usrCoords[1],t[i].usrCoords[2]]);return e&&(s=[r,s]),s},cmpArrays:function(t,e){var i;if(t===e)return!0;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(this.isArray(t[i])&&this.isArray(e[i])){if(!this.cmpArrays(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0},removeElementFromArray:function(t,e){var i;for(i=0;i<t.length;i++)if(t[i]===e)return t.splice(i,1),t;return t},trunc:function(t,e){return e=r.A.def(e,0),this.toFixed(t,e)},_decimalAdjust:function(t,e,i){return void 0===i||0===+i?Math[t](e):(e=+e,i=+i,isNaN(e)||"number"!==typeof i||i%1!==0?NaN:(e=e.toString().split("e"),+((e=(e=Math[t](+(e[0]+"e"+(e[1]?+e[1]-i:-i)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+i:i))))},_round10:function(t,e){return this._decimalAdjust("round",t,e)},_floor10:function(t,e){return this._decimalAdjust("floor",t,e)},_ceil10:function(t,e){return this._decimalAdjust("ceil",t,e)},toFixed:function(t,e){return this._round10(t,-e).toFixed(e)},autoDigits:function(t){var e=Math.abs(t);return e>=.1?this.toFixed(t,2):e>=.01?this.toFixed(t,4):e>=1e-4?this.toFixed(t,6):t},parseNumber:function(t,e,i){var r;return this.isString(t)&&t.indexOf("%")>-1?(r=t.replace(/\s+%\s+/,""),parseFloat(r)*e*.01):this.isString(t)&&t.indexOf("fr")>-1?(r=t.replace(/\s+fr\s+/,""),parseFloat(r)*e):this.isString(t)&&t.indexOf("px")>-1?(r=t.replace(/\s+px\s+/,""),r=parseFloat(r),this.isFunction(i)?i(r):this.isNumber(i)?r*i:r):parseFloat(t)},parsePosition:function(t){var e,i,r="",s="";if(""!==(t=t.trim()))for(e=t.split(/[ ,]+/),i=0;i<e.length;i++)"left"===e[i]||"right"===e[i]?r=e[i]:s=e[i];return{side:r,pos:s}},keys:function(t,e){var i,r=[];for(i in t)e?t.hasOwnProperty(i)&&r.push(i):r.push(i);return r},clone:function(t){var e={};return e.prototype=t,e},cloneAndCopy:function(t,e){var i,r=function(){};for(i in r.prototype=t,e)r[i]=e[i];return r},merge:function(t,e){var i,r,s,n;for(i in e)if(e.hasOwnProperty(i))if(s=e[i],this.isArray(s))for(t[i]||(t[i]=[]),r=0;r<s.length;r++)n=e[i][r],"object"===typeof e[i][r]?t[i][r]=this.merge(t[i][r],n):t[i][r]=e[i][r];else"object"===typeof s?(t[i]||(t[i]={}),t[i]=this.merge(t[i],s)):("boolean"===typeof t&&(t={}),t[i]=s);return t},deepCopy:function(t,e,i){var r,s,n,o;if(i=i||!1,"object"!==typeof t||null===t)return t;if(this.isArray(t))for(r=[],s=0;s<t.length;s++)null!==(n=t[s])&&"object"===typeof n?this.exists(n.board)?r[s]=n.id:r[s]=this.deepCopy(n,{},i):r[s]=n;else{for(s in r={},t)t.hasOwnProperty(s)&&(o=i?s.toLowerCase():s,null!==(n=t[s])&&"object"===typeof n?this.exists(n.board)?r[o]=n.id:r[o]=this.deepCopy(n,{},i):r[o]=n);for(s in e)e.hasOwnProperty(s)&&(o=i?s.toLowerCase():s,null!==(n=e[s])&&"object"===typeof n?this.isArray(n)||!this.exists(r[o])?r[o]=this.deepCopy(n,{},i):r[o]=this.deepCopy(r[o],n,i):r[o]=n)}return r},mergeAttr:function(t,e,i,r){var s,n,o;for(s in i=i||!0,r=r||!1,e)e.hasOwnProperty(s)&&(n=i?s.toLowerCase():s,o=e[s],!this.isObject(o)||null===o||this.isDocumentOrFragment(o)||this.exists(o.board)||"string"===typeof o.valueOf()?r&&!this.exists(o)||(t[n]=o):(void 0!==t[n]&&null!==t[n]&&this.isObject(t[n])||(t[n]={}),this.mergeAttr(t[n],o,i)))},keysToLowerCase:function(t){var e,i,r=Object.keys(t),s=r.length,n={};if("object"!==typeof t)return t;for(;s--;)e=r[s],t.hasOwnProperty(e)&&("object"!==typeof(i=t[e])||null===i||this.isArray(i)||this.exists(i.nodeType)||this.exists(i.board)?n[e.toLowerCase()]=i:n[e.toLowerCase()]=this.keysToLowerCase(i));return n},copyAttributes:function(t,e,i){var s,n,o,a,l;for(s=(o=arguments.length)<3||{circle:1,curve:1,foreignobject:1,image:1,line:1,point:1,polygon:1,text:1,ticks:1,integral:1}[i]?r.A.deepCopy(e.elements,null,!0):{},o<4&&this.exists(i)&&this.exists(e.layer[i])&&(s.layer=e.layer[i]),a=e,l=!0,n=2;n<o;n++){if(!this.exists(a[arguments[n]])){l=!1;break}a=a[arguments[n]]}for(l&&(s=r.A.deepCopy(s,a,!0)),a="object"===typeof t?this.keysToLowerCase(t):{},l=!0,n=3;n<o;n++){if(!this.exists(a[arguments[n]])){l=!1;break}a=a[arguments[n]]}if(l&&this.mergeAttr(s,a,!0),"board"===arguments[2])return s;for(a=e,l=!0,n=2;n<o;n++){if(!this.exists(a[arguments[n]])){l=!1;break}a=a[arguments[n]]}return l&&this.exists(a.label)&&(s.label=r.A.deepCopy(a.label,s.label,!0)),s.label=r.A.deepCopy(e.label,s.label,!0),s},copyPrototypeMethods:function(t,e,i){var r;for(r in t.prototype[i]=e.prototype.constructor,e.prototype)e.prototype.hasOwnProperty(r)&&(t.prototype[r]=e.prototype[r])},toJSON:function(t,e){var i,s,n,o;if(e=r.A.def(e,!1),void 0!==JSON&&JSON.stringify&&!e)try{return JSON.stringify(t)}catch(a){}switch(typeof t){case"object":if(t){if(i=[],this.isArray(t)){for(n=0;n<t.length;n++)i.push(r.A.toJSON(t[n],e));return"["+i.join(",")+"]"}for(s in t)if(t.hasOwnProperty(s)){try{o=r.A.toJSON(t[s],e)}catch(l){o=""}e?i.push(s+":"+o):i.push('"'+s+'":'+o)}return"{"+i.join(",")+"} "}return"null";case"string":return"'"+t.replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return t.toString()}return"0"},clearVisPropOld:function(t){return t.visPropOld={cssclass:"",cssdefaultstyle:"",cssstyle:"",fillcolor:"",fillopacity:"",firstarrow:!1,fontsize:-1,lastarrow:!1,left:-1e5,linecap:"",shadow:!1,strokecolor:"",strokeopacity:"",strokewidth:"",tabindex:-1e5,transitionduration:0,top:-1e5,visible:null},t},isInObject:function(t,e){var i;for(i in t)if(t.hasOwnProperty(i)&&t[i]===e)return!0;return!1},escapeHTML:function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(t){return t.replace(/<\/?[^>]+>/gi,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()},trimNumber:function(t){return"."!==(t=(t=t.replace(/^0+/,"")).replace(/0+$/,""))[t.length-1]&&","!==t[t.length-1]||(t=t.slice(0,-1)),"."!==t[0]&&","!==t[0]||(t="0"+t),t},filterElements:function(t,e){var i,r,s,n,o,a,l,u=t.length,c=[];if("function"!==typeof e&&"object"!==typeof e)return c;for(i=0;i<u;i++){if(l=!0,s=t[i],"object"===typeof e){for(r in e)if(e.hasOwnProperty(r)&&(n=r.toLowerCase(),o="function"===typeof s[r]?s[r]():s[r],a=s.visProp&&"function"===typeof s.visProp[n]?s.visProp[n]():s.visProp&&s.visProp[n],!(l="function"===typeof e[r]?e[r](o)||e[r](a):o===e[r]||a===e[r])))break}else"function"===typeof e&&(l=e(s));l&&c.push(s)}return c},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},toFraction:function(t,e,i){var r=n.A.decToFraction(t,i),s="";return 0===r[1]&&0===r[2]?s+="0":(r[0]<0&&(s+="-"),0===r[2]?s+=r[1]:1===r[2]&&1===r[3]||(0!==r[1]&&(s+=" "),s+=!0===e?"\\frac{"+r[2]+"}{"+r[3]+"}":r[2]+"/"+r[3])),s},concat:function(t,e){var i,r=e.length;for(i=0;i<r;i++)t.push(e[i]);return t},sanitizeHTML:function(t,e){return"function"===typeof html_sanitize&&e?html_sanitize(t,(function(){}),(function(t){return t})):(t&&"string"===typeof t&&(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;")),t)},evalSlider:function(t){return t&&t.type===s.A.OBJECT_TYPE_GLIDER&&"function"===typeof t.Value?t.Value():t},stack2jsxgraph:function(t){var e;return"["===(e=t.replace(/%pi/g,"PI").replace(/%e/g,"EULER").replace(/%phi/g,"1.618033988749895").replace(/%gamma/g,"0.5772156649015329").trim())[0]&&"]"===e[e.length-1]&&(e=e.slice(1,-1).split(/\s*,\s*/)),e}});const o=r.A},730:(t,e,i)=>{var r=i(43),s=i(853);function n(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(a[t]=e,t=0;t<e.length;t++)o.add(e[t])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},_={};function m(t,e,i,r,s,n,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=n,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function A(t,e,i,r){var s=g.hasOwnProperty(e)?g[e]:null;(null!==s?0!==s.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,i,r){if(null===e||"undefined"===typeof e||function(t,e,i,r){if(null!==i&&0===i.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==i?!i.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,i,r))return!0;if(r)return!1;if(null!==i)switch(i.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,i,s,r)&&(i=null),r||null===s?function(t){return!!h.call(_,t)||!h.call(f,t)&&(p.test(t)?_[t]=!0:(f[t]=!0,!1))}(e)&&(null===i?t.removeAttribute(e):t.setAttribute(e,""+i)):s.mustUseProperty?t[s.propertyName]=null===i?3!==s.type&&"":i:(e=s.attributeName,r=s.attributeNamespace,null===i?t.removeAttribute(e):(i=3===(s=s.type)||4===s&&!0===i?"":""+i,r?t.setAttributeNS(r,e,i):t.setAttribute(e,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),x=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),O=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=D&&t[D]||t["@@iterator"])?t:null}var I,B=Object.assign;function F(t){if(void 0===I)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);I=e&&e[1]||""}return"\n"+I+t}var Y=!1;function U(t,e){if(!t||Y)return"";Y=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var s=u.stack.split("\n"),n=r.stack.split("\n"),o=s.length-1,a=n.length-1;1<=o&&0<=a&&s[o]!==n[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==n[a]){if(1!==o||1!==a)do{if(o--,0>--a||s[o]!==n[a]){var l="\n"+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=o&&0<=a);break}}}finally{Y=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?F(t):""}function z(t){switch(t.tag){case 5:return F(t.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return t=U(t.type,!1);case 11:return t=U(t.type.render,!1);case 1:return t=U(t.type,!0);default:return""}}function X(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case P:return"Fragment";case x:return"Portal";case w:return"Profiler";case E:return"StrictMode";case T:return"Suspense";case j:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case O:return(t.displayName||"Context")+".Consumer";case S:return(t._context.displayName||"Context")+".Provider";case M:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case N:return null!==(e=t.displayName||null)?e:X(t.type)||"Memo";case R:e=t._payload,t=t._init;try{return X(t(e))}catch(i){}}return null}function J(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X(e);case 8:return e===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function H(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function G(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function W(t){t._valueTracker||(t._valueTracker=function(t){var e=G(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var s=i.get,n=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(t){r=""+t,n.call(this,t)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function V(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),r="";return t&&(r=G(t)?t.checked?"true":"false":t.value),(t=r)!==i&&(e.setValue(t),!0)}function q(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function $(t,e){var i=e.checked;return B({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:t._wrapperState.initialChecked})}function K(t,e){var i=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;i=H(null!=e.value?e.value:i),t._wrapperState={initialChecked:r,initialValue:i,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Q(t,e){null!=(e=e.checked)&&A(t,"checked",e,!1)}function Z(t,e){Q(t,e);var i=H(e.value),r=e.type;if(null!=i)"number"===r?(0===i&&""===t.value||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?et(t,e.type,i):e.hasOwnProperty("defaultValue")&&et(t,e.type,H(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function tt(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}""!==(i=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==i&&(t.name=i)}function et(t,e,i){"number"===e&&q(t.ownerDocument)===t||(null==i?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var it=Array.isArray;function rt(t,e,i,r){if(t=t.options,e){e={};for(var s=0;s<i.length;s++)e["$"+i[s]]=!0;for(i=0;i<t.length;i++)s=e.hasOwnProperty("$"+t[i].value),t[i].selected!==s&&(t[i].selected=s),s&&r&&(t[i].defaultSelected=!0)}else{for(i=""+H(i),e=null,s=0;s<t.length;s++){if(t[s].value===i)return t[s].selected=!0,void(r&&(t[s].defaultSelected=!0));null!==e||t[s].disabled||(e=t[s])}null!==e&&(e.selected=!0)}}function st(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(n(91));return B({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nt(t,e){var i=e.value;if(null==i){if(i=e.children,e=e.defaultValue,null!=i){if(null!=e)throw Error(n(92));if(it(i)){if(1<i.length)throw Error(n(93));i=i[0]}e=i}null==e&&(e=""),i=e}t._wrapperState={initialValue:H(i)}}function ot(t,e){var i=H(e.value),r=H(e.defaultValue);null!=i&&((i=""+i)!==t.value&&(t.value=i),null==e.defaultValue&&t.defaultValue!==i&&(t.defaultValue=i)),null!=r&&(t.defaultValue=""+r)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function lt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?lt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ht,dt=(ht=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,i,r){MSApp.execUnsafeLocalFunction((function(){return ht(t,e)}))}:ht);function pt(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&3===i.nodeType)return void(i.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_t=["Webkit","ms","Moz","O"];function mt(t,e,i){return null==e||"boolean"===typeof e||""===e?"":i||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function gt(t,e){for(var i in t=t.style,e)if(e.hasOwnProperty(i)){var r=0===i.indexOf("--"),s=mt(i,e[i],r);"float"===i&&(i="cssFloat"),r?t.setProperty(i,s):t[i]=s}}Object.keys(ft).forEach((function(t){_t.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var yt=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(n(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(n(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(n(62))}}function At(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function Ct(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var xt=null,Pt=null,Et=null;function wt(t){if(t=vs(t)){if("function"!==typeof xt)throw Error(n(280));var e=t.stateNode;e&&(e=bs(e),xt(t.stateNode,t.type,e))}}function St(t){Pt?Et?Et.push(t):Et=[t]:Pt=t}function Ot(){if(Pt){var t=Pt,e=Et;if(Et=Pt=null,wt(t),e)for(t=0;t<e.length;t++)wt(e[t])}}function Mt(t,e){return t(e)}function Tt(){}var jt=!1;function Nt(t,e,i){if(jt)return t(e,i);jt=!0;try{return Mt(t,e,i)}finally{jt=!1,(null!==Pt||null!==Et)&&(Tt(),Ot())}}function Rt(t,e){var i=t.stateNode;if(null===i)return null;var r=bs(i);if(null===r)return null;i=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(i&&"function"!==typeof i)throw Error(n(231,e,typeof i));return i}var kt=!1;if(c)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){kt=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch(ht){kt=!1}function Lt(t,e,i,r,s,n,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(i,u)}catch(c){this.onError(c)}}var It=!1,Bt=null,Ft=!1,Yt=null,Ut={onError:function(t){It=!0,Bt=t}};function zt(t,e,i,r,s,n,o,a,l){It=!1,Bt=null,Lt.apply(Ut,arguments)}function Xt(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(i=e.return),t=e.return}while(t)}return 3===e.tag?i:null}function Jt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Ht(t){if(Xt(t)!==t)throw Error(n(188))}function Gt(t){return t=function(t){var e=t.alternate;if(!e){if(null===(e=Xt(t)))throw Error(n(188));return e!==t?null:t}for(var i=t,r=e;;){var s=i.return;if(null===s)break;var o=s.alternate;if(null===o){if(null!==(r=s.return)){i=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===i)return Ht(s),t;if(o===r)return Ht(s),e;o=o.sibling}throw Error(n(188))}if(i.return!==r.return)i=s,r=o;else{for(var a=!1,l=s.child;l;){if(l===i){a=!0,i=s,r=o;break}if(l===r){a=!0,r=s,i=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===i){a=!0,i=o,r=s;break}if(l===r){a=!0,r=o,i=s;break}l=l.sibling}if(!a)throw Error(n(189))}}if(i.alternate!==r)throw Error(n(190))}if(3!==i.tag)throw Error(n(188));return i.stateNode.current===i?t:e}(t),null!==t?Wt(t):null}function Wt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Wt(t);if(null!==e)return e;t=t.sibling}return null}var Vt=s.unstable_scheduleCallback,qt=s.unstable_cancelCallback,$t=s.unstable_shouldYield,Kt=s.unstable_requestPaint,Qt=s.unstable_now,Zt=s.unstable_getCurrentPriorityLevel,te=s.unstable_ImmediatePriority,ee=s.unstable_UserBlockingPriority,ie=s.unstable_NormalPriority,re=s.unstable_LowPriority,se=s.unstable_IdlePriority,ne=null,oe=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(le(t)/ue|0)|0},le=Math.log,ue=Math.LN2;var ce=64,he=4194304;function de(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pe(t,e){var i=t.pendingLanes;if(0===i)return 0;var r=0,s=t.suspendedLanes,n=t.pingedLanes,o=268435455&i;if(0!==o){var a=o&~s;0!==a?r=de(a):0!==(n&=o)&&(r=de(n))}else 0!==(o=i&~s)?r=de(o):0!==n&&(r=de(n));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&s)&&((s=r&-r)>=(n=e&-e)||16===s&&0!==(4194240&n)))return e;if(0!==(4&r)&&(r|=16&i),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)s=1<<(i=31-ae(e)),r|=t[i],e&=~s;return r}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function _e(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function ge(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function ye(t,e,i){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=i}function ve(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var r=31-ae(i),s=1<<r;s&e|t[r]&e&&(t[r]|=e),i&=~s}}var Ae=0;function be(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var Ce,xe,Pe,Ee,we,Se=!1,Oe=[],Me=null,Te=null,je=null,Ne=new Map,Re=new Map,ke=[],De="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Le(t,e){switch(t){case"focusin":case"focusout":Me=null;break;case"dragenter":case"dragleave":Te=null;break;case"mouseover":case"mouseout":je=null;break;case"pointerover":case"pointerout":Ne.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Re.delete(e.pointerId)}}function Ie(t,e,i,r,s,n){return null===t||t.nativeEvent!==n?(t={blockedOn:e,domEventName:i,eventSystemFlags:r,nativeEvent:n,targetContainers:[s]},null!==e&&(null!==(e=vs(e))&&xe(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==s&&-1===e.indexOf(s)&&e.push(s),t)}function Be(t){var e=ys(t.target);if(null!==e){var i=Xt(e);if(null!==i)if(13===(e=i.tag)){if(null!==(e=Jt(i)))return t.blockedOn=e,void we(t.priority,(function(){Pe(i)}))}else if(3===e&&i.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}t.blockedOn=null}function Fe(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var i=$e(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==i)return null!==(e=vs(i))&&xe(e),t.blockedOn=i,!1;var r=new(i=t.nativeEvent).constructor(i.type,i);bt=r,i.target.dispatchEvent(r),bt=null,e.shift()}return!0}function Ye(t,e,i){Fe(t)&&i.delete(e)}function Ue(){Se=!1,null!==Me&&Fe(Me)&&(Me=null),null!==Te&&Fe(Te)&&(Te=null),null!==je&&Fe(je)&&(je=null),Ne.forEach(Ye),Re.forEach(Ye)}function ze(t,e){t.blockedOn===e&&(t.blockedOn=null,Se||(Se=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ue)))}function Xe(t){function e(e){return ze(e,t)}if(0<Oe.length){ze(Oe[0],t);for(var i=1;i<Oe.length;i++){var r=Oe[i];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Me&&ze(Me,t),null!==Te&&ze(Te,t),null!==je&&ze(je,t),Ne.forEach(e),Re.forEach(e),i=0;i<ke.length;i++)(r=ke[i]).blockedOn===t&&(r.blockedOn=null);for(;0<ke.length&&null===(i=ke[0]).blockedOn;)Be(i),null===i.blockedOn&&ke.shift()}var Je=b.ReactCurrentBatchConfig,He=!0;function Ge(t,e,i,r){var s=Ae,n=Je.transition;Je.transition=null;try{Ae=1,Ve(t,e,i,r)}finally{Ae=s,Je.transition=n}}function We(t,e,i,r){var s=Ae,n=Je.transition;Je.transition=null;try{Ae=4,Ve(t,e,i,r)}finally{Ae=s,Je.transition=n}}function Ve(t,e,i,r){if(He){var s=$e(t,e,i,r);if(null===s)Jr(t,e,r,qe,i),Le(t,r);else if(function(t,e,i,r,s){switch(e){case"focusin":return Me=Ie(Me,t,e,i,r,s),!0;case"dragenter":return Te=Ie(Te,t,e,i,r,s),!0;case"mouseover":return je=Ie(je,t,e,i,r,s),!0;case"pointerover":var n=s.pointerId;return Ne.set(n,Ie(Ne.get(n)||null,t,e,i,r,s)),!0;case"gotpointercapture":return n=s.pointerId,Re.set(n,Ie(Re.get(n)||null,t,e,i,r,s)),!0}return!1}(s,t,e,i,r))r.stopPropagation();else if(Le(t,r),4&e&&-1<De.indexOf(t)){for(;null!==s;){var n=vs(s);if(null!==n&&Ce(n),null===(n=$e(t,e,i,r))&&Jr(t,e,r,qe,i),n===s)break;s=n}null!==s&&r.stopPropagation()}else Jr(t,e,r,null,i)}}var qe=null;function $e(t,e,i,r){if(qe=null,null!==(t=ys(t=Ct(r))))if(null===(e=Xt(t)))t=null;else if(13===(i=e.tag)){if(null!==(t=Jt(e)))return t;t=null}else if(3===i){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qe=t,null}function Ke(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zt()){case te:return 1;case ee:return 4;case ie:case re:return 16;case se:return 536870912;default:return 16}default:return 16}}var Qe=null,Ze=null,ti=null;function ei(){if(ti)return ti;var t,e,i=Ze,r=i.length,s="value"in Qe?Qe.value:Qe.textContent,n=s.length;for(t=0;t<r&&i[t]===s[t];t++);var o=r-t;for(e=1;e<=o&&i[r-e]===s[n-e];e++);return ti=s.slice(t,1<e?1-e:void 0)}function ii(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function ri(){return!0}function si(){return!1}function ni(t){function e(e,i,r,s,n){for(var o in this._reactName=e,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=n,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?ri:si,this.isPropagationStopped=si,this}return B(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),e}var oi,ai,li,ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ci=ni(ui),hi=B({},ui,{view:0,detail:0}),di=ni(hi),pi=B({},hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ei,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==li&&(li&&"mousemove"===t.type?(oi=t.screenX-li.screenX,ai=t.screenY-li.screenY):ai=oi=0,li=t),oi)},movementY:function(t){return"movementY"in t?t.movementY:ai}}),fi=ni(pi),_i=ni(B({},pi,{dataTransfer:0})),mi=ni(B({},hi,{relatedTarget:0})),gi=ni(B({},ui,{animationName:0,elapsedTime:0,pseudoElement:0})),yi=B({},ui,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vi=ni(yi),Ai=ni(B({},ui,{data:0})),bi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ci={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pi(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=xi[t])&&!!e[t]}function Ei(){return Pi}var wi=B({},hi,{key:function(t){if(t.key){var e=bi[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=ii(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Ci[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ei,charCode:function(t){return"keypress"===t.type?ii(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?ii(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Si=ni(wi),Oi=ni(B({},pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mi=ni(B({},hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ei})),Ti=ni(B({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0})),ji=B({},pi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ni=ni(ji),Ri=[9,13,27,32],ki=c&&"CompositionEvent"in window,Di=null;c&&"documentMode"in document&&(Di=document.documentMode);var Li=c&&"TextEvent"in window&&!Di,Ii=c&&(!ki||Di&&8<Di&&11>=Di),Bi=String.fromCharCode(32),Fi=!1;function Yi(t,e){switch(t){case"keyup":return-1!==Ri.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ui(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var zi=!1;var Xi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ji(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Xi[t.type]:"textarea"===e}function Hi(t,e,i,r){St(r),0<(e=Gr(e,"onChange")).length&&(i=new ci("onChange","change",null,i,r),t.push({event:i,listeners:e}))}var Gi=null,Wi=null;function Vi(t){Br(t,0)}function qi(t){if(V(As(t)))return t}function $i(t,e){if("change"===t)return e}var Ki=!1;if(c){var Qi;if(c){var Zi="oninput"in document;if(!Zi){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Zi="function"===typeof tr.oninput}Qi=Zi}else Qi=!1;Ki=Qi&&(!document.documentMode||9<document.documentMode)}function er(){Gi&&(Gi.detachEvent("onpropertychange",ir),Wi=Gi=null)}function ir(t){if("value"===t.propertyName&&qi(Wi)){var e=[];Hi(e,Wi,t,Ct(t)),Nt(Vi,e)}}function rr(t,e,i){"focusin"===t?(er(),Wi=i,(Gi=e).attachEvent("onpropertychange",ir)):"focusout"===t&&er()}function sr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return qi(Wi)}function nr(t,e){if("click"===t)return qi(e)}function or(t,e){if("input"===t||"change"===t)return qi(e)}var ar="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function lr(t,e){if(ar(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var s=i[r];if(!h.call(e,s)||!ar(t[s],e[s]))return!1}return!0}function ur(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cr(t,e){var i,r=ur(t);for(t=0;r;){if(3===r.nodeType){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=ur(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function dr(){for(var t=window,e=q();e instanceof t.HTMLIFrameElement;){try{var i="string"===typeof e.contentWindow.location.href}catch(d){i=!1}if(!i)break;e=q((t=e.contentWindow).document)}return e}function pr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function fr(t){var e=dr(),i=t.focusedElem,r=t.selectionRange;if(e!==i&&i&&i.ownerDocument&&hr(i.ownerDocument.documentElement,i)){if(null!==r&&pr(i))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(t,i.value.length);else if((t=(e=i.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var s=i.textContent.length,n=Math.min(r.start,s);r=void 0===r.end?n:Math.min(r.end,s),!t.extend&&n>r&&(s=r,r=n,n=s),s=cr(i,n);var o=cr(i,r);s&&o&&(1!==t.rangeCount||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&((e=e.createRange()).setStart(s.node,s.offset),t.removeAllRanges(),n>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}for(e=[],t=i;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<e.length;i++)(t=e[i]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _r=c&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,vr=!1;function Ar(t,e,i){var r=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;vr||null==mr||mr!==q(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Gr(gr,"onSelect")).length&&(e=new ci("onSelect","select",null,e,i),t.push({event:e,listeners:r}),e.target=mr)))}function br(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var Cr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},xr={},Pr={};function Er(t){if(xr[t])return xr[t];if(!Cr[t])return t;var e,i=Cr[t];for(e in i)if(i.hasOwnProperty(e)&&e in Pr)return xr[t]=i[e];return t}c&&(Pr=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);var wr=Er("animationend"),Sr=Er("animationiteration"),Or=Er("animationstart"),Mr=Er("transitionend"),Tr=new Map,jr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(t,e){Tr.set(t,e),l(e,[t])}for(var Rr=0;Rr<jr.length;Rr++){var kr=jr[Rr];Nr(kr.toLowerCase(),"on"+(kr[0].toUpperCase()+kr.slice(1)))}Nr(wr,"onAnimationEnd"),Nr(Sr,"onAnimationIteration"),Nr(Or,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Mr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Ir(t,e,i){var r=t.type||"unknown-event";t.currentTarget=i,function(t,e,i,r,s,o,a,l,u){if(zt.apply(this,arguments),It){if(!It)throw Error(n(198));var c=Bt;It=!1,Bt=null,Ft||(Ft=!0,Yt=c)}}(r,e,void 0,t),t.currentTarget=null}function Br(t,e){e=0!==(4&e);for(var i=0;i<t.length;i++){var r=t[i],s=r.event;r=r.listeners;t:{var n=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==n&&s.isPropagationStopped())break t;Ir(s,a,u),n=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==n&&s.isPropagationStopped())break t;Ir(s,a,u),n=l}}}if(Ft)throw t=Yt,Ft=!1,Yt=null,t}function Fr(t,e){var i=e[_s];void 0===i&&(i=e[_s]=new Set);var r=t+"__bubble";i.has(r)||(Xr(e,t,2,!1),i.add(r))}function Yr(t,e,i){var r=0;e&&(r|=4),Xr(i,t,r,e)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function zr(t){if(!t[Ur]){t[Ur]=!0,o.forEach((function(e){"selectionchange"!==e&&(Lr.has(e)||Yr(e,!1,t),Yr(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Ur]||(e[Ur]=!0,Yr("selectionchange",!1,e))}}function Xr(t,e,i,r){switch(Ke(e)){case 1:var s=Ge;break;case 4:s=We;break;default:s=Ve}i=s.bind(null,e,i,t),s=void 0,!kt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(s=!0),r?void 0!==s?t.addEventListener(e,i,{capture:!0,passive:s}):t.addEventListener(e,i,!0):void 0!==s?t.addEventListener(e,i,{passive:s}):t.addEventListener(e,i,!1)}function Jr(t,e,i,r,s){var n=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;o=o.return}for(;null!==a;){if(null===(o=ys(a)))return;if(5===(l=o.tag)||6===l){r=n=o;continue t}a=a.parentNode}}r=r.return}Nt((function(){var r=n,s=Ct(i),o=[];t:{var a=Tr.get(t);if(void 0!==a){var l=ci,u=t;switch(t){case"keypress":if(0===ii(i))break t;case"keydown":case"keyup":l=Si;break;case"focusin":u="focus",l=mi;break;case"focusout":u="blur",l=mi;break;case"beforeblur":case"afterblur":l=mi;break;case"click":if(2===i.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=_i;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mi;break;case wr:case Sr:case Or:l=gi;break;case Mr:l=Ti;break;case"scroll":l=di;break;case"wheel":l=Ni;break;case"copy":case"cut":case"paste":l=vi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Oi}var c=0!==(4&e),h=!c&&"scroll"===t,d=c?null!==a?a+"Capture":null:a;c=[];for(var p,f=r;null!==f;){var _=(p=f).stateNode;if(5===p.tag&&null!==_&&(p=_,null!==d&&(null!=(_=Rt(f,d))&&c.push(Hr(f,_,p)))),h)break;f=f.return}0<c.length&&(a=new l(a,u,null,i,s),o.push({event:a,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||i===bt||!(u=i.relatedTarget||i.fromElement)||!ys(u)&&!u[fs])&&(l||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=i.relatedTarget||i.toElement)?ys(u):null)&&(u!==(h=Xt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=fi,_="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(c=Oi,_="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?a:As(l),p=null==u?a:As(u),(a=new c(_,f+"leave",l,i,s)).target=h,a.relatedTarget=p,_=null,ys(s)===r&&((c=new c(d,f+"enter",u,i,s)).target=p,c.relatedTarget=h,_=c),h=_,l&&u)t:{for(d=u,f=0,p=c=l;p;p=Wr(p))f++;for(p=0,_=d;_;_=Wr(_))p++;for(;0<f-p;)c=Wr(c),f--;for(;0<p-f;)d=Wr(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break t;c=Wr(c),d=Wr(d)}c=null}else c=null;null!==l&&Vr(o,a,l,c,!1),null!==u&&null!==h&&Vr(o,h,u,c,!0)}if("select"===(l=(a=r?As(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=$i;else if(Ji(a))if(Ki)m=or;else{m=sr;var g=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=nr);switch(m&&(m=m(t,r))?Hi(o,m,i,s):(g&&g(t,a,r),"focusout"===t&&(g=a._wrapperState)&&g.controlled&&"number"===a.type&&et(a,"number",a.value)),g=r?As(r):window,t){case"focusin":(Ji(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,Ar(o,i,s);break;case"selectionchange":if(_r)break;case"keydown":case"keyup":Ar(o,i,s)}var y;if(ki)t:{switch(t){case"compositionstart":var v="onCompositionStart";break t;case"compositionend":v="onCompositionEnd";break t;case"compositionupdate":v="onCompositionUpdate";break t}v=void 0}else zi?Yi(t,i)&&(v="onCompositionEnd"):"keydown"===t&&229===i.keyCode&&(v="onCompositionStart");v&&(Ii&&"ko"!==i.locale&&(zi||"onCompositionStart"!==v?"onCompositionEnd"===v&&zi&&(y=ei()):(Ze="value"in(Qe=s)?Qe.value:Qe.textContent,zi=!0)),0<(g=Gr(r,v)).length&&(v=new Ai(v,t,null,i,s),o.push({event:v,listeners:g}),y?v.data=y:null!==(y=Ui(i))&&(v.data=y))),(y=Li?function(t,e){switch(t){case"compositionend":return Ui(e);case"keypress":return 32!==e.which?null:(Fi=!0,Bi);case"textInput":return(t=e.data)===Bi&&Fi?null:t;default:return null}}(t,i):function(t,e){if(zi)return"compositionend"===t||!ki&&Yi(t,e)?(t=ei(),ti=Ze=Qe=null,zi=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ii&&"ko"!==e.locale?null:e.data}}(t,i))&&(0<(r=Gr(r,"onBeforeInput")).length&&(s=new Ai("onBeforeInput","beforeinput",null,i,s),o.push({event:s,listeners:r}),s.data=y))}Br(o,e)}))}function Hr(t,e,i){return{instance:t,listener:e,currentTarget:i}}function Gr(t,e){for(var i=e+"Capture",r=[];null!==t;){var s=t,n=s.stateNode;5===s.tag&&null!==n&&(s=n,null!=(n=Rt(t,i))&&r.unshift(Hr(t,n,s)),null!=(n=Rt(t,e))&&r.push(Hr(t,n,s))),t=t.return}return r}function Wr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Vr(t,e,i,r,s){for(var n=e._reactName,o=[];null!==i&&i!==r;){var a=i,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,s?null!=(l=Rt(i,n))&&o.unshift(Hr(i,l,a)):s||null!=(l=Rt(i,n))&&o.push(Hr(i,l,a))),i=i.return}0!==o.length&&t.push({event:e,listeners:o})}var qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Kr(t){return("string"===typeof t?t:""+t).replace(qr,"\n").replace($r,"")}function Qr(t,e,i){if(e=Kr(e),Kr(t)!==e&&i)throw Error(n(425))}function Zr(){}var ts=null,es=null;function is(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,ns="function"===typeof Promise?Promise:void 0,os="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ns?function(t){return ns.resolve(null).then(t).catch(as)}:rs;function as(t){setTimeout((function(){throw t}))}function ls(t,e){var i=e,r=0;do{var s=i.nextSibling;if(t.removeChild(i),s&&8===s.nodeType)if("/$"===(i=s.data)){if(0===r)return t.removeChild(s),void Xe(e);r--}else"$"!==i&&"$?"!==i&&"$!"!==i||r++;i=s}while(i);Xe(e)}function us(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function cs(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var i=t.data;if("$"===i||"$!"===i||"$?"===i){if(0===e)return t;e--}else"/$"===i&&e++}t=t.previousSibling}return null}var hs=Math.random().toString(36).slice(2),ds="__reactFiber$"+hs,ps="__reactProps$"+hs,fs="__reactContainer$"+hs,_s="__reactEvents$"+hs,ms="__reactListeners$"+hs,gs="__reactHandles$"+hs;function ys(t){var e=t[ds];if(e)return e;for(var i=t.parentNode;i;){if(e=i[fs]||i[ds]){if(i=e.alternate,null!==e.child||null!==i&&null!==i.child)for(t=cs(t);null!==t;){if(i=t[ds])return i;t=cs(t)}return e}i=(t=i).parentNode}return null}function vs(t){return!(t=t[ds]||t[fs])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function As(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(n(33))}function bs(t){return t[ps]||null}var Cs=[],xs=-1;function Ps(t){return{current:t}}function Es(t){0>xs||(t.current=Cs[xs],Cs[xs]=null,xs--)}function ws(t,e){xs++,Cs[xs]=t.current,t.current=e}var Ss={},Os=Ps(Ss),Ms=Ps(!1),Ts=Ss;function js(t,e){var i=t.type.contextTypes;if(!i)return Ss;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s,n={};for(s in i)n[s]=e[s];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function Ns(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Rs(){Es(Ms),Es(Os)}function ks(t,e,i){if(Os.current!==Ss)throw Error(n(168));ws(Os,e),ws(Ms,i)}function Ds(t,e,i){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return i;for(var s in r=r.getChildContext())if(!(s in e))throw Error(n(108,J(t)||"Unknown",s));return B({},i,r)}function Ls(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ss,Ts=Os.current,ws(Os,t),ws(Ms,Ms.current),!0}function Is(t,e,i){var r=t.stateNode;if(!r)throw Error(n(169));i?(t=Ds(t,e,Ts),r.__reactInternalMemoizedMergedChildContext=t,Es(Ms),Es(Os),ws(Os,t)):Es(Ms),ws(Ms,i)}var Bs=null,Fs=!1,Ys=!1;function Us(t){null===Bs?Bs=[t]:Bs.push(t)}function zs(){if(!Ys&&null!==Bs){Ys=!0;var t=0,e=Ae;try{var i=Bs;for(Ae=1;t<i.length;t++){var r=i[t];do{r=r(!0)}while(null!==r)}Bs=null,Fs=!1}catch(s){throw null!==Bs&&(Bs=Bs.slice(t+1)),Vt(te,zs),s}finally{Ae=e,Ys=!1}}return null}var Xs=[],Js=0,Hs=null,Gs=0,Ws=[],Vs=0,qs=null,$s=1,Ks="";function Qs(t,e){Xs[Js++]=Gs,Xs[Js++]=Hs,Hs=t,Gs=e}function Zs(t,e,i){Ws[Vs++]=$s,Ws[Vs++]=Ks,Ws[Vs++]=qs,qs=t;var r=$s;t=Ks;var s=32-ae(r)-1;r&=~(1<<s),i+=1;var n=32-ae(e)+s;if(30<n){var o=s-s%5;n=(r&(1<<o)-1).toString(32),r>>=o,s-=o,$s=1<<32-ae(e)+s|i<<s|r,Ks=n+t}else $s=1<<n|i<<s|r,Ks=t}function tn(t){null!==t.return&&(Qs(t,1),Zs(t,1,0))}function en(t){for(;t===Hs;)Hs=Xs[--Js],Xs[Js]=null,Gs=Xs[--Js],Xs[Js]=null;for(;t===qs;)qs=Ws[--Vs],Ws[Vs]=null,Ks=Ws[--Vs],Ws[Vs]=null,$s=Ws[--Vs],Ws[Vs]=null}var rn=null,sn=null,nn=!1,on=null;function an(t,e){var i=Nu(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=t,null===(e=t.deletions)?(t.deletions=[i],t.flags|=16):e.push(i)}function ln(t,e){switch(t.tag){case 5:var i=t.type;return null!==(e=1!==e.nodeType||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,rn=t,sn=us(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,rn=t,sn=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(i=null!==qs?{id:$s,overflow:Ks}:null,t.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},(i=Nu(18,null,null,0)).stateNode=e,i.return=t,t.child=i,rn=t,sn=null,!0);default:return!1}}function un(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function cn(t){if(nn){var e=sn;if(e){var i=e;if(!ln(t,e)){if(un(t))throw Error(n(418));e=us(i.nextSibling);var r=rn;e&&ln(t,e)?an(r,i):(t.flags=-4097&t.flags|2,nn=!1,rn=t)}}else{if(un(t))throw Error(n(418));t.flags=-4097&t.flags|2,nn=!1,rn=t}}}function hn(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;rn=t}function dn(t){if(t!==rn)return!1;if(!nn)return hn(t),nn=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!is(t.type,t.memoizedProps)),e&&(e=sn)){if(un(t))throw pn(),Error(n(418));for(;e;)an(t,e),e=us(e.nextSibling)}if(hn(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(n(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var i=t.data;if("/$"===i){if(0===e){sn=us(t.nextSibling);break t}e--}else"$"!==i&&"$!"!==i&&"$?"!==i||e++}t=t.nextSibling}sn=null}}else sn=rn?us(t.stateNode.nextSibling):null;return!0}function pn(){for(var t=sn;t;)t=us(t.nextSibling)}function fn(){sn=rn=null,nn=!1}function _n(t){null===on?on=[t]:on.push(t)}var mn=b.ReactCurrentBatchConfig;function gn(t,e,i){if(null!==(t=i.ref)&&"function"!==typeof t&&"object"!==typeof t){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(n(309));var r=i.stateNode}if(!r)throw Error(n(147,t));var s=r,o=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=s.refs;null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}if("string"!==typeof t)throw Error(n(284));if(!i._owner)throw Error(n(290,t))}return t}function yn(t,e){throw t=Object.prototype.toString.call(e),Error(n(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vn(t){return(0,t._init)(t._payload)}function An(t){function e(e,i){if(t){var r=e.deletions;null===r?(e.deletions=[i],e.flags|=16):r.push(i)}}function i(i,r){if(!t)return null;for(;null!==r;)e(i,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(t,e){return(t=ku(t,e)).index=0,t.sibling=null,t}function o(e,i,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<i?(e.flags|=2,i):r:(e.flags|=2,i):(e.flags|=1048576,i)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,i,r){return null===e||6!==e.tag?((e=Bu(i,t.mode,r)).return=t,e):((e=s(e,i)).return=t,e)}function u(t,e,i,r){var n=i.type;return n===P?h(t,e,i.props.children,r,i.key):null!==e&&(e.elementType===n||"object"===typeof n&&null!==n&&n.$$typeof===R&&vn(n)===e.type)?((r=s(e,i.props)).ref=gn(t,e,i),r.return=t,r):((r=Du(i.type,i.key,i.props,null,t.mode,r)).ref=gn(t,e,i),r.return=t,r)}function c(t,e,i,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==i.containerInfo||e.stateNode.implementation!==i.implementation?((e=Fu(i,t.mode,r)).return=t,e):((e=s(e,i.children||[])).return=t,e)}function h(t,e,i,r,n){return null===e||7!==e.tag?((e=Lu(i,t.mode,r,n)).return=t,e):((e=s(e,i)).return=t,e)}function d(t,e,i){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Bu(""+e,t.mode,i)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case C:return(i=Du(e.type,e.key,e.props,null,t.mode,i)).ref=gn(t,null,e),i.return=t,i;case x:return(e=Fu(e,t.mode,i)).return=t,e;case R:return d(t,(0,e._init)(e._payload),i)}if(it(e)||L(e))return(e=Lu(e,t.mode,i,null)).return=t,e;yn(t,e)}return null}function p(t,e,i,r){var s=null!==e?e.key:null;if("string"===typeof i&&""!==i||"number"===typeof i)return null!==s?null:l(t,e,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case C:return i.key===s?u(t,e,i,r):null;case x:return i.key===s?c(t,e,i,r):null;case R:return p(t,e,(s=i._init)(i._payload),r)}if(it(i)||L(i))return null!==s?null:h(t,e,i,r,null);yn(t,i)}return null}function f(t,e,i,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(i)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case C:return u(e,t=t.get(null===r.key?i:r.key)||null,r,s);case x:return c(e,t=t.get(null===r.key?i:r.key)||null,r,s);case R:return f(t,e,i,(0,r._init)(r._payload),s)}if(it(r)||L(r))return h(e,t=t.get(i)||null,r,s,null);yn(e,r)}return null}function _(s,n,a,l){for(var u=null,c=null,h=n,_=n=0,m=null;null!==h&&_<a.length;_++){h.index>_?(m=h,h=null):m=h.sibling;var g=p(s,h,a[_],l);if(null===g){null===h&&(h=m);break}t&&h&&null===g.alternate&&e(s,h),n=o(g,n,_),null===c?u=g:c.sibling=g,c=g,h=m}if(_===a.length)return i(s,h),nn&&Qs(s,_),u;if(null===h){for(;_<a.length;_++)null!==(h=d(s,a[_],l))&&(n=o(h,n,_),null===c?u=h:c.sibling=h,c=h);return nn&&Qs(s,_),u}for(h=r(s,h);_<a.length;_++)null!==(m=f(h,s,_,a[_],l))&&(t&&null!==m.alternate&&h.delete(null===m.key?_:m.key),n=o(m,n,_),null===c?u=m:c.sibling=m,c=m);return t&&h.forEach((function(t){return e(s,t)})),nn&&Qs(s,_),u}function m(s,a,l,u){var c=L(l);if("function"!==typeof c)throw Error(n(150));if(null==(l=c.call(l)))throw Error(n(151));for(var h=c=null,_=a,m=a=0,g=null,y=l.next();null!==_&&!y.done;m++,y=l.next()){_.index>m?(g=_,_=null):g=_.sibling;var v=p(s,_,y.value,u);if(null===v){null===_&&(_=g);break}t&&_&&null===v.alternate&&e(s,_),a=o(v,a,m),null===h?c=v:h.sibling=v,h=v,_=g}if(y.done)return i(s,_),nn&&Qs(s,m),c;if(null===_){for(;!y.done;m++,y=l.next())null!==(y=d(s,y.value,u))&&(a=o(y,a,m),null===h?c=y:h.sibling=y,h=y);return nn&&Qs(s,m),c}for(_=r(s,_);!y.done;m++,y=l.next())null!==(y=f(_,s,m,y.value,u))&&(t&&null!==y.alternate&&_.delete(null===y.key?m:y.key),a=o(y,a,m),null===h?c=y:h.sibling=y,h=y);return t&&_.forEach((function(t){return e(s,t)})),nn&&Qs(s,m),c}return function t(r,n,o,l){if("object"===typeof o&&null!==o&&o.type===P&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case C:t:{for(var u=o.key,c=n;null!==c;){if(c.key===u){if((u=o.type)===P){if(7===c.tag){i(r,c.sibling),(n=s(c,o.props.children)).return=r,r=n;break t}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&vn(u)===c.type){i(r,c.sibling),(n=s(c,o.props)).ref=gn(r,c,o),n.return=r,r=n;break t}i(r,c);break}e(r,c),c=c.sibling}o.type===P?((n=Lu(o.props.children,r.mode,l,o.key)).return=r,r=n):((l=Du(o.type,o.key,o.props,null,r.mode,l)).ref=gn(r,n,o),l.return=r,r=l)}return a(r);case x:t:{for(c=o.key;null!==n;){if(n.key===c){if(4===n.tag&&n.stateNode.containerInfo===o.containerInfo&&n.stateNode.implementation===o.implementation){i(r,n.sibling),(n=s(n,o.children||[])).return=r,r=n;break t}i(r,n);break}e(r,n),n=n.sibling}(n=Fu(o,r.mode,l)).return=r,r=n}return a(r);case R:return t(r,n,(c=o._init)(o._payload),l)}if(it(o))return _(r,n,o,l);if(L(o))return m(r,n,o,l);yn(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==n&&6===n.tag?(i(r,n.sibling),(n=s(n,o)).return=r,r=n):(i(r,n),(n=Bu(o,r.mode,l)).return=r,r=n),a(r)):i(r,n)}}var bn=An(!0),Cn=An(!1),xn=Ps(null),Pn=null,En=null,wn=null;function Sn(){wn=En=Pn=null}function On(t){var e=xn.current;Es(xn),t._currentValue=e}function Mn(t,e,i){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===i)break;t=t.return}}function Tn(t,e){Pn=t,wn=En=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Aa=!0),t.firstContext=null)}function jn(t){var e=t._currentValue;if(wn!==t)if(t={context:t,memoizedValue:e,next:null},null===En){if(null===Pn)throw Error(n(308));En=t,Pn.dependencies={lanes:0,firstContext:t}}else En=En.next=t;return e}var Nn=null;function Rn(t){null===Nn?Nn=[t]:Nn.push(t)}function kn(t,e,i,r){var s=e.interleaved;return null===s?(i.next=i,Rn(e)):(i.next=s.next,s.next=i),e.interleaved=i,Dn(t,r)}function Dn(t,e){t.lanes|=e;var i=t.alternate;for(null!==i&&(i.lanes|=e),i=t,t=t.return;null!==t;)t.childLanes|=e,null!==(i=t.alternate)&&(i.childLanes|=e),i=t,t=t.return;return 3===i.tag?i.stateNode:null}var Ln=!1;function In(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bn(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yn(t,e,i){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ml)){var s=r.pending;return null===s?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Dn(t,i)}return null===(s=r.interleaved)?(e.next=e,Rn(r)):(e.next=s.next,s.next=e),r.interleaved=e,Dn(t,i)}function Un(t,e,i){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&i))){var r=e.lanes;i|=r&=t.pendingLanes,e.lanes=i,ve(t,i)}}function zn(t,e){var i=t.updateQueue,r=t.alternate;if(null!==r&&i===(r=r.updateQueue)){var s=null,n=null;if(null!==(i=i.firstBaseUpdate)){do{var o={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===n?s=n=o:n=n.next=o,i=i.next}while(null!==i);null===n?s=n=e:n=n.next=e}else s=n=e;return i={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:n,shared:r.shared,effects:r.effects},void(t.updateQueue=i)}null===(t=i.lastBaseUpdate)?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function Xn(t,e,i,r){var s=t.updateQueue;Ln=!1;var n=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?n=u:o.next=u,o=l;var c=t.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==n){var h=s.baseState;for(o=0,c=u=l=null,a=n;;){var d=a.lane,p=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var f=t,_=a;switch(d=e,p=i,_.tag){case 1:if("function"===typeof(f=_.payload)){h=f.call(p,h,d);break t}h=f;break t;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=_.payload)?f.call(p,h,d):f)||void 0===d)break t;h=B({},h,d);break t;case 2:Ln=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(d=s.effects)?s.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=p,l=h):c=c.next=p,o|=d;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(d=a).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===c&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,null!==(e=s.shared.interleaved)){s=e;do{o|=s.lane,s=s.next}while(s!==e)}else null===n&&(s.shared.lanes=0);Il|=o,t.lanes=o,t.memoizedState=h}}function Jn(t,e,i){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(null!==s){if(r.callback=null,r=i,"function"!==typeof s)throw Error(n(191,s));s.call(r)}}}var Hn={},Gn=Ps(Hn),Wn=Ps(Hn),Vn=Ps(Hn);function qn(t){if(t===Hn)throw Error(n(174));return t}function $n(t,e){switch(ws(Vn,e),ws(Wn,t),ws(Gn,Hn),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ut(null,"");break;default:e=ut(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Es(Gn),ws(Gn,e)}function Kn(){Es(Gn),Es(Wn),Es(Vn)}function Qn(t){qn(Vn.current);var e=qn(Gn.current),i=ut(e,t.type);e!==i&&(ws(Wn,t),ws(Gn,i))}function Zn(t){Wn.current===t&&(Es(Gn),Es(Wn))}var to=Ps(0);function eo(t){for(var e=t;null!==e;){if(13===e.tag){var i=e.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var io=[];function ro(){for(var t=0;t<io.length;t++)io[t]._workInProgressVersionPrimary=null;io.length=0}var so=b.ReactCurrentDispatcher,no=b.ReactCurrentBatchConfig,oo=0,ao=null,lo=null,uo=null,co=!1,ho=!1,po=0,fo=0;function _o(){throw Error(n(321))}function mo(t,e){if(null===e)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!ar(t[i],e[i]))return!1;return!0}function go(t,e,i,r,s,o){if(oo=o,ao=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,so.current=null===t||null===t.memoizedState?ta:ea,t=i(r,s),ho){o=0;do{if(ho=!1,po=0,25<=o)throw Error(n(301));o+=1,uo=lo=null,e.updateQueue=null,so.current=ia,t=i(r,s)}while(ho)}if(so.current=Zo,e=null!==lo&&null!==lo.next,oo=0,uo=lo=ao=null,co=!1,e)throw Error(n(300));return t}function yo(){var t=0!==po;return po=0,t}function vo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===uo?ao.memoizedState=uo=t:uo=uo.next=t,uo}function Ao(){if(null===lo){var t=ao.alternate;t=null!==t?t.memoizedState:null}else t=lo.next;var e=null===uo?ao.memoizedState:uo.next;if(null!==e)uo=e,lo=t;else{if(null===t)throw Error(n(310));t={memoizedState:(lo=t).memoizedState,baseState:lo.baseState,baseQueue:lo.baseQueue,queue:lo.queue,next:null},null===uo?ao.memoizedState=uo=t:uo=uo.next=t}return uo}function bo(t,e){return"function"===typeof e?e(t):e}function Co(t){var e=Ao(),i=e.queue;if(null===i)throw Error(n(311));i.lastRenderedReducer=t;var r=lo,s=r.baseQueue,o=i.pending;if(null!==o){if(null!==s){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,i.pending=null}if(null!==s){o=s.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((oo&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,ao.lanes|=h,Il|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,ar(r,e.memoizedState)||(Aa=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,i.lastRenderedState=r}if(null!==(t=i.interleaved)){s=t;do{o=s.lane,ao.lanes|=o,Il|=o,s=s.next}while(s!==t)}else null===s&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function xo(t){var e=Ao(),i=e.queue;if(null===i)throw Error(n(311));i.lastRenderedReducer=t;var r=i.dispatch,s=i.pending,o=e.memoizedState;if(null!==s){i.pending=null;var a=s=s.next;do{o=t(o,a.action),a=a.next}while(a!==s);ar(o,e.memoizedState)||(Aa=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),i.lastRenderedState=o}return[o,r]}function Po(){}function Eo(t,e){var i=ao,r=Ao(),s=e(),o=!ar(r.memoizedState,s);if(o&&(r.memoizedState=s,Aa=!0),r=r.queue,Io(Oo.bind(null,i,r,t),[t]),r.getSnapshot!==e||o||null!==uo&&1&uo.memoizedState.tag){if(i.flags|=2048,No(9,So.bind(null,i,r,s,e),void 0,null),null===Tl)throw Error(n(349));0!==(30&oo)||wo(i,e,s)}return s}function wo(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},null===(e=ao.updateQueue)?(e={lastEffect:null,stores:null},ao.updateQueue=e,e.stores=[t]):null===(i=e.stores)?e.stores=[t]:i.push(t)}function So(t,e,i,r){e.value=i,e.getSnapshot=r,Mo(e)&&To(t)}function Oo(t,e,i){return i((function(){Mo(e)&&To(t)}))}function Mo(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!ar(t,i)}catch(d){return!0}}function To(t){var e=Dn(t,1);null!==e&&ru(e,t,1,-1)}function jo(t){var e=vo();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:t},e.queue=t,t=t.dispatch=qo.bind(null,ao,t),[e.memoizedState,t]}function No(t,e,i,r){return t={tag:t,create:e,destroy:i,deps:r,next:null},null===(e=ao.updateQueue)?(e={lastEffect:null,stores:null},ao.updateQueue=e,e.lastEffect=t.next=t):null===(i=e.lastEffect)?e.lastEffect=t.next=t:(r=i.next,i.next=t,t.next=r,e.lastEffect=t),t}function Ro(){return Ao().memoizedState}function ko(t,e,i,r){var s=vo();ao.flags|=t,s.memoizedState=No(1|e,i,void 0,void 0===r?null:r)}function Do(t,e,i,r){var s=Ao();r=void 0===r?null:r;var n=void 0;if(null!==lo){var o=lo.memoizedState;if(n=o.destroy,null!==r&&mo(r,o.deps))return void(s.memoizedState=No(e,i,n,r))}ao.flags|=t,s.memoizedState=No(1|e,i,n,r)}function Lo(t,e){return ko(8390656,8,t,e)}function Io(t,e){return Do(2048,8,t,e)}function Bo(t,e){return Do(4,2,t,e)}function Fo(t,e){return Do(4,4,t,e)}function Yo(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Uo(t,e,i){return i=null!==i&&void 0!==i?i.concat([t]):null,Do(4,4,Yo.bind(null,e,t),i)}function zo(){}function Xo(t,e){var i=Ao();e=void 0===e?null:e;var r=i.memoizedState;return null!==r&&null!==e&&mo(e,r[1])?r[0]:(i.memoizedState=[t,e],t)}function Jo(t,e){var i=Ao();e=void 0===e?null:e;var r=i.memoizedState;return null!==r&&null!==e&&mo(e,r[1])?r[0]:(t=t(),i.memoizedState=[t,e],t)}function Ho(t,e,i){return 0===(21&oo)?(t.baseState&&(t.baseState=!1,Aa=!0),t.memoizedState=i):(ar(i,e)||(i=me(),ao.lanes|=i,Il|=i,t.baseState=!0),e)}function Go(t,e){var i=Ae;Ae=0!==i&&4>i?i:4,t(!0);var r=no.transition;no.transition={};try{t(!1),e()}finally{Ae=i,no.transition=r}}function Wo(){return Ao().memoizedState}function Vo(t,e,i){var r=iu(t);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},$o(t))Ko(e,i);else if(null!==(i=kn(t,e,i,r))){ru(i,t,r,eu()),Qo(i,e,r)}}function qo(t,e,i){var r=iu(t),s={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if($o(t))Ko(e,s);else{var n=t.alternate;if(0===t.lanes&&(null===n||0===n.lanes)&&null!==(n=e.lastRenderedReducer))try{var o=e.lastRenderedState,a=n(o,i);if(s.hasEagerState=!0,s.eagerState=a,ar(a,o)){var l=e.interleaved;return null===l?(s.next=s,Rn(e)):(s.next=l.next,l.next=s),void(e.interleaved=s)}}catch(u){}null!==(i=kn(t,e,s,r))&&(ru(i,t,r,s=eu()),Qo(i,e,r))}}function $o(t){var e=t.alternate;return t===ao||null!==e&&e===ao}function Ko(t,e){ho=co=!0;var i=t.pending;null===i?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function Qo(t,e,i){if(0!==(4194240&i)){var r=e.lanes;i|=r&=t.pendingLanes,e.lanes=i,ve(t,i)}}var Zo={readContext:jn,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ta={readContext:jn,useCallback:function(t,e){return vo().memoizedState=[t,void 0===e?null:e],t},useContext:jn,useEffect:Lo,useImperativeHandle:function(t,e,i){return i=null!==i&&void 0!==i?i.concat([t]):null,ko(4194308,4,Yo.bind(null,e,t),i)},useLayoutEffect:function(t,e){return ko(4194308,4,t,e)},useInsertionEffect:function(t,e){return ko(4,2,t,e)},useMemo:function(t,e){var i=vo();return e=void 0===e?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var r=vo();return e=void 0!==i?i(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Vo.bind(null,ao,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},vo().memoizedState=t},useState:jo,useDebugValue:zo,useDeferredValue:function(t){return vo().memoizedState=t},useTransition:function(){var t=jo(!1),e=t[0];return t=Go.bind(null,t[1]),vo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,i){var r=ao,s=vo();if(nn){if(void 0===i)throw Error(n(407));i=i()}else{if(i=e(),null===Tl)throw Error(n(349));0!==(30&oo)||wo(r,e,i)}s.memoizedState=i;var o={value:i,getSnapshot:e};return s.queue=o,Lo(Oo.bind(null,r,o,t),[t]),r.flags|=2048,No(9,So.bind(null,r,o,i,e),void 0,null),i},useId:function(){var t=vo(),e=Tl.identifierPrefix;if(nn){var i=Ks;e=":"+e+"R"+(i=($s&~(1<<32-ae($s)-1)).toString(32)+i),0<(i=po++)&&(e+="H"+i.toString(32)),e+=":"}else e=":"+e+"r"+(i=fo++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ea={readContext:jn,useCallback:Xo,useContext:jn,useEffect:Io,useImperativeHandle:Uo,useInsertionEffect:Bo,useLayoutEffect:Fo,useMemo:Jo,useReducer:Co,useRef:Ro,useState:function(){return Co(bo)},useDebugValue:zo,useDeferredValue:function(t){return Ho(Ao(),lo.memoizedState,t)},useTransition:function(){return[Co(bo)[0],Ao().memoizedState]},useMutableSource:Po,useSyncExternalStore:Eo,useId:Wo,unstable_isNewReconciler:!1},ia={readContext:jn,useCallback:Xo,useContext:jn,useEffect:Io,useImperativeHandle:Uo,useInsertionEffect:Bo,useLayoutEffect:Fo,useMemo:Jo,useReducer:xo,useRef:Ro,useState:function(){return xo(bo)},useDebugValue:zo,useDeferredValue:function(t){var e=Ao();return null===lo?e.memoizedState=t:Ho(e,lo.memoizedState,t)},useTransition:function(){return[xo(bo)[0],Ao().memoizedState]},useMutableSource:Po,useSyncExternalStore:Eo,useId:Wo,unstable_isNewReconciler:!1};function ra(t,e){if(t&&t.defaultProps){for(var i in e=B({},e),t=t.defaultProps)void 0===e[i]&&(e[i]=t[i]);return e}return e}function sa(t,e,i,r){i=null===(i=i(r,e=t.memoizedState))||void 0===i?e:B({},e,i),t.memoizedState=i,0===t.lanes&&(t.updateQueue.baseState=i)}var na={isMounted:function(t){return!!(t=t._reactInternals)&&Xt(t)===t},enqueueSetState:function(t,e,i){t=t._reactInternals;var r=eu(),s=iu(t),n=Fn(r,s);n.payload=e,void 0!==i&&null!==i&&(n.callback=i),null!==(e=Yn(t,n,s))&&(ru(e,t,s,r),Un(e,t,s))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var r=eu(),s=iu(t),n=Fn(r,s);n.tag=1,n.payload=e,void 0!==i&&null!==i&&(n.callback=i),null!==(e=Yn(t,n,s))&&(ru(e,t,s,r),Un(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=eu(),r=iu(t),s=Fn(i,r);s.tag=2,void 0!==e&&null!==e&&(s.callback=e),null!==(e=Yn(t,s,r))&&(ru(e,t,r,i),Un(e,t,r))}};function oa(t,e,i,r,s,n,o){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,n,o):!e.prototype||!e.prototype.isPureReactComponent||(!lr(i,r)||!lr(s,n))}function aa(t,e,i){var r=!1,s=Ss,n=e.contextType;return"object"===typeof n&&null!==n?n=jn(n):(s=Ns(e)?Ts:Os.current,n=(r=null!==(r=e.contextTypes)&&void 0!==r)?js(t,s):Ss),e=new e(i,n),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=na,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),e}function la(t,e,i,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(i,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(i,r),e.state!==t&&na.enqueueReplaceState(e,e.state,null)}function ua(t,e,i,r){var s=t.stateNode;s.props=i,s.state=t.memoizedState,s.refs={},In(t);var n=e.contextType;"object"===typeof n&&null!==n?s.context=jn(n):(n=Ns(e)?Ts:Os.current,s.context=js(t,n)),s.state=t.memoizedState,"function"===typeof(n=e.getDerivedStateFromProps)&&(sa(t,e,n,i),s.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(e=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),e!==s.state&&na.enqueueReplaceState(s,s.state,null),Xn(t,i,s,r),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308)}function ca(t,e){try{var i="",r=e;do{i+=z(r),r=r.return}while(r);var s=i}catch(n){s="\nError generating stack: "+n.message+"\n"+n.stack}return{value:t,source:e,stack:s,digest:null}}function ha(t,e,i){return{value:t,source:null,stack:null!=i?i:null,digest:null!=e?e:null}}function da(t,e){try{console.error(e.value)}catch(i){setTimeout((function(){throw i}))}}var pa="function"===typeof WeakMap?WeakMap:Map;function fa(t,e,i){(i=Fn(-1,i)).tag=3,i.payload={element:null};var r=e.value;return i.callback=function(){Hl||(Hl=!0,Gl=r),da(0,e)},i}function _a(t,e,i){(i=Fn(-1,i)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var s=e.value;i.payload=function(){return r(s)},i.callback=function(){da(0,e)}}var n=t.stateNode;return null!==n&&"function"===typeof n.componentDidCatch&&(i.callback=function(){da(0,e),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),i}function ma(t,e,i){var r=t.pingCache;if(null===r){r=t.pingCache=new pa;var s=new Set;r.set(e,s)}else void 0===(s=r.get(e))&&(s=new Set,r.set(e,s));s.has(i)||(s.add(i),t=wu.bind(null,t,e,i),e.then(t,t))}function ga(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ya(t,e,i,r,s){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((e=Fn(-1,1)).tag=2,Yn(i,e,1))),i.lanes|=1),t):(t.flags|=65536,t.lanes=s,t)}var va=b.ReactCurrentOwner,Aa=!1;function ba(t,e,i,r){e.child=null===t?Cn(e,null,i,r):bn(e,t.child,i,r)}function Ca(t,e,i,r,s){i=i.render;var n=e.ref;return Tn(e,s),r=go(t,e,i,r,n,s),i=yo(),null===t||Aa?(nn&&i&&tn(e),e.flags|=1,ba(t,e,r,s),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ha(t,e,s))}function xa(t,e,i,r,s){if(null===t){var n=i.type;return"function"!==typeof n||Ru(n)||void 0!==n.defaultProps||null!==i.compare||void 0!==i.defaultProps?((t=Du(i.type,null,r,e,e.mode,s)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=n,Pa(t,e,n,r,s))}if(n=t.child,0===(t.lanes&s)){var o=n.memoizedProps;if((i=null!==(i=i.compare)?i:lr)(o,r)&&t.ref===e.ref)return Ha(t,e,s)}return e.flags|=1,(t=ku(n,r)).ref=e.ref,t.return=e,e.child=t}function Pa(t,e,i,r,s){if(null!==t){var n=t.memoizedProps;if(lr(n,r)&&t.ref===e.ref){if(Aa=!1,e.pendingProps=r=n,0===(t.lanes&s))return e.lanes=t.lanes,Ha(t,e,s);0!==(131072&t.flags)&&(Aa=!0)}}return Sa(t,e,i,r,s)}function Ea(t,e,i){var r=e.pendingProps,s=r.children,n=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ws(kl,Rl),Rl|=i;else{if(0===(1073741824&i))return t=null!==n?n.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ws(kl,Rl),Rl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==n?n.baseLanes:i,ws(kl,Rl),Rl|=r}else null!==n?(r=n.baseLanes|i,e.memoizedState=null):r=i,ws(kl,Rl),Rl|=r;return ba(t,e,s,i),e.child}function wa(t,e){var i=e.ref;(null===t&&null!==i||null!==t&&t.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function Sa(t,e,i,r,s){var n=Ns(i)?Ts:Os.current;return n=js(e,n),Tn(e,s),i=go(t,e,i,r,n,s),r=yo(),null===t||Aa?(nn&&r&&tn(e),e.flags|=1,ba(t,e,i,s),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ha(t,e,s))}function Oa(t,e,i,r,s){if(Ns(i)){var n=!0;Ls(e)}else n=!1;if(Tn(e,s),null===e.stateNode)Ja(t,e),aa(e,i,r),ua(e,i,r,s),r=!0;else if(null===t){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=i.contextType;"object"===typeof u&&null!==u?u=jn(u):u=js(e,u=Ns(i)?Ts:Os.current);var c=i.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&la(e,o,r,u),Ln=!1;var d=e.memoizedState;o.state=d,Xn(e,r,o,s),l=e.memoizedState,a!==r||d!==l||Ms.current||Ln?("function"===typeof c&&(sa(e,i,c,r),l=e.memoizedState),(a=Ln||oa(e,i,a,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(e.flags|=4194308)):("function"===typeof o.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Bn(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ra(e.type,a),o.props=u,h=e.pendingProps,d=o.context,"object"===typeof(l=i.contextType)&&null!==l?l=jn(l):l=js(e,l=Ns(i)?Ts:Os.current);var p=i.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&la(e,o,r,l),Ln=!1,d=e.memoizedState,o.state=d,Xn(e,r,o,s);var f=e.memoizedState;a!==h||d!==f||Ms.current||Ln?("function"===typeof p&&(sa(e,i,p,r),f=e.memoizedState),(u=Ln||oa(e,i,u,r,d,f,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(e.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=f),o.props=r,o.state=f,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Ma(t,e,i,r,n,s)}function Ma(t,e,i,r,s,n){wa(t,e);var o=0!==(128&e.flags);if(!r&&!o)return s&&Is(e,i,!1),Ha(t,e,n);r=e.stateNode,va.current=e;var a=o&&"function"!==typeof i.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&o?(e.child=bn(e,t.child,null,n),e.child=bn(e,null,a,n)):ba(t,e,a,n),e.memoizedState=r.state,s&&Is(e,i,!0),e.child}function Ta(t){var e=t.stateNode;e.pendingContext?ks(0,e.pendingContext,e.pendingContext!==e.context):e.context&&ks(0,e.context,!1),$n(t,e.containerInfo)}function ja(t,e,i,r,s){return fn(),_n(s),e.flags|=256,ba(t,e,i,r),e.child}var Na,Ra,ka,Da,La={dehydrated:null,treeContext:null,retryLane:0};function Ia(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ba(t,e,i){var r,s=e.pendingProps,o=to.current,a=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&o)),r?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(o|=1),ws(to,1&o),null===t)return cn(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=s.children,t=s.fallback,a?(s=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&s)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Iu(l,s,0,null),t=Lu(t,s,i,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Ia(i),e.memoizedState=La,t):Fa(e,l));if(null!==(o=t.memoizedState)&&null!==(r=o.dehydrated))return function(t,e,i,r,s,o,a){if(i)return 256&e.flags?(e.flags&=-257,Ya(t,e,a,r=ha(Error(n(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=Iu({mode:"visible",children:r.children},s,0,null),(o=Lu(o,s,a,null)).flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,0!==(1&e.mode)&&bn(e,t.child,null,a),e.child.memoizedState=Ia(a),e.memoizedState=La,o);if(0===(1&e.mode))return Ya(t,e,a,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Ya(t,e,a,r=ha(o=Error(n(419)),r,void 0))}if(l=0!==(a&t.childLanes),Aa||l){if(null!==(r=Tl)){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|a))?0:s)&&s!==o.retryLane&&(o.retryLane=s,Dn(t,s),ru(r,t,s,-1))}return mu(),Ya(t,e,a,r=ha(Error(n(421))))}return"$?"===s.data?(e.flags|=128,e.child=t.child,e=Ou.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,sn=us(s.nextSibling),rn=e,nn=!0,on=null,null!==t&&(Ws[Vs++]=$s,Ws[Vs++]=Ks,Ws[Vs++]=qs,$s=t.id,Ks=t.overflow,qs=e),e=Fa(e,r.children),e.flags|=4096,e)}(t,e,l,s,r,o,i);if(a){a=s.fallback,l=e.mode,r=(o=t.child).sibling;var u={mode:"hidden",children:s.children};return 0===(1&l)&&e.child!==o?((s=e.child).childLanes=0,s.pendingProps=u,e.deletions=null):(s=ku(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=ku(r,a):(a=Lu(a,l,i,null)).flags|=2,a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,l=null===(l=t.child.memoizedState)?Ia(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~i,e.memoizedState=La,s}return t=(a=t.child).sibling,s=ku(a,{mode:"visible",children:s.children}),0===(1&e.mode)&&(s.lanes=i),s.return=e,s.sibling=null,null!==t&&(null===(i=e.deletions)?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=s,e.memoizedState=null,s}function Fa(t,e){return(e=Iu({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Ya(t,e,i,r){return null!==r&&_n(r),bn(e,t.child,null,i),(t=Fa(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Ua(t,e,i){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),Mn(t.return,e,i)}function za(t,e,i,r,s){var n=t.memoizedState;null===n?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:s}:(n.isBackwards=e,n.rendering=null,n.renderingStartTime=0,n.last=r,n.tail=i,n.tailMode=s)}function Xa(t,e,i){var r=e.pendingProps,s=r.revealOrder,n=r.tail;if(ba(t,e,r.children,i),0!==(2&(r=to.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ua(t,i,e);else if(19===t.tag)Ua(t,i,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ws(to,r),0===(1&e.mode))e.memoizedState=null;else switch(s){case"forwards":for(i=e.child,s=null;null!==i;)null!==(t=i.alternate)&&null===eo(t)&&(s=i),i=i.sibling;null===(i=s)?(s=e.child,e.child=null):(s=i.sibling,i.sibling=null),za(e,!1,s,i,n);break;case"backwards":for(i=null,s=e.child,e.child=null;null!==s;){if(null!==(t=s.alternate)&&null===eo(t)){e.child=s;break}t=s.sibling,s.sibling=i,i=s,s=t}za(e,!0,i,null,n);break;case"together":za(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ja(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ha(t,e,i){if(null!==t&&(e.dependencies=t.dependencies),Il|=e.lanes,0===(i&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(n(153));if(null!==e.child){for(i=ku(t=e.child,t.pendingProps),e.child=i,i.return=e;null!==t.sibling;)t=t.sibling,(i=i.sibling=ku(t,t.pendingProps)).return=e;i.sibling=null}return e.child}function Ga(t,e){if(!nn)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;null!==e;)null!==e.alternate&&(i=e),e=e.sibling;null===i?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var r=null;null!==i;)null!==i.alternate&&(r=i),i=i.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wa(t){var e=null!==t.alternate&&t.alternate.child===t.child,i=0,r=0;if(e)for(var s=t.child;null!==s;)i|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=t,s=s.sibling;else for(s=t.child;null!==s;)i|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=i,e}function Va(t,e,i){var r=e.pendingProps;switch(en(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(e),null;case 1:case 17:return Ns(e.type)&&Rs(),Wa(e),null;case 3:return r=e.stateNode,Kn(),Es(Ms),Es(Os),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(dn(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==on&&(au(on),on=null))),Ra(t,e),Wa(e),null;case 5:Zn(e);var s=qn(Vn.current);if(i=e.type,null!==t&&null!=e.stateNode)ka(t,e,i,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(n(166));return Wa(e),null}if(t=qn(Gn.current),dn(e)){r=e.stateNode,i=e.type;var o=e.memoizedProps;switch(r[ds]=e,r[ps]=o,t=0!==(1&e.mode),i){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(s=0;s<Dr.length;s++)Fr(Dr[s],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":K(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":nt(r,o),Fr("invalid",r)}for(var l in vt(i,o),s=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,u,t),s=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,u,t),s=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Fr("scroll",r)}switch(i){case"input":W(r),tt(r,o,!0);break;case"textarea":W(r),at(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=s,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=lt(i)),"http://www.w3.org/1999/xhtml"===t?"script"===i?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(i,{is:r.is}):(t=l.createElement(i),"select"===i&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,i),t[ds]=e,t[ps]=r,Na(t,e,!1,!1),e.stateNode=t;t:{switch(l=At(i,r),i){case"dialog":Fr("cancel",t),Fr("close",t),s=r;break;case"iframe":case"object":case"embed":Fr("load",t),s=r;break;case"video":case"audio":for(s=0;s<Dr.length;s++)Fr(Dr[s],t);s=r;break;case"source":Fr("error",t),s=r;break;case"img":case"image":case"link":Fr("error",t),Fr("load",t),s=r;break;case"details":Fr("toggle",t),s=r;break;case"input":K(t,r),s=$(t,r),Fr("invalid",t);break;case"option":default:s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=B({},r,{value:void 0}),Fr("invalid",t);break;case"textarea":nt(t,r),s=st(t,r),Fr("invalid",t)}for(o in vt(i,s),u=s)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?gt(t,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&dt(t,c):"children"===o?"string"===typeof c?("textarea"!==i||""!==c)&&pt(t,c):"number"===typeof c&&pt(t,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Fr("scroll",t):null!=c&&A(t,o,c,l))}switch(i){case"input":W(t),tt(t,r,!1);break;case"textarea":W(t),at(t);break;case"option":null!=r.value&&t.setAttribute("value",""+H(r.value));break;case"select":t.multiple=!!r.multiple,null!=(o=r.value)?rt(t,!!r.multiple,o,!1):null!=r.defaultValue&&rt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(t.onclick=Zr)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Wa(e),null;case 6:if(t&&null!=e.stateNode)Da(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(n(166));if(i=qn(Vn.current),qn(Gn.current),dn(e)){if(r=e.stateNode,i=e.memoizedProps,r[ds]=e,(o=r.nodeValue!==i)&&null!==(t=rn))switch(t.tag){case 3:Qr(r.nodeValue,i,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,i,0!==(1&t.mode))}o&&(e.flags|=4)}else(r=(9===i.nodeType?i:i.ownerDocument).createTextNode(r))[ds]=e,e.stateNode=r}return Wa(e),null;case 13:if(Es(to),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(nn&&null!==sn&&0!==(1&e.mode)&&0===(128&e.flags))pn(),fn(),e.flags|=98560,o=!1;else if(o=dn(e),null!==r&&null!==r.dehydrated){if(null===t){if(!o)throw Error(n(318));if(!(o=null!==(o=e.memoizedState)?o.dehydrated:null))throw Error(n(317));o[ds]=e}else fn(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Wa(e),o=!1}else null!==on&&(au(on),on=null),o=!0;if(!o)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=i,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&to.current)?0===Dl&&(Dl=3):mu())),null!==e.updateQueue&&(e.flags|=4),Wa(e),null);case 4:return Kn(),Ra(t,e),null===t&&zr(e.stateNode.containerInfo),Wa(e),null;case 10:return On(e.type._context),Wa(e),null;case 19:if(Es(to),null===(o=e.memoizedState))return Wa(e),null;if(r=0!==(128&e.flags),null===(l=o.rendering))if(r)Ga(o,!1);else{if(0!==Dl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=eo(t))){for(e.flags|=128,Ga(o,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=i,i=e.child;null!==i;)t=r,(o=i).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return ws(to,1&to.current|2),e.child}t=t.sibling}null!==o.tail&&Qt()>Xl&&(e.flags|=128,r=!0,Ga(o,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=eo(l))){if(e.flags|=128,r=!0,null!==(i=t.updateQueue)&&(e.updateQueue=i,e.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!nn)return Wa(e),null}else 2*Qt()-o.renderingStartTime>Xl&&1073741824!==i&&(e.flags|=128,r=!0,Ga(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(null!==(i=o.last)?i.sibling=l:e.child=l,o.last=l)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Qt(),e.sibling=null,i=to.current,ws(to,r?1&i|2:1&i),e):(Wa(e),null);case 22:case 23:return du(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Rl)&&(Wa(e),6&e.subtreeFlags&&(e.flags|=8192)):Wa(e),null;case 24:case 25:return null}throw Error(n(156,e.tag))}function qa(t,e){switch(en(e),e.tag){case 1:return Ns(e.type)&&Rs(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Kn(),Es(Ms),Es(Os),ro(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return Zn(e),null;case 13:if(Es(to),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(n(340));fn()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Es(to),null;case 4:return Kn(),null;case 10:return On(e.type._context),null;case 22:case 23:return du(),null;default:return null}}Na=function(t,e){for(var i=e.child;null!==i;){if(5===i.tag||6===i.tag)t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Ra=function(){},ka=function(t,e,i,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,qn(Gn.current);var n,o=null;switch(i){case"input":s=$(t,s),r=$(t,r),o=[];break;case"select":s=B({},s,{value:void 0}),r=B({},r,{value:void 0}),o=[];break;case"textarea":s=st(t,s),r=st(t,r),o=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(t.onclick=Zr)}for(c in vt(i,r),i=null,s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&null!=s[c])if("style"===c){var l=s[c];for(n in l)l.hasOwnProperty(n)&&(i||(i={}),i[n]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=s?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(n in l)!l.hasOwnProperty(n)||u&&u.hasOwnProperty(n)||(i||(i={}),i[n]="");for(n in u)u.hasOwnProperty(n)&&l[n]!==u[n]&&(i||(i={}),i[n]=u[n])}else i||(o||(o=[]),o.push(c,i)),i=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Fr("scroll",t),o||l===u||(o=[])):(o=o||[]).push(c,u))}i&&(o=o||[]).push("style",i);var c=o;(e.updateQueue=c)&&(e.flags|=4)}},Da=function(t,e,i,r){i!==r&&(e.flags|=4)};var $a=!1,Ka=!1,Qa="function"===typeof WeakSet?WeakSet:Set,Za=null;function tl(t,e){var i=t.ref;if(null!==i)if("function"===typeof i)try{i(null)}catch(d){Eu(t,e,d)}else i.current=null}function el(t,e,i){try{i()}catch(d){Eu(t,e,d)}}var il=!1;function rl(t,e,i){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&t)===t){var n=s.destroy;s.destroy=void 0,void 0!==n&&el(e,i,n)}s=s.next}while(s!==r)}}function sl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var i=e=e.next;do{if((i.tag&t)===t){var r=i.create;i.destroy=r()}i=i.next}while(i!==e)}}function nl(t){var e=t.ref;if(null!==e){var i=t.stateNode;t.tag,t=i,"function"===typeof e?e(t):e.current=t}}function ol(t){var e=t.alternate;null!==e&&(t.alternate=null,ol(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[ds],delete e[ps],delete e[_s],delete e[ms],delete e[gs])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ul(t,e,i){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===i.nodeType?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(8===i.nodeType?(e=i.parentNode).insertBefore(t,i):(e=i).appendChild(t),null!==(i=i._reactRootContainer)&&void 0!==i||null!==e.onclick||(e.onclick=Zr));else if(4!==r&&null!==(t=t.child))for(ul(t,e,i),t=t.sibling;null!==t;)ul(t,e,i),t=t.sibling}function cl(t,e,i){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(4!==r&&null!==(t=t.child))for(cl(t,e,i),t=t.sibling;null!==t;)cl(t,e,i),t=t.sibling}var hl=null,dl=!1;function pl(t,e,i){for(i=i.child;null!==i;)fl(t,e,i),i=i.sibling}function fl(t,e,i){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ne,i)}catch(a){}switch(i.tag){case 5:Ka||tl(i,e);case 6:var r=hl,s=dl;hl=null,pl(t,e,i),dl=s,null!==(hl=r)&&(dl?(t=hl,i=i.stateNode,8===t.nodeType?t.parentNode.removeChild(i):t.removeChild(i)):hl.removeChild(i.stateNode));break;case 18:null!==hl&&(dl?(t=hl,i=i.stateNode,8===t.nodeType?ls(t.parentNode,i):1===t.nodeType&&ls(t,i),Xe(t)):ls(hl,i.stateNode));break;case 4:r=hl,s=dl,hl=i.stateNode.containerInfo,dl=!0,pl(t,e,i),hl=r,dl=s;break;case 0:case 11:case 14:case 15:if(!Ka&&(null!==(r=i.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var n=s,o=n.destroy;n=n.tag,void 0!==o&&(0!==(2&n)||0!==(4&n))&&el(i,e,o),s=s.next}while(s!==r)}pl(t,e,i);break;case 1:if(!Ka&&(tl(i,e),"function"===typeof(r=i.stateNode).componentWillUnmount))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(a){Eu(i,e,a)}pl(t,e,i);break;case 21:pl(t,e,i);break;case 22:1&i.mode?(Ka=(r=Ka)||null!==i.memoizedState,pl(t,e,i),Ka=r):pl(t,e,i);break;default:pl(t,e,i)}}function _l(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var i=t.stateNode;null===i&&(i=t.stateNode=new Qa),e.forEach((function(e){var r=Mu.bind(null,t,e);i.has(e)||(i.add(e),e.then(r,r))}))}}function ml(t,e){var i=e.deletions;if(null!==i)for(var r=0;r<i.length;r++){var s=i[r];try{var o=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break t;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break t}l=l.return}if(null===hl)throw Error(n(160));fl(o,a,s),hl=null,dl=!1;var u=s.alternate;null!==u&&(u.return=null),s.return=null}catch(c){Eu(s,e,c)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)gl(e,t),e=e.sibling}function gl(t,e){var i=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),yl(t),4&r){try{rl(3,t,t.return),sl(3,t)}catch(m){Eu(t,t.return,m)}try{rl(5,t,t.return)}catch(m){Eu(t,t.return,m)}}break;case 1:ml(e,t),yl(t),512&r&&null!==i&&tl(i,i.return);break;case 5:if(ml(e,t),yl(t),512&r&&null!==i&&tl(i,i.return),32&t.flags){var s=t.stateNode;try{pt(s,"")}catch(m){Eu(t,t.return,m)}}if(4&r&&null!=(s=t.stateNode)){var o=t.memoizedProps,a=null!==i?i.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(s,o),At(l,a);var c=At(l,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?gt(s,d):"dangerouslySetInnerHTML"===h?dt(s,d):"children"===h?pt(s,d):A(s,h,d,c)}switch(l){case"input":Z(s,o);break;case"textarea":ot(s,o);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?rt(s,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?rt(s,!!o.multiple,o.defaultValue,!0):rt(s,!!o.multiple,o.multiple?[]:"",!1))}s[ps]=o}catch(m){Eu(t,t.return,m)}}break;case 6:if(ml(e,t),yl(t),4&r){if(null===t.stateNode)throw Error(n(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(m){Eu(t,t.return,m)}}break;case 3:if(ml(e,t),yl(t),4&r&&null!==i&&i.memoizedState.isDehydrated)try{Xe(e.containerInfo)}catch(m){Eu(t,t.return,m)}break;case 4:default:ml(e,t),yl(t);break;case 13:ml(e,t),yl(t),8192&(s=t.child).flags&&(o=null!==s.memoizedState,s.stateNode.isHidden=o,!o||null!==s.alternate&&null!==s.alternate.memoizedState||(zl=Qt())),4&r&&_l(t);break;case 22:if(h=null!==i&&null!==i.memoizedState,1&t.mode?(Ka=(c=Ka)||h,ml(e,t),Ka=c):ml(e,t),yl(t),8192&r){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!h&&0!==(1&t.mode))for(Za=t,h=t.child;null!==h;){for(d=Za=h;null!==Za;){switch(f=(p=Za).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:tl(p,p.return);var _=p.stateNode;if("function"===typeof _.componentWillUnmount){r=p,i=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(m){Eu(r,i,m)}}break;case 5:tl(p,p.return);break;case 22:if(null!==p.memoizedState){Cl(d);continue}}null!==f?(f.return=p,Za=f):Cl(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{s=d.stateNode,c?"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=mt("display",a))}catch(m){Eu(t,t.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Eu(t,t.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(e,t),yl(t),4&r&&_l(t);case 21:}}function yl(t){var e=t.flags;if(2&e){try{t:{for(var i=t.return;null!==i;){if(al(i)){var r=i;break t}i=i.return}throw Error(n(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(pt(s,""),r.flags&=-33),cl(t,ll(t),s);break;case 3:case 4:var o=r.stateNode.containerInfo;ul(t,ll(t),o);break;default:throw Error(n(161))}}catch(a){Eu(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function vl(t,e,i){Za=t,Al(t,e,i)}function Al(t,e,i){for(var r=0!==(1&t.mode);null!==Za;){var s=Za,n=s.child;if(22===s.tag&&r){var o=null!==s.memoizedState||$a;if(!o){var a=s.alternate,l=null!==a&&null!==a.memoizedState||Ka;a=$a;var u=Ka;if($a=o,(Ka=l)&&!u)for(Za=s;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?xl(s):null!==l?(l.return=o,Za=l):xl(s);for(;null!==n;)Za=n,Al(n,e,i),n=n.sibling;Za=s,$a=a,Ka=u}bl(t)}else 0!==(8772&s.subtreeFlags)&&null!==n?(n.return=s,Za=n):bl(t)}}function bl(t){for(;null!==Za;){var e=Za;if(0!==(8772&e.flags)){var i=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Ka||sl(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Ka)if(null===i)r.componentDidMount();else{var s=e.elementType===e.type?i.memoizedProps:ra(e.type,i.memoizedProps);r.componentDidUpdate(s,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;null!==o&&Jn(e,o,r);break;case 3:var a=e.updateQueue;if(null!==a){if(i=null,null!==e.child)switch(e.child.tag){case 5:case 1:i=e.child.stateNode}Jn(e,a,i)}break;case 5:var l=e.stateNode;if(null===i&&4&e.flags){i=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&i.focus();break;case"img":u.src&&(i.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Xe(d)}}}break;default:throw Error(n(163))}Ka||512&e.flags&&nl(e)}catch(p){Eu(e,e.return,p)}}if(e===t){Za=null;break}if(null!==(i=e.sibling)){i.return=e.return,Za=i;break}Za=e.return}}function Cl(t){for(;null!==Za;){var e=Za;if(e===t){Za=null;break}var i=e.sibling;if(null!==i){i.return=e.return,Za=i;break}Za=e.return}}function xl(t){for(;null!==Za;){var e=Za;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{sl(4,e)}catch(l){Eu(e,i,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var s=e.return;try{r.componentDidMount()}catch(l){Eu(e,s,l)}}var n=e.return;try{nl(e)}catch(l){Eu(e,n,l)}break;case 5:var o=e.return;try{nl(e)}catch(l){Eu(e,o,l)}}}catch(l){Eu(e,e.return,l)}if(e===t){Za=null;break}var a=e.sibling;if(null!==a){a.return=e.return,Za=a;break}Za=e.return}}var Pl,El=Math.ceil,wl=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Ol=b.ReactCurrentBatchConfig,Ml=0,Tl=null,jl=null,Nl=0,Rl=0,kl=Ps(0),Dl=0,Ll=null,Il=0,Bl=0,Fl=0,Yl=null,Ul=null,zl=0,Xl=1/0,Jl=null,Hl=!1,Gl=null,Wl=null,Vl=!1,ql=null,$l=0,Kl=0,Ql=null,Zl=-1,tu=0;function eu(){return 0!==(6&Ml)?Qt():-1!==Zl?Zl:Zl=Qt()}function iu(t){return 0===(1&t.mode)?1:0!==(2&Ml)&&0!==Nl?Nl&-Nl:null!==mn.transition?(0===tu&&(tu=me()),tu):0!==(t=Ae)?t:t=void 0===(t=window.event)?16:Ke(t.type)}function ru(t,e,i,r){if(50<Kl)throw Kl=0,Ql=null,Error(n(185));ye(t,i,r),0!==(2&Ml)&&t===Tl||(t===Tl&&(0===(2&Ml)&&(Bl|=i),4===Dl&&lu(t,Nl)),su(t,r),1===i&&0===Ml&&0===(1&e.mode)&&(Xl=Qt()+500,Fs&&zs()))}function su(t,e){var i=t.callbackNode;!function(t,e){for(var i=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,n=t.pendingLanes;0<n;){var o=31-ae(n),a=1<<o,l=s[o];-1===l?0!==(a&i)&&0===(a&r)||(s[o]=fe(a,e)):l<=e&&(t.expiredLanes|=a),n&=~a}}(t,e);var r=pe(t,t===Tl?Nl:0);if(0===r)null!==i&&qt(i),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=i&&qt(i),1===e)0===t.tag?function(t){Fs=!0,Us(t)}(uu.bind(null,t)):Us(uu.bind(null,t)),os((function(){0===(6&Ml)&&zs()})),i=null;else{switch(be(r)){case 1:i=te;break;case 4:i=ee;break;case 16:default:i=ie;break;case 536870912:i=se}i=Tu(i,nu.bind(null,t))}t.callbackPriority=e,t.callbackNode=i}}function nu(t,e){if(Zl=-1,tu=0,0!==(6&Ml))throw Error(n(327));var i=t.callbackNode;if(xu()&&t.callbackNode!==i)return null;var r=pe(t,t===Tl?Nl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=gu(t,r);else{e=r;var s=Ml;Ml|=2;var o=_u();for(Tl===t&&Nl===e||(Jl=null,Xl=Qt()+500,pu(t,e));;)try{vu();break}catch(l){fu(t,l)}Sn(),wl.current=o,Ml=s,null!==jl?e=0:(Tl=null,Nl=0,e=Dl)}if(0!==e){if(2===e&&(0!==(s=_e(t))&&(r=s,e=ou(t,s))),1===e)throw i=Ll,pu(t,0),lu(t,r),su(t,Qt()),i;if(6===e)lu(t,r);else{if(s=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var i=e.updateQueue;if(null!==i&&null!==(i=i.stores))for(var r=0;r<i.length;r++){var s=i[r],n=s.getSnapshot;s=s.value;try{if(!ar(n(),s))return!1}catch(a){return!1}}}if(i=e.child,16384&e.subtreeFlags&&null!==i)i.return=e,e=i;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(s)&&(2===(e=gu(t,r))&&(0!==(o=_e(t))&&(r=o,e=ou(t,o))),1===e))throw i=Ll,pu(t,0),lu(t,r),su(t,Qt()),i;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(n(345));case 2:case 5:Cu(t,Ul,Jl);break;case 3:if(lu(t,r),(130023424&r)===r&&10<(e=zl+500-Qt())){if(0!==pe(t,0))break;if(((s=t.suspendedLanes)&r)!==r){eu(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=rs(Cu.bind(null,t,Ul,Jl),e);break}Cu(t,Ul,Jl);break;case 4:if(lu(t,r),(4194240&r)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-ae(r);o=1<<a,(a=e[a])>s&&(s=a),r&=~o}if(r=s,10<(r=(120>(r=Qt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){t.timeoutHandle=rs(Cu.bind(null,t,Ul,Jl),r);break}Cu(t,Ul,Jl);break;default:throw Error(n(329))}}}return su(t,Qt()),t.callbackNode===i?nu.bind(null,t):null}function ou(t,e){var i=Yl;return t.current.memoizedState.isDehydrated&&(pu(t,e).flags|=256),2!==(t=gu(t,e))&&(e=Ul,Ul=i,null!==e&&au(e)),t}function au(t){null===Ul?Ul=t:Ul.push.apply(Ul,t)}function lu(t,e){for(e&=~Fl,e&=~Bl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-ae(e),r=1<<i;t[i]=-1,e&=~r}}function uu(t){if(0!==(6&Ml))throw Error(n(327));xu();var e=pe(t,0);if(0===(1&e))return su(t,Qt()),null;var i=gu(t,e);if(0!==t.tag&&2===i){var r=_e(t);0!==r&&(e=r,i=ou(t,r))}if(1===i)throw i=Ll,pu(t,0),lu(t,e),su(t,Qt()),i;if(6===i)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cu(t,Ul,Jl),su(t,Qt()),null}function cu(t,e){var i=Ml;Ml|=1;try{return t(e)}finally{0===(Ml=i)&&(Xl=Qt()+500,Fs&&zs())}}function hu(t){null!==ql&&0===ql.tag&&0===(6&Ml)&&xu();var e=Ml;Ml|=1;var i=Ol.transition,r=Ae;try{if(Ol.transition=null,Ae=1,t)return t()}finally{Ae=r,Ol.transition=i,0===(6&(Ml=e))&&zs()}}function du(){Rl=kl.current,Es(kl)}function pu(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(-1!==i&&(t.timeoutHandle=-1,ss(i)),null!==jl)for(i=jl.return;null!==i;){var r=i;switch(en(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Rs();break;case 3:Kn(),Es(Ms),Es(Os),ro();break;case 5:Zn(r);break;case 4:Kn();break;case 13:case 19:Es(to);break;case 10:On(r.type._context);break;case 22:case 23:du()}i=i.return}if(Tl=t,jl=t=ku(t.current,null),Nl=Rl=e,Dl=0,Ll=null,Fl=Bl=Il=0,Ul=Yl=null,null!==Nn){for(e=0;e<Nn.length;e++)if(null!==(r=(i=Nn[e]).interleaved)){i.interleaved=null;var s=r.next,n=i.pending;if(null!==n){var o=n.next;n.next=s,r.next=o}i.pending=r}Nn=null}return t}function fu(t,e){for(;;){var i=jl;try{if(Sn(),so.current=Zo,co){for(var r=ao.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}co=!1}if(oo=0,uo=lo=ao=null,ho=!1,po=0,Sl.current=null,null===i||null===i.return){Dl=1,Ll=e,jl=null;break}t:{var o=t,a=i.return,l=i,u=e;if(e=Nl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ga(a);if(null!==f){f.flags&=-257,ya(f,a,l,0,e),1&f.mode&&ma(o,c,e),u=c;var _=(e=f).updateQueue;if(null===_){var m=new Set;m.add(u),e.updateQueue=m}else _.add(u);break t}if(0===(1&e)){ma(o,c,e),mu();break t}u=Error(n(426))}else if(nn&&1&l.mode){var g=ga(a);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ya(g,a,l,0,e),_n(ca(u,l));break t}}o=u=ca(u,l),4!==Dl&&(Dl=2),null===Yl?Yl=[o]:Yl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e,zn(o,fa(0,u,e));break t;case 1:l=u;var y=o.type,v=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Wl||!Wl.has(v)))){o.flags|=65536,e&=-e,o.lanes|=e,zn(o,_a(o,l,e));break t}}o=o.return}while(null!==o)}bu(i)}catch(A){e=A,jl===i&&null!==i&&(jl=i=i.return);continue}break}}function _u(){var t=wl.current;return wl.current=Zo,null===t?Zo:t}function mu(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Tl||0===(268435455&Il)&&0===(268435455&Bl)||lu(Tl,Nl)}function gu(t,e){var i=Ml;Ml|=2;var r=_u();for(Tl===t&&Nl===e||(Jl=null,pu(t,e));;)try{yu();break}catch(s){fu(t,s)}if(Sn(),Ml=i,wl.current=r,null!==jl)throw Error(n(261));return Tl=null,Nl=0,Dl}function yu(){for(;null!==jl;)Au(jl)}function vu(){for(;null!==jl&&!$t();)Au(jl)}function Au(t){var e=Pl(t.alternate,t,Rl);t.memoizedProps=t.pendingProps,null===e?bu(t):jl=e,Sl.current=null}function bu(t){var e=t;do{var i=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(i=Va(i,e,Rl)))return void(jl=i)}else{if(null!==(i=qa(i,e)))return i.flags&=32767,void(jl=i);if(null===t)return Dl=6,void(jl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(jl=e);jl=e=t}while(null!==e);0===Dl&&(Dl=5)}function Cu(t,e,i){var r=Ae,s=Ol.transition;try{Ol.transition=null,Ae=1,function(t,e,i,r){do{xu()}while(null!==ql);if(0!==(6&Ml))throw Error(n(327));i=t.finishedWork;var s=t.finishedLanes;if(null===i)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var o=i.lanes|i.childLanes;if(function(t,e){var i=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<i;){var s=31-ae(i),n=1<<s;e[s]=0,r[s]=-1,t[s]=-1,i&=~n}}(t,o),t===Tl&&(jl=Tl=null,Nl=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||Vl||(Vl=!0,Tu(ie,(function(){return xu(),null}))),o=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||o){o=Ol.transition,Ol.transition=null;var a=Ae;Ae=1;var l=Ml;Ml|=4,Sl.current=null,function(t,e){if(ts=He,pr(t=dr())){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(i=(i=t.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(r&&0!==r.rangeCount){i=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{i.nodeType,o.nodeType}catch(b){i=null;break t}var a=0,l=-1,u=-1,c=0,h=0,d=t,p=null;e:for(;;){for(var f;d!==i||0!==s&&3!==d.nodeType||(l=a+s),d!==o||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===t)break e;if(p===i&&++c===s&&(l=a),p===o&&++h===r&&(u=a),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}i=-1===l||-1===u?null:{start:l,end:u}}else i=null}i=i||{start:0,end:0}}else i=null;for(es={focusedElem:t,selectionRange:i},He=!1,Za=e;null!==Za;)if(t=(e=Za).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Za=t;else for(;null!==Za;){e=Za;try{var _=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==_){var m=_.memoizedProps,g=_.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:ra(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var A=e.stateNode.containerInfo;1===A.nodeType?A.textContent="":9===A.nodeType&&A.documentElement&&A.removeChild(A.documentElement);break;default:throw Error(n(163))}}catch(b){Eu(e,e.return,b)}if(null!==(t=e.sibling)){t.return=e.return,Za=t;break}Za=e.return}_=il,il=!1}(t,i),gl(i,t),fr(es),He=!!ts,es=ts=null,t.current=i,vl(i,t,s),Kt(),Ml=l,Ae=a,Ol.transition=o}else t.current=i;if(Vl&&(Vl=!1,ql=t,$l=s),o=t.pendingLanes,0===o&&(Wl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ne,t,void 0,128===(128&t.current.flags))}catch(e){}}(i.stateNode),su(t,Qt()),null!==e)for(r=t.onRecoverableError,i=0;i<e.length;i++)s=e[i],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,t=Gl,Gl=null,t;0!==(1&$l)&&0!==t.tag&&xu(),o=t.pendingLanes,0!==(1&o)?t===Ql?Kl++:(Kl=0,Ql=t):Kl=0,zs()}(t,e,i,r)}finally{Ol.transition=s,Ae=r}return null}function xu(){if(null!==ql){var t=be($l),e=Ol.transition,i=Ae;try{if(Ol.transition=null,Ae=16>t?16:t,null===ql)var r=!1;else{if(t=ql,ql=null,$l=0,0!==(6&Ml))throw Error(n(331));var s=Ml;for(Ml|=4,Za=t.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Za=c;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var p=(h=Za).sibling,f=h.return;if(ol(h),h===c){Za=null;break}if(null!==p){p.return=f,Za=p;break}Za=f}}}var _=o.alternate;if(null!==_){var m=_.child;if(null!==m){_.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else t:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Za=y;break t}Za=o.return}}var v=t.current;for(Za=v;null!==Za;){var A=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==A)A.return=a,Za=A;else t:for(a=v;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(C){Eu(l,l.return,C)}if(l===a){Za=null;break t}var b=l.sibling;if(null!==b){b.return=l.return,Za=b;break t}Za=l.return}}if(Ml=s,zs(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ne,t)}catch(C){}r=!0}return r}finally{Ae=i,Ol.transition=e}}return!1}function Pu(t,e,i){t=Yn(t,e=fa(0,e=ca(i,e),1),1),e=eu(),null!==t&&(ye(t,1,e),su(t,e))}function Eu(t,e,i){if(3===t.tag)Pu(t,t,i);else for(;null!==e;){if(3===e.tag){Pu(e,t,i);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){e=Yn(e,t=_a(e,t=ca(i,t),1),1),t=eu(),null!==e&&(ye(e,1,t),su(e,t));break}}e=e.return}}function wu(t,e,i){var r=t.pingCache;null!==r&&r.delete(e),e=eu(),t.pingedLanes|=t.suspendedLanes&i,Tl===t&&(Nl&i)===i&&(4===Dl||3===Dl&&(130023424&Nl)===Nl&&500>Qt()-zl?pu(t,0):Fl|=i),su(t,e)}function Su(t,e){0===e&&(0===(1&t.mode)?e=1:(e=he,0===(130023424&(he<<=1))&&(he=4194304)));var i=eu();null!==(t=Dn(t,e))&&(ye(t,e,i),su(t,i))}function Ou(t){var e=t.memoizedState,i=0;null!==e&&(i=e.retryLane),Su(t,i)}function Mu(t,e){var i=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;null!==s&&(i=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(n(314))}null!==r&&r.delete(e),Su(t,i)}function Tu(t,e){return Vt(t,e)}function ju(t,e,i,r){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nu(t,e,i,r){return new ju(t,e,i,r)}function Ru(t){return!(!(t=t.prototype)||!t.isReactComponent)}function ku(t,e){var i=t.alternate;return null===i?((i=Nu(t.tag,e,t.key,t.mode)).elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=14680064&t.flags,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Du(t,e,i,r,s,o){var a=2;if(r=t,"function"===typeof t)Ru(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case P:return Lu(i.children,s,o,e);case E:a=8,s|=8;break;case w:return(t=Nu(12,i,e,2|s)).elementType=w,t.lanes=o,t;case T:return(t=Nu(13,i,e,s)).elementType=T,t.lanes=o,t;case j:return(t=Nu(19,i,e,s)).elementType=j,t.lanes=o,t;case k:return Iu(i,s,o,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case S:a=10;break t;case O:a=9;break t;case M:a=11;break t;case N:a=14;break t;case R:a=16,r=null;break t}throw Error(n(130,null==t?t:typeof t,""))}return(e=Nu(a,i,e,s)).elementType=t,e.type=r,e.lanes=o,e}function Lu(t,e,i,r){return(t=Nu(7,t,r,e)).lanes=i,t}function Iu(t,e,i,r){return(t=Nu(22,t,r,e)).elementType=k,t.lanes=i,t.stateNode={isHidden:!1},t}function Bu(t,e,i){return(t=Nu(6,t,null,e)).lanes=i,t}function Fu(t,e,i){return(e=Nu(4,null!==t.children?t.children:[],t.key,e)).lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Yu(t,e,i,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uu(t,e,i,r,s,n,o,a,l){return t=new Yu(t,e,i,a,l),1===e?(e=1,!0===n&&(e|=8)):e=0,n=Nu(3,null,null,e),t.current=n,n.stateNode=t,n.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},In(n),t}function zu(t){if(!t)return Ss;t:{if(Xt(t=t._reactInternals)!==t||1!==t.tag)throw Error(n(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Ns(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(n(171))}if(1===t.tag){var i=t.type;if(Ns(i))return Ds(t,i,e)}return e}function Xu(t,e,i,r,s,n,o,a,l){return(t=Uu(i,r,!0,t,0,n,0,a,l)).context=zu(null),i=t.current,(n=Fn(r=eu(),s=iu(i))).callback=void 0!==e&&null!==e?e:null,Yn(i,n,s),t.current.lanes=s,ye(t,s,r),su(t,r),t}function Ju(t,e,i,r){var s=e.current,n=eu(),o=iu(s);return i=zu(i),null===e.context?e.context=i:e.pendingContext=i,(e=Fn(n,o)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Yn(s,e,o))&&(ru(t,s,o,n),Un(t,s,o)),o}function Hu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Gu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var i=t.retryLane;t.retryLane=0!==i&&i<e?i:e}}function Wu(t,e){Gu(t,e),(t=t.alternate)&&Gu(t,e)}Pl=function(t,e,i){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ms.current)Aa=!0;else{if(0===(t.lanes&i)&&0===(128&e.flags))return Aa=!1,function(t,e,i){switch(e.tag){case 3:Ta(e),fn();break;case 5:Qn(e);break;case 1:Ns(e.type)&&Ls(e);break;case 4:$n(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ws(xn,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(ws(to,1&to.current),e.flags|=128,null):0!==(i&e.child.childLanes)?Ba(t,e,i):(ws(to,1&to.current),null!==(t=Ha(t,e,i))?t.sibling:null);ws(to,1&to.current);break;case 19:if(r=0!==(i&e.childLanes),0!==(128&t.flags)){if(r)return Xa(t,e,i);e.flags|=128}if(null!==(s=e.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),ws(to,to.current),r)break;return null;case 22:case 23:return e.lanes=0,Ea(t,e,i)}return Ha(t,e,i)}(t,e,i);Aa=0!==(131072&t.flags)}else Aa=!1,nn&&0!==(1048576&e.flags)&&Zs(e,Gs,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ja(t,e),t=e.pendingProps;var s=js(e,Os.current);Tn(e,i),s=go(null,e,r,t,s,i);var o=yo();return e.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ns(r)?(o=!0,Ls(e)):o=!1,e.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,In(e),s.updater=na,e.stateNode=s,s._reactInternals=e,ua(e,r,t,i),e=Ma(null,e,r,!0,o,i)):(e.tag=0,nn&&o&&tn(e),ba(null,e,s,i),e=e.child),e;case 16:r=e.elementType;t:{switch(Ja(t,e),t=e.pendingProps,r=(s=r._init)(r._payload),e.type=r,s=e.tag=function(t){if("function"===typeof t)return Ru(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===M)return 11;if(t===N)return 14}return 2}(r),t=ra(r,t),s){case 0:e=Sa(null,e,r,t,i);break t;case 1:e=Oa(null,e,r,t,i);break t;case 11:e=Ca(null,e,r,t,i);break t;case 14:e=xa(null,e,r,ra(r.type,t),i);break t}throw Error(n(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,Sa(t,e,r,s=e.elementType===r?s:ra(r,s),i);case 1:return r=e.type,s=e.pendingProps,Oa(t,e,r,s=e.elementType===r?s:ra(r,s),i);case 3:t:{if(Ta(e),null===t)throw Error(n(387));r=e.pendingProps,s=(o=e.memoizedState).element,Bn(t,e),Xn(e,r,null,i);var a=e.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,256&e.flags){e=ja(t,e,r,i,s=ca(Error(n(423)),e));break t}if(r!==s){e=ja(t,e,r,i,s=ca(Error(n(424)),e));break t}for(sn=us(e.stateNode.containerInfo.firstChild),rn=e,nn=!0,on=null,i=Cn(e,null,r,i),e.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(fn(),r===s){e=Ha(t,e,i);break t}ba(t,e,r,i)}e=e.child}return e;case 5:return Qn(e),null===t&&cn(e),r=e.type,s=e.pendingProps,o=null!==t?t.memoizedProps:null,a=s.children,is(r,s)?a=null:null!==o&&is(r,o)&&(e.flags|=32),wa(t,e),ba(t,e,a,i),e.child;case 6:return null===t&&cn(e),null;case 13:return Ba(t,e,i);case 4:return $n(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=bn(e,null,r,i):ba(t,e,r,i),e.child;case 11:return r=e.type,s=e.pendingProps,Ca(t,e,r,s=e.elementType===r?s:ra(r,s),i);case 7:return ba(t,e,e.pendingProps,i),e.child;case 8:case 12:return ba(t,e,e.pendingProps.children,i),e.child;case 10:t:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,ws(xn,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===s.children&&!Ms.current){e=Ha(t,e,i);break t}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Fn(-1,i&-i)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=i,null!==(u=o.alternate)&&(u.lanes|=i),Mn(o.return,i,e),l.lanes|=i;break}u=u.next}}else if(10===o.tag)a=o.type===e.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(n(341));a.lanes|=i,null!==(l=a.alternate)&&(l.lanes|=i),Mn(a,i,e),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(t,e,s.children,i),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Tn(e,i),r=r(s=jn(s)),e.flags|=1,ba(t,e,r,i),e.child;case 14:return s=ra(r=e.type,e.pendingProps),xa(t,e,r,s=ra(r.type,s),i);case 15:return Pa(t,e,e.type,e.pendingProps,i);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ra(r,s),Ja(t,e),e.tag=1,Ns(r)?(t=!0,Ls(e)):t=!1,Tn(e,i),aa(e,r,s),ua(e,r,s,i),Ma(null,e,r,!0,t,i);case 19:return Xa(t,e,i);case 22:return Ea(t,e,i)}throw Error(n(156,e.tag))};var Vu="function"===typeof reportError?reportError:function(t){console.error(t)};function qu(t){this._internalRoot=t}function $u(t){this._internalRoot=t}function Ku(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Qu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Zu(){}function tc(t,e,i,r,s){var n=i._reactRootContainer;if(n){var o=n;if("function"===typeof s){var a=s;s=function(){var t=Hu(o);a.call(t)}}Ju(e,o,t,s)}else o=function(t,e,i,r,s){if(s){if("function"===typeof r){var n=r;r=function(){var t=Hu(o);n.call(t)}}var o=Xu(e,r,t,0,null,!1,0,"",Zu);return t._reactRootContainer=o,t[fs]=o.current,zr(8===t.nodeType?t.parentNode:t),hu(),o}for(;s=t.lastChild;)t.removeChild(s);if("function"===typeof r){var a=r;r=function(){var t=Hu(l);a.call(t)}}var l=Uu(t,0,!1,null,0,!1,0,"",Zu);return t._reactRootContainer=l,t[fs]=l.current,zr(8===t.nodeType?t.parentNode:t),hu((function(){Ju(e,l,i,r)})),l}(i,e,t,s,r);return Hu(o)}$u.prototype.render=qu.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(n(409));Ju(t,e,null,null)},$u.prototype.unmount=qu.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;hu((function(){Ju(null,t,null,null)})),e[fs]=null}},$u.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ee();t={blockedOn:null,target:t,priority:e};for(var i=0;i<ke.length&&0!==e&&e<ke[i].priority;i++);ke.splice(i,0,t),0===i&&Be(t)}},Ce=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var i=de(e.pendingLanes);0!==i&&(ve(e,1|i),su(e,Qt()),0===(6&Ml)&&(Xl=Qt()+500,zs()))}break;case 13:hu((function(){var e=Dn(t,1);if(null!==e){var i=eu();ru(e,t,1,i)}})),Wu(t,1)}},xe=function(t){if(13===t.tag){var e=Dn(t,134217728);if(null!==e)ru(e,t,134217728,eu());Wu(t,134217728)}},Pe=function(t){if(13===t.tag){var e=iu(t),i=Dn(t,e);if(null!==i)ru(i,t,e,eu());Wu(t,e)}},Ee=function(){return Ae},we=function(t,e){var i=Ae;try{return Ae=t,e()}finally{Ae=i}},xt=function(t,e,i){switch(e){case"input":if(Z(t,i),e=i.name,"radio"===i.type&&null!=e){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var r=i[e];if(r!==t&&r.form===t.form){var s=bs(r);if(!s)throw Error(n(90));V(r),Z(r,s)}}}break;case"textarea":ot(t,i);break;case"select":null!=(e=i.value)&&rt(t,!!i.multiple,e,!1)}},Mt=cu,Tt=hu;var ec={usingClientEntryPoint:!1,Events:[vs,As,bs,St,Ot,cu]},ic={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rc={bundleType:ic.bundleType,version:ic.version,rendererPackageName:ic.rendererPackageName,rendererConfig:ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Gt(t))?null:t.stateNode},findFiberByHostInstance:ic.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sc.isDisabled&&sc.supportsFiber)try{ne=sc.inject(rc),oe=sc}catch(ht){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,e.createPortal=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ku(e))throw Error(n(200));return function(t,e,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:t,containerInfo:e,implementation:i}}(t,e,null,i)},e.createRoot=function(t,e){if(!Ku(t))throw Error(n(299));var i=!1,r="",s=Vu;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(i=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(s=e.onRecoverableError)),e=Uu(t,1,!1,null,0,i,0,r,s),t[fs]=e.current,zr(8===t.nodeType?t.parentNode:t),new qu(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(n(188));throw t=Object.keys(t).join(","),Error(n(268,t))}return t=null===(t=Gt(e))?null:t.stateNode},e.flushSync=function(t){return hu(t)},e.hydrate=function(t,e,i){if(!Qu(e))throw Error(n(200));return tc(null,t,e,!0,i)},e.hydrateRoot=function(t,e,i){if(!Ku(t))throw Error(n(405));var r=null!=i&&i.hydratedSources||null,s=!1,o="",a=Vu;if(null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(s=!0),void 0!==i.identifierPrefix&&(o=i.identifierPrefix),void 0!==i.onRecoverableError&&(a=i.onRecoverableError)),e=Xu(e,null,t,1,null!=i?i:null,s,0,o,a),t[fs]=e.current,zr(t),r)for(t=0;t<r.length;t++)s=(s=(i=r[t])._getVersion)(i._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[i,s]:e.mutableSourceEagerHydrationData.push(i,s);return new $u(e)},e.render=function(t,e,i){if(!Qu(e))throw Error(n(200));return tc(null,t,e,!1,i)},e.unmountComponentAtNode=function(t){if(!Qu(t))throw Error(n(40));return!!t._reactRootContainer&&(hu((function(){tc(null,null,t,!1,(function(){t._reactRootContainer=null,t[fs]=null}))})),!0)},e.unstable_batchedUpdates=cu,e.unstable_renderSubtreeIntoContainer=function(t,e,i,r){if(!Qu(i))throw Error(n(200));if(null==t||void 0===t._reactInternals)throw Error(n(38));return tc(t,e,i,!1,r)},e.version="18.3.1-next-f1338f8080-20240426"},391:(t,e,i)=>{var r=i(950);e.createRoot=r.createRoot,e.hydrateRoot=r.hydrateRoot},950:(t,e,i)=>{!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=i(730)},153:(t,e,i)=>{var r=i(43),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,i){var r,n={},u=null,c=null;for(r in void 0!==i&&(u=""+i),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(c=e.ref),e)o.call(e,r)&&!l.hasOwnProperty(r)&&(n[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===n[r]&&(n[r]=e[r]);return{$$typeof:s,type:t,key:u,ref:c,props:n,_owner:a.current}}e.jsx=u,e.jsxs=u},202:(t,e)=>{var i=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,m={};function g(t,e,i){this.props=t,this.context=e,this.refs=m,this.updater=i||f}function y(){}function v(t,e,i){this.props=t,this.context=e,this.refs=m,this.updater=i||f}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=g.prototype;var A=v.prototype=new y;A.constructor=v,_(A,g.prototype),A.isPureReactComponent=!0;var b=Array.isArray,C=Object.prototype.hasOwnProperty,x={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function E(t,e,r){var s,n={},o=null,a=null;if(null!=e)for(s in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)C.call(e,s)&&!P.hasOwnProperty(s)&&(n[s]=e[s]);var l=arguments.length-2;if(1===l)n.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];n.children=u}if(t&&t.defaultProps)for(s in l=t.defaultProps)void 0===n[s]&&(n[s]=l[s]);return{$$typeof:i,type:t,key:o,ref:a,props:n,_owner:x.current}}function w(t){return"object"===typeof t&&null!==t&&t.$$typeof===i}var S=/\/+/g;function O(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function M(t,e,s,n,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case i:case r:l=!0}}if(l)return o=o(l=t),t=""===n?"."+O(l,0):n,b(o)?(s="",null!=t&&(s=t.replace(S,"$&/")+"/"),M(o,e,s,"",(function(t){return t}))):null!=o&&(w(o)&&(o=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,s+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+t)),e.push(o)),1;if(l=0,n=""===n?".":n+":",b(t))for(var u=0;u<t.length;u++){var c=n+O(a=t[u],u);l+=M(a,e,s,c,o)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=p&&t[p]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),u=0;!(a=t.next()).done;)l+=M(a=a.value,e,s,c=n+O(a,u++),o);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function T(t,e,i){if(null==t)return t;var r=[],s=0;return M(t,r,"","",(function(t){return e.call(i,t,s++)})),r}function j(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var N={current:null},R={transition:null},k={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:R,ReactCurrentOwner:x};function D(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:T,forEach:function(t,e,i){T(t,(function(){e.apply(this,arguments)}),i)},count:function(t){var e=0;return T(t,(function(){e++})),e},toArray:function(t){return T(t,(function(t){return t}))||[]},only:function(t){if(!w(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=g,e.Fragment=s,e.Profiler=o,e.PureComponent=v,e.StrictMode=n,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k,e.act=D,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=_({},t.props),n=t.key,o=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,a=x.current),void 0!==e.key&&(n=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)C.call(e,u)&&!P.hasOwnProperty(u)&&(s[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)s.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];s.children=l}return{$$typeof:i,type:t.type,key:n,ref:o,props:s,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=E,e.createFactory=function(t){var e=E.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=w,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:j}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=R.transition;R.transition={};try{t()}finally{R.transition=e}},e.unstable_act=D,e.useCallback=function(t,e){return N.current.useCallback(t,e)},e.useContext=function(t){return N.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return N.current.useDeferredValue(t)},e.useEffect=function(t,e){return N.current.useEffect(t,e)},e.useId=function(){return N.current.useId()},e.useImperativeHandle=function(t,e,i){return N.current.useImperativeHandle(t,e,i)},e.useInsertionEffect=function(t,e){return N.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return N.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return N.current.useMemo(t,e)},e.useReducer=function(t,e,i){return N.current.useReducer(t,e,i)},e.useRef=function(t){return N.current.useRef(t)},e.useState=function(t){return N.current.useState(t)},e.useSyncExternalStore=function(t,e,i){return N.current.useSyncExternalStore(t,e,i)},e.useTransition=function(){return N.current.useTransition()},e.version="18.3.1"},43:(t,e,i)=>{t.exports=i(202)},579:(t,e,i)=>{t.exports=i(153)},234:(t,e)=>{function i(t,e){var i=t.length;t.push(e);t:for(;0<i;){var r=i-1>>>1,s=t[r];if(!(0<n(s,e)))break t;t[r]=e,t[i]=s,i=r}}function r(t){return 0===t.length?null:t[0]}function s(t){if(0===t.length)return null;var e=t[0],i=t.pop();if(i!==e){t[0]=i;t:for(var r=0,s=t.length,o=s>>>1;r<o;){var a=2*(r+1)-1,l=t[a],u=a+1,c=t[u];if(0>n(l,i))u<s&&0>n(c,l)?(t[r]=c,t[u]=i,r=u):(t[r]=l,t[a]=i,r=a);else{if(!(u<s&&0>n(c,i)))break t;t[r]=c,t[u]=i,r=u}}}return e}function n(t,e){var i=t.sortIndex-e.sortIndex;return 0!==i?i:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,p=3,f=!1,_=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function A(t){for(var e=r(c);null!==e;){if(null===e.callback)s(c);else{if(!(e.startTime<=t))break;s(c),e.sortIndex=e.expirationTime,i(u,e)}e=r(c)}}function b(t){if(m=!1,A(t),!_)if(null!==r(u))_=!0,R(C);else{var e=r(c);null!==e&&k(b,e.startTime-t)}}function C(t,i){_=!1,m&&(m=!1,y(w),w=-1),f=!0;var n=p;try{for(A(i),d=r(u);null!==d&&(!(d.expirationTime>i)||t&&!M());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var a=o(d.expirationTime<=i);i=e.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&s(u),A(i)}else s(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&k(b,h.startTime-i),l=!1}return l}finally{d=null,p=n,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,P=!1,E=null,w=-1,S=5,O=-1;function M(){return!(e.unstable_now()-O<S)}function T(){if(null!==E){var t=e.unstable_now();O=t;var i=!0;try{i=E(!0,t)}finally{i?x():(P=!1,E=null)}}else P=!1}if("function"===typeof v)x=function(){v(T)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,N=j.port2;j.port1.onmessage=T,x=function(){N.postMessage(null)}}else x=function(){g(T,0)};function R(t){E=t,P||(P=!0,x())}function k(t,i){w=g((function(){t(e.unstable_now())}),i)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){_||f||(_=!0,R(C))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(t){switch(p){case 1:case 2:case 3:var e=3;break;default:e=p}var i=p;p=e;try{return t()}finally{p=i}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var i=p;p=t;try{return e()}finally{p=i}},e.unstable_scheduleCallback=function(t,s,n){var o=e.unstable_now();switch("object"===typeof n&&null!==n?n="number"===typeof(n=n.delay)&&0<n?o+n:o:n=o,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:h++,callback:s,priorityLevel:t,startTime:n,expirationTime:a=n+a,sortIndex:-1},n>o?(t.sortIndex=n,i(c,t),null===r(u)&&t===r(c)&&(m?(y(w),w=-1):m=!0,k(b,n-o))):(t.sortIndex=a,i(u,t),_||f||(_=!0,R(C))),t},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(t){var e=p;return function(){var i=p;p=e;try{return t.apply(this,arguments)}finally{p=i}}}},853:(t,e,i)=>{t.exports=i(234)}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](i,i.exports,__webpack_require__),i.exports}__webpack_require__.m=__webpack_modules__,(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;__webpack_require__.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var s=Object.create(null);__webpack_require__.r(s);var n={};t=t||[null,e({}),e([]),e(e)];for(var o=2&r&&i;"object"==typeof o&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach((t=>n[t]=()=>i[t]));return n.default=()=>i,__webpack_require__.d(s,n),s}})(),__webpack_require__.d=(t,e)=>{for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__webpack_require__.f={},__webpack_require__.e=t=>Promise.all(Object.keys(__webpack_require__.f).reduce(((e,i)=>(__webpack_require__.f[i](t,e),e)),[])),__webpack_require__.u=t=>"static/js/"+t+".e01b4b22.chunk.js",__webpack_require__.miniCssF=t=>{},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="bike-calculator:";__webpack_require__.l=(i,r,s,n)=>{if(t[i])t[i].push(r);else{var o,a;if(void 0!==s)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var c=l[u];if(c.getAttribute("src")==i||c.getAttribute("data-webpack")==e+s){o=c;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,__webpack_require__.nc&&o.setAttribute("nonce",__webpack_require__.nc),o.setAttribute("data-webpack",e+s),o.src=i),t[i]=[r];var h=(e,r)=>{o.onerror=o.onload=null,clearTimeout(d);var s=t[i];if(delete t[i],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((t=>t(r))),e)return e(r)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),a&&document.head.appendChild(o)}}})(),__webpack_require__.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.p="/bike-calculator/",(()=>{var t={792:0};__webpack_require__.f.j=(e,i)=>{var r=__webpack_require__.o(t,e)?t[e]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise(((i,s)=>r=t[e]=[i,s]));i.push(r[2]=s);var n=__webpack_require__.p+__webpack_require__.u(e),o=new Error;__webpack_require__.l(n,(i=>{if(__webpack_require__.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.src;o.message="Loading chunk "+e+" failed.\n("+s+": "+n+")",o.name="ChunkLoadError",o.type=s,o.request=n,r[1](o)}}),"chunk-"+e,e)}};var e=(e,i)=>{var r,s,n=i[0],o=i[1],a=i[2],l=0;if(n.some((e=>0!==t[e]))){for(r in o)__webpack_require__.o(o,r)&&(__webpack_require__.m[r]=o[r]);if(a)a(__webpack_require__)}for(e&&e(i);l<n.length;l++)s=n[l],__webpack_require__.o(t,s)&&t[s]&&t[s][0](),t[s]=0},i=self.webpackChunkbike_calculator=self.webpackChunkbike_calculator||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var __webpack_exports__={},react=__webpack_require__(43),react_namespaceObject=__webpack_require__.t(react,2),client=__webpack_require__(391);const src={},Navbar_module={navbarContainer:"Navbar_navbarContainer__SJJQV",navbar:"Navbar_navbar__0VqnN",menuIcon:"Navbar_menuIcon__J4cdu",menu:"Navbar_menu__stSYb",menuItem:"Navbar_menuItem__83E87",menuOpen:"Navbar_menuOpen__VCaW4"};var react_dom=__webpack_require__(950),react_dom_namespaceObject=__webpack_require__.t(react_dom,2),Action;function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},_extends.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(Action||(Action={}));const PopStateEventType="popstate";function router_createMemoryHistory(t){void 0===t&&(t={});let e,{initialEntries:i=["/"],initialIndex:r,v5Compat:s=!1}=t;e=i.map(((t,e)=>c(t,"string"===typeof t?null:t.state,0===e?"default":void 0)));let n=l(null==r?e.length-1:r),o=Action.Pop,a=null;function l(t){return Math.min(Math.max(t,0),e.length-1)}function u(){return e[n]}function c(t,i,r){void 0===i&&(i=null);let s=createLocation(e?u().pathname:"/",t,i,r);return warning("/"===s.pathname.charAt(0),"relative pathnames are not supported in memory history: "+JSON.stringify(t)),s}function h(t){return"string"===typeof t?t:router_createPath(t)}return{get index(){return n},get action(){return o},get location(){return u()},createHref:h,createURL:t=>new URL(h(t),"http://localhost"),encodeLocation(t){let e="string"===typeof t?parsePath(t):t;return{pathname:e.pathname||"",search:e.search||"",hash:e.hash||""}},push(t,i){o=Action.Push;let r=c(t,i);n+=1,e.splice(n,e.length,r),s&&a&&a({action:o,location:r,delta:1})},replace(t,i){o=Action.Replace;let r=c(t,i);e[n]=r,s&&a&&a({action:o,location:r,delta:0})},go(t){o=Action.Pop;let i=l(n+t),r=e[i];n=i,a&&a({action:o,location:r,delta:t})},listen:t=>(a=t,()=>{a=null})}}function router_createBrowserHistory(t){return void 0===t&&(t={}),getUrlBasedHistory((function(t,e){let{pathname:i,search:r,hash:s}=t.location;return createLocation("",{pathname:i,search:r,hash:s},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"===typeof e?e:router_createPath(e)}),null,t)}function router_createHashHistory(t){return void 0===t&&(t={}),getUrlBasedHistory((function(t,e){let{pathname:i="/",search:r="",hash:s=""}=parsePath(t.location.hash.substr(1));return i.startsWith("/")||i.startsWith(".")||(i="/"+i),createLocation("",{pathname:i,search:r,hash:s},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){let i=t.document.querySelector("base"),r="";if(i&&i.getAttribute("href")){let e=t.location.href,i=e.indexOf("#");r=-1===i?e:e.slice(0,i)}return r+"#"+("string"===typeof e?e:router_createPath(e))}),(function(t,e){warning("/"===t.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(e)+")")}),t)}function invariant(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function warning(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(i){}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,i,r){return void 0===i&&(i=null),_extends({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?parsePath(e):e,{state:i,key:e&&e.key||r||createKey()})}function router_createPath(t){let{pathname:e="/",search:i="",hash:r=""}=t;return i&&"?"!==i&&(e+="?"===i.charAt(0)?i:"?"+i),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function parsePath(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substr(i),t=t.substr(0,i));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,i,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:n=!1}=r,o=s.history,a=Action.Pop,l=null,u=c();function c(){return(o.state||{idx:null}).idx}function h(){a=Action.Pop;let t=c(),e=null==t?null:t-u;u=t,l&&l({action:a,location:p.location,delta:e})}function d(t){let e="null"!==s.location.origin?s.location.origin:s.location.href,i="string"===typeof t?t:router_createPath(t);return i=i.replace(/ $/,"%20"),invariant(e,"No window.location.(origin|href) available to create URL for href: "+i),new URL(i,e)}null==u&&(u=0,o.replaceState(_extends({},o.state,{idx:u}),""));let p={get action(){return a},get location(){return t(s,o)},listen(t){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(PopStateEventType,h),l=t,()=>{s.removeEventListener(PopStateEventType,h),l=null}},createHref:t=>e(s,t),createURL:d,encodeLocation(t){let e=d(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,e){a=Action.Push;let r=createLocation(p.location,t,e);i&&i(r,t),u=c()+1;let h=getHistoryState(r,u),d=p.createHref(r);try{o.pushState(h,"",d)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;s.location.assign(d)}n&&l&&l({action:a,location:p.location,delta:1})},replace:function(t,e){a=Action.Replace;let r=createLocation(p.location,t,e);i&&i(r,t),u=c();let s=getHistoryState(r,u),h=p.createHref(r);o.replaceState(s,"",h),n&&l&&l({action:a,location:p.location,delta:0})},go:t=>o.go(t)};return p}var ResultType;!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(ResultType||(ResultType={}));const immutableRouteKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isIndexRoute(t){return!0===t.index}function convertRoutesToDataRoutes(t,e,i,r){return void 0===i&&(i=[]),void 0===r&&(r={}),t.map(((t,s)=>{let n=[...i,s],o="string"===typeof t.id?t.id:n.join("-");if(invariant(!0!==t.index||!t.children,"Cannot specify children on an index route"),invariant(!r[o],'Found a route id collision on id "'+o+"\".  Route id's must be globally unique within Data Router usages"),isIndexRoute(t)){let i=_extends({},t,e(t),{id:o});return r[o]=i,i}{let i=_extends({},t,e(t),{id:o,children:void 0});return r[o]=i,t.children&&(i.children=convertRoutesToDataRoutes(t.children,e,n,r)),i}}))}function matchRoutes(t,e,i){void 0===i&&(i="/");let r=router_stripBasename(("string"===typeof e?parsePath(e):e).pathname||"/",i);if(null==r)return null;let s=flattenRoutes(t);rankRouteBranches(s);let n=null;for(let o=0;null==n&&o<s.length;++o){let t=decodePath(r);n=matchRouteBranch(s[o],t)}return n}function convertRouteMatchToUiMatch(t,e){let{route:i,pathname:r,params:s}=t;return{id:i.id,pathname:r,params:s,data:e[i.id],handle:i.handle}}function flattenRoutes(t,e,i,r){void 0===e&&(e=[]),void 0===i&&(i=[]),void 0===r&&(r="");let s=(t,s,n)=>{let o={relativePath:void 0===n?t.path||"":n,caseSensitive:!0===t.caseSensitive,childrenIndex:s,route:t};o.relativePath.startsWith("/")&&(invariant(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=router_joinPaths([r,o.relativePath]),l=i.concat(o);t.children&&t.children.length>0&&(invariant(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),flattenRoutes(t.children,e,l,a)),(null!=t.path||t.index)&&e.push({path:a,score:computeScore(a,t.index),routesMeta:l})};return t.forEach(((t,e)=>{var i;if(""!==t.path&&null!=(i=t.path)&&i.includes("?"))for(let r of explodeOptionalSegments(t.path))s(t,e,r);else s(t,e)})),e}function explodeOptionalSegments(t){let e=t.split("/");if(0===e.length)return[];let[i,...r]=e,s=i.endsWith("?"),n=i.replace(/\?$/,"");if(0===r.length)return s?[n,""]:[n];let o=explodeOptionalSegments(r.join("/")),a=[];return a.push(...o.map((t=>""===t?n:[n,t].join("/")))),s&&a.push(...o),a.map((e=>t.startsWith("/")&&""===e?"/":e))}function rankRouteBranches(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:compareIndexes(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>"*"===t;function computeScore(t,e){let i=t.split("/"),r=i.length;return i.some(isSplat)&&(r+=splatPenalty),e&&(r+=indexRouteValue),i.filter((t=>!isSplat(t))).reduce(((t,e)=>t+(paramRe.test(e)?dynamicSegmentValue:""===e?emptySegmentValue:staticSegmentValue)),r)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every(((t,i)=>t===e[i]))?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e){let{routesMeta:i}=t,r={},s="/",n=[];for(let o=0;o<i.length;++o){let t=i[o],a=o===i.length-1,l="/"===s?e:e.slice(s.length)||"/",u=router_matchPath({path:t.relativePath,caseSensitive:t.caseSensitive,end:a},l);if(!u)return null;Object.assign(r,u.params);let c=t.route;n.push({params:r,pathname:router_joinPaths([s,u.pathname]),pathnameBase:normalizePathname(router_joinPaths([s,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(s=router_joinPaths([s,u.pathnameBase]))}return n}function generatePath(t,e){void 0===e&&(e={});let i=t;i.endsWith("*")&&"*"!==i&&!i.endsWith("/*")&&(warning(!1,'Route path "'+i+'" will be treated as if it were "'+i.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+i.replace(/\*$/,"/*")+'".'),i=i.replace(/\*$/,"/*"));const r=i.startsWith("/")?"/":"",s=t=>null==t?"":"string"===typeof t?t:String(t);return r+i.split(/\/+/).map(((t,i,r)=>{if(i===r.length-1&&"*"===t){return s(e["*"])}const n=t.match(/^:([\w-]+)(\??)$/);if(n){const[,t,i]=n;let r=e[t];return invariant("?"===i||null!=r,'Missing ":'+t+'" param'),s(r)}return t.replace(/\?$/g,"")})).filter((t=>!!t)).join("/")}function router_matchPath(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[i,r]=compilePath(t.path,t.caseSensitive,t.end),s=e.match(i);if(!s)return null;let n=s[0],o=n.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce(((t,e,i)=>{let{paramName:r,isOptional:s}=e;if("*"===r){let t=a[i]||"";o=n.slice(0,n.length-t.length).replace(/(.)\/+$/,"$1")}const l=a[i];return t[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),t}),{}),pathname:n,pathnameBase:o,pattern:t}}function compilePath(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!0),warning("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((t,e,i)=>(r.push({paramName:e,isOptional:null!=i}),i?"/?([^\\/]+)?":"/([^\\/]+)")));return t.endsWith("*")?(r.push({paramName:"*"}),s+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?s+="\\/*$":""!==t&&"/"!==t&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function decodePath(t){try{return t.split("/").map((t=>decodeURIComponent(t).replace(/\//g,"%2F"))).join("/")}catch(e){return warning(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function router_stripBasename(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,r=t.charAt(i);return r&&"/"!==r?null:t.slice(i)||"/"}function resolvePath(t,e){void 0===e&&(e="/");let{pathname:i,search:r="",hash:s=""}="string"===typeof t?parsePath(t):t;return{pathname:i?i.startsWith("/")?i:resolvePathname(i,e):e,search:normalizeSearch(r),hash:normalizeHash(s)}}function resolvePathname(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?i.length>1&&i.pop():"."!==t&&i.push(t)})),i.length>1?i.join("/"):"/"}function getInvalidPathError(t,e,i,r){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+i+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function getResolveToMatches(t,e){let i=getPathContributingMatches(t);return e?i.map(((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)):i.map((t=>t.pathnameBase))}function router_resolveTo(t,e,i,r){let s;void 0===r&&(r=!1),"string"===typeof t?s=parsePath(t):(s=_extends({},t),invariant(!s.pathname||!s.pathname.includes("?"),getInvalidPathError("?","pathname","search",s)),invariant(!s.pathname||!s.pathname.includes("#"),getInvalidPathError("#","pathname","hash",s)),invariant(!s.search||!s.search.includes("#"),getInvalidPathError("#","search","hash",s)));let n,o=""===t||""===s.pathname,a=o?"/":s.pathname;if(null==a)n=i;else{let t=e.length-1;if(!r&&a.startsWith("..")){let e=a.split("/");for(;".."===e[0];)e.shift(),t-=1;s.pathname=e.join("/")}n=t>=0?e[t]:"/"}let l=resolvePath(s,n),u=a&&"/"!==a&&a.endsWith("/"),c=(o||"."===a)&&i.endsWith("/");return l.pathname.endsWith("/")||!u&&!c||(l.pathname+="/"),l}function getToPathname(t){return""===t||""===t.pathname?"/":"string"===typeof t?parsePath(t).pathname:t.pathname}const router_joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",normalizeHash=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"",json=function(t,e){void 0===e&&(e={});let i="number"===typeof e?{status:e}:e,r=new Headers(i.headers);return r.has("Content-Type")||r.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(t),_extends({},i,{headers:r}))};class AbortedDeferredError extends Error{}class DeferredData{constructor(t,e){let i;this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],invariant(t&&"object"===typeof t&&!Array.isArray(t),"defer() only accepts plain objects"),this.abortPromise=new Promise(((t,e)=>i=e)),this.controller=new AbortController;let r=()=>i(new AbortedDeferredError("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",r),this.controller.signal.addEventListener("abort",r),this.data=Object.entries(t).reduce(((t,e)=>{let[i,r]=e;return Object.assign(t,{[i]:this.trackPromise(i,r)})}),{}),this.done&&this.unlistenAbortSignal(),this.init=e}trackPromise(t,e){if(!(e instanceof Promise))return e;this.deferredKeys.push(t),this.pendingKeysSet.add(t);let i=Promise.race([e,this.abortPromise]).then((e=>this.onSettle(i,t,void 0,e)),(e=>this.onSettle(i,t,e)));return i.catch((()=>{})),Object.defineProperty(i,"_tracked",{get:()=>!0}),i}onSettle(t,e,i,r){if(this.controller.signal.aborted&&i instanceof AbortedDeferredError)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>i}),Promise.reject(i);if(this.pendingKeysSet.delete(e),this.done&&this.unlistenAbortSignal(),void 0===i&&void 0===r){let i=new Error('Deferred data for key "'+e+'" resolved/rejected with `undefined`, you must resolve/reject with a value or `null`.');return Object.defineProperty(t,"_error",{get:()=>i}),this.emit(!1,e),Promise.reject(i)}return void 0===r?(Object.defineProperty(t,"_error",{get:()=>i}),this.emit(!1,e),Promise.reject(i)):(Object.defineProperty(t,"_data",{get:()=>r}),this.emit(!1,e),r)}emit(t,e){this.subscribers.forEach((i=>i(t,e)))}subscribe(t){return this.subscribers.add(t),()=>this.subscribers.delete(t)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach(((t,e)=>this.pendingKeysSet.delete(e))),this.emit(!0)}async resolveData(t){let e=!1;if(!this.done){let i=()=>this.cancel();t.addEventListener("abort",i),e=await new Promise((e=>{this.subscribe((r=>{t.removeEventListener("abort",i),(r||this.done)&&e(r)}))}))}return e}get done(){return 0===this.pendingKeysSet.size}get unwrappedData(){return invariant(null!==this.data&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce(((t,e)=>{let[i,r]=e;return Object.assign(t,{[i]:unwrapTrackedPromise(r)})}),{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function isTrackedPromise(t){return t instanceof Promise&&!0===t._tracked}function unwrapTrackedPromise(t){if(!isTrackedPromise(t))return t;if(t._error)throw t._error;return t._data}const defer=function(t,e){return void 0===e&&(e={}),new DeferredData(t,"number"===typeof e?{status:e}:e)},redirect=function(t,e){void 0===e&&(e=302);let i=e;"number"===typeof i?i={status:i}:"undefined"===typeof i.status&&(i.status=302);let r=new Headers(i.headers);return r.set("Location",t),new Response(null,_extends({},i,{headers:r}))},redirectDocument=(t,e)=>{let i=redirect(t,e);return i.headers.set("X-Remix-Reload-Document","true"),i};class ErrorResponseImpl{constructor(t,e,i,r){void 0===r&&(r=!1),this.status=t,this.statusText=e||"",this.internal=r,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function isRouteErrorResponse(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},router_IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},router_IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,defaultMapRouteProperties=t=>({hasErrorBoundary:Boolean(t.hasErrorBoundary)}),TRANSITIONS_STORAGE_KEY="remix-router-transitions";function router_createRouter(t){const e=t.window?t.window:"undefined"!==typeof window?window:void 0,i="undefined"!==typeof e&&"undefined"!==typeof e.document&&"undefined"!==typeof e.document.createElement,r=!i;let s;if(invariant(t.routes.length>0,"You must provide a non-empty routes array to createRouter"),t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let e=t.detectErrorBoundary;s=t=>({hasErrorBoundary:e(t)})}else s=defaultMapRouteProperties;let n,o,a={},l=convertRoutesToDataRoutes(t.routes,s,void 0,a),u=t.basename||"/",c=t.unstable_dataStrategy||defaultDataStrategy,h=_extends({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},t.future),d=null,p=new Set,f=null,_=null,m=null,g=null!=t.hydrationData,y=matchRoutes(l,t.history.location,u),v=null;if(null==y){let e=getInternalRouterError(404,{pathname:t.history.location.pathname}),{matches:i,route:r}=getShortCircuitMatches(l);y=i,v={[r.id]:e}}let A,b=y.some((t=>t.route.lazy)),C=y.some((t=>t.route.loader));if(b)o=!1;else if(C)if(h.v7_partialHydration){let e=t.hydrationData?t.hydrationData.loaderData:null,i=t.hydrationData?t.hydrationData.errors:null,r=t=>!t.route.loader||("function"!==typeof t.route.loader||!0!==t.route.loader.hydrate)&&(e&&void 0!==e[t.route.id]||i&&void 0!==i[t.route.id]);if(i){let t=y.findIndex((t=>void 0!==i[t.route.id]));o=y.slice(0,t+1).every(r)}else o=y.every(r)}else o=null!=t.hydrationData;else o=!0;let x,P={historyAction:t.history.action,location:t.history.location,matches:y,initialized:o,navigation:IDLE_NAVIGATION,restoreScrollPosition:null==t.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||v,fetchers:new Map,blockers:new Map},E=Action.Pop,w=!1,S=!1,O=new Map,M=null,T=!1,j=!1,N=[],R=[],k=new Map,D=0,L=-1,I=new Map,B=new Set,F=new Map,Y=new Map,U=new Set,z=new Map,X=new Map,J=!1;function H(t,e){void 0===e&&(e={}),P=_extends({},P,t);let i=[],r=[];h.v7_fetcherPersist&&P.fetchers.forEach(((t,e)=>{"idle"===t.state&&(U.has(e)?r.push(e):i.push(e))})),[...p].forEach((t=>t(P,{deletedFetchers:r,unstable_viewTransitionOpts:e.viewTransitionOpts,unstable_flushSync:!0===e.flushSync}))),h.v7_fetcherPersist&&(i.forEach((t=>P.fetchers.delete(t))),r.forEach((t=>et(t))))}function G(e,i,r){var s,o;let a,{flushSync:u}=void 0===r?{}:r,c=null!=P.actionData&&null!=P.navigation.formMethod&&isMutationMethod(P.navigation.formMethod)&&"loading"===P.navigation.state&&!0!==(null==(s=e.state)?void 0:s._isRedirect);a=i.actionData?Object.keys(i.actionData).length>0?i.actionData:null:c?P.actionData:null;let h=i.loaderData?mergeLoaderData(P.loaderData,i.loaderData,i.matches||[],i.errors):P.loaderData,d=P.blockers;d.size>0&&(d=new Map(d),d.forEach(((t,e)=>d.set(e,router_IDLE_BLOCKER))));let p,f=!0===w||null!=P.navigation.formMethod&&isMutationMethod(P.navigation.formMethod)&&!0!==(null==(o=e.state)?void 0:o._isRedirect);if(n&&(l=n,n=void 0),T||E===Action.Pop||(E===Action.Push?t.history.push(e,e.state):E===Action.Replace&&t.history.replace(e,e.state)),E===Action.Pop){let t=O.get(P.location.pathname);t&&t.has(e.pathname)?p={currentLocation:P.location,nextLocation:e}:O.has(e.pathname)&&(p={currentLocation:e,nextLocation:P.location})}else if(S){let t=O.get(P.location.pathname);t?t.add(e.pathname):(t=new Set([e.pathname]),O.set(P.location.pathname,t)),p={currentLocation:P.location,nextLocation:e}}H(_extends({},i,{actionData:a,loaderData:h,historyAction:E,location:e,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:ht(e,i.matches||P.matches),preventScrollReset:f,blockers:d}),{viewTransitionOpts:p,flushSync:!0===u}),E=Action.Pop,w=!1,S=!1,T=!1,j=!1,N=[],R=[]}async function W(e,i,r){x&&x.abort(),x=null,E=e,T=!0===(r&&r.startUninterruptedRevalidation),function(t,e){if(f&&m){let i=ct(t,e);f[i]=m()}}(P.location,P.matches),w=!0===(r&&r.preventScrollReset),S=!0===(r&&r.enableViewTransition);let s=n||l,o=r&&r.overrideNavigation,a=matchRoutes(s,i,u),c=!0===(r&&r.flushSync);if(!a){let t=getInternalRouterError(404,{pathname:i.pathname}),{matches:e,route:r}=getShortCircuitMatches(s);return ut(),void G(i,{matches:e,loaderData:{},errors:{[r.id]:t}},{flushSync:c})}if(P.initialized&&!j&&isHashChangeOnly(P.location,i)&&!(r&&r.submission&&isMutationMethod(r.submission.formMethod)))return void G(i,{matches:a},{flushSync:c});x=new AbortController;let d,p=createClientSideRequest(t.history,i,x.signal,r&&r.submission);if(r&&r.pendingError)d=[findNearestBoundary(a).route.id,{type:ResultType.error,error:r.pendingError}];else if(r&&r.submission&&isMutationMethod(r.submission.formMethod)){let e=await async function(t,e,i,r,s){void 0===s&&(s={});K();let n,o=getSubmittingNavigation(e,i);H({navigation:o},{flushSync:!0===s.flushSync});let a=getTargetMatch(r,e);if(a.route.action||a.route.lazy){if(n=(await q("action",t,[a],r))[0],t.signal.aborted)return{shortCircuited:!0}}else n={type:ResultType.error,error:getInternalRouterError(405,{method:t.method,pathname:e.pathname,routeId:a.route.id})};if(isRedirectResult(n)){let e;if(s&&null!=s.replace)e=s.replace;else{e=normalizeRedirectLocation(n.response.headers.get("Location"),new URL(t.url),u)===P.location.pathname+P.location.search}return await V(t,n,{submission:i,replace:e}),{shortCircuited:!0}}if(isDeferredResult(n))throw getInternalRouterError(400,{type:"defer-action"});if(isErrorResult(n)){let t=findNearestBoundary(r,a.route.id);return!0!==(s&&s.replace)&&(E=Action.Push),{pendingActionResult:[t.route.id,n]}}return{pendingActionResult:[a.route.id,n]}}(p,i,r.submission,a,{replace:r.replace,flushSync:c});if(e.shortCircuited)return;d=e.pendingActionResult,o=getLoadingNavigation(i,r.submission),c=!1,p=createClientSideRequest(t.history,p.url,p.signal)}let{shortCircuited:_,loaderData:g,errors:y}=await async function(e,i,r,s,o,a,c,d,p,f){let _=s||getLoadingNavigation(i,o),m=o||a||getSubmissionFromNavigation(_),g=n||l,[y,v]=getMatchesToLoad(t.history,P,r,m,i,h.v7_partialHydration&&!0===d,h.unstable_skipActionErrorRevalidation,j,N,R,U,F,B,g,u,f);if(ut((t=>!(r&&r.some((e=>e.route.id===t)))||y&&y.some((e=>e.route.id===t)))),L=++D,0===y.length&&0===v.length){let t=st();return G(i,_extends({matches:r,loaderData:{},errors:f&&isErrorResult(f[1])?{[f[0]]:f[1].error}:null},getActionDataForCommit(f),t?{fetchers:new Map(P.fetchers)}:{}),{flushSync:p}),{shortCircuited:!0}}if(!T&&(!h.v7_partialHydration||!d)){let t;v.forEach((t=>{let e=P.fetchers.get(t.key),i=getLoadingFetcher(void 0,e?e.data:void 0);P.fetchers.set(t.key,i)})),f&&!isErrorResult(f[1])?t={[f[0]]:f[1].data}:P.actionData&&(t=0===Object.keys(P.actionData).length?null:P.actionData),H(_extends({navigation:_},void 0!==t?{actionData:t}:{},v.length>0?{fetchers:new Map(P.fetchers)}:{}),{flushSync:p})}v.forEach((t=>{k.has(t.key)&&it(t.key),t.controller&&k.set(t.key,t.controller)}));let A=()=>v.forEach((t=>it(t.key)));x&&x.signal.addEventListener("abort",A);let{loaderResults:b,fetcherResults:C}=await $(P.matches,r,y,v,e);if(e.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",A);v.forEach((t=>k.delete(t.key)));let E=findRedirect([...b,...C]);if(E){if(E.idx>=y.length){let t=v[E.idx-y.length].key;B.add(t)}return await V(e,E.result,{replace:c}),{shortCircuited:!0}}let{loaderData:w,errors:S}=processLoaderData(P,r,y,b,f,v,C,z);z.forEach(((t,e)=>{t.subscribe((i=>{(i||t.done)&&z.delete(e)}))})),h.v7_partialHydration&&d&&P.errors&&Object.entries(P.errors).filter((t=>{let[e]=t;return!y.some((t=>t.route.id===e))})).forEach((t=>{let[e,i]=t;S=Object.assign(S||{},{[e]:i})}));let O=st(),M=nt(L),I=O||M||v.length>0;return _extends({loaderData:w,errors:S},I?{fetchers:new Map(P.fetchers)}:{})}(p,i,a,o,r&&r.submission,r&&r.fetcherSubmission,r&&r.replace,r&&!0===r.initialHydration,c,d);_||(x=null,G(i,_extends({matches:a},getActionDataForCommit(d),{loaderData:g,errors:y})))}async function V(r,s,n){let{submission:o,fetcherSubmission:a,replace:l}=void 0===n?{}:n;s.response.headers.has("X-Remix-Revalidate")&&(j=!0);let c=s.response.headers.get("Location");invariant(c,"Expected a Location header on the redirect Response"),c=normalizeRedirectLocation(c,new URL(r.url),u);let h=createLocation(P.location,c,{_isRedirect:!0});if(i){let i=!1;if(s.response.headers.has("X-Remix-Reload-Document"))i=!0;else if(ABSOLUTE_URL_REGEX.test(c)){const r=t.history.createURL(c);i=r.origin!==e.location.origin||null==router_stripBasename(r.pathname,u)}if(i)return void(l?e.location.replace(c):e.location.assign(c))}x=null;let d=!0===l?Action.Replace:Action.Push,{formMethod:p,formAction:f,formEncType:_}=P.navigation;!o&&!a&&p&&f&&_&&(o=getSubmissionFromNavigation(P.navigation));let m=o||a;if(redirectPreserveMethodStatusCodes.has(s.response.status)&&m&&isMutationMethod(m.formMethod))await W(d,h,{submission:_extends({},m,{formAction:c}),preventScrollReset:w});else{let t=getLoadingNavigation(h,o);await W(d,h,{overrideNavigation:t,fetcherSubmission:a,preventScrollReset:w})}}async function q(t,e,i,r){try{let n=await callDataStrategyImpl(c,t,e,i,r,a,s);return await Promise.all(n.map(((t,s)=>{if(isRedirectHandlerResult(t)){let n=t.result;return{type:ResultType.redirect,response:normalizeRelativeRoutingRedirectResponse(n,e,i[s].route.id,r,u,h.v7_relativeSplatPath)}}return convertHandlerResultToDataResult(t)})))}catch(n){return i.map((()=>({type:ResultType.error,error:n})))}}async function $(e,i,r,s,n){let[o,...a]=await Promise.all([r.length?q("loader",n,r,i):[],...s.map((e=>{if(e.matches&&e.match&&e.controller){return q("loader",createClientSideRequest(t.history,e.path,e.controller.signal),[e.match],e.matches).then((t=>t[0]))}return Promise.resolve({type:ResultType.error,error:getInternalRouterError(404,{pathname:e.path})})}))]);return await Promise.all([resolveDeferredResults(e,r,o,o.map((()=>n.signal)),!1,P.loaderData),resolveDeferredResults(e,s.map((t=>t.match)),a,s.map((t=>t.controller?t.controller.signal:null)),!0)]),{loaderResults:o,fetcherResults:a}}function K(){j=!0,N.push(...ut()),F.forEach(((t,e)=>{k.has(e)&&(R.push(e),it(e))}))}function Q(t,e,i){void 0===i&&(i={}),P.fetchers.set(t,e),H({fetchers:new Map(P.fetchers)},{flushSync:!0===(i&&i.flushSync)})}function Z(t,e,i,r){void 0===r&&(r={});let s=findNearestBoundary(P.matches,e);et(t),H({errors:{[s.route.id]:i},fetchers:new Map(P.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function tt(t){return h.v7_fetcherPersist&&(Y.set(t,(Y.get(t)||0)+1),U.has(t)&&U.delete(t)),P.fetchers.get(t)||router_IDLE_FETCHER}function et(t){let e=P.fetchers.get(t);!k.has(t)||e&&"loading"===e.state&&I.has(t)||it(t),F.delete(t),I.delete(t),B.delete(t),U.delete(t),P.fetchers.delete(t)}function it(t){let e=k.get(t);invariant(e,"Expected fetch controller: "+t),e.abort(),k.delete(t)}function rt(t){for(let e of t){let t=getDoneFetcher(tt(e).data);P.fetchers.set(e,t)}}function st(){let t=[],e=!1;for(let i of B){let r=P.fetchers.get(i);invariant(r,"Expected fetcher: "+i),"loading"===r.state&&(B.delete(i),t.push(i),e=!0)}return rt(t),e}function nt(t){let e=[];for(let[i,r]of I)if(r<t){let t=P.fetchers.get(i);invariant(t,"Expected fetcher: "+i),"loading"===t.state&&(it(i),I.delete(i),e.push(i))}return rt(e),e.length>0}function ot(t){P.blockers.delete(t),X.delete(t)}function at(t,e){let i=P.blockers.get(t)||router_IDLE_BLOCKER;invariant("unblocked"===i.state&&"blocked"===e.state||"blocked"===i.state&&"blocked"===e.state||"blocked"===i.state&&"proceeding"===e.state||"blocked"===i.state&&"unblocked"===e.state||"proceeding"===i.state&&"unblocked"===e.state,"Invalid blocker state transition: "+i.state+" -> "+e.state);let r=new Map(P.blockers);r.set(t,e),H({blockers:r})}function lt(t){let{currentLocation:e,nextLocation:i,historyAction:r}=t;if(0===X.size)return;X.size>1&&warning(!1,"A router only supports one blocker at a time");let s=Array.from(X.entries()),[n,o]=s[s.length-1],a=P.blockers.get(n);return a&&"proceeding"===a.state?void 0:o({currentLocation:e,nextLocation:i,historyAction:r})?n:void 0}function ut(t){let e=[];return z.forEach(((i,r)=>{t&&!t(r)||(i.cancel(),e.push(r),z.delete(r))})),e}function ct(t,e){if(_){return _(t,e.map((t=>convertRouteMatchToUiMatch(t,P.loaderData))))||t.key}return t.key}function ht(t,e){if(f){let i=ct(t,e),r=f[i];if("number"===typeof r)return r}return null}return A={get basename(){return u},get future(){return h},get state(){return P},get routes(){return l},get window(){return e},initialize:function(){if(d=t.history.listen((e=>{let{action:i,location:r,delta:s}=e;if(J)return void(J=!1);warning(0===X.size||null!=s,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let n=lt({currentLocation:P.location,nextLocation:r,historyAction:i});return n&&null!=s?(J=!0,t.history.go(-1*s),void at(n,{state:"blocked",location:r,proceed(){at(n,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),t.history.go(s)},reset(){let t=new Map(P.blockers);t.set(n,router_IDLE_BLOCKER),H({blockers:t})}})):W(i,r)})),i){restoreAppliedTransitions(e,O);let t=()=>persistAppliedTransitions(e,O);e.addEventListener("pagehide",t),M=()=>e.removeEventListener("pagehide",t)}return P.initialized||W(Action.Pop,P.location,{initialHydration:!0}),A},subscribe:function(t){return p.add(t),()=>p.delete(t)},enableScrollRestoration:function(t,e,i){if(f=t,m=e,_=i||null,!g&&P.navigation===IDLE_NAVIGATION){g=!0;let t=ht(P.location,P.matches);null!=t&&H({restoreScrollPosition:t})}return()=>{f=null,m=null,_=null}},navigate:async function e(i,r){if("number"===typeof i)return void t.history.go(i);let s=normalizeTo(P.location,P.matches,u,h.v7_prependBasename,i,h.v7_relativeSplatPath,null==r?void 0:r.fromRouteId,null==r?void 0:r.relative),{path:n,submission:o,error:a}=normalizeNavigateOptions(h.v7_normalizeFormMethod,!1,s,r),l=P.location,c=createLocation(P.location,n,r&&r.state);c=_extends({},c,t.history.encodeLocation(c));let d=r&&null!=r.replace?r.replace:void 0,p=Action.Push;!0===d?p=Action.Replace:!1===d||null!=o&&isMutationMethod(o.formMethod)&&o.formAction===P.location.pathname+P.location.search&&(p=Action.Replace);let f=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,_=!0===(r&&r.unstable_flushSync),m=lt({currentLocation:l,nextLocation:c,historyAction:p});if(!m)return await W(p,c,{submission:o,pendingError:a,preventScrollReset:f,replace:r&&r.replace,enableViewTransition:r&&r.unstable_viewTransition,flushSync:_});at(m,{state:"blocked",location:c,proceed(){at(m,{state:"proceeding",proceed:void 0,reset:void 0,location:c}),e(i,r)},reset(){let t=new Map(P.blockers);t.set(m,router_IDLE_BLOCKER),H({blockers:t})}})},fetch:function(e,i,s,o){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");k.has(e)&&it(e);let a=!0===(o&&o.unstable_flushSync),c=n||l,d=normalizeTo(P.location,P.matches,u,h.v7_prependBasename,s,h.v7_relativeSplatPath,i,null==o?void 0:o.relative),p=matchRoutes(c,d,u);if(!p)return void Z(e,i,getInternalRouterError(404,{pathname:d}),{flushSync:a});let{path:f,submission:_,error:m}=normalizeNavigateOptions(h.v7_normalizeFormMethod,!0,d,o);if(m)return void Z(e,i,m,{flushSync:a});let g=getTargetMatch(p,f);w=!0===(o&&o.preventScrollReset),_&&isMutationMethod(_.formMethod)?async function(e,i,r,s,o,a,c){if(K(),F.delete(e),!s.route.action&&!s.route.lazy){let t=getInternalRouterError(405,{method:c.formMethod,pathname:r,routeId:i});return void Z(e,i,t,{flushSync:a})}let d=P.fetchers.get(e);Q(e,getSubmittingFetcher(c,d),{flushSync:a});let p=new AbortController,f=createClientSideRequest(t.history,r,p.signal,c);k.set(e,p);let _=D,m=await q("action",f,[s],o),g=m[0];if(f.signal.aborted)return void(k.get(e)===p&&k.delete(e));if(h.v7_fetcherPersist&&U.has(e)){if(isRedirectResult(g)||isErrorResult(g))return void Q(e,getDoneFetcher(void 0))}else{if(isRedirectResult(g))return k.delete(e),L>_?void Q(e,getDoneFetcher(void 0)):(B.add(e),Q(e,getLoadingFetcher(c)),V(f,g,{fetcherSubmission:c}));if(isErrorResult(g))return void Z(e,i,g.error)}if(isDeferredResult(g))throw getInternalRouterError(400,{type:"defer-action"});let y=P.navigation.location||P.location,v=createClientSideRequest(t.history,y,p.signal),A=n||l,b="idle"!==P.navigation.state?matchRoutes(A,P.navigation.location,u):P.matches;invariant(b,"Didn't find any matches after fetcher action");let C=++D;I.set(e,C);let w=getLoadingFetcher(c,g.data);P.fetchers.set(e,w);let[S,O]=getMatchesToLoad(t.history,P,b,c,y,!1,h.unstable_skipActionErrorRevalidation,j,N,R,U,F,B,A,u,[s.route.id,g]);O.filter((t=>t.key!==e)).forEach((t=>{let e=t.key,i=P.fetchers.get(e),r=getLoadingFetcher(void 0,i?i.data:void 0);P.fetchers.set(e,r),k.has(e)&&it(e),t.controller&&k.set(e,t.controller)})),H({fetchers:new Map(P.fetchers)});let M=()=>O.forEach((t=>it(t.key)));p.signal.addEventListener("abort",M);let{loaderResults:T,fetcherResults:Y}=await $(P.matches,b,S,O,v);if(p.signal.aborted)return;p.signal.removeEventListener("abort",M),I.delete(e),k.delete(e),O.forEach((t=>k.delete(t.key)));let X=findRedirect([...T,...Y]);if(X){if(X.idx>=S.length){let t=O[X.idx-S.length].key;B.add(t)}return V(v,X.result)}let{loaderData:J,errors:W}=processLoaderData(P,P.matches,S,T,void 0,O,Y,z);if(P.fetchers.has(e)){let t=getDoneFetcher(g.data);P.fetchers.set(e,t)}nt(C),"loading"===P.navigation.state&&C>L?(invariant(E,"Expected pending action"),x&&x.abort(),G(P.navigation.location,{matches:b,loaderData:J,errors:W,fetchers:new Map(P.fetchers)})):(H({errors:W,loaderData:mergeLoaderData(P.loaderData,J,b,W),fetchers:new Map(P.fetchers)}),j=!1)}(e,i,f,g,p,a,_):(F.set(e,{routeId:i,path:f}),async function(e,i,r,s,n,o,a){let l=P.fetchers.get(e);Q(e,getLoadingFetcher(a,l?l.data:void 0),{flushSync:o});let u=new AbortController,c=createClientSideRequest(t.history,r,u.signal);k.set(e,u);let h=D,d=await q("loader",c,[s],n),p=d[0];isDeferredResult(p)&&(p=await resolveDeferredData(p,c.signal,!0)||p);k.get(e)===u&&k.delete(e);if(c.signal.aborted)return;if(U.has(e))return void Q(e,getDoneFetcher(void 0));if(isRedirectResult(p))return L>h?void Q(e,getDoneFetcher(void 0)):(B.add(e),void await V(c,p));if(isErrorResult(p))return void Z(e,i,p.error);invariant(!isDeferredResult(p),"Unhandled fetcher deferred data"),Q(e,getDoneFetcher(p.data))}(e,i,f,g,p,a,_))},revalidate:function(){K(),H({revalidation:"loading"}),"submitting"!==P.navigation.state&&("idle"!==P.navigation.state?W(E||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation}):W(P.historyAction,P.location,{startUninterruptedRevalidation:!0}))},createHref:e=>t.history.createHref(e),encodeLocation:e=>t.history.encodeLocation(e),getFetcher:tt,deleteFetcher:function(t){if(h.v7_fetcherPersist){let e=(Y.get(t)||0)-1;e<=0?(Y.delete(t),U.add(t)):Y.set(t,e)}else et(t);H({fetchers:new Map(P.fetchers)})},dispose:function(){d&&d(),M&&M(),p.clear(),x&&x.abort(),P.fetchers.forEach(((t,e)=>et(e))),P.blockers.forEach(((t,e)=>ot(e)))},getBlocker:function(t,e){let i=P.blockers.get(t)||router_IDLE_BLOCKER;return X.get(t)!==e&&X.set(t,e),i},deleteBlocker:ot,_internalFetchControllers:k,_internalActiveDeferreds:z,_internalSetRoutes:function(t){a={},n=convertRoutesToDataRoutes(t,s,void 0,a)}},A}const UNSAFE_DEFERRED_SYMBOL=Symbol("deferred");function createStaticHandler(t,e){invariant(t.length>0,"You must provide a non-empty routes array to createStaticHandler");let i,r={},s=(e?e.basename:null)||"/";if(null!=e&&e.mapRouteProperties)i=e.mapRouteProperties;else if(null!=e&&e.detectErrorBoundary){let t=e.detectErrorBoundary;i=e=>({hasErrorBoundary:t(e)})}else i=defaultMapRouteProperties;let n=_extends({v7_relativeSplatPath:!1,v7_throwAbortReason:!1},e?e.future:null),o=convertRoutesToDataRoutes(t,i,void 0,r);async function a(t,e,i,r,s,o,a){invariant(t.signal,"query()/queryRoute() requests must contain an AbortController signal");try{if(isMutationMethod(t.method.toLowerCase())){let c=await async function(t,e,i,r,s,o,a){let c;if(i.route.action||i.route.lazy){c=(await u("action",t,[i],e,a,r,s))[0],t.signal.aborted&&throwStaticHandlerAbortedError(t,a,n)}else{let e=getInternalRouterError(405,{method:t.method,pathname:new URL(t.url).pathname,routeId:i.route.id});if(a)throw e;c={type:ResultType.error,error:e}}if(isRedirectResult(c))throw new Response(null,{status:c.response.status,headers:{Location:c.response.headers.get("Location")}});if(isDeferredResult(c)){let t=getInternalRouterError(400,{type:"defer-action"});if(a)throw t;c={type:ResultType.error,error:t}}if(a){if(isErrorResult(c))throw c.error;return{matches:[i],loaderData:{},actionData:{[i.route.id]:c.data},errors:null,statusCode:200,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}let h=new Request(t.url,{headers:t.headers,redirect:t.redirect,signal:t.signal});if(isErrorResult(c)){let t=o?i:findNearestBoundary(e,i.route.id);return _extends({},await l(h,e,r,s,o,null,[t.route.id,c]),{statusCode:isRouteErrorResponse(c.error)?c.error.status:null!=c.statusCode?c.statusCode:500,actionData:null,actionHeaders:_extends({},c.headers?{[i.route.id]:c.headers}:{})})}let d=await l(h,e,r,s,o,null);return _extends({},d,{actionData:{[i.route.id]:c.data}},c.statusCode?{statusCode:c.statusCode}:{},{actionHeaders:c.headers?{[i.route.id]:c.headers}:{}})}(t,i,a||getTargetMatch(i,e),r,s,o,null!=a);return c}let c=await l(t,i,r,s,o,a);return isResponse(c)?c:_extends({},c,{actionData:null,actionHeaders:{}})}catch(c){if(isHandlerResult(c)&&isResponse(c.result)){if(c.type===ResultType.error)throw c.result;return c.result}if(isRedirectResponse(c))return c;throw c}}async function l(t,e,i,r,s,o,a){let l=null!=o;if(l&&(null==o||!o.route.loader)&&(null==o||!o.route.lazy))throw getInternalRouterError(400,{method:t.method,pathname:new URL(t.url).pathname,routeId:null==o?void 0:o.route.id});let c=(o?[o]:a&&isErrorResult(a[1])?getLoaderMatchesUntilBoundary(e,a[0]):e).filter((t=>t.route.loader||t.route.lazy));if(0===c.length)return{matches:e,loaderData:e.reduce(((t,e)=>Object.assign(t,{[e.route.id]:null})),{}),errors:a&&isErrorResult(a[1])?{[a[0]]:a[1].error}:null,statusCode:200,loaderHeaders:{},activeDeferreds:null};let h=await u("loader",t,c,e,l,i,r);t.signal.aborted&&throwStaticHandlerAbortedError(t,l,n);let d=new Map,p=processRouteLoaderData(e,c,h,a,d,s),f=new Set(c.map((t=>t.route.id)));return e.forEach((t=>{f.has(t.route.id)||(p.loaderData[t.route.id]=null)})),_extends({},p,{matches:e,activeDeferreds:d.size>0?Object.fromEntries(d.entries()):null})}async function u(t,e,o,a,l,u,c){let h=await callDataStrategyImpl(c||defaultDataStrategy,t,e,o,a,r,i,u);return await Promise.all(h.map(((t,i)=>{if(isRedirectHandlerResult(t)){throw normalizeRelativeRoutingRedirectResponse(t.result,e,o[i].route.id,a,s,n.v7_relativeSplatPath)}if(isResponse(t.result)&&l)throw t;return convertHandlerResultToDataResult(t)})))}return{dataRoutes:o,query:async function(t,e){let{requestContext:i,skipLoaderErrorBubbling:r,unstable_dataStrategy:n}=void 0===e?{}:e,l=new URL(t.url),u=t.method,c=createLocation("",router_createPath(l),null,"default"),h=matchRoutes(o,c,s);if(!isValidMethod(u)&&"HEAD"!==u){let t=getInternalRouterError(405,{method:u}),{matches:e,route:i}=getShortCircuitMatches(o);return{basename:s,location:c,matches:e,loaderData:{},actionData:null,errors:{[i.id]:t},statusCode:t.status,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}if(!h){let t=getInternalRouterError(404,{pathname:c.pathname}),{matches:e,route:i}=getShortCircuitMatches(o);return{basename:s,location:c,matches:e,loaderData:{},actionData:null,errors:{[i.id]:t},statusCode:t.status,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}let d=await a(t,c,h,i,n||null,!0===r,null);return isResponse(d)?d:_extends({location:c,basename:s},d)},queryRoute:async function(t,e){let{routeId:i,requestContext:r,unstable_dataStrategy:n}=void 0===e?{}:e,l=new URL(t.url),u=t.method,c=createLocation("",router_createPath(l),null,"default"),h=matchRoutes(o,c,s);if(!isValidMethod(u)&&"HEAD"!==u&&"OPTIONS"!==u)throw getInternalRouterError(405,{method:u});if(!h)throw getInternalRouterError(404,{pathname:c.pathname});let d=i?h.find((t=>t.route.id===i)):getTargetMatch(h,c);if(i&&!d)throw getInternalRouterError(403,{pathname:c.pathname,routeId:i});if(!d)throw getInternalRouterError(404,{pathname:c.pathname});let p=await a(t,c,h,r,n||null,!1,d);if(isResponse(p))return p;let f=p.errors?Object.values(p.errors)[0]:void 0;if(void 0!==f)throw f;if(p.actionData)return Object.values(p.actionData)[0];if(p.loaderData){var _;let t=Object.values(p.loaderData)[0];return null!=(_=p.activeDeferreds)&&_[d.route.id]&&(t[UNSAFE_DEFERRED_SYMBOL]=p.activeDeferreds[d.route.id]),t}}}}function getStaticContextFromError(t,e,i){return _extends({},e,{statusCode:isRouteErrorResponse(i)?i.status:500,errors:{[e._deepestRenderedBoundaryId||t[0].id]:i}})}function throwStaticHandlerAbortedError(t,e,i){if(i.v7_throwAbortReason&&void 0!==t.signal.reason)throw t.signal.reason;throw new Error((e?"queryRoute":"query")+"() call aborted: "+t.method+" "+t.url)}function isSubmissionNavigation(t){return null!=t&&("formData"in t&&null!=t.formData||"body"in t&&void 0!==t.body)}function normalizeTo(t,e,i,r,s,n,o,a){let l,u;if(o){l=[];for(let t of e)if(l.push(t),t.route.id===o){u=t;break}}else l=e,u=e[e.length-1];let c=router_resolveTo(s||".",getResolveToMatches(l,n),router_stripBasename(t.pathname,i)||t.pathname,"path"===a);return null==s&&(c.search=t.search,c.hash=t.hash),null!=s&&""!==s&&"."!==s||!u||!u.route.index||hasNakedIndexQuery(c.search)||(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r&&"/"!==i&&(c.pathname="/"===c.pathname?i:router_joinPaths([i,c.pathname])),router_createPath(c)}function normalizeNavigateOptions(t,e,i,r){if(!r||!isSubmissionNavigation(r))return{path:i};if(r.formMethod&&!isValidMethod(r.formMethod))return{path:i,error:getInternalRouterError(405,{method:r.formMethod})};let s,n,o=()=>({path:i,error:getInternalRouterError(400,{type:"invalid-body"})}),a=r.formMethod||"get",l=t?a.toUpperCase():a.toLowerCase(),u=stripHashFromPath(i);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!isMutationMethod(l))return o();let t="string"===typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce(((t,e)=>{let[i,r]=e;return""+t+i+"="+r+"\n"}),""):String(r.body);return{path:i,submission:{formMethod:l,formAction:u,formEncType:r.formEncType,formData:void 0,json:void 0,text:t}}}if("application/json"===r.formEncType){if(!isMutationMethod(l))return o();try{let t="string"===typeof r.body?JSON.parse(r.body):r.body;return{path:i,submission:{formMethod:l,formAction:u,formEncType:r.formEncType,formData:void 0,json:t,text:void 0}}}catch(d){return o()}}}if(invariant("function"===typeof FormData,"FormData is not available in this environment"),r.formData)s=convertFormDataToSearchParams(r.formData),n=r.formData;else if(r.body instanceof FormData)s=convertFormDataToSearchParams(r.body),n=r.body;else if(r.body instanceof URLSearchParams)s=r.body,n=convertSearchParamsToFormData(s);else if(null==r.body)s=new URLSearchParams,n=new FormData;else try{s=new URLSearchParams(r.body),n=convertSearchParamsToFormData(s)}catch(d){return o()}let c={formMethod:l,formAction:u,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:n,json:void 0,text:void 0};if(isMutationMethod(c.formMethod))return{path:i,submission:c};let h=parsePath(i);return e&&h.search&&hasNakedIndexQuery(h.search)&&s.append("index",""),h.search="?"+s,{path:router_createPath(h),submission:c}}function getLoaderMatchesUntilBoundary(t,e){let i=t;if(e){let r=t.findIndex((t=>t.route.id===e));r>=0&&(i=t.slice(0,r))}return i}function getMatchesToLoad(t,e,i,r,s,n,o,a,l,u,c,h,d,p,f,_){let m=_?isErrorResult(_[1])?_[1].error:_[1].data:void 0,g=t.createURL(e.location),y=t.createURL(s),v=_&&isErrorResult(_[1])?_[0]:void 0,A=v?getLoaderMatchesUntilBoundary(i,v):i,b=_?_[1].statusCode:void 0,C=o&&b&&b>=400,x=A.filter(((t,i)=>{let{route:s}=t;if(s.lazy)return!0;if(null==s.loader)return!1;if(n)return!("function"===typeof s.loader&&!s.loader.hydrate)||void 0===e.loaderData[s.id]&&(!e.errors||void 0===e.errors[s.id]);if(isNewLoader(e.loaderData,e.matches[i],t)||l.some((e=>e===t.route.id)))return!0;let o=e.matches[i],u=t;return shouldRevalidateLoader(t,_extends({currentUrl:g,currentParams:o.params,nextUrl:y,nextParams:u.params},r,{actionResult:m,unstable_actionStatus:b,defaultShouldRevalidate:!C&&(a||g.pathname+g.search===y.pathname+y.search||g.search!==y.search||isNewRouteInstance(o,u))}))})),P=[];return h.forEach(((t,s)=>{if(n||!i.some((e=>e.route.id===t.routeId))||c.has(s))return;let o=matchRoutes(p,t.path,f);if(!o)return void P.push({key:s,routeId:t.routeId,path:t.path,matches:null,match:null,controller:null});let l=e.fetchers.get(s),h=getTargetMatch(o,t.path),_=!1;_=!d.has(s)&&(!!u.includes(s)||(l&&"idle"!==l.state&&void 0===l.data?a:shouldRevalidateLoader(h,_extends({currentUrl:g,currentParams:e.matches[e.matches.length-1].params,nextUrl:y,nextParams:i[i.length-1].params},r,{actionResult:m,unstable_actionStatus:b,defaultShouldRevalidate:!C&&a})))),_&&P.push({key:s,routeId:t.routeId,path:t.path,matches:o,match:h,controller:new AbortController})})),[x,P]}function isNewLoader(t,e,i){let r=!e||i.route.id!==e.route.id,s=void 0===t[i.route.id];return r||s}function isNewRouteInstance(t,e){let i=t.route.path;return t.pathname!==e.pathname||null!=i&&i.endsWith("*")&&t.params["*"]!==e.params["*"]}function shouldRevalidateLoader(t,e){if(t.route.shouldRevalidate){let i=t.route.shouldRevalidate(e);if("boolean"===typeof i)return i}return e.defaultShouldRevalidate}async function loadLazyRouteModule(t,e,i){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let s=i[t.id];invariant(s,"No route found in manifest");let n={};for(let o in r){let t=void 0!==s[o]&&"hasErrorBoundary"!==o;warning(!t,'Route "'+s.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+o+'" will be ignored.'),t||immutableRouteKeys.has(o)||(n[o]=r[o])}Object.assign(s,n),Object.assign(s,_extends({},e(s),{lazy:void 0}))}function defaultDataStrategy(t){return Promise.all(t.matches.map((t=>t.resolve())))}async function callDataStrategyImpl(t,e,i,r,s,n,o,a){let l=r.reduce(((t,e)=>t.add(e.route.id)),new Set),u=new Set,c=await t({matches:s.map((t=>{let r=l.has(t.route.id);return _extends({},t,{shouldLoad:r,resolve:s=>(u.add(t.route.id),r?callLoaderOrAction(e,i,t,n,o,s,a):Promise.resolve({type:ResultType.data,result:void 0}))})})),request:i,params:s[0].params,context:a});return s.forEach((t=>invariant(u.has(t.route.id),'`match.resolve()` was not called for route id "'+t.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.'))),c.filter(((t,e)=>l.has(s[e].route.id)))}async function callLoaderOrAction(t,e,i,r,s,n,o){let a,l,u=r=>{let s,a=new Promise(((t,e)=>s=e));l=()=>s(),e.signal.addEventListener("abort",l);let u,c=s=>"function"!==typeof r?Promise.reject(new Error('You cannot call the handler for a route which defines a boolean "'+t+'" [routeId: '+i.route.id+"]")):r({request:e,params:i.params,context:o},...void 0!==s?[s]:[]);return u=n?n((t=>c(t))):(async()=>{try{return{type:"data",result:await c()}}catch(t){return{type:"error",result:t}}})(),Promise.race([u,a])};try{let n=i.route[t];if(i.route.lazy)if(n){let t,[e]=await Promise.all([u(n).catch((e=>{t=e})),loadLazyRouteModule(i.route,s,r)]);if(void 0!==t)throw t;a=e}else{if(await loadLazyRouteModule(i.route,s,r),n=i.route[t],!n){if("action"===t){let t=new URL(e.url),r=t.pathname+t.search;throw getInternalRouterError(405,{method:e.method,pathname:r,routeId:i.route.id})}return{type:ResultType.data,result:void 0}}a=await u(n)}else{if(!n){let t=new URL(e.url);throw getInternalRouterError(404,{pathname:t.pathname+t.search})}a=await u(n)}invariant(void 0!==a.result,"You defined "+("action"===t?"an action":"a loader")+' for route "'+i.route.id+"\" but didn't return anything from your `"+t+"` function. Please return a value or `null`.")}catch(c){return{type:ResultType.error,result:c}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function convertHandlerResultToDataResult(t){let{result:e,type:i,status:r}=t;if(isResponse(e)){let t;try{let i=e.headers.get("Content-Type");t=i&&/\bapplication\/json\b/.test(i)?null==e.body?null:await e.json():await e.text()}catch(o){return{type:ResultType.error,error:o}}return i===ResultType.error?{type:ResultType.error,error:new ErrorResponseImpl(e.status,e.statusText,t),statusCode:e.status,headers:e.headers}:{type:ResultType.data,data:t,statusCode:e.status,headers:e.headers}}return i===ResultType.error?{type:ResultType.error,error:e,statusCode:isRouteErrorResponse(e)?e.status:r}:isDeferredData(e)?{type:ResultType.deferred,deferredData:e,statusCode:null==(s=e.init)?void 0:s.status,headers:(null==(n=e.init)?void 0:n.headers)&&new Headers(e.init.headers)}:{type:ResultType.data,data:e,statusCode:r};var s,n}function normalizeRelativeRoutingRedirectResponse(t,e,i,r,s,n){let o=t.headers.get("Location");if(invariant(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!ABSOLUTE_URL_REGEX.test(o)){let a=r.slice(0,r.findIndex((t=>t.route.id===i))+1);o=normalizeTo(new URL(e.url),a,s,!0,o,n),t.headers.set("Location",o)}return t}function normalizeRedirectLocation(t,e,i){if(ABSOLUTE_URL_REGEX.test(t)){let r=t,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),n=null!=router_stripBasename(s.pathname,i);if(s.origin===e.origin&&n)return s.pathname+s.search+s.hash}return t}function createClientSideRequest(t,e,i,r){let s=t.createURL(stripHashFromPath(e)).toString(),n={signal:i};if(r&&isMutationMethod(r.formMethod)){let{formMethod:t,formEncType:e}=r;n.method=t.toUpperCase(),"application/json"===e?(n.headers=new Headers({"Content-Type":e}),n.body=JSON.stringify(r.json)):"text/plain"===e?n.body=r.text:"application/x-www-form-urlencoded"===e&&r.formData?n.body=convertFormDataToSearchParams(r.formData):n.body=r.formData}return new Request(s,n)}function convertFormDataToSearchParams(t){let e=new URLSearchParams;for(let[i,r]of t.entries())e.append(i,"string"===typeof r?r:r.name);return e}function convertSearchParamsToFormData(t){let e=new FormData;for(let[i,r]of t.entries())e.append(i,r);return e}function processRouteLoaderData(t,e,i,r,s,n){let o,a={},l=null,u=!1,c={},h=r&&isErrorResult(r[1])?r[1].error:void 0;return i.forEach(((i,r)=>{let d=e[r].route.id;if(invariant(!isRedirectResult(i),"Cannot handle redirect results in processLoaderData"),isErrorResult(i)){let e=i.error;if(void 0!==h&&(e=h,h=void 0),l=l||{},n)l[d]=e;else{let i=findNearestBoundary(t,d);null==l[i.route.id]&&(l[i.route.id]=e)}a[d]=void 0,u||(u=!0,o=isRouteErrorResponse(i.error)?i.error.status:500),i.headers&&(c[d]=i.headers)}else isDeferredResult(i)?(s.set(d,i.deferredData),a[d]=i.deferredData.data,null==i.statusCode||200===i.statusCode||u||(o=i.statusCode),i.headers&&(c[d]=i.headers)):(a[d]=i.data,i.statusCode&&200!==i.statusCode&&!u&&(o=i.statusCode),i.headers&&(c[d]=i.headers))})),void 0!==h&&r&&(l={[r[0]]:h},a[r[0]]=void 0),{loaderData:a,errors:l,statusCode:o||200,loaderHeaders:c}}function processLoaderData(t,e,i,r,s,n,o,a){let{loaderData:l,errors:u}=processRouteLoaderData(e,i,r,s,a,!1);for(let c=0;c<n.length;c++){let{key:e,match:i,controller:r}=n[c];invariant(void 0!==o&&void 0!==o[c],"Did not find corresponding fetcher result");let s=o[c];if(!r||!r.signal.aborted)if(isErrorResult(s)){let r=findNearestBoundary(t.matches,null==i?void 0:i.route.id);u&&u[r.route.id]||(u=_extends({},u,{[r.route.id]:s.error})),t.fetchers.delete(e)}else if(isRedirectResult(s))invariant(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(s))invariant(!1,"Unhandled fetcher deferred data");else{let i=getDoneFetcher(s.data);t.fetchers.set(e,i)}}return{loaderData:l,errors:u}}function mergeLoaderData(t,e,i,r){let s=_extends({},e);for(let n of i){let i=n.route.id;if(e.hasOwnProperty(i)?void 0!==e[i]&&(s[i]=e[i]):void 0!==t[i]&&n.route.loader&&(s[i]=t[i]),r&&r.hasOwnProperty(i))break}return s}function getActionDataForCommit(t){return t?isErrorResult(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function findNearestBoundary(t,e){return(e?t.slice(0,t.findIndex((t=>t.route.id===e))+1):[...t]).reverse().find((t=>!0===t.route.hasErrorBoundary))||t[0]}function getShortCircuitMatches(t){let e=1===t.length?t[0]:t.find((t=>t.index||!t.path||"/"===t.path))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function getInternalRouterError(t,e){let{pathname:i,routeId:r,method:s,type:n}=void 0===e?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return 400===t?(o="Bad Request",s&&i&&r?a="You made a "+s+' request to "'+i+'" but did not provide a `loader` for route "'+r+'", so there is no way to handle the request.':"defer-action"===n?a="defer() is not supported in actions":"invalid-body"===n&&(a="Unable to encode submission body")):403===t?(o="Forbidden",a='Route "'+r+'" does not match URL "'+i+'"'):404===t?(o="Not Found",a='No route matches URL "'+i+'"'):405===t&&(o="Method Not Allowed",s&&i&&r?a="You made a "+s.toUpperCase()+' request to "'+i+'" but did not provide an `action` for route "'+r+'", so there is no way to handle the request.':s&&(a='Invalid request method "'+s.toUpperCase()+'"')),new ErrorResponseImpl(t||500,o,new Error(a),!0)}function findRedirect(t){for(let e=t.length-1;e>=0;e--){let i=t[e];if(isRedirectResult(i))return{result:i,idx:e}}}function stripHashFromPath(t){return router_createPath(_extends({},"string"===typeof t?parsePath(t):t,{hash:""}))}function isHashChangeOnly(t,e){return t.pathname===e.pathname&&t.search===e.search&&(""===t.hash?""!==e.hash:t.hash===e.hash||""!==e.hash)}function isHandlerResult(t){return null!=t&&"object"===typeof t&&"type"in t&&"result"in t&&(t.type===ResultType.data||t.type===ResultType.error)}function isRedirectHandlerResult(t){return isResponse(t.result)&&redirectStatusCodes.has(t.result.status)}function isDeferredResult(t){return t.type===ResultType.deferred}function isErrorResult(t){return t.type===ResultType.error}function isRedirectResult(t){return(t&&t.type)===ResultType.redirect}function isDeferredData(t){let e=t;return e&&"object"===typeof e&&"object"===typeof e.data&&"function"===typeof e.subscribe&&"function"===typeof e.cancel&&"function"===typeof e.resolveData}function isResponse(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"object"===typeof t.headers&&"undefined"!==typeof t.body}function isRedirectResponse(t){if(!isResponse(t))return!1;let e=t.status,i=t.headers.get("Location");return e>=300&&e<=399&&null!=i}function isValidMethod(t){return validRequestMethods.has(t.toLowerCase())}function isMutationMethod(t){return validMutationMethods.has(t.toLowerCase())}async function resolveDeferredResults(t,e,i,r,s,n){for(let o=0;o<i.length;o++){let a=i[o],l=e[o];if(!l)continue;let u=t.find((t=>t.route.id===l.route.id)),c=null!=u&&!isNewRouteInstance(u,l)&&void 0!==(n&&n[l.route.id]);if(isDeferredResult(a)&&(s||c)){let t=r[o];invariant(t,"Expected an AbortSignal for revalidating fetcher deferred result"),await resolveDeferredData(a,t,s).then((t=>{t&&(i[o]=t||i[o])}))}}}async function resolveDeferredData(t,e,i){if(void 0===i&&(i=!1),!await t.deferredData.resolveData(e)){if(i)try{return{type:ResultType.data,data:t.deferredData.unwrappedData}}catch(r){return{type:ResultType.error,error:r}}return{type:ResultType.data,data:t.deferredData.data}}}function hasNakedIndexQuery(t){return new URLSearchParams(t).getAll("index").some((t=>""===t))}function getTargetMatch(t,e){let i="string"===typeof e?parsePath(e).search:e.search;if(t[t.length-1].route.index&&hasNakedIndexQuery(i||""))return t[t.length-1];let r=getPathContributingMatches(t);return r[r.length-1]}function getSubmissionFromNavigation(t){let{formMethod:e,formAction:i,formEncType:r,text:s,formData:n,json:o}=t;if(e&&i&&r)return null!=s?{formMethod:e,formAction:i,formEncType:r,formData:void 0,json:void 0,text:s}:null!=n?{formMethod:e,formAction:i,formEncType:r,formData:n,json:void 0,text:void 0}:void 0!==o?{formMethod:e,formAction:i,formEncType:r,formData:void 0,json:o,text:void 0}:void 0}function getLoadingNavigation(t,e){if(e){return{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}return{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function getLoadingFetcher(t,e){if(t){return{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function getSubmittingFetcher(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function getDoneFetcher(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function restoreAppliedTransitions(t,e){try{let i=t.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(i){let t=JSON.parse(i);for(let[i,r]of Object.entries(t||{}))r&&Array.isArray(r)&&e.set(i,new Set(r||[]))}}catch(i){}}function persistAppliedTransitions(t,e){if(e.size>0){let r={};for(let[t,i]of e)r[t]=[...i];try{t.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(r))}catch(i){warning(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}function dist_extends(){return dist_extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},dist_extends.apply(this,arguments)}const DataRouterContext=react.createContext(null);const DataRouterStateContext=react.createContext(null);const AwaitContext=react.createContext(null);const NavigationContext=react.createContext(null);const LocationContext=react.createContext(null);const RouteContext=react.createContext({outlet:null,matches:[],isDataRoute:!1});const RouteErrorContext=react.createContext(null);function useHref(t,e){let{relative:i}=void 0===e?{}:e;useInRouterContext()||invariant(!1);let{basename:r,navigator:s}=react.useContext(NavigationContext),{hash:n,pathname:o,search:a}=dist_useResolvedPath(t,{relative:i}),l=o;return"/"!==r&&(l="/"===o?r:router_joinPaths([r,o])),s.createHref({pathname:l,search:a,hash:n})}function useInRouterContext(){return null!=react.useContext(LocationContext)}function dist_useLocation(){return useInRouterContext()||invariant(!1),react.useContext(LocationContext).location}function useNavigationType(){return React.useContext(LocationContext).navigationType}function useMatch(t){useInRouterContext()||UNSAFE_invariant(!1);let{pathname:e}=dist_useLocation();return React.useMemo((()=>matchPath(t,e)),[e,t])}const navigateEffectWarning=null;function useIsomorphicLayoutEffect(t){react.useContext(NavigationContext).static||react.useLayoutEffect(t)}function dist_useNavigate(){let{isDataRoute:t}=react.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let t=react.useContext(DataRouterContext),{basename:e,future:i,navigator:r}=react.useContext(NavigationContext),{matches:s}=react.useContext(RouteContext),{pathname:n}=dist_useLocation(),o=JSON.stringify(getResolveToMatches(s,i.v7_relativeSplatPath)),a=react.useRef(!1);return useIsomorphicLayoutEffect((()=>{a.current=!0})),react.useCallback((function(i,s){if(void 0===s&&(s={}),!a.current)return;if("number"===typeof i)return void r.go(i);let l=router_resolveTo(i,JSON.parse(o),n,"path"===s.relative);null==t&&"/"!==e&&(l.pathname="/"===l.pathname?e:router_joinPaths([e,l.pathname])),(s.replace?r.replace:r.push)(l,s.state,s)}),[e,r,o,n,t])}const OutletContext=null;function useOutletContext(){return React.useContext(OutletContext)}function useOutlet(t){let e=React.useContext(RouteContext).outlet;return e?React.createElement(OutletContext.Provider,{value:t},e):e}function useParams(){let{matches:t}=React.useContext(RouteContext),e=t[t.length-1];return e?e.params:{}}function dist_useResolvedPath(t,e){let{relative:i}=void 0===e?{}:e,{future:r}=react.useContext(NavigationContext),{matches:s}=react.useContext(RouteContext),{pathname:n}=dist_useLocation(),o=JSON.stringify(getResolveToMatches(s,r.v7_relativeSplatPath));return react.useMemo((()=>router_resolveTo(t,JSON.parse(o),n,"path"===i)),[t,o,n,i])}function useRoutes(t,e){return useRoutesImpl(t,e)}function useRoutesImpl(t,e,i,r){useInRouterContext()||invariant(!1);let{navigator:s}=react.useContext(NavigationContext),{matches:n}=react.useContext(RouteContext),o=n[n.length-1],a=o?o.params:{},l=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let u,c=dist_useLocation();if(e){var h;let t="string"===typeof e?parsePath(e):e;"/"===l||(null==(h=t.pathname)?void 0:h.startsWith(l))||invariant(!1),u=t}else u=c;let d=u.pathname||"/",p=d;if("/"!==l){let t=l.replace(/^\//,"").split("/");p="/"+d.replace(/^\//,"").split("/").slice(t.length).join("/")}let f=matchRoutes(t,{pathname:p});let _=_renderMatches(f&&f.map((t=>Object.assign({},t,{params:Object.assign({},a,t.params),pathname:router_joinPaths([l,s.encodeLocation?s.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?l:router_joinPaths([l,s.encodeLocation?s.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),n,i,r);return e&&_?react.createElement(LocationContext.Provider,{value:{location:dist_extends({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Action.Pop}},_):_}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return react.createElement(react.Fragment,null,react.createElement("h2",null,"Unexpected Application Error!"),react.createElement("h3",{style:{fontStyle:"italic"}},e),i?react.createElement("pre",{style:s},i):null,null)}const defaultErrorElement=react.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends react.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return void 0!==this.state.error?react.createElement(RouteContext.Provider,{value:this.props.routeContext},react.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(t){let{routeContext:e,match:i,children:r}=t,s=react.useContext(DataRouterContext);return s&&s.static&&s.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=i.route.id),react.createElement(RouteContext.Provider,{value:e},r)}function _renderMatches(t,e,i,r){var s;if(void 0===e&&(e=[]),void 0===i&&(i=null),void 0===r&&(r=null),null==t){var n;if(null==(n=i)||!n.errors)return null;t=i.matches}let o=t,a=null==(s=i)?void 0:s.errors;if(null!=a){let t=o.findIndex((t=>t.route.id&&void 0!==(null==a?void 0:a[t.route.id])));t>=0||invariant(!1),o=o.slice(0,Math.min(o.length,t+1))}let l=!1,u=-1;if(i&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let t=o[c];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(u=c),t.route.id){let{loaderData:e,errors:r}=i,s=t.route.loader&&void 0===e[t.route.id]&&(!r||void 0===r[t.route.id]);if(t.route.lazy||s){l=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight(((t,r,s)=>{let n,c=!1,h=null,d=null;i&&(n=a&&r.route.id?a[r.route.id]:void 0,h=r.route.errorElement||defaultErrorElement,l&&(u<0&&0===s?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),c=!0,d=null):u===s&&(c=!0,d=r.route.hydrateFallbackElement||null)));let p=e.concat(o.slice(0,s+1)),f=()=>{let e;return e=n?h:c?d:r.route.Component?react.createElement(r.route.Component,null):r.route.element?r.route.element:t,react.createElement(RenderedRoute,{match:r,routeContext:{outlet:t,matches:p,isDataRoute:null!=i},children:e})};return i&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?react.createElement(RenderErrorBoundary,{location:i.location,revalidation:i.revalidation,component:h,error:n,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()}),null)}var DataRouterHook=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(DataRouterHook||{}),DataRouterStateHook=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(DataRouterStateHook||{});function getDataRouterConsoleError(t){return t+" must be used within a data router.  See https://reactrouter.com/routers/picking-a-router."}function useDataRouterContext(t){let e=react.useContext(DataRouterContext);return e||invariant(!1),e}function useDataRouterState(t){let e=react.useContext(DataRouterStateContext);return e||invariant(!1),e}function useRouteContext(t){let e=react.useContext(RouteContext);return e||invariant(!1),e}function useCurrentRouteId(t){let e=useRouteContext(t),i=e.matches[e.matches.length-1];return i.route.id||invariant(!1),i.route.id}function useRouteId(){return useCurrentRouteId(DataRouterStateHook.UseRouteId)}function dist_useNavigation(){return useDataRouterState(DataRouterStateHook.UseNavigation).navigation}function useRevalidator(){let t=useDataRouterContext(DataRouterHook.UseRevalidator),e=useDataRouterState(DataRouterStateHook.UseRevalidator);return React.useMemo((()=>({revalidate:t.router.revalidate,state:e.revalidation})),[t.router.revalidate,e.revalidation])}function dist_useMatches(){let{matches:t,loaderData:e}=useDataRouterState(DataRouterStateHook.UseMatches);return React.useMemo((()=>t.map((t=>UNSAFE_convertRouteMatchToUiMatch(t,e)))),[t,e])}function useLoaderData(){let t=useDataRouterState(DataRouterStateHook.UseLoaderData),e=useCurrentRouteId(DataRouterStateHook.UseLoaderData);if(!t.errors||null==t.errors[e])return t.loaderData[e];console.error("You cannot `useLoaderData` in an errorElement (routeId: "+e+")")}function useRouteLoaderData(t){return useDataRouterState(DataRouterStateHook.UseRouteLoaderData).loaderData[t]}function useActionData(){let t=useDataRouterState(DataRouterStateHook.UseActionData),e=useCurrentRouteId(DataRouterStateHook.UseLoaderData);return t.actionData?t.actionData[e]:void 0}function useRouteError(){var t;let e=react.useContext(RouteErrorContext),i=useDataRouterState(DataRouterStateHook.UseRouteError),r=useCurrentRouteId(DataRouterStateHook.UseRouteError);return void 0!==e?e:null==(t=i.errors)?void 0:t[r]}function useAsyncValue(){let t=React.useContext(AwaitContext);return null==t?void 0:t._data}function useAsyncError(){let t=React.useContext(AwaitContext);return null==t?void 0:t._error}let blockerId=0;function dist_useBlocker(t){let{router:e,basename:i}=useDataRouterContext(DataRouterHook.UseBlocker),r=useDataRouterState(DataRouterStateHook.UseBlocker),[s,n]=React.useState(""),o=React.useCallback((e=>{if("function"!==typeof t)return!!t;if("/"===i)return t(e);let{currentLocation:r,nextLocation:s,historyAction:n}=e;return t({currentLocation:dist_extends({},r,{pathname:stripBasename(r.pathname,i)||r.pathname}),nextLocation:dist_extends({},s,{pathname:stripBasename(s.pathname,i)||s.pathname}),historyAction:n})}),[i,t]);return React.useEffect((()=>{let t=String(++blockerId);return n(t),()=>e.deleteBlocker(t)}),[e]),React.useEffect((()=>{""!==s&&e.getBlocker(s,o)}),[e,s,o]),s&&r.blockers.has(s)?r.blockers.get(s):IDLE_BLOCKER}function useNavigateStable(){let{router:t}=useDataRouterContext(DataRouterHook.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook.UseNavigateStable),i=react.useRef(!1);return useIsomorphicLayoutEffect((()=>{i.current=!0})),react.useCallback((function(r,s){void 0===s&&(s={}),i.current&&("number"===typeof r?t.navigate(r):t.navigate(r,dist_extends({fromRouteId:e},s)))}),[t,e])}const alreadyWarned={};function warningOnce(t,e,i){e||alreadyWarned[t]||(alreadyWarned[t]=!0)}const START_TRANSITION="startTransition",startTransitionImpl=react_namespaceObject[START_TRANSITION];function RouterProvider(t){let{fallbackElement:e,router:i,future:r}=t,[s,n]=React.useState(i.state),{v7_startTransition:o}=r||{},a=React.useCallback((t=>{o&&startTransitionImpl?startTransitionImpl((()=>n(t))):n(t)}),[n,o]);React.useLayoutEffect((()=>i.subscribe(a)),[i,a]),React.useEffect((()=>{}),[]);let l=React.useMemo((()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:t=>i.navigate(t),push:(t,e,r)=>i.navigate(t,{state:e,preventScrollReset:null==r?void 0:r.preventScrollReset}),replace:(t,e,r)=>i.navigate(t,{replace:!0,state:e,preventScrollReset:null==r?void 0:r.preventScrollReset})})),[i]),u=i.basename||"/",c=React.useMemo((()=>({router:i,navigator:l,static:!1,basename:u})),[i,l,u]);return React.createElement(React.Fragment,null,React.createElement(DataRouterContext.Provider,{value:c},React.createElement(DataRouterStateContext.Provider,{value:s},React.createElement(dist_Router,{basename:u,location:s.location,navigationType:s.historyAction,navigator:l,future:{v7_relativeSplatPath:i.future.v7_relativeSplatPath}},s.initialized||i.future.v7_partialHydration?React.createElement(DataRoutes,{routes:i.routes,future:i.future,state:s}):e))),null)}function DataRoutes(t){let{routes:e,future:i,state:r}=t;return useRoutesImpl(e,void 0,r,i)}function MemoryRouter(t){let{basename:e,children:i,initialEntries:r,initialIndex:s,future:n}=t,o=React.useRef();null==o.current&&(o.current=createMemoryHistory({initialEntries:r,initialIndex:s,v5Compat:!0}));let a=o.current,[l,u]=React.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},h=React.useCallback((t=>{c&&startTransitionImpl?startTransitionImpl((()=>u(t))):u(t)}),[u,c]);return React.useLayoutEffect((()=>a.listen(h)),[a,h]),React.createElement(dist_Router,{basename:e,children:i,location:l.location,navigationType:l.action,navigator:a,future:n})}function Navigate(t){let{to:e,replace:i,state:r,relative:s}=t;useInRouterContext()||UNSAFE_invariant(!1);let{future:n,static:o}=React.useContext(NavigationContext),{matches:a}=React.useContext(RouteContext),{pathname:l}=dist_useLocation(),u=dist_useNavigate(),c=resolveTo(e,UNSAFE_getResolveToMatches(a,n.v7_relativeSplatPath),l,"path"===s),h=JSON.stringify(c);return React.useEffect((()=>u(JSON.parse(h),{replace:i,state:r,relative:s})),[u,h,s,i,r]),null}function Outlet(t){return useOutlet(t.context)}function Route(t){invariant(!1)}function dist_Router(t){let{basename:e="/",children:i=null,location:r,navigationType:s=Action.Pop,navigator:n,static:o=!1,future:a}=t;useInRouterContext()&&invariant(!1);let l=e.replace(/^\/*/,"/"),u=react.useMemo((()=>({basename:l,navigator:n,static:o,future:dist_extends({v7_relativeSplatPath:!1},a)})),[l,a,n,o]);"string"===typeof r&&(r=parsePath(r));let{pathname:c="/",search:h="",hash:d="",state:p=null,key:f="default"}=r,_=react.useMemo((()=>{let t=router_stripBasename(c,l);return null==t?null:{location:{pathname:t,search:h,hash:d,state:p,key:f},navigationType:s}}),[l,c,h,d,p,f,s]);return null==_?null:react.createElement(NavigationContext.Provider,{value:u},react.createElement(LocationContext.Provider,{children:i,value:_}))}function Routes(t){let{children:e,location:i}=t;return useRoutes(createRoutesFromChildren(e),i)}function Await(t){let{children:e,errorElement:i,resolve:r}=t;return React.createElement(AwaitErrorBoundary,{resolve:r,errorElement:i},React.createElement(ResolveAwait,null,e))}var AwaitRenderStatus=function(t){return t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error",t}(AwaitRenderStatus||{});const neverSettledPromise=new Promise((()=>{}));class AwaitErrorBoundary extends react.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,e){console.error("<Await> caught the following error during render",t,e)}render(){let{children:t,errorElement:e,resolve:i}=this.props,r=null,s=AwaitRenderStatus.pending;if(i instanceof Promise)if(this.state.error){s=AwaitRenderStatus.error;let t=this.state.error;r=Promise.reject().catch((()=>{})),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_error",{get:()=>t})}else i._tracked?(r=i,s="_error"in r?AwaitRenderStatus.error:"_data"in r?AwaitRenderStatus.success:AwaitRenderStatus.pending):(s=AwaitRenderStatus.pending,Object.defineProperty(i,"_tracked",{get:()=>!0}),r=i.then((t=>Object.defineProperty(i,"_data",{get:()=>t})),(t=>Object.defineProperty(i,"_error",{get:()=>t}))));else s=AwaitRenderStatus.success,r=Promise.resolve(),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_data",{get:()=>i});if(s===AwaitRenderStatus.error&&r._error instanceof AbortedDeferredError)throw neverSettledPromise;if(s===AwaitRenderStatus.error&&!e)throw r._error;if(s===AwaitRenderStatus.error)return react.createElement(AwaitContext.Provider,{value:r,children:e});if(s===AwaitRenderStatus.success)return react.createElement(AwaitContext.Provider,{value:r,children:t});throw r}}function ResolveAwait(t){let{children:e}=t,i=useAsyncValue(),r="function"===typeof e?e(i):e;return React.createElement(React.Fragment,null,r)}function createRoutesFromChildren(t,e){void 0===e&&(e=[]);let i=[];return react.Children.forEach(t,((t,r)=>{if(!react.isValidElement(t))return;let s=[...e,r];if(t.type===react.Fragment)return void i.push.apply(i,createRoutesFromChildren(t.props.children,s));t.type!==Route&&invariant(!1),t.props.index&&t.props.children&&invariant(!1);let n={id:t.props.id||s.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(n.children=createRoutesFromChildren(t.props.children,s)),i.push(n)})),i}function renderMatches(t){return _renderMatches(t)}function mapRouteProperties(t){let e={hasErrorBoundary:null!=t.ErrorBoundary||null!=t.errorElement};return t.Component&&Object.assign(e,{element:React.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:React.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:React.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}function createMemoryRouter(t,e){return createRouter({basename:null==e?void 0:e.basename,future:dist_extends({},null==e?void 0:e.future,{v7_prependBasename:!0}),history:createMemoryHistory({initialEntries:null==e?void 0:e.initialEntries,initialIndex:null==e?void 0:e.initialIndex}),hydrationData:null==e?void 0:e.hydrationData,routes:t,mapRouteProperties:mapRouteProperties,unstable_dataStrategy:null==e?void 0:e.unstable_dataStrategy}).initialize()}function react_router_dom_dist_extends(){return react_router_dom_dist_extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},react_router_dom_dist_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(t,e){if(null==t)return{};var i,r,s={},n=Object.keys(t);for(r=0;r<n.length;r++)i=n[r],e.indexOf(i)>=0||(s[i]=t[i]);return s}const defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(t){return null!=t&&"string"===typeof t.tagName}function isButtonElement(t){return isHtmlElement(t)&&"button"===t.tagName.toLowerCase()}function isFormElement(t){return isHtmlElement(t)&&"form"===t.tagName.toLowerCase()}function isInputElement(t){return isHtmlElement(t)&&"input"===t.tagName.toLowerCase()}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,e){return 0===t.button&&(!e||"_self"===e)&&!isModifiedEvent(t)}function createSearchParams(t){return void 0===t&&(t=""),new URLSearchParams("string"===typeof t||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce(((e,i)=>{let r=t[i];return e.concat(Array.isArray(r)?r.map((t=>[i,t])):[[i,r]])}),[]))}function getSearchParamsForLocation(t,e){let i=createSearchParams(t);return e&&e.forEach(((t,r)=>{i.has(r)||e.getAll(r).forEach((t=>{i.append(r,t)}))})),i}let _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(null===_formDataSupportsSubmitter)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch(t){_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}const supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(t){return null==t||supportedFormEncTypes.has(t)?t:null}function getFormSubmissionInfo(t,e){let i,r,s,n,o;if(isFormElement(t)){let o=t.getAttribute("action");r=o?stripBasename(o,e):null,i=t.getAttribute("method")||defaultMethod,s=getFormEncType(t.getAttribute("enctype"))||defaultEncType,n=new FormData(t)}else if(isButtonElement(t)||isInputElement(t)&&("submit"===t.type||"image"===t.type)){let o=t.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=t.getAttribute("formaction")||o.getAttribute("action");if(r=a?stripBasename(a,e):null,i=t.getAttribute("formmethod")||o.getAttribute("method")||defaultMethod,s=getFormEncType(t.getAttribute("formenctype"))||getFormEncType(o.getAttribute("enctype"))||defaultEncType,n=new FormData(o,t),!isFormDataSubmitterSupported()){let{name:e,type:i,value:r}=t;if("image"===i){let t=e?e+".":"";n.append(t+"x","0"),n.append(t+"y","0")}else e&&n.append(e,r)}}else{if(isHtmlElement(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=defaultMethod,r=null,s=defaultEncType,o=t}return n&&"text/plain"===s&&(o=n,n=void 0),{action:r,method:i.toLowerCase(),encType:s,formData:n,body:o}}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],_excluded2=null,_excluded3=null,REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch(e){}function createBrowserRouter(t,e){return createRouter({basename:null==e?void 0:e.basename,future:react_router_dom_dist_extends({},null==e?void 0:e.future,{v7_prependBasename:!0}),history:createBrowserHistory({window:null==e?void 0:e.window}),hydrationData:(null==e?void 0:e.hydrationData)||parseHydrationData(),routes:t,mapRouteProperties:UNSAFE_mapRouteProperties,unstable_dataStrategy:null==e?void 0:e.unstable_dataStrategy,window:null==e?void 0:e.window}).initialize()}function createHashRouter(t,e){return createRouter({basename:null==e?void 0:e.basename,future:react_router_dom_dist_extends({},null==e?void 0:e.future,{v7_prependBasename:!0}),history:createHashHistory({window:null==e?void 0:e.window}),hydrationData:(null==e?void 0:e.hydrationData)||parseHydrationData(),routes:t,mapRouteProperties:UNSAFE_mapRouteProperties,unstable_dataStrategy:null==e?void 0:e.unstable_dataStrategy,window:null==e?void 0:e.window}).initialize()}function parseHydrationData(){var t;let e=null==(t=window)?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=react_router_dom_dist_extends({},e,{errors:deserializeErrors(e.errors)})),e}function deserializeErrors(t){if(!t)return null;let i=Object.entries(t),r={};for(let[s,n]of i)if(n&&"RouteErrorResponse"===n.__type)r[s]=new UNSAFE_ErrorResponseImpl(n.status,n.statusText,n.data,!0===n.internal);else if(n&&"Error"===n.__type){if(n.__subType){let t=window[n.__subType];if("function"===typeof t)try{let e=new t(n.message);e.stack="",r[s]=e}catch(e){}}if(null==r[s]){let t=new Error(n.message);t.stack="",r[s]=t}}else r[s]=n;return r}const ViewTransitionContext=react.createContext({isTransitioning:!1});const FetchersContext=react.createContext(new Map);const dist_START_TRANSITION="startTransition",dist_startTransitionImpl=react_namespaceObject[dist_START_TRANSITION],FLUSH_SYNC="flushSync",flushSyncImpl=react_dom_namespaceObject[FLUSH_SYNC],USE_ID="useId",useIdImpl=react_namespaceObject[USE_ID];function startTransitionSafe(t){dist_startTransitionImpl?dist_startTransitionImpl(t):t()}function flushSyncSafe(t){flushSyncImpl?flushSyncImpl(t):t()}class Deferred{constructor(){this.status="pending",this.promise=new Promise(((t,e)=>{this.resolve=e=>{"pending"===this.status&&(this.status="resolved",t(e))},this.reject=t=>{"pending"===this.status&&(this.status="rejected",e(t))}}))}}function dist_RouterProvider(t){let{fallbackElement:e,router:i,future:r}=t,[s,n]=React.useState(i.state),[o,a]=React.useState(),[l,u]=React.useState({isTransitioning:!1}),[c,h]=React.useState(),[d,p]=React.useState(),[f,_]=React.useState(),m=React.useRef(new Map),{v7_startTransition:g}=r||{},y=React.useCallback((t=>{g?startTransitionSafe(t):t()}),[g]),v=React.useCallback(((t,e)=>{let{deletedFetchers:r,unstable_flushSync:s,unstable_viewTransitionOpts:o}=e;r.forEach((t=>m.current.delete(t))),t.fetchers.forEach(((t,e)=>{void 0!==t.data&&m.current.set(e,t.data)}));let l=null==i.window||null==i.window.document||"function"!==typeof i.window.document.startViewTransition;if(o&&!l){if(s){flushSyncSafe((()=>{d&&(c&&c.resolve(),d.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:o.currentLocation,nextLocation:o.nextLocation})}));let e=i.window.document.startViewTransition((()=>{flushSyncSafe((()=>n(t)))}));return e.finished.finally((()=>{flushSyncSafe((()=>{h(void 0),p(void 0),a(void 0),u({isTransitioning:!1})}))})),void flushSyncSafe((()=>p(e)))}d?(c&&c.resolve(),d.skipTransition(),_({state:t,currentLocation:o.currentLocation,nextLocation:o.nextLocation})):(a(t),u({isTransitioning:!0,flushSync:!1,currentLocation:o.currentLocation,nextLocation:o.nextLocation}))}else s?flushSyncSafe((()=>n(t))):y((()=>n(t)))}),[i.window,d,c,m,y]);React.useLayoutEffect((()=>i.subscribe(v)),[i,v]),React.useEffect((()=>{l.isTransitioning&&!l.flushSync&&h(new Deferred)}),[l]),React.useEffect((()=>{if(c&&o&&i.window){let t=o,e=c.promise,r=i.window.document.startViewTransition((async()=>{y((()=>n(t))),await e}));r.finished.finally((()=>{h(void 0),p(void 0),a(void 0),u({isTransitioning:!1})})),p(r)}}),[y,o,c,i.window]),React.useEffect((()=>{c&&o&&s.location.key===o.location.key&&c.resolve()}),[c,d,s.location,o]),React.useEffect((()=>{!l.isTransitioning&&f&&(a(f.state),u({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}),_(void 0))}),[l.isTransitioning,f]),React.useEffect((()=>{}),[]);let A=React.useMemo((()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:t=>i.navigate(t),push:(t,e,r)=>i.navigate(t,{state:e,preventScrollReset:null==r?void 0:r.preventScrollReset}),replace:(t,e,r)=>i.navigate(t,{replace:!0,state:e,preventScrollReset:null==r?void 0:r.preventScrollReset})})),[i]),b=i.basename||"/",C=React.useMemo((()=>({router:i,navigator:A,static:!1,basename:b})),[i,A,b]);return React.createElement(React.Fragment,null,React.createElement(UNSAFE_DataRouterContext.Provider,{value:C},React.createElement(UNSAFE_DataRouterStateContext.Provider,{value:s},React.createElement(FetchersContext.Provider,{value:m.current},React.createElement(ViewTransitionContext.Provider,{value:l},React.createElement(Router,{basename:b,location:s.location,navigationType:s.historyAction,navigator:A,future:{v7_relativeSplatPath:i.future.v7_relativeSplatPath}},s.initialized||i.future.v7_partialHydration?React.createElement(dist_DataRoutes,{routes:i.routes,future:i.future,state:s}):e))))),null)}function dist_DataRoutes(t){let{routes:e,future:i,state:r}=t;return UNSAFE_useRoutesImpl(e,void 0,r,i)}function BrowserRouter(t){let{basename:e,children:i,future:r,window:s}=t,n=React.useRef();null==n.current&&(n.current=createBrowserHistory({window:s,v5Compat:!0}));let o=n.current,[a,l]=React.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=React.useCallback((t=>{u&&dist_startTransitionImpl?dist_startTransitionImpl((()=>l(t))):l(t)}),[l,u]);return React.useLayoutEffect((()=>o.listen(c)),[o,c]),React.createElement(Router,{basename:e,children:i,location:a.location,navigationType:a.action,navigator:o,future:r})}function HashRouter(t){let{basename:e,children:i,future:r,window:s}=t,n=react.useRef();null==n.current&&(n.current=router_createHashHistory({window:s,v5Compat:!0}));let o=n.current,[a,l]=react.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=react.useCallback((t=>{u&&dist_startTransitionImpl?dist_startTransitionImpl((()=>l(t))):l(t)}),[l,u]);return react.useLayoutEffect((()=>o.listen(c)),[o,c]),react.createElement(dist_Router,{basename:e,children:i,location:a.location,navigationType:a.action,navigator:o,future:r})}function HistoryRouter(t){let{basename:e,children:i,future:r,history:s}=t,[n,o]=React.useState({action:s.action,location:s.location}),{v7_startTransition:a}=r||{},l=React.useCallback((t=>{a&&dist_startTransitionImpl?dist_startTransitionImpl((()=>o(t))):o(t)}),[o,a]);return React.useLayoutEffect((()=>s.listen(l)),[s,l]),React.createElement(Router,{basename:e,children:i,location:n.location,navigationType:n.action,navigator:s,future:r})}const isBrowser="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,dist_ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=react.forwardRef((function(t,i){let r,{onClick:s,relative:n,reloadDocument:o,replace:a,state:l,target:u,to:c,preventScrollReset:h,unstable_viewTransition:d}=t,p=_objectWithoutPropertiesLoose(t,_excluded),{basename:f}=react.useContext(NavigationContext),_=!1;if("string"===typeof c&&dist_ABSOLUTE_URL_REGEX.test(c)&&(r=c,isBrowser))try{let t=new URL(window.location.href),e=c.startsWith("//")?new URL(t.protocol+c):new URL(c),i=router_stripBasename(e.pathname,f);e.origin===t.origin&&null!=i?c=i+e.search+e.hash:_=!0}catch(e){}let m=useHref(c,{relative:n}),g=useLinkClickHandler(c,{replace:a,state:l,target:u,preventScrollReset:h,relative:n,unstable_viewTransition:d});return react.createElement("a",react_router_dom_dist_extends({},p,{href:r||m,onClick:_||o?s:function(t){s&&s(t),t.defaultPrevented||g(t)},ref:i,target:u}))}));const NavLink=null;const Form=null;function ScrollRestoration(t){let{getKey:e,storageKey:i}=t;return useScrollRestoration({getKey:e,storageKey:i}),null}var dist_DataRouterHook,dist_DataRouterStateHook;function dist_getDataRouterConsoleError(t){return t+" must be used within a data router.  See https://reactrouter.com/routers/picking-a-router."}function dist_useDataRouterContext(t){let e=React.useContext(UNSAFE_DataRouterContext);return e||UNSAFE_invariant(!1),e}function dist_useDataRouterState(t){let e=React.useContext(UNSAFE_DataRouterStateContext);return e||UNSAFE_invariant(!1),e}function useLinkClickHandler(t,e){let{target:i,replace:r,state:s,preventScrollReset:n,relative:o,unstable_viewTransition:a}=void 0===e?{}:e,l=dist_useNavigate(),u=dist_useLocation(),c=dist_useResolvedPath(t,{relative:o});return react.useCallback((e=>{if(shouldProcessLinkClick(e,i)){e.preventDefault();let i=void 0!==r?r:router_createPath(u)===router_createPath(c);l(t,{replace:i,state:s,preventScrollReset:n,relative:o,unstable_viewTransition:a})}}),[u,l,c,r,s,i,t,n,o,a])}function useSearchParams(t){let e=React.useRef(createSearchParams(t)),i=React.useRef(!1),r=useLocation(),s=React.useMemo((()=>getSearchParamsForLocation(r.search,i.current?null:e.current)),[r.search]),n=useNavigate(),o=React.useCallback(((t,e)=>{const r=createSearchParams("function"===typeof t?t(s):t);i.current=!0,n("?"+r,e)}),[n,s]);return[s,o]}function validateClientSideSubmission(){if("undefined"===typeof document)throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dist_DataRouterHook||(dist_DataRouterHook={})),function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(dist_DataRouterStateHook||(dist_DataRouterStateHook={}));let fetcherId=0,getUniqueFetcherId=()=>"__"+String(++fetcherId)+"__";function useSubmit(){let{router:t}=dist_useDataRouterContext(dist_DataRouterHook.UseSubmit),{basename:e}=React.useContext(UNSAFE_NavigationContext),i=UNSAFE_useRouteId();return React.useCallback((function(r,s){void 0===s&&(s={}),validateClientSideSubmission();let{action:n,method:o,encType:a,formData:l,body:u}=getFormSubmissionInfo(r,e);if(!1===s.navigate){let e=s.fetcherKey||getUniqueFetcherId();t.fetch(e,i,s.action||n,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,unstable_flushSync:s.unstable_flushSync})}else t.navigate(s.action||n,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:i,unstable_flushSync:s.unstable_flushSync,unstable_viewTransition:s.unstable_viewTransition})}),[t,e,i])}function useFormAction(t,e){let{relative:i}=void 0===e?{}:e,{basename:r}=React.useContext(UNSAFE_NavigationContext),s=React.useContext(UNSAFE_RouteContext);s||UNSAFE_invariant(!1);let[n]=s.matches.slice(-1),o=react_router_dom_dist_extends({},useResolvedPath(t||".",{relative:i})),a=useLocation();if(null==t){o.search=a.search;let t=new URLSearchParams(o.search);t.has("index")&&""===t.get("index")&&(t.delete("index"),o.search=t.toString()?"?"+t.toString():"")}return t&&"."!==t||!n.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),"/"!==r&&(o.pathname="/"===o.pathname?r:joinPaths([r,o.pathname])),createPath(o)}function useFetcher(t){var e;let{key:i}=void 0===t?{}:t,{router:r}=dist_useDataRouterContext(dist_DataRouterHook.UseFetcher),s=dist_useDataRouterState(dist_DataRouterStateHook.UseFetcher),n=React.useContext(FetchersContext),o=React.useContext(UNSAFE_RouteContext),a=null==(e=o.matches[o.matches.length-1])?void 0:e.route.id;n||UNSAFE_invariant(!1),o||UNSAFE_invariant(!1),null==a&&UNSAFE_invariant(!1);let l=useIdImpl?useIdImpl():"",[u,c]=React.useState(i||l);i&&i!==u?c(i):u||c(getUniqueFetcherId()),React.useEffect((()=>(r.getFetcher(u),()=>{r.deleteFetcher(u)})),[r,u]);let h=React.useCallback(((t,e)=>{a||UNSAFE_invariant(!1),r.fetch(u,a,t,e)}),[u,a,r]),d=useSubmit(),p=React.useCallback(((t,e)=>{d(t,react_router_dom_dist_extends({},e,{navigate:!1,fetcherKey:u}))}),[u,d]),f=React.useMemo((()=>React.forwardRef(((t,e)=>React.createElement(Form,react_router_dom_dist_extends({},t,{navigate:!1,fetcherKey:u,ref:e}))))),[u]),_=s.fetchers.get(u)||IDLE_FETCHER,m=n.get(u);return React.useMemo((()=>react_router_dom_dist_extends({Form:f,submit:p,load:h},_,{data:m})),[f,p,h,_,m])}function useFetchers(){let t=dist_useDataRouterState(dist_DataRouterStateHook.UseFetchers);return Array.from(t.fetchers.entries()).map((t=>{let[e,i]=t;return react_router_dom_dist_extends({},i,{key:e})}))}const SCROLL_RESTORATION_STORAGE_KEY="react-router-scroll-positions";let savedScrollPositions={};function useScrollRestoration(t){let{getKey:i,storageKey:r}=void 0===t?{}:t,{router:s}=dist_useDataRouterContext(dist_DataRouterHook.UseScrollRestoration),{restoreScrollPosition:n,preventScrollReset:o}=dist_useDataRouterState(dist_DataRouterStateHook.UseScrollRestoration),{basename:a}=React.useContext(UNSAFE_NavigationContext),l=useLocation(),u=useMatches(),c=useNavigation();React.useEffect((()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"})),[]),usePageHide(React.useCallback((()=>{if("idle"===c.state){let t=(i?i(l,u):null)||l.key;savedScrollPositions[t]=window.scrollY}try{sessionStorage.setItem(r||SCROLL_RESTORATION_STORAGE_KEY,JSON.stringify(savedScrollPositions))}catch(t){}window.history.scrollRestoration="auto"}),[r,i,c.state,l,u])),"undefined"!==typeof document&&(React.useLayoutEffect((()=>{try{let t=sessionStorage.getItem(r||SCROLL_RESTORATION_STORAGE_KEY);t&&(savedScrollPositions=JSON.parse(t))}catch(e){}}),[r]),React.useLayoutEffect((()=>{let t=i&&"/"!==a?(t,e)=>i(react_router_dom_dist_extends({},t,{pathname:stripBasename(t.pathname,a)||t.pathname}),e):i,e=null==s?void 0:s.enableScrollRestoration(savedScrollPositions,(()=>window.scrollY),t);return()=>e&&e()}),[s,a,i]),React.useLayoutEffect((()=>{if(!1!==n)if("number"!==typeof n){if(l.hash){let t=document.getElementById(decodeURIComponent(l.hash.slice(1)));if(t)return void t.scrollIntoView()}!0!==o&&window.scrollTo(0,0)}else window.scrollTo(0,n)}),[l,n,o]))}function useBeforeUnload(t,e){let{capture:i}=e||{};React.useEffect((()=>{let e=null!=i?{capture:i}:void 0;return window.addEventListener("beforeunload",t,e),()=>{window.removeEventListener("beforeunload",t,e)}}),[t,i])}function usePageHide(t,e){let{capture:i}=e||{};React.useEffect((()=>{let e=null!=i?{capture:i}:void 0;return window.addEventListener("pagehide",t,e),()=>{window.removeEventListener("pagehide",t,e)}}),[t,i])}function usePrompt(t){let{when:e,message:i}=t,r=useBlocker(e);React.useEffect((()=>{if("blocked"===r.state){window.confirm(i)?setTimeout(r.proceed,0):r.reset()}}),[r,i]),React.useEffect((()=>{"blocked"!==r.state||e||r.reset()}),[r,e])}function useViewTransitionState(t,e){void 0===e&&(e={});let i=React.useContext(ViewTransitionContext);null==i&&UNSAFE_invariant(!1);let{basename:r}=dist_useDataRouterContext(dist_DataRouterHook.useViewTransitionState),s=useResolvedPath(t,{relative:e.relative});if(!i.isTransitioning)return!1;let n=stripBasename(i.currentLocation.pathname,r)||i.currentLocation.pathname,o=stripBasename(i.nextLocation.pathname,r)||i.nextLocation.pathname;return null!=matchPath(s.pathname,o)||null!=matchPath(s.pathname,n)}const Hamburger_icon_namespaceObject=__webpack_require__.p+"static/media/Hamburger_icon.3844b76b45d0c0e3488f.png";var jsx_runtime=__webpack_require__(579);function Navbar(){const[t,e]=(0,react.useState)(!1),i=()=>{e(!t)};return(0,jsx_runtime.jsxs)("div",{className:Navbar_module.navbarContainer,children:[(0,jsx_runtime.jsxs)("div",{className:Navbar_module.navbar,children:[(0,jsx_runtime.jsx)("h1",{children:"Better Bike Calculator"}),(0,jsx_runtime.jsx)("img",{className:Navbar_module.menuIcon,src:Hamburger_icon_namespaceObject,alt:"menu",onClick:i})]}),(0,jsx_runtime.jsxs)("div",{className:"".concat(Navbar_module.menu," ").concat(t?Navbar_module.menuOpen:""),children:[(0,jsx_runtime.jsx)(Link,{className:Navbar_module.menuItem,to:"/",onClick:i,children:"Acceleration Calculator"}),(0,jsx_runtime.jsx)(Link,{className:Navbar_module.menuItem,to:"/time",onClick:i,children:"Time Calculator"})]})]})}const Footer_module={linkContainer:"Footer_linkContainer__WlsDI",footer:"Footer_footer__ihPCi",mainFooter:"Footer_mainFooter__1r5Rk",copyright:"Footer_copyright__11LZ4"},ContactForm_module={form:"ContactForm_form__VRgU8"};function ContactForm(){const[t,e]=useForm("mkgwnznw");return _jsxs("form",{onSubmit:e,className:styles.form,children:[_jsx("h3",{children:"Contact"}),_jsxs("label",{htmlFor:"email",children:["Email Address",_jsx("input",{id:"email",type:"email",name:"email"})]}),_jsx(ValidationError,{prefix:"Email",field:"email",errors:t.errors}),_jsxs("label",{htmlFor:"message",children:["Message",_jsx("textarea",{id:"message",name:"message"})]}),_jsx(ValidationError,{prefix:"Message",field:"message",errors:t.errors}),_jsx("button",{type:"submit",disabled:t.submitting,children:"Submit"}),t.succeeded&&_jsx("p",{children:"Thanks for your message!"})]})}var _path;function github_extends(){return github_extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},github_extends.apply(null,arguments)}function SvgGithub(t,e){let{title:i,titleId:r,...s}=t;return React.createElement("svg",github_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"19.88 21.05 51.47 50",ref:e,"aria-labelledby":r},s),i?React.createElement("title",{id:r},i):null,_path||(_path=React.createElement("path",{clipRule:"evenodd",d:"m45.6097 21.0479c-14.2184 0-25.7347 11.4704-25.7347 25.6323 0 11.3423 7.3666 20.9224 17.5961 24.3187 1.2867.2243 1.7693-.5447 1.7693-1.2176 0-.6087-.0322-2.6273-.0322-4.774-6.4658 1.1855-8.1386-1.57-8.6533-3.0118-.2895-.7369-1.5441-3.0118-2.6378-3.6205-.9007-.4807-2.1875-1.6661-.0322-1.6982 2.0266-.032 3.4742 1.8584 3.9567 2.6273 2.3162 3.8769 6.0155 2.7875 7.4953 2.1147.2251-1.6661.9007-2.7875 1.6406-3.4283-5.726-.6408-11.7093-2.8516-11.7093-12.656 0-2.7875.9972-5.0944 2.6378-6.8887-.2574-.6408-1.1581-3.2681.2573-6.7926 0 0 2.1553-.6728 7.0771 2.6274 2.0587-.5768 4.2462-.8651 6.4336-.8651 2.1875 0 4.3749.2883 6.4337.8651 4.9218-3.3323 7.0771-2.6274 7.0771-2.6274 1.4154 3.5245.5146 6.1518.2573 6.7926 1.6406 1.7943 2.6378 4.0691 2.6378 6.8887 0 9.8364-6.0155 12.0152-11.7414 12.656.9328.801 1.737 2.3389 1.737 4.742 0 3.4283-.0321 6.1838-.0321 7.0488 0 .6729.4825 1.4739 1.7692 1.2176 10.1652-3.3963 17.5318-13.0084 17.5318-24.3187 0-14.1619-11.5163-25.6323-25.7347-25.6323z",fill:"#fff",fillRule:"evenodd"})))}const ForwardRef=null,github=__webpack_require__.p+"static/media/github.6d1eab525e801c2364c7fe655dc589a5.svg";function Footer(){return(0,jsx_runtime.jsx)("div",{className:Footer_module.footer,children:(0,jsx_runtime.jsxs)("div",{className:Footer_module.mainFooter,children:[(0,jsx_runtime.jsxs)("div",{className:Footer_module.linkContainer,children:[(0,jsx_runtime.jsx)(Link,{className:Footer_module.menuItem,to:"/",children:"Acceleration to Top Speed"}),(0,jsx_runtime.jsx)(Link,{className:Footer_module.menuItem,to:"/time",children:"Time Calculator"})]}),(0,jsx_runtime.jsx)("a",{href:"https://github.com/M-D-Hoang/bike-calculator",target:"_blank",rel:"noreferrer ",children:(0,jsx_runtime.jsx)("img",{src:github,alt:"github"})})]})})}const App={};var jxg=__webpack_require__(533),env=__webpack_require__(415),constants=__webpack_require__(667),utils_type=__webpack_require__(514);jxg.A.XML={cleanWhitespace:function(t){for(var e=t.firstChild;utils_type.A.exists(e);)3!==e.nodeType||/\S/.test(e.nodeValue)?1===e.nodeType&&this.cleanWhitespace(e):t.removeChild(e),e=e.nextSibling},parse:function(t){var e,i;return i="function"===typeof DOMParser||"object"===typeof DOMParser?DOMParser:function(){this.parseFromString=function(t){var e;return"function"===typeof ActiveXObject&&(e=new ActiveXObject("MSXML.DomDocument")).loadXML(t),e}},e=(new i).parseFromString(t,"text/xml"),this.cleanWhitespace(e),e}};const xml=jxg.A.XML;var utils_event=__webpack_require__(512),expect=__webpack_require__(955),math=__webpack_require__(259);math.A.ProbFuncs={MAXNUM:17014118346046923e22,SQRTH:.7071067811865476,SQRT2:1.4142135623730951,MAXLOG:708.3964185322641,P:[2.461969814735305e-10,.5641895648310689,7.463210564422699,48.63719709856814,196.5208329560771,526.4451949954773,934.5285271719576,1027.5518868951572,557.5353353693994],Q:[13.228195115474499,86.70721408859897,354.9377788878199,975.7085017432055,1823.9091668790973,2246.3376081871097,1656.6630919416134,557.5353408177277],R:[.5641895835477551,1.275366707599781,5.019050422511805,6.160210979930536,7.4097426995044895,2.9788666537210022],S:[2.2605286322011726,9.396035249380015,12.048953980809666,17.08144507475659,9.608968090632859,3.369076451000815],T:[9.604973739870516,90.02601972038427,2232.005345946843,7003.325141128051,55592.30130103949],U:[33.56171416475031,521.3579497801527,4594.323829709801,22629.000061389095,49267.39426086359],M:128,MINV:.0078125,expx2:function(t,e){var i,r,s,n;return t=Math.abs(t),e<0&&(t=-t),i=(s=this.MINV*Math.floor(this.M*t+.5))*s,r=2*s*(n=t-s)+n*n,e<0&&(i=-i,r=-r),i+r>this.MAXLOG?1/0:i=Math.exp(i)*Math.exp(r)},polevl:function(t,e,i){var r,s;if(utils_type.A.exists(e.reduce))return e.reduce((function(e,i){return e*t+i}),0);for(s=0,r=0;s<=i;s++)r=r*t+e[s];return r},p1evl:function(t,e,i){var r,s;if(utils_type.A.exists(e.reduce))return e.reduce((function(e,i){return e*t+i}),1);for(s=0,r=1;s<i;s++)r=r*t+e[s];return r},ndtr:function(t){var e,i,r;return e=t*this.SQRTH,(r=Math.abs(e))<1?i=.5+.5*this.erf(e):(i=.5*this.erfce(r),r=this.expx2(t,-1),i*=Math.sqrt(r),e>0&&(i=1-i)),i},_underflow:function(t){return console.log("erfc","UNDERFLOW"),t<0?2:0},erfc:function(t){var e,i,r,s,n;return(r=t<0?-t:t)<1?1-this.erf(t):(n=-t*t)<-this.MAXLOG?this._underflow(t):(n=this.expx2(t,-1),r<8?(e=this.polevl(r,this.P,8),i=this.p1evl(r,this.Q,8)):(e=this.polevl(r,this.R,5),i=this.p1evl(r,this.S,6)),s=n*e/i,t<0&&(s=2-s),0===s?this._underflow(t):s)},erfce:function(t){var e,i;return t<8?(e=this.polevl(t,this.P,8),i=this.p1evl(t,this.Q,8)):(e=this.polevl(t,this.R,5),i=this.p1evl(t,this.S,6)),e/i},erf:function(t){var e;return Math.abs(t)>1?1-this.erfc(t):(e=t*t,t*this.polevl(e,this.T,4)/this.p1evl(e,this.U,5))},s2pi:2.5066282746310007,P0:[-59.96335010141079,98.00107541859997,-56.67628574690703,13.931260938727968,-1.2391658386738125],Q0:[1.9544885833814176,4.676279128988815,86.36024213908905,-225.46268785411937,200.26021238006066,-82.03722561683334,15.90562251262117,-1.1833162112133],P1:[4.0554489230596245,31.525109459989388,57.16281922464213,44.08050738932008,14.684956192885803,2.1866330685079025,-.1402560791713545,-.03504246268278482,-.0008574567851546854],Q1:[15.779988325646675,45.39076351288792,41.3172038254672,15.04253856929075,2.504649462083094,-.14218292285478779,-.03808064076915783,-.0009332594808954574],P2:[3.2377489177694603,6.915228890689842,3.9388102529247444,1.3330346081580755,.20148538954917908,.012371663481782003,.00030158155350823543,26580697468673755e-22,6.239745391849833e-9],Q2:[6.02427039364742,3.6798356385616087,1.3770209948908132,.21623699359449663,.013420400608854318,.00032801446468212774,28924786474538068e-22,6.790194080099813e-9],ndtri:function(t){var e,i,r,s,n;return t<=0?-1/0:t>=1?1/0:(n=1,(i=t)>.8646647167633873&&(i=1-i,n=0),i>.1353352832366127?(e=(i-=.5)+i*((s=i*i)*this.polevl(s,this.P0,4)/this.p1evl(s,this.Q0,8)),e*=this.s2pi):(r=1/(e=Math.sqrt(-2*Math.log(i))),e=e-Math.log(e)/e-(e<8?r*this.polevl(r,this.P1,8)/this.p1evl(r,this.Q1,8):r*this.polevl(r,this.P2,8)/this.p1evl(r,this.Q2,8)),0!==n&&(e=-e),e))},erfi:function(t){return this.ndtri(.5*(t+1))*this.SQRTH}};const probfuncs=math.A.ProbFuncs;var ia=__webpack_require__(315);math.A.Extrapolate={upper:15,infty:1e4,wynnEps:function(t,e,i){var r,s,n,o,a;if(i[e]=t,0===e)a=t;else{for(n=0,r=e;r>0;r--)s=n,n=i[r-1],o=i[r]-n,Math.abs(o)<=1e-15?i[r-1]=1e20:i[r-1]=1*s+1/o;a=i[e%2]}return a},aitken:function(t,e,i){var r,s,n,o,a,l;if(i[e]=t,e<2)r=t;else{for(o=e/2,a=1;a<=o;a++)s=i[(l=e-2*a)+2]-2*i[l+1]+i[l],Math.abs(s)<1e-15?i[l]=1e20:(n=i[l]-i[l+1],i[l]-=n*n/s);r=i[e%2]}return r},brezinski:function(t,e,i){var r,s,n,o,a,l,u,c;if(i[e]=t,e<3)r=t;else{for(l=e/3,c=e,u=1;u<=l;u++)n=i[(c-=3)+1]-i[c],o=i[c+2]-i[c+1],s=(a=i[c+3]-i[c+2])*(o-n)-n*(a-o),Math.abs(s)<1e-15?i[c]=1e20:i[c]=i[c+1]-n*o*(a-o)/s;r=i[e%3]}return r},iteration:function(t,e,i,r,s){var n,o,a,l,u=NaN,c=[],h="finite",d=e;for(s=s||0,n=1;n<=this.upper;n++){if(o=i(t+(d=0===s?e/(n+1):.5*d),!0),a=this[r](o,n-1,c),isNaN(a)){h="NaN";break}if(0!==o&&a/o>this.infty){u=a,h="infinite";break}if(l=a-u,Math.abs(l)<1e-7)break;u=a}return[u,h,1-(n-1)/this.upper]},levin:function(t,e,i,r,s,n){var o,a,l,u;if(u=1/(r+e),s[e]=t/i,n[e]=1/i,e>0&&(s[e-1]=s[e]-s[e-1],n[e-1]=n[e]-n[e-1],e>1))for(l=(r+e-1)*u,o=2;o<=e;o++)a=(r+e-o)*Math.pow(l,o-2)*u,s[e-o]=s[e-o+1]-a*s[e-o],n[e-o]=n[e-o+1]-a*n[e-o],u*=l;return Math.abs(n[0])<1e-15?1e20:s[0]/n[0]},iteration_levin:function(t,e,i,r){var s,n,o,a,l,u,c,h=NaN,d=[],p=[],f="finite",_=e;for(r=r||0,a=i(t+e,!0),s=1;s<=this.upper;s++){if(l=(n=i(t+(_=0===r?e/(s+1):.5*_),!0))-a,c="u"===(Math.abs(l)<1?"u":"t")?(1+s)*l:l,a=n,u=(o=this.levin(n,s-1,c,1,d,p))-h,isNaN(o)){f="NaN";break}if(0!==n&&o/n>this.infty){h=o,f="infinite";break}if(Math.abs(u)<1e-7)break;h=o}return[h,f,1-(s-1)/this.upper]},limit:function(t,e,i){return this.iteration_levin(t,e,i,0)}};const extrapolate=math.A.Extrapolate;var geometry=__webpack_require__(245);math.A.Quadtree=function(t,e,i){e=e||{capacity:10,pointType:"coords"},this.config={},this.config.capacity=e.capacity||10,this.config.pointType=e.pointType||"coords",this.points=[],this.xlb=t[0],this.xub=t[2],this.ylb=t[3],this.yub=t[1],this.parent=i||null,this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null},utils_type.A.extend(math.A.Quadtree.prototype,{contains:function(t,e){return this.xlb<t&&t<=this.xub&&this.ylb<e&&e<=this.yub},insert:function(t){switch(this.config.pointType){case"coords":if(!this.contains(t.usrCoords[1],t.usrCoords[2]))return!1;break;case"object":if(!this.contains(t.x,t.y))return!1}return this.points.length<this.config.capacity&&null===this.northWest?(this.points.push(t),!0):(null===this.northWest&&this.subdivide(),!!this.northWest.insert(t)||(!!this.northEast.insert(t)||(!!this.southEast.insert(t)||!!this.southWest.insert(t))))},subdivide:function(){var t=this.xlb+.5*(this.xub-this.xlb),e=this.ylb+.5*(this.yub-this.ylb);this.northWest=new math.A.Quadtree([this.xlb,this.yub,t,e],this.config,this),this.northEast=new math.A.Quadtree([t,this.yub,this.xub,e],this.config,this),this.southEast=new math.A.Quadtree([this.xlb,e,t,this.ylb],this.config,this),this.southWest=new math.A.Quadtree([t,e,this.xub,this.ylb],this.config,this)},_query:function(t,e){var i;if(this.contains(t,e)){if(null===this.northWest)return this;if(i=this.northWest._query(t,e))return i;if(i=this.northEast._query(t,e))return i;if(i=this.southEast._query(t,e))return i;if(i=this.southWest._query(t,e))return i}return!1},query:function(t,e){var i,r;return utils_type.A.exists(e)?(i=t,r=e):(i=t.usrCoords[1],r=t.usrCoords[2]),this._query(i,r)},hasPoint:function(t,e,i){var r,s,n;if(this.contains(t,e)){switch(n=this.points.length,this.config.pointType){case"coords":for(s=0;s<n;s++)if(geometry.A.distance([t,e],this.points[s].usrCoords.slice(1),2)<i)return!0;break;case"object":for(s=0;s<n;s++)if(geometry.A.distance([t,e],[this.points[s].x,this.points[s].y],2)<i)return!0}if(null===this.northWest)return!1;if(r=this.northWest.hasPoint(t,e,i))return r;if(r=this.northEast.hasPoint(t,e,i))return r;if(r=this.southEast.hasPoint(t,e,i))return r;if(r=this.southWest.hasPoint(t,e,i))return r}return!1},getAllPoints:function(){var t=[];return this.getAllPointsRecursive(t),t},getAllPointsRecursive(t){Array.prototype.push.apply(t,this.points.slice()),null!==this.northWest&&(this.northWest.getAllPointsRecursive(t),this.northEast.getAllPointsRecursive(t),this.southEast.getAllPointsRecursive(t),this.southWest.getAllPointsRecursive(t))}});const qdt=math.A.Quadtree;math.A.BoxQuadtree=function(t,e,i){var r,s,n,o;t--,this.depth=t,this.capacity=e,this.items=[],this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null,this.bbox=null,this.cx=null,this.cy=null,i&&(r=i[0],s=i[1],n=i[2],o=i[3],this.cx=.5*(r+n),this.cy=.5*(s+o),this.bbox=[r,s,n,o])},utils_type.A.extend(math.A.BoxQuadtree.prototype,{insert:function(t){var e,i,r,s,n,o,a,l,u,c,h,d=[],p=[],f=[],_=[];if(null===this.bbox){for(i=t.length,r=o=1/0,n=s=-1/0,e=0;e<t.length;e++)r=(a=t[e]).xlb<r?a.xlb:r,s=a.yub>s?a.yub:s,n=a.xub>n?a.xub:n,o=a.ylb<o?a.ylb:o;this.cx=.5*(r+n),this.cy=.5*(s+o),this.bbox=[r,s,n,o]}else r=this.bbox[0],s=this.bbox[1],n=this.bbox[2],o=this.bbox[3];if(0===this.depth||this.items.length+t.length<this.capacity)return this.items=this.items.concat(t),this;for(i=t.length,e=0;e<i;e++)l=(a=t[e]).xlb<=this.cx&&a.yub>this.cy,c=a.xlb<=this.cx&&a.ylb<=this.cy,u=a.xub>this.cx&&a.yub>this.cy,h=a.xub>this.cx&&a.ylb<=this.cy,l&&u&&h&&c?this.items.push(a):(l&&d.push(a),c&&f.push(a),u&&p.push(a),h&&_.push(a));return this.subdivide(d,f,p,_,r,s,n,o),this},insertItem:function(t){var e,i,r,s,n,o,a,l,u=[],c=[],h=[],d=[];return null===this.bbox?(e=s=1/0,r=i=-1/0,e=t.xlb<e?t.xlb:e,i=t.yub>i?t.yub:i,r=t.xub>r?t.xub:r,s=t.ylb<s?t.ylb:s,this.cx=.5*(e+r),this.cy=.5*(i+s),this.bbox=[e,i,r,s]):(e=this.bbox[0],i=this.bbox[1],r=this.bbox[2],s=this.bbox[3]),0===this.depth||this.items.length+1<this.capacity?(this.items.push(t),this):(n=t.xlb<=this.cx&&t.yub>this.cy,a=t.xlb<=this.cx&&t.ylb<=this.cy,o=t.xub>this.cx&&t.yub>this.cy,l=t.xub>this.cx&&t.ylb<=this.cy,n&&o&&l&&a?this.items.push(t):(n&&u.push(t),a&&h.push(t),o&&c.push(t),l&&d.push(t)),this.subdivide(u,h,c,d,e,i,r,s),this)},subdivide:function(t,e,i,r,s,n,o,a){return t.length>0&&(null===this.northWest&&(this.northWest=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[s,n,this.cx,this.cy])),this.northWest.insert(t)),e.length>0&&(null===this.southWest&&(this.southWest=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[s,this.cy,this.cx,a])),this.southWest.insert(e)),i.length>0&&(null===this.northEast&&(this.northEast=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[this.cx,n,o,this.cy])),this.northEast.insert(i)),r.length>0&&(null===this.southEast&&(this.southEast=new JXG.Math.BoxQuadtree(this.depth,this.capacity,[this.cx,this.cy,o,a])),this.southEast.insert(r)),this},find:function(t){var e,i,r,s=[];for(i=this.items.length,e=0;e<i;e++)r=this.items[e],t[2]>=r.xlb&&t[0]<=r.xub&&t[3]<=r.yub&&t[1]>=r.ylb&&s.push(this.items[e]);return null!==this.northWest&&t[0]<=this.cx&t[1]>=this.cy&&utils_type.A.concat(s,this.northWest.find(t)),null!==this.southWest&&t[0]<=this.cx&t[3]<=this.cy&&utils_type.A.concat(s,this.southWest.find(t)),null!==this.northEast&&t[2]>=this.cx&t[1]>=this.cy&&utils_type.A.concat(s,this.northEast.find(t)),null!==this.southEast&&t[2]>=this.cx&t[3]<=this.cy&&utils_type.A.concat(s,this.southEast.find(t)),s},analyzeTree:function(){var t,e={number_items:this.items.length,depth:1};return null!==this.northWest&&(t=this.northWest.analyzeTree(),e.number_items+=t.number_items,e.depth=Math.max(e.depth,1+t.depth)),null!==this.southWest&&(t=this.southWest.analyzeTree(),e.number_items+=t.number_items,e.depth=Math.max(e.depth,1+t.depth)),null!==this.northEast&&(t=this.northEast.analyzeTree(),e.number_items+=t.number_items,e.depth=Math.max(e.depth,1+t.depth)),null!==this.southEast&&(t=this.southEast.analyzeTree(),e.number_items+=t.number_items,e.depth=Math.max(e.depth,1+t.depth)),e},plot:function(){var t,e=[],i=[];return e.push(this.bbox[0]),i.push(this.bbox[3]),e.push(this.bbox[2]),i.push(this.bbox[3]),e.push(this.bbox[2]),i.push(this.bbox[1]),e.push(this.bbox[0]),i.push(this.bbox[1]),e.push(this.bbox[0]),i.push(this.bbox[3]),e.push(NaN),i.push(NaN),null!==this.northWest&&(t=this.northWest.plot(),utils_type.A.concat(e,t[0]),utils_type.A.concat(i,t[1])),null!==this.northEast&&(t=this.northEast.plot(),utils_type.A.concat(e,t[0]),utils_type.A.concat(i,t[1])),null!==this.southEast&&(t=this.southEast.plot(),utils_type.A.concat(e,t[0]),utils_type.A.concat(i,t[1])),null!==this.southWest&&(t=this.southWest.plot(),utils_type.A.concat(e,t[0]),utils_type.A.concat(i,t[1])),[e,i]}});const bqdt=math.A.BoxQuadtree;var numerics=__webpack_require__(985);jxg.A.Math.Nlp={arr:function(t){return new Float64Array(t)},arr2:function(t,e){for(var i=0,r=new Array(t);i<t;)r[i]=this.arr(e),i++;return r},arraycopy:function(t,e,i,r,s){for(var n=0;n<s;)i[n+r]=t[n+e],n++},lastNumberOfEvaluations:0,GetLastNumberOfEvaluations:function(){return this.lastNumberOfEvaluations},Normal:0,MaxIterationsReached:1,DivergingRoundingErrors:2,FindMinimum:function(t,e,i,r,s,n,o,a,l){var u,c,h=i+2,d=this.arr(e+1),p=this;return this.lastNumberOfEvaluations=0,l&&console.log("Experimental feature 'testForRoundingErrors' is activated."),d[0]=0,this.arraycopy(r,0,d,1,e),c=function(e,i,r,s){var n,o,a=p.arr(e);return p.lastNumberOfEvaluations=p.lastNumberOfEvaluations+1,p.arraycopy(r,1,a,0,e),n=p.arr(i),o=t(e,i,a,n),p.arraycopy(n,0,s,1,i),o},u=this.cobylb(c,e,i,h,d,s,n,o,a,l),this.arraycopy(d,1,r,0,e),u},cobylb:function(t,e,i,r,s,n,o,a,l,u){var c,h,d,p,f,_,m,g,y,v,A,b,C,x,P,E,w,S,O,M,T,j,N,R,k,D,L,I,B,F=-1,Y=0,U=0,z=e+1,X=i+1,J=n,H=0,G=!1,W=!1,V=0,q=0,$=0,K=this.arr(1+r),Q=this.arr2(1+e,1+z),Z=this.arr2(1+e,1+e),tt=this.arr2(1+r,1+z),et=this.arr2(1+e,1+X),it=this.arr(1+e),rt=this.arr(1+e),st=this.arr(1+e),nt=this.arr(1+e),ot=this.arr(1+e);for(a>=2&&console.log("The initial value of RHO is "+J+" and PARMU is set to zero."),g=0,_=1/J,h=1;h<=e;++h)Q[h][z]=s[h],Q[h][h]=J,Z[h][h]=_;y=z,v=!1;t:for(;;){if(g>=l&&g>0){F=this.MaxIterationsReached;break t}for(++g,Y=t(e,i,s,K),U=0,p=1;p<=i;++p)U=Math.max(U,-K[p]);if(g!==a-1&&3!==a||this.PrintIterationResult(g,Y,U,s,e,a),K[X]=Y,K[r]=U,A=!0,!v){for(A=!1,h=1;h<=r;++h)tt[h][y]=K[h];if(g<=z){if(y<=e)if(tt[X][z]<=Y)s[y]=Q[y][z];else{for(Q[y][z]=s[y],p=1;p<=r;++p)tt[p][y]=tt[p][z],tt[p][z]=K[p];for(p=1;p<=y;++p){for(Q[y][p]=-J,_=0,h=p;h<=y;++h)_-=Z[h][p];Z[y][p]=_}}if(g<=e){s[y=g]+=J;continue t}}v=!0}e:for(;;){i:do{if(!A){for(b=tt[X][z]+H*tt[r][z],C=z,d=1;d<=e;++d)(_=tt[X][d]+H*tt[r][d])<b?(C=d,b=_):_===b&&0===H&&tt[r][d]<tt[r][C]&&(C=d);if(C<=e){for(h=1;h<=r;++h)_=tt[h][z],tt[h][z]=tt[h][C],tt[h][C]=_;for(h=1;h<=e;++h){for(_=Q[h][C],Q[h][C]=0,Q[h][z]+=_,m=0,p=1;p<=e;++p)Q[h][p]-=_,m-=Z[p][h];Z[C][h]=m}}if(x=0,u)for(h=1;h<=e;++h)for(d=1;d<=e;++d)_=this.DOT_PRODUCT_ROW_COL(Z,h,Q,d,1,e)-(h===d?1:0),x=Math.max(x,Math.abs(_));if(x>.1){F=this.DivergingRoundingErrors;break t}for(p=1;p<=X;++p){for(K[p]=-tt[p][z],d=1;d<=e;++d)ot[d]=tt[p][d]+K[p];for(h=1;h<=e;++h)et[h][p]=(p===X?-1:1)*this.DOT_PRODUCT_ROW_COL(ot,-1,Z,h,1,e)}for(G=!0,V=.25*J,P=2.1*J,d=1;d<=e;++d){for(E=0,w=0,p=1;p<=e;++p)E+=Z[d][p]*Z[d][p],w+=Q[p][d]*Q[p][d];it[d]=1/Math.sqrt(E),rt[d]=Math.sqrt(w),(it[d]<V||rt[d]>P)&&(G=!1)}if(!v&&!G){for(y=0,_=P,d=1;d<=e;++d)rt[d]>_&&(y=d,_=rt[d]);if(0===y)for(d=1;d<=e;++d)it[d]<_&&(y=d,_=it[d]);for(_=.5*J*it[y],p=1;p<=e;++p)nt[p]=_*Z[y][p];for(S=0,O=0,c=0,p=1;p<=X;++p)c=this.DOT_PRODUCT_ROW_COL(nt,-1,et,p,1,e),p<X&&(_=tt[p][z],S=Math.max(S,-c-_),O=Math.max(O,c-_));for(M=H*(S-O)>2*c?-1:1,_=0,h=1;h<=e;++h)nt[h]=M*nt[h],Q[h][y]=nt[h],_+=Z[y][h]*nt[h];for(p=1;p<=e;++p)Z[y][p]/=_;for(d=1;d<=e;++d){if(d!==y)for(_=this.DOT_PRODUCT_ROW_COL(Z,d,nt,-1,1,e),p=1;p<=e;++p)Z[d][p]-=_*Z[y][p];s[d]=Q[d][z]+nt[d]}continue t}if(!(W=this.trstlp(e,i,et,K,J,nt))){for(_=0,p=1;p<=e;++p)_+=nt[p]*nt[p];if(_<.25*J*J){v=!0;break i}}for(c=0,T=0,K[X]=0,p=1;p<=X;++p)c=K[p]-this.DOT_PRODUCT_ROW_COL(nt,-1,et,p,1,e),p<X&&(T=Math.max(T,c));if(H<1.5*(j=(q=tt[r][z]-T)>0?c/q:0))for(H=2*j,a>=2&&console.log("Increase in PARMU to "+H),N=tt[X][z]+H*tt[r][z],d=1;d<=e;++d)if((_=tt[X][d]+H*tt[r][d])<N||_===N&&0===H&&tt[r][d]<tt[r][z])continue e;for($=H*q-c,p=1;p<=e;++p)s[p]=Q[p][z]+nt[p];v=!0;continue t}for(A=!1,R=tt[X][z]+H*tt[r][z]-(Y+H*U),0===H&&Y===tt[X][z]&&($=q,R=tt[r][z]-U),k=R<=0?1:0,y=0,d=1;d<=e;++d)(_=Math.abs(this.DOT_PRODUCT_ROW_COL(Z,d,nt,-1,1,e)))>k&&(y=d,k=_),st[d]=_*it[d];for(D=1.1*J,f=0,d=1;d<=e;++d)if(st[d]>=V||st[d]>=it[d]){if(_=rt[d],R>0){for(_=0,p=1;p<=e;++p)_+=Math.pow(nt[p]-Q[p][d],2);_=Math.sqrt(_)}_>D&&(f=d,D=_)}if(f>0&&(y=f),0!==y){for(_=0,h=1;h<=e;++h)Q[h][y]=nt[h],_+=Z[y][h]*nt[h];for(p=1;p<=e;++p)Z[y][p]/=_;for(d=1;d<=e;++d)if(d!==y)for(_=this.DOT_PRODUCT_ROW_COL(Z,d,nt,-1,1,e),p=1;p<=e;++p)Z[d][p]-=_*Z[y][p];for(p=1;p<=r;++p)tt[p][y]=K[p];if(R>0&&R>=.1*$)continue e}}while(0);if(G){if(J<=o){F=this.Normal;break t}if(L=0,I=0,(J*=.5)<=1.5*o&&(J=o),H>0){for(B=0,p=1;p<=X;++p){for(I=L=tt[p][z],h=1;h<=e;++h)L=Math.min(L,tt[p][h]),I=Math.max(I,tt[p][h]);p<=i&&L<.5*I&&(_=Math.max(I,0)-L,B=B<=0?_:Math.min(B,_))}0===B?H=0:I-L<H*B&&(H=(I-L)/B)}a>=2&&console.log("Reduction in RHO to "+J+"  and PARMU = "+H),2===a&&this.PrintIterationResult(g,tt[X][z],tt[r][z],this.COL(Q,z),e,a)}else v=!1}}switch(F){case this.Normal:if(a>=1&&console.log("%nNormal return from subroutine COBYLA%n"),W)return a>=1&&this.PrintIterationResult(g,Y,U,s,e,a),F;break;case this.MaxIterationsReached:a>=1&&console.log("%nReturn from subroutine COBYLA because the MAXFUN limit has been reached.%n");break;case this.DivergingRoundingErrors:a>=1&&console.log("%nReturn from subroutine COBYLA because rounding errors are becoming damaging.%n")}for(p=1;p<=e;++p)s[p]=Q[p][z];return Y=tt[X][z],U=tt[r][z],a>=1&&this.PrintIterationResult(g,Y,U,s,e,a),F},trstlp:function(t,e,i,r,s,n){var o,a,l,u,c,h,d,p,f,_,m,g,y,v,A,b,C,x,P,E,w,S,O,M,T,j,N,R,k,D,L,I,B,F=0,Y=0,U=0,z=this.arr2(1+t,1+t),X=this.arr(2+e),J=this.arr(2+e),H=this.arr(1+t),G=this.arr(1+t),W=this.arr(2+e),V=this.arr(2+e),q=e,$=0;for(l=1;l<=t;++l)z[l][l]=1,n[l]=0;if(o=0,a=0,e>=1){for(u=1;u<=e;++u)r[u]>a&&(a=r[u],o=u);for(u=1;u<=e;++u)V[u]=u,J[u]=a-r[u]}c=!0;do{t:for(;;){(!c||c&&0===a)&&(o=q=e+1,V[q]=q,J[q]=0),c=!1,h=0,d=0,p=0,f=0;e:do{if(_=q===e?a:-this.DOT_PRODUCT_ROW_COL(n,-1,i,q,1,t),0===d||_<h?(h=_,Y=$,d=3):$>Y?(Y=$,d=3):--d,0===d)break t;if(m=0,o<=$){if(o<$){g=V[o],y=J[o],u=o;do{for(b=V[A=u+1],C=this.DOT_PRODUCT(this.PART(this.COL(z,u),1,t),this.PART(this.COL(i,b),1,t)),F=math.A.hypot(C,X[A]),x=X[A]/F,P=C/F,X[A]=x*X[u],X[u]=F,l=1;l<=t;++l)F=x*z[l][A]+P*z[l][u],z[l][A]=x*z[l][u]-P*z[l][A],z[l][u]=F;V[u]=b,J[u]=J[A],u=A}while(u<$);V[u]=g,J[u]=y}if(--$,q>e)for(F=1/X[$],u=1;u<=t;++u)H[u]=F*z[u][$];else for(F=this.DOT_PRODUCT_ROW_COL(H,-1,z,$+1,1,t),u=1;u<=t;++u)H[u]-=F*z[u][$+1]}else{for(b=V[o],u=1;u<=t;++u)G[u]=i[u][b];for(E=0,u=t;u>$;){for(C=0,w=0,l=1;l<=t;++l)C+=F=z[l][u]*G[l],w+=Math.abs(F);if(S=w+.1*Math.abs(C),O=w+.2*Math.abs(C),(w>=S||S>=O)&&(C=0),0===E)E=C;else for(A=u+1,x=C/(F=math.A.hypot(C,E)),P=E/F,E=F,l=1;l<=t;++l)F=x*z[l][u]+P*z[l][A],z[l][A]=x*z[l][A]-P*z[l][u],z[l][u]=F;--u}if(0===E){m=-1,u=$;do{for(M=0,T=0,l=1;l<=t;++l)M+=F=z[l][u]*G[l],T+=Math.abs(F);if(S=T+.1*Math.abs(M),O=T+.2*Math.abs(M),T<S&&S<O){if((F=M/X[u])>0&&V[u]<=e&&(B=J[u]/F,(m<0||B<m)&&(m=B)),u>=2)for(j=V[u],l=1;l<=t;++l)G[l]-=F*i[l][j];W[u]=F}else W[u]=0}while(--u>0);if(m<0)break t;for(u=1;u<=$;++u)J[u]=Math.max(0,J[u]-m*W[u]);if(o<$){g=V[o],y=J[o],u=o;do{for(j=V[A=u+1],C=this.DOT_PRODUCT(this.PART(this.COL(z,u),1,t),this.PART(this.COL(i,j),1,t)),F=math.A.hypot(C,X[A]),x=X[A]/F,P=C/F,X[A]=x*X[u],X[u]=F,l=1;l<=t;++l)F=x*z[l][A]+P*z[l][u],z[l][A]=x*z[l][u]-P*z[l][A],z[l][u]=F;V[u]=j,J[u]=J[A],u=A}while(u<$);V[u]=g,J[u]=y}if(0===(F=this.DOT_PRODUCT(this.PART(this.COL(z,$),1,t),this.PART(this.COL(i,b),1,t))))break t;X[$]=F,J[o]=0,J[$]=m}else X[++$]=E,J[o]=J[$],J[$]=0;if(V[o]=V[$],V[$]=b,q>e&&b!==q){for(u=$-1,C=this.DOT_PRODUCT(this.PART(this.COL(z,u),1,t),this.PART(this.COL(i,b),1,t)),F=math.A.hypot(C,X[$]),x=X[$]/F,P=C/F,X[$]=x*X[u],X[u]=F,l=1;l<=t;++l)F=x*z[l][$]+P*z[l][u],z[l][$]=x*z[l][u]-P*z[l][$],z[l][u]=F;V[$]=V[u],V[u]=b,F=J[u],J[u]=J[$],J[$]=F}if(q>e)for(F=1/X[$],u=1;u<=t;++u)H[u]=F*z[u][$];else for(b=V[$],F=(this.DOT_PRODUCT_ROW_COL(H,-1,i,b,1,t)-1)/X[$],u=1;u<=t;++u)H[u]-=F*z[u][$]}for(N=s*s,k=0,R=0,l=1;l<=t;++l)Math.abs(n[l])>=1e-6*s&&(N-=n[l]*n[l]),k+=n[l]*H[l],R+=H[l]*H[l];if(N<=0)break t;if(F=Math.sqrt(R*N),Math.abs(k)>=1e-6*F&&(F=Math.sqrt(R*N+k*k)),p=f=N/(F+k),q===e){if(O=p+.2*a,p>=(S=p+.1*a)||S>=O)break e;p=Math.min(p,a)}for(u=1;u<=t;++u)G[u]=n[u]+p*H[u];if(q===e)for(U=a,a=0,u=1;u<=$;++u)F=r[b=V[u]]-this.DOT_PRODUCT_ROW_COL(G,-1,i,b,1,t),a=Math.max(a,F);u=$;do{for(D=0,L=0,l=1;l<=t;++l)D+=F=z[l][u]*G[l],L+=Math.abs(F);if(S=L+.1*Math.abs(D),O=L+.2*Math.abs(D),(L>=S||S>=O)&&(D=0),W[u]=D/X[u],u>=2)for(b=V[u],l=1;l<=t;++l)G[l]-=W[u]*i[l][b]}while(u-- >=2);for(q>e&&(W[$]=Math.max(0,W[$])),u=1;u<=t;++u)G[u]=n[u]+p*H[u];if(q>$)for(u=$+1;u<=q;++u){for(v=a-r[b=V[u]],I=a+Math.abs(r[b]),l=1;l<=t;++l)v+=F=i[l][b]*G[l],I+=Math.abs(F);S=I+.1*Math.abs(v),O=I+.2*Math.abs(v),(I>=S||S>=O)&&(v=0),W[u]=v}for(m=1,o=0,u=1;u<=q;++u)W[u]<0&&(F=J[u]/(J[u]-W[u]))<m&&(m=F,o=u);for(F=1-m,u=1;u<=t;++u)n[u]=F*n[u]+m*G[u];for(u=1;u<=q;++u)J[u]=Math.max(0,F*J[u]+m*W[u]);q===e&&(a=U+m*(a-U))}while(o>0);if(p===f)return!0}}while(q===e);return!1},PrintIterationResult:function(t,e,i,r,s,n){n>1&&console.log("NFVALS = "+t+"  F = "+e+"  MAXCV = "+i),n>1&&console.log("X = "+this.PART(r,1,s))},ROW:function(t,e){return t[e].slice()},COL:function(t,e){var i,r=t.length,s=[];for(i=0;i<r;++i)s[i]=t[i][e];return s},PART:function(t,e,i){return t.slice(e,i+1)},FORMAT:function(t){return t.join(",")},DOT_PRODUCT:function(t,e){var i,r=0,s=t.length;for(i=0;i<s;++i)r+=t[i]*e[i];return r},DOT_PRODUCT_ROW_COL:function(t,e,i,r,s,n){var o,a=0;if(-1===e)for(o=s;o<=n;++o)a+=t[o]*i[o][r];else if(-1===r)for(o=s;o<=n;++o)a+=t[e][o]*i[o];else for(o=s;o<=n;++o)a+=t[e][o]*i[o][r];return a}};const nlp=jxg.A.Math.Nlp;var base_coords=__webpack_require__(42),statistics=__webpack_require__(362);math.A.Plot={checkReal:function(t){var e,i,r=!1,s=t.length;for(e=0;e<s;e++)if(i=t[e].usrCoords,!isNaN(i[1])&&!isNaN(i[2])&&Math.abs(i[0])>math.A.eps){r=!0;break}return r},updateParametricCurveNaive:function(t,e,i,r){var s,n,o=!1,a=(i-e)/r;for(s=0;s<r;s++)n=e+s*a,t.points[s].setCoordinates(constants.A.COORDS_BY_USER,[t.X(n,o),t.Y(n,o)],!1),t.points[s]._t=n,o=!0;return t},isSegmentOutside:function(t,e,i,r,s){return e<0&&r<0||e>s.canvasHeight&&r>s.canvasHeight||t<0&&i<0||t>s.canvasWidth&&i>s.canvasWidth},isDistOK:function(t,e,i,r){return Math.abs(t)<i&&Math.abs(e)<r&&!isNaN(t+e)},isSegmentDefined:function(t,e,i,r){return!(isNaN(t+e)&&isNaN(i+r))},updateParametricCurveOld:function(t,e,i){var r,s,n,o,a,l,u,c,h,d,p,f=!1,_=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],t.board,!1),m=[],g=[],y=[],v=[],A=!1,b=0,C=function(t,e,i){var r,s=i[1]-t[1],n=i[2]-t[2],o=e[0]-t[1],a=e[1]-t[2],l=o*o+a*a;return l>=math.A.eps&&(r=(s*o+n*a)/l)>0&&(r<=1?(s-=r*o,n-=r*a):(s-=o,n-=a)),math.A.hypot(s,n)};for(jxg.A.deprecated("Curve.updateParametricCurveOld()"),t.board.updateQuality===t.board.BOARD_QUALITY_LOW?(h=15,d=10,p=10):(h=21,d=.7,p=.7),v[0]=i-e,r=1;r<h;r++)v[r]=.5*v[r-1];r=1,m[0]=1,g[0]=0,s=e,_.setCoordinates(constants.A.COORDS_BY_USER,[t.X(s,f),t.Y(s,f)],!1),f=!0,a=_.scrCoords[1],l=_.scrCoords[2],s=i,_.setCoordinates(constants.A.COORDS_BY_USER,[t.X(s,f),t.Y(s,f)],!1),n=_.scrCoords[1],o=_.scrCoords[2],y[0]=[n,o],u=1,c=0,t.points=[],t.points[b++]=new base_coords.A(constants.A.COORDS_BY_SCREEN,[a,l],t.board,!1);do{for(A=this.isDistOK(n-a,o-l,d,p)||this.isSegmentOutside(a,l,n,o,t.board);c<h&&(!A||c<6)&&(c<=7||this.isSegmentDefined(a,l,n,o));)m[u]=r,g[u]=c,y[u]=[n,o],u+=1,s=e+(r=2*r-1)*v[++c],_.setCoordinates(constants.A.COORDS_BY_USER,[t.X(s,f),t.Y(s,f)],!1,!0),n=_.scrCoords[1],o=_.scrCoords[2],A=this.isDistOK(n-a,o-l,d,p)||this.isSegmentOutside(a,l,n,o,t.board);b>1&&C(t.points[b-2].scrCoords,[n,o],t.points[b-1].scrCoords)<.015&&(b-=1),t.points[b]=new base_coords.A(constants.A.COORDS_BY_SCREEN,[n,o],t.board,!1),t.points[b]._t=s,b+=1,a=n,l=o,n=y[u-=1][0],o=y[u][1],c=g[u]+1,r=2*m[u]}while(u>0&&b<5e5);return t.numberPoints=t.points.length,t},_insertPoint_v2:function(t,e,i){var r=!isNaN(this._lastCrds[1]+this._lastCrds[2]),s=!isNaN(e.scrCoords[1]+e.scrCoords[2]),n=t.board.canvasWidth,o=t.board.canvasHeight,a=500;(!(s=s&&e.scrCoords[1]>-500&&e.scrCoords[2]>-500&&e.scrCoords[1]<n+a&&e.scrCoords[2]<o+a)&&r||s&&(!r||Math.abs(e.scrCoords[1]-this._lastCrds[1])>.7||Math.abs(e.scrCoords[2]-this._lastCrds[2])>.7))&&(e._t=i,t.points.push(e),this._lastCrds=e.copy("scrCoords"))},neighborhood_isNaN_v2:function(t,e){var i,r,s=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],t.board,!1);return i=e+math.A.eps,s.setCoordinates(constants.A.COORDS_BY_USER,[t.X(i,!0),t.Y(i,!0)],!1),r=s.usrCoords,!!(isNaN(r[1]+r[2])||(i=e-math.A.eps,s.setCoordinates(constants.A.COORDS_BY_USER,[t.X(i,!0),t.Y(i,!0)],!1),r=s.usrCoords,isNaN(r[1]+r[2])))},_borderCase:function(t,e,i,r,s,n,o,a){var l,u,c,h,d,p,f=null,_=!1;if(a<=1){if(u=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],t.board,!1),isNaN(e[1]+e[2])&&!isNaN(r[1]+r[2])&&!this.neighborhood_isNaN_v2(t,s))return!1;if(isNaN(i[1]+i[2])&&!isNaN(r[1]+r[2])&&!this.neighborhood_isNaN_v2(t,n))return!1;if(isNaN(r[1]+r[2])&&(!isNaN(e[1]+e[2])||!isNaN(i[1]+i[2]))&&!this.neighborhood_isNaN_v2(t,o))return!1;h=0;do{if(isNaN(e[1]+e[2])&&!isNaN(r[1]+r[2]))d=s,p=o;else if(isNaN(i[1]+i[2])&&!isNaN(r[1]+r[2]))d=n,p=o;else if(isNaN(r[1]+r[2])&&!isNaN(i[1]+i[2]))d=o,p=n;else{if(!isNaN(r[1]+r[2])||isNaN(e[1]+e[2]))return!1;d=o,p=s}l=.5*(d+p),u.setCoordinates(constants.A.COORDS_BY_USER,[t.X(l,!0),t.Y(l,!0)],!1),c=u.usrCoords,(_=isNaN(c[1]+c[2]))?d=l:p=l,++h}while(_&&h<30);if(h<30&&(f=c.slice(),r=c.slice(),p=l),null!==f)return this._insertPoint_v2(t,new base_coords.A(constants.A.COORDS_BY_USER,f,t.board,!1)),!0}return!1},_plotRecursive_v2:function(t,e,i,r,s,n,o){var a,l,u,c,h,d=0,p=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],t.board,!1);if(!(t.numberPoints>65536))return n<this.nanLevel&&this._isUndefined(t,e,i,r,s)||n<this.nanLevel&&this._isOutside(e,i,r,s,t.board)?this:(a=.5*(i+s),p.setCoordinates(constants.A.COORDS_BY_USER,[t.X(a,!0),t.Y(a,!0)],!1),l=p.scrCoords,this._borderCase(t,e,r,l,i,s,a,n)||(u=this._triangleDists(e,r,l),c=n<this.smoothLevel&&u[3]<o,h=n<=this.jumpLevel&&(isNaN(u[0])||isNaN(u[1])||isNaN(u[2]))||n<this.jumpLevel&&(u[2]>.99*u[0]||u[1]>.99*u[0]||u[0]===1/0||u[1]===1/0||u[2]===1/0),n<this.smoothLevel+2&&u[0]<.5*(u[1]+u[2])&&(d=0,c=!1),--n,h?this._insertPoint_v2(t,new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],t.board,!1),a):n<=d||c?this._insertPoint_v2(t,p,a):(this._plotRecursive_v2(t,e,i,l,a,n,o),isNaN(p.scrCoords[1]+p.scrCoords[2])||this._insertPoint_v2(t,p,a),this._plotRecursive_v2(t,l,a,r,s,n,o))),this)},updateParametricCurve_v2:function(t,e,i){var r,s,n,o,a,l,u,c,h,d=!1,p=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],t.board,!1),f=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],t.board,!1);return t.board.updateQuality===t.board.BOARD_QUALITY_LOW?(a=utils_type.A.evaluate(t.visProp.recursiondepthlow)||13,l=2,this.smoothLevel=a-6,this.jumpLevel=3):(a=utils_type.A.evaluate(t.visProp.recursiondepthhigh)||17,l=2,this.smoothLevel=a-9,this.jumpLevel=2),this.nanLevel=a-4,t.points=[],"x"===this.xterm?(u=.3*((c=t.board.getBoundingBox())[2]-c[0]),r=Math.max(e,c[0]-u),s=Math.min(i,c[2]+u)):(r=e,s=i),p.setCoordinates(constants.A.COORDS_BY_USER,[t.X(r,d),t.Y(r,d)],!1),d=!0,f.setCoordinates(constants.A.COORDS_BY_USER,[t.X(s,d),t.Y(s,d)],!1),h=this._findStartPoint(t,p.scrCoords,r,f.scrCoords,s),p.setCoordinates(constants.A.COORDS_BY_SCREEN,h[0],!1),r=h[1],h=this._findStartPoint(t,f.scrCoords,s,p.scrCoords,r),f.setCoordinates(constants.A.COORDS_BY_SCREEN,h[0],!1),s=h[1],this._visibleArea=[r,s],n=p.copy("scrCoords"),o=f.copy("scrCoords"),p._t=r,t.points.push(p),this._lastCrds=p.copy("scrCoords"),this._plotRecursive_v2(t,n,r,o,s,a,l),f._t=s,t.points.push(f),t.numberPoints=t.points.length,t},_insertLimesPoint:function(t,e,i,r,s){var n,o,a;Math.abs(this._lastUsrCrds[1])===1/0&&Math.abs(s.left_x)===1/0||Math.abs(this._lastUsrCrds[2])===1/0&&Math.abs(s.left_y)===1/0||((n=new base_coords.A(constants.A.COORDS_BY_USER,[s.left_x,s.left_y],t.board))._t=i,t.points.push(n),isNaN(s.left_x)||isNaN(s.left_y)||isNaN(s.right_x)||isNaN(s.right_y)||!(Math.abs(s.left_x-s.right_x)>math.A.eps||Math.abs(s.left_y-s.right_y)>math.A.eps)||((o=new base_coords.A(constants.A.COORDS_BY_SCREEN,e,t.board))._t=i,t.points.push(o)),(a=new base_coords.A(constants.A.COORDS_BY_USER,[s.right_x,s.right_y],t.board))._t=i,t.points.push(a),this._lastScrCrds=a.copy("scrCoords"),this._lastUsrCrds=a.copy("usrCoords"))},_insertPoint:function(t,e,i,r,s){var n,o=!isNaN(this._lastScrCrds[1]+this._lastScrCrds[2]),a=!isNaN(e[1]+e[2]),l=t.board.canvasWidth,u=t.board.canvasHeight,c=500;utils_type.A.exists(s)?this._insertLimesPoint(t,e,i,r,s):(a=a&&e[1]>-500&&e[2]>-500&&e[1]<l+c&&e[2]<u+c,(o||a)&&(a&&o&&Math.abs(e[1]-this._lastScrCrds[1])<.8&&Math.abs(e[2]-this._lastScrCrds[2])<.8||Math.abs(e[1])===1/0&&Math.abs(this._lastUsrCrds[1])===1/0||Math.abs(e[2])===1/0&&Math.abs(this._lastUsrCrds[2])===1/0||((n=new base_coords.A(constants.A.COORDS_BY_SCREEN,e,t.board))._t=i,t.points.push(n),this._lastScrCrds=n.copy("scrCoords"),this._lastUsrCrds=n.copy("usrCoords"))))},_triangleDists:function(t,e,i){var r;return r=[t[0]*e[0],.5*(t[1]+e[1]),.5*(t[2]+e[2])],[geometry.A.distance(t,e,3),geometry.A.distance(t,i,3),geometry.A.distance(i,e,3),geometry.A.distance(i,r,3)]},_isUndefined:function(t,e,i,r,s){var n,o,a;if(!isNaN(e[1]+e[2])||!isNaN(r[1]+r[2]))return!1;for(a=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],t.board,!1),o=0;o<20;++o)if(n=i+Math.random()*(s-i),a.setCoordinates(constants.A.COORDS_BY_USER,[t.X(n,!0),t.Y(n,!0)],!1),!isNaN(a.scrCoords[0]+a.scrCoords[1]+a.scrCoords[2]))return!1;return!0},_isOutside:function(t,e,i,r,s){var n=500,o=s.canvasWidth,a=s.canvasHeight;return!!(t[1]<-500&&i[1]<-500||t[2]<-500&&i[2]<-500||t[1]>o+n&&i[1]>o+n||t[2]>a+n&&i[2]>a+n)},_isOutsidePoint:function(t,e){var i=500,r=e.canvasWidth,s=e.canvasHeight;return!!(t[1]<-500||t[2]<-500||t[1]>r+i||t[2]>s+i)},_findStartPoint:function(t,e,i,r,s){return[e,i]},_getBorderPos:function(t,e,i,r,s,n,o){var a,l,u,c,h,d;if(l=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],t.board,!1),c=0,isNaN(i[1]+i[2])&&!isNaN(s[1]+s[2]))d=e,h=r;else if(isNaN(o[1]+o[2])&&!isNaN(s[1]+s[2]))d=n,h=r;else if(isNaN(s[1]+s[2])&&!isNaN(o[1]+o[2]))d=r,h=n;else{if(!isNaN(s[1]+s[2])||isNaN(i[1]+i[2]))return!1;d=r,h=e}do{a=.5*(h+d),l.setCoordinates(constants.A.COORDS_BY_USER,[t.X(a,!0),t.Y(a,!0)],!1),u=l.usrCoords,isNaN(u[1]+u[2])?d=a:h=a,++c}while(c<30&&Math.abs(h-d)>math.A.eps);return a},_getCuspPos:function(t,e,i){var r=[t.X(e,!0),t.Y(e,!0)],s=[t.X(i,!0),t.Y(i,!0)];return numerics.A.fminbr((function(e){var i=[t.X(e,!0),t.Y(e,!0)];return-(math.A.hypot(r[0]-i[0],r[1]-i[1])+math.A.hypot(s[0]-i[0],s[1]-i[1]))}),[e,i],t)},_getJumpPos:function(t,e,i){return numerics.A.fminbr((function(e){var i=math.A.eps*math.A.eps,r=[t.X(e,!0),t.Y(e,!0)],s=[t.X(e+i,!0),t.Y(e+i,!0)];return-Math.abs((s[1]-r[1])/(s[0]-r[0]))}),[e,i],t)},_getLimits:function(t,e){var i,r,s,n,o,a=2/(t.maxX()-t.minX());return r=(i=extrapolate.limit(e,-a,t.X))[0],"infinite"===i[1]&&(r=Math.sign(r)*(1/0)),n=(i=extrapolate.limit(e,-a,t.Y))[0],"infinite"===i[1]&&(n=Math.sign(n)*(1/0)),s=(i=extrapolate.limit(e,a,t.X))[0],"infinite"===i[1]&&(s=Math.sign(s)*(1/0)),o=(i=extrapolate.limit(e,a,t.Y))[0],"infinite"===i[1]&&(o=Math.sign(o)*(1/0)),{left_x:r,left_y:n,right_x:s,right_y:o,t:e}},_getLimes:function(t,e,i,r,s,n,o,a,l){var u;return"border"===a?u=this._getBorderPos(t,e,i,r,s,n,o):"cusp"===a?u=this._getCuspPos(t,e,n):"jump"===a&&(u=this._getJumpPos(t,e,n)),this._getLimits(t,u)},_plotNonRecursive:function(t,e,i,r,s,n){var o,a,l,u,c,h,d,p,f,_,m,g=null,y=!1,v="",A=[],b=0;for(p=t.board.origin.scrCoords,A[b++]=[e,i,r,s,n,1/0];b>0;){if(e=(m=A[--b])[0],i=m[1],r=m[2],s=m[3],f=m[4],_=m[5],y=!1,v="",g=null,t.points.length>65536)return;if(f<this.nanLevel){if(this._isUndefined(t,e,i,r,s))continue;if(this._isOutside(e,i,r,s,t.board))continue}o=.5*(i+s),h=t.X(o,!0),d=t.Y(o,!0),a=[1,p[1]+h*t.board.unitX,p[2]-d*t.board.unitY],l=this._triangleDists(e,r,a),u=isNaN(e[1]+e[2]),c=isNaN(r[1]+r[2]),u&&!c||!u&&c?v="border":l[0]>.66*_||l[0]<this.cusp_threshold*(l[1]+l[2])||l[1]>5*l[2]||l[2]>5*l[1]?v="cusp":(l[2]>this.jump_threshold*l[0]||l[1]>this.jump_threshold*l[0]||l[0]===1/0||l[1]===1/0||l[2]===1/0)&&(v="jump"),y=""===v&&f<this.smoothLevel&&l[3]<this.smooth_threshold,f<this.testLevel&&!y&&(""===v?y=!0:g=this._getLimes(t,i,e,o,a,s,r,v,f)),null!==g?(a=[1,NaN,NaN],this._insertPoint(t,a,o,f,g)):f<=0||y?this._insertPoint(t,a,o,f,null):(A[b++]=[a,o,r,s,f-1,l[0]],A[b++]=[e,i,a,o,f-1,l[0]])}return this},updateParametricCurve_v3:function(t,e,i){var r,s,n,o,a,l,u,c,h=!1,d=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],t.board,!1),p=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],t.board,!1);return a=t.board.updateQuality===t.board.BOARD_QUALITY_LOW?utils_type.A.evaluate(t.visProp.recursiondepthlow)||14:utils_type.A.evaluate(t.visProp.recursiondepthhigh)||17,this.smoothLevel=7,this.nanLevel=a-4,this.testLevel=4,this.cusp_threshold=.5,this.jump_threshold=.99,this.smooth_threshold=2,t.points=[],"x"===t.xterm?(l=.3*((u=t.board.getBoundingBox())[2]-u[0]),r=Math.max(e,u[0]-l),s=Math.min(i,u[2]+l)):(r=e,s=i),d.setCoordinates(constants.A.COORDS_BY_USER,[t.X(r,h),t.Y(r,h)],!1),h=!0,p.setCoordinates(constants.A.COORDS_BY_USER,[t.X(s,h),t.Y(s,h)],!1),c=this._findStartPoint(t,d.scrCoords,r,p.scrCoords,s),d.setCoordinates(constants.A.COORDS_BY_SCREEN,c[0],!1),r=c[1],c=this._findStartPoint(t,p.scrCoords,s,d.scrCoords,r),p.setCoordinates(constants.A.COORDS_BY_SCREEN,c[0],!1),s=c[1],this._visibleArea=[r,s],n=d.copy("scrCoords"),o=p.copy("scrCoords"),d._t=r,t.points.push(d),this._lastScrCrds=d.copy("scrCoords"),this._lastUsrCrds=d.copy("usrCoords"),this._plotNonRecursive(t,n,r,o,s,a),p._t=s,t.points.push(p),t.numberPoints=t.points.length,t},_criticalInterval:function(t,e,i){var r,s,n,o,a,l,u,c=!1,h=-1/0,d=!1,p=!1,f=0,_=[],m=[],g=[];for(u=statistics.A.abs(t),(o=statistics.A.median(u))<1e-7?(o=1e-7,d=!0):o*=this.criticalThreshold,r=0;r<e;r++)u[r]>o?(g.push({i:r,v:t[r],group:f}),h=r,c||(c=!0)):c&&r>h+4&&(g.length>0&&_.push(g.slice(0)),g=[],c=!1,f++);for(c&&g.length>1&&_.push(g.slice(0)),d&&0===_.length&&(p=!0),s=0;s<_.length;s++)if(m[s]="point",!((n=_[s].length)<64)){for(l=0,a=Math.sign(_[s][0].v),r=1;r<n;r++)Math.sign(_[s][r].v)!==a&&(l++,a=Math.sign(_[s][r].v));6*l>n&&(m[s]="interval")}return{smooth:p,groups:_,types:m}},Component:function(){this.left_isNaN=!1,this.right_isNaN=!1,this.left_t=null,this.right_t=null,this.t_values=[],this.x_values=[],this.y_values=[],this.len=0},findComponents:function(t,e,i,r){var s,n,o,a,l,u,c=[],h=0,d=0,p=0,f=!1,_=!1;for(o=(i-e)/r,c[h]=new this.Component,u=c[h],s=0,n=e;s<=r;s++,n+=o)a=t.X(n,_),l=t.Y(n,_),isNaN(a)||isNaN(l)?++p>1&&f&&(u.right_isNaN=!0,u.right_t=n-o,u.len=d,f=!1,c[++h]=new this.Component,u=c[h],p=0):(f||(f=!0,d=0,p>0&&(u.left_t=n-o,u.left_isNaN=!0)),p=0,u.t_values[d]=n,u.x_values[d]=a,u.y_values[d]=l,d++),0===s&&(_=!0);return f?u.len=d:c.pop(),c},getPointType:function(t,e,i,r,s,n,o){var a=s[0],l=n[0],u=r.length,c={idx:e,t:i,x:a[e],y:l[e],type:"other"};return e<5?(c.type="borderleft",c.idx=0,c.t=r[0],c.x=a[0],c.y=l[0],c):e>o-6?(c.type="borderright",c.idx=u-1,c.t=r[u-1],c.x=a[u-1],c.y=l[u-1],c):c},newtonApprox:function(t,e,i,r,s){var n,o=0;for(n=r;n>0;n--)o=(o+s[n][t])*(e-(n-1)*i)/n;return o+s[0][t]},thiele:function(t,e,i,r,s){var n,o=0;for(n=s;n>1;n--)o=(t-i[r+n])/(e[n][r+1]-e[n-2][r+1]+o);return e[0][r+1]+(t-i[r+1])/(e[1][r+1]+o)},differenceMethodExperiments:function(t,e){var i,r,s,n,o,a,l,u,c,h,d,p=t.t_values,f=t.x_values,_=t.y_values,m=[],g=[],y=[],v=[],A=[],b=[],C=[],x=[],P=0,E=[];for(o=p[1]-p[0],A.push([]),b.push([]),C.push([]),x.push([]),s=_.length,i=0;i<s;i++)A[0][i]=f[i],b[0][i]=_[i],C[0][i]=f[i],x[0][i]=_[i];for(A.push([]),b.push([]),C.push([]),x.push([]),a=o,s=_.length-1,i=0;i<s;i++)m[i]=f[i+1]-f[i],g[i]=_[i+1]-_[i],y[i]=m[i],v[i]=g[i],A[1][i]=m[i],b[1][i]=g[i],C[1][i]=a/m[i],x[1][i]=a/g[i];for(s--,n=Math.min(8,_.length-1),r=1;r<n;r++){for(A.push([]),b.push([]),C.push([]),x.push([]),a*=o,i=0;i<s;i++)m[i]=m[i+1]-m[i],g[i]=g[i+1]-g[i],A[r+1][i]=m[i],b[r+1][i]=g[i],C[r+1][i]=a/(C[r][i+1]-C[r][i])+C[r-1][i+1],x[r+1][i]=a/(x[r][i+1]-x[r][i])+x[r-1][i+1];if(!1===(d=this._criticalPoints(g,s,r))){console.log("Polynomial of degree",r),d=[];break}if(d.length>0&&++P>1&&r%2===0)break;s--}for(i=0;i<d.length;i++){for(u=-1/0,c=0;c<d[i].length;c++)(h=Math.abs(d[i][c].v))>u&&(u=h,l=c);l=Math.floor(d[i][l].i+r/2),E.push(this.getPointType(e,l,p,f,_,y,v,s+1))}return[E,A,b,C,x]},getCenterOfCriticalInterval:function(t,e,i){var r,s,n,o,a,l=0,u=0,c=i[1]-i[0],h=[];for(r=-1/0,h=[],s=0;s<t.length;s++)(o=Math.abs(t[s].v))>r?(h=[s],r=o,n=s):r===o&&h.push(s);if(h.length>0&&(a=h.reduce((function(t,e){return t+e}),0)/h.length,n=Math.floor(a),a+=t[0].i),r<1/0){for(s=0;s<t.length;s++)l+=Math.abs(t[s].v)*t[s].i,u+=Math.abs(t[s].v);a=l/u}return a+=e/2,[t[n].i+e/2,a,i[Math.floor(a)]+c*(a-Math.floor(a))]},differenceMethod:function(t,e){var i,r,s,n,o,a,l,u,c,h,d=t.t_values,p=t.x_values,f=t.y_values,_=[],m=[],g=0,y=-1,v=-1,A=[],b=[];for(s=f.length,_.push(new Float64Array(p)),m.push(new Float64Array(f)),s--,n=Math.min(12,s),r=0;r<n&&(_.push(new Float64Array(s)),m.push(new Float64Array(s)),_[r+1]=_[r].map((function(t,e,i){return i[e+1]-t})),m[r+1]=m[r].map((function(t,e,i){return i[e+1]-t})),!0===(u=this._criticalInterval(m[r+1],s,r)).smooth&&(v=r,A=[]),l=this._criticalInterval(_[r+1],s,r),-1===y&&!0===l.smooth&&(y=r),!(v>=0));r++){if(u.groups.length>0&&++g>2&&(r+1)%2===0){A=u.groups,h=u.types;break}s--}for(i=0;i<A.length;i++)"interval"!==h[i]&&(a=this.getCenterOfCriticalInterval(A[i],r+1,d),u[0],o=Math.floor(a[1]),c=a[2],b.push(this.getPointType(e,o,c,d,_,m,s+1)));return[b,_,m,y,v]},_insertPoint_v4:function(t,e,i,r){var s,n,o,a=null;t.points.length>0&&(a=t.points[t.points.length-1].scrCoords),s=new base_coords.A(constants.A.COORDS_BY_USER,e,t.board),null!==a&&(n=s.scrCoords[1]-a[1])*n+(o=s.scrCoords[2]-a[2])*o<.8*.8||(s._t=i,t.points.push(s))},getInterval:function(t,e,i){var r,s;return ia.A.disable(),r=ia.A.Interval(e,i),t.board.mathLib=ia.A,t.board.mathLibJXG=ia.A,s=t.Y(r,!0),t.board.mathLib=Math,t.board.mathLibJXG=jxg.A.Math,s},sign:function(t){return t<0?-1:t>0?1:0},handleBorder:function(t,e,i,r,s){var n,o,a,l,u,c,h,d,p,f,_,m,g=i.idx;if(m=e.t_values[1]-e.t_values[0],"borderleft"===i.type?a=(o=n=e.left_isNaN?e.left_t:i.t-m)+m:"borderright"===i.type?o=(a=n=e.right_isNaN?e.right_t:i.t+m)-m:console.log("No bordercase!!!"),0!==(f=this.findComponents(t,o,a,32)).length){for("borderleft"===i.type&&(o=f[0].left_t,a=f[0].t_values[0],m=f[0].t_values[1]-f[0].t_values[0],n=o=null===o?a-m:o,l=this.getInterval(t,o,a),utils_type.A.isObject(l)&&(h=l.lo,d=l.hi,u=t.X(n,!0),c=s[1][g]<0?d:h,this._insertPoint_v4(t,[1,u,c],n))),_=f[0].t_values.length,p=0;p<_;p++)n=f[0].t_values[p],u=f[0].x_values[p],c=f[0].y_values[p],this._insertPoint_v4(t,[1,u,c],n);"borderright"===i.type&&(o=f[0].t_values[_-1],a=f[0].right_t,m=f[0].t_values[1]-f[0].t_values[0],n=a=null===a?o+m:a,l=this.getInterval(t,o,a),utils_type.A.isObject(l)&&(h=l.lo,d=l.hi,u=t.X(n,!0),c=s[1][g]>0?d:h,this._insertPoint_v4(t,[1,u,c],n)))}},_seconditeration_v4:function(t,e,i,r,s){var n,o,a,l,u,c,h,d,p,f,_,m,g;for(o=e.t_values[i.idx-2],a=e.t_values[i.idx+2],u=this.findComponents(t,o,a,64),h=0;h<u.length;h++){for(c=u[h],d=(l=this.differenceMethod(c,t))[0],f=l[1],_=l[2],m=0,p=0;p<=d.length;p++){for(g=p===d.length?c.len:d[p].idx,n=m;n<g;n++)isNaN(c.x_values[n])||isNaN(c.y_values[n])||this._insertPoint_v4(t,[1,c.x_values[n],c.y_values[n]],c.t_values[n]);p<d.length&&(this.handleSingularity(t,c,d[p],f,_),m=d[p].idx+1)}g=c.len,h<u.length-1&&this._insertPoint_v4(t,[1,NaN,NaN],c.right_t)}return this},_recurse_v4:function(t,e,i,r,s,n,o,a){var l,u,c=.5*(e+i),h=t.X(c,!0),d=t.Y(c,!0);0!==a?(l=(h-r)*t.board.unitX,u=(d-s)*t.board.unitY,math.A.hypot(l,u)>2?this._recurse_v4(t,e,c,r,s,h,d,a-1):this._insertPoint_v4(t,[1,h,d],c),l=(h-n)*t.board.unitX,u=(d-o)*t.board.unitY,math.A.hypot(l,u)>2?this._recurse_v4(t,c,i,h,d,n,o,a-1):this._insertPoint_v4(t,[1,h,d],c)):this._insertPoint_v4(t,[1,NaN,NaN],c)},handleSingularity:function(t,e,i,r,s){var n,o,a,l,u,c,h,d,p,f,_,m=i.idx,g=100;n=i.t,console.log("HandleSingularity at t =",n),o=e.t_values[m-5],a=e.t_values[m+5],l=this.getInterval(t,o,a),utils_type.A.isObject(l)?(d=l.lo,p=l.hi):s[0][m-1]<s[0][m+1]?(d=s[0][m-1],p=s[0][m+1]):(d=s[0][m+1],p=s[0][m-1]),h=t.X(n,!0),f=(s[0][m-3]-s[0][m-5])/(e.t_values[m-3]-e.t_values[m-5]),_=(s[0][m+3]-s[0][m+5])/(e.t_values[m+3]-e.t_values[m+5]),console.log(":::",f,_),f<-100?(this._insertPoint_v4(t,[1,h,d],n,!0),_<=g&&this._insertPoint_v4(t,[1,NaN,NaN],n)):f>g?(this._insertPoint_v4(t,[1,h,p],n),_>=-100&&this._insertPoint_v4(t,[1,NaN,NaN],n)):(d===-1/0&&(this._insertPoint_v4(t,[1,h,d],n,!0),this._insertPoint_v4(t,[1,NaN,NaN],n)),p===1/0&&(this._insertPoint_v4(t,[1,NaN,NaN],n),this._insertPoint_v4(t,[1,h,p],n,!0)),i.t<e.t_values[m]?(u=m-1,c=m):(u=m,c=m+1),o=e.t_values[u],a=e.t_values[c],this._recurse_v4(t,o,a,r[0][u],s[0][u],r[0][c],s[0][c],10)),_<-100?this._insertPoint_v4(t,[1,h,p],n):_>g&&this._insertPoint_v4(t,[1,h,d],n)},steps:1021,criticalThreshold:1e3,plot_v4:function(t,e,i,r){var s,n,o,a,l,u,c,h,d,p,f,_,m,g,y,v=(i-e)/r,A=function(e){return t.Y(e,!0)},b=function(e){return-t.Y(e,!0)},C=.5*v;for(o=this.findComponents(t,e,i,r),a=0;a<o.length;a++){for(l=o[a],u=(d=this.differenceMethod(l,t))[0],p=d[1],f=d[2],0!==u.length&&"borderleft"===u[0].type||u.unshift({idx:0,t:l.t_values[0],x:l.x_values[0],y:l.y_values[0],type:"borderleft"}),"borderright"!==u[u.length-1].type&&(n=l.t_values.length,u.push({idx:n-1,t:l.t_values[n-1],x:l.x_values[n-1],y:l.y_values[n-1],type:"borderright"})),h=0,c=0;c<=u.length;c++){for(n=c===u.length?l.len:u[c].idx-1,s=h;s<n-2;s++)this._insertPoint_v4(t,[1,l.x_values[s],l.y_values[s]],l.t_values[s]),s>=h+3&&s<n-3&&f.length>3&&Math.abs(f[2][s])>.2*Math.abs(f[0][s])&&(_=l.t_values[s],C=.25*v,y=this.getInterval(t,_,_+v),utils_type.A.isObject(y)?f[2][s]>0?this._insertPoint_v4(t,[1,_+C,y.lo],_+C):this._insertPoint_v4(t,[1,_+v-C,y.hi],_+v-C):(m=numerics.A.fminbr(A,[_,_+v]))<(g=numerics.A.fminbr(b,[_,_+v]))?(this._insertPoint_v4(t,[1,t.X(m,!0),t.Y(m,!0)],m),this._insertPoint_v4(t,[1,t.X(g,!0),t.Y(g,!0)],g)):(this._insertPoint_v4(t,[1,t.X(g,!0),t.Y(g,!0)],g),this._insertPoint_v4(t,[1,t.X(m,!0),t.Y(m,!0)],m)));c<u.length&&(s=u[c].idx,"borderleft"===u[c].type||"borderright"===u[c].type?this.handleBorder(t,l,u[c],p,f):this._seconditeration_v4(t,l,u[c],p,f),h=u[c].idx+1+1)}n=l.len,a<o.length-1&&this._insertPoint_v4(t,[1,NaN,NaN],l.right_t)}},updateParametricCurve_v4:function(t,e,i){var r,s,n,o;"x"===t.xterm?(n=.3*((o=t.board.getBoundingBox())[2]-o[0]),r=Math.max(e,o[0]-n),s=Math.min(i,o[2]+n)):(r=e,s=i),t.points=[],this.plot_v4(t,r,s,this.steps),t.numberPoints=t.points.length},updateParametricCurve:function(t,e,i){return this.updateParametricCurve_v2(t,e,i)}};const plot=math.A.Plot;math.A.ImplicitPlot=function(t,e,i,r,s){var n={resolution_out:5,resolution_in:5,max_steps:1024,alpha_0:.05,tol_u0:math.A.eps,tol_newton:1e-7,tol_cusp:.05,tol_progress:1e-4,qdt_box:.2,kappa_0:.2,delta_0:.05,h_initial:.1,h_critical:.001,h_max:1,loop_dist:.09,loop_dir:.99,loop_detection:!0,unitX:10,unitY:10};this.config=utils_type.A.merge(n,e),this.f=i,this.dfx=null,this.dfy=null,utils_type.A.isFunction(r)?this.dfx=r:this.dfx=function(t,e){var i=math.A.eps*math.A.eps;return.5*(this.f(t+i,e)-this.f(t-i,e))/i},utils_type.A.isFunction(s)?this.dfy=s:this.dfy=function(t,e){var i=math.A.eps*math.A.eps;return.5*(this.f(t,e+i)-this.f(t,e-i))/i},this.bbox=t,this.qdt=new bqdt(20,5,t),this.components=[]},utils_type.A.extend(math.A.ImplicitPlot.prototype,{plot:function(){var t,e,i,r,s,n,o,a=[],l=[],u=[],c=0,h=this,d=function(e){return h.f(t,e)},p=function(e){return-h.f(t,e)},f=function(t){return h.f(t,e)},_=function(t){return-h.f(t,e)};for(i=Math.min(this.bbox[0],this.bbox[2])-math.A.eps,r=Math.max(this.bbox[0],this.bbox[2]),s=Math.min(this.bbox[1],this.bbox[3])+math.A.eps,n=Math.max(this.bbox[1],this.bbox[3]),o=this.config.resolution_out/this.config.unitX,o*=1+math.A.eps,t=i;t<r;t+=o)!1!==(u=this.searchLine(d,p,t,[s,n],"vertical",c,a,l))&&(a=u[0],l=u[1],c=u[2]);for(o=this.config.resolution_out/this.config.unitY,o*=1+math.A.eps,e=s;e<n;e+=o)!1!==(u=this.searchLine(f,_,e,[i,r],"horizontal",c,a,l))&&(a=u[0],l=u[1],c=u[2]);return[a,l,c]},searchLine:function(t,e,i,r,s,n,o,a){var l,u,c,h,d,p,f,_,m,g,y,v,A,b,C=this.config.tol_u0,x=!1,P=r[0],E=r[1];if(d=t(l=numerics.A.fminbr(t,[P,E])),p=t(u=numerics.A.fminbr(e,[P,E])),d<C&&p>-C){if(f=l,l=Math.min(f,u),u=Math.max(f,u),h=t(c=numerics.A.fzero(t,[l,u])),Math.abs(h)>Math.max((p-d)*math.A.eps,.001))return!1;if("vertical"===s?(m=[1,i,c],b=this.config.resolution_in/this.config.unitY):(m=[1,c,i],b=this.config.resolution_in/this.config.unitX),b*=1+math.A.eps,this.curveContainsPoint(m,o,a,2*b,this.config.qdt_box))x;else if((v=this.traceComponent(m,1)).length>0){for(n>0&&(o.push(NaN),a.push(NaN)),A=o.length,y=v[0].length,g=1;g<y;g++)this.qdt.insertItem({xlb:Math.min(v[0][g-1],v[0][g]),xub:Math.max(v[0][g-1],v[0][g]),ylb:Math.min(v[1][g-1],v[1][g]),yub:Math.max(v[1][g-1],v[1][g]),idx1:A+g-1,idx2:A+g,comp:n});n++,utils_type.A.concat(o,v[0]),utils_type.A.concat(a,v[1])}return(_=c-.01*b)-P>b&&!1!==(v=this.searchLine(t,e,i,[P,_],s,n,o,a))&&(o=v[0],a=v[1],n=v[2]),E-(_=c+.01*b)>b&&!1!==(v=this.searchLine(t,e,i,[_,E],s,n,o,a))&&(o=v[0],a=v[1],n=v[2]),[o,a,n]}return!1},curveContainsPoint:function(t,e,i,r,s){var n,o,a,l=t[1],u=t[2];for(o=(a=this.qdt.find([l-s,u+s,l+s,u-s])).length,n=0;n<o;n++)if(geometry.A.distPointSegment(t,[1,e[a[n].idx1],i[a[n].idx1]],[1,e[a[n].idx2],i[a[n].idx2]])<r)return!0;return!1},traceComponent:function(t){var e=[],i=[],r=[];return 0===(r=this.tracing(t,1)).length||(e=r[0],i=r[1]),r[2]||0===(r=this.tracing(t,-1)).length||(e=r[0].reverse().concat(e.slice(1)),i=r[1].reverse().concat(i.slice(1))),e.length<6&&(e.push(e[e.length-1]),i.push(i[i.length-1])),[e,i]},tracing:function(t,e){var i,r,s,n,o,a,l,u,c,h,d,p,f,_,m,g,y,v=[],A=[],b=[],C=0,x=0,P=!1,E=!1,w=!1,S=this.config.kappa_0,O=this.config.delta_0,M=this.config.alpha_0,T=this.config.h_initial,j=this.config.max_steps,N=e,R=[],k=[],D=[];if(v=t.slice(1),R.push(v[0]),k.push(v[1]),!1===(i=this.tangent(v)))return[];this.dfx(v[0],v[1]),this.dfy(v[0],v[1]);do{if(!1===(i=this.tangent(v))){v=A.slice(),R.push(v[0]),k.push(v[1]);break}if(1===R.length)s=i.slice();else if(2===R.length)D.push(R.length-1);else if(E&&R.length>2&&!w){if(geometry.A.distPointSegment([1,v[0],v[1]],[1,R[0],k[0]],[1,R[1],k[1]])<this.config.loop_dist*T&&math.A.innerProduct(i,s,2)>this.config.loop_dir){v=t.slice(1),R.push(v[0]),k.push(v[1]),P=!0;break}if(this.config.loop_detection){for(_=R.length-1,m=Math.floor(math.A.log2(_)),g=0;g<=m&&!(geometry.A.distPointSegment([1,v[0],v[1]],[1,R[D[g]-1],k[D[g]-1]],[1,R[D[g]],k[D[g]]])<this.config.loop_dist*T&&(r=this.tangent([R[D[g]],k[D[g]]]),math.A.innerProduct(i,r,2)>this.config.loop_dir));g++);if(g<=m){P=!0;break}for(m=1,y=0,g=0;g<100&&(_+1)%m===0;g++)m*=2,y++;D[y]=_}}A[0]=v[0]+T*N*i[0],A[1]=v[1]+T*N*i[1],x=0;do{c=(n=[this.dfx(A[0],A[1]),this.dfy(A[0],A[1])])[0]*n[0]+n[1]*n[1],o=this.f(A[0],A[1])/c,b[0]=A[0]-n[0]*o,b[1]=A[1]-n[1]*o,0===x?l=Math.abs(o)*Math.sqrt(c):1===x&&(u=Math.abs(o)*Math.sqrt(c)),A[0]=b[0],A[1]=b[1],x++}while(x<20&&Math.abs(this.f(A[0],A[1]))>this.config.tol_newton);if(d=l,h=x>1?u/l:0,r=this.tangent(A),a=math.A.innerProduct(i,r,2),a=Math.max(-1,Math.min(1,a)),p=Math.acos(a),w=!1,geometry.A.distance(v,A,2)<this.config.tol_progress){v=A.slice(),R.push(v[0]),k.push(v[1]);break}if(a<0)if(T>this.config.h_critical);else{if(w=!0,!this.isBifurcation(v,this.config.tol_cusp)){v=A.slice(),R.push(v[0]),k.push(v[1]);break}N*=-1,p=0}if(!w&&(f=Math.max(Math.sqrt(h/S),Math.sqrt(d/O),p/M),isNaN(f)&&(f=1),T/=f=Math.max(Math.min(f,2),.5),T=Math.min(this.config.h_max,T),f>=2)){if(++C>=3*j)break;E=!1}else v=A.slice(),R.push(v[0]),k.push(v[1]),E=!0,C++}while(C<j&&v[0]>=this.bbox[0]&&v[1]<=this.bbox[1]&&v[0]<=this.bbox[2]&&v[1]>=this.bbox[3]);return[R,k,P]},isBifurcation:function(t,e){var i,r,s,n,o,a,l,u,c,h,d=math.A.eps*math.A.eps*100;return i=t[0],r=t[1],s=.5*(this.dfx(i+d,r)-this.dfx(i-d,r))/d,n=.5*(this.dfx(i,r+d)-this.dfx(i,r-d))/d,o=.5*(this.dfy(i+d,r)-this.dfy(i-d,r))/d,h=(l=s+(a=.5*(this.dfy(i,r+d)-this.dfy(i,r-d))/d))*l-4*(s*a-n*o),u=.5*(l+Math.sqrt(h)),c=.5*(l-Math.sqrt(h)),Math.abs(u)>e&&Math.abs(c)>e},handleCriticalPoint:function(t,e,i,r){var s,n=Math.atan2(r*e[1],r*e[0]);return s=numerics.A.root((function(e){var r=t[0]+i*Math.cos(e),s=t[1]+i*Math.sin(e);return this.f(r,s)}),n),[t[0]+i*Math.cos(s),t[1]+i*Math.sin(s)]},updateA:function(t,e,i){var r,s,n=[i[0]-e[0],i[1]-e[1]],o=this.f(i[0],i[1])-this.f(e[0],e[1]);return s=n[0]*n[0]+n[1]*n[1],r=o-(t[0]*n[0]+t[1]*n[1]),r/=s,t[0]+=r*n[0],t[1]+=r*n[1],t},tangent_A:function(t){var e=[-t[1],t[0]],i=math.A.norm(e,2);return math.A.eps,[e[0]/i,e[1]/i]},tangent:function(t){var e=[-this.dfy(t[0],t[1]),this.dfx(t[0],t[1])],i=math.A.norm(e,2);return!(i<math.A.eps*math.A.eps)&&[e[0]/i,e[1]/i]}});const implicitplot=math.A.ImplicitPlot;math.A.Metapost={MP_ENDPOINT:0,MP_EXPLICIT:1,MP_GIVEN:2,MP_CURL:3,MP_OPEN:4,MP_END_CYCLE:5,UNITY:1,FRACTION_ONE:1,FRACTION_THREE:3,ONE_EIGHTY_DEG:Math.PI,THREE_SIXTY_DEG:2*Math.PI,EPS_SQ:1e-5*1e-5,make_choices:function(t){var e,i,r,s,n,o,a,l,u,c,h,d,p,f,_;a=t[0];do{if(!a)break;o=a.next,a.rtype>this.MP_EXPLICIT&&(a.x-o.x)*(a.x-o.x)+(a.y-o.y)*(a.y-o.y)<this.EPS_SQ&&(a.rtype=this.MP_EXPLICIT,a.ltype===this.MP_OPEN&&(a.ltype=this.MP_CURL,a.set_left_curl(this.UNITY)),o.ltype=this.MP_EXPLICIT,o.rtype===this.MP_OPEN&&(o.rtype=this.MP_CURL,o.set_right_curl(this.UNITY)),a.rx=a.x,o.lx=a.x,a.ry=a.y,o.ly=a.y),a=o}while(a!==t[0]);for(i=t[0];i.ltype===this.MP_OPEN&&i.rtype===this.MP_OPEN;)if((i=i.next)===t[0]){i.ltype=this.MP_END_CYCLE;break}for(a=i;a;){if(o=a.next,a.rtype>=this.MP_GIVEN){for(;o.ltype===this.MP_OPEN&&o.rtype===this.MP_OPEN;)o=o.next;for(r=0,l=a,n=t.length,d=[],p=[],f=[],_=[null];c=l.next,d.push(c.x-l.x),p.push(c.y-l.y),f.push(this.mp_pyth_add(d[r],p[r])),r>0&&(h=p[r-1]/f[r-1],u=d[r-1]/f[r-1],_.push(Math.atan2(p[r]*u-d[r]*h,d[r]*u+p[r]*h))),r++,(l=c)===o&&(n=r),!(r>=n&&l.ltype!==this.MP_END_CYCLE););r===n?_.push(0):_.push(_[1]),o.ltype===this.MP_OPEN&&((s=o.rx-o.x)*s+(e=o.ry-o.y)*e<this.EPS_SQ?(o.ltype=this.MP_CURL,o.set_left_curl(this.UNITY)):(o.ltype=this.MP_GIVEN,o.set_left_given(Math.atan2(e,s)))),a.rtype===this.MP_OPEN&&a.ltype===this.MP_EXPLICIT&&((s=a.x-a.lx)*s+(e=a.y-a.ly)*e<this.EPS_SQ?(a.rtype=this.MP_CURL,a.set_right_curl(this.UNITY)):(a.rtype=this.MP_GIVEN,a.set_right_given(Math.atan2(e,s)))),this.mp_solve_choices(a,o,n,d,p,f,_)}else a.rtype===this.MP_ENDPOINT&&(a.rx=a.x,a.ry=a.y,o.lx=o.x,o.ly=o.y);if((a=o)===i)break}},mp_solve_choices:function(t,e,i,r,s,n,o){var a,l,u,c,h,d,p,f,_,m,g,y,v,A,b,C,x,P,E,w,S,O,M,T,j,N;for(h=n.length+1,m=new Array(h),_=new Array(h),u=new Array(h),b=new Array(h),j=0;j<h;j++)b[j]=u[j]=_[j]=m[j]=0;for(p=0,f=t,y=0;;){if(v=f.next,0===p)if(f.rtype===this.MP_GIVEN){if(v.ltype===this.MP_GIVEN)return a=Math.atan2(s[0],r[0]),w=(E=this.mp_n_sin_cos(t.right_given()-a))[0],S=E[1],M=(O=this.mp_n_sin_cos(e.left_given()-a))[0],T=O[1],void this.mp_set_controls(t,e,r[0],s[0],S,w,-T,M);u[0]=f.right_given()-Math.atan2(s[0],r[0]),u[0]=this.reduce_angle(u[0]),m[0]=0,_[0]=0}else if(f.rtype===this.MP_CURL){if(v.ltype===this.MP_CURL)return t.rtype=this.MP_EXPLICIT,e.ltype=this.MP_EXPLICIT,g=Math.abs(e.left_tension()),C=Math.abs(t.right_tension()),A=this.UNITY/(3*C),t.rx=t.x+r[0]*A,t.ry=t.y+s[0]*A,A=this.UNITY/(3*g),e.lx=e.x-r[0]*A,void(e.ly=e.y-s[0]*A);P=f.right_curl(),g=Math.abs(v.left_tension()),C=Math.abs(f.right_tension()),m[0]=this.mp_curl_ratio(P,C,g),u[0]=-o[1]*m[0],_[0]=0}else f.rtype===this.MP_OPEN&&(m[0]=0,u[0]=0,_[0]=this.FRACTION_ONE);else if(f.ltype===this.MP_END_CYCLE||f.ltype===this.MP_OPEN){if(a=this.UNITY/(3*Math.abs(y.right_tension())-this.UNITY),x=n[p]*(this.FRACTION_THREE-this.UNITY/Math.abs(y.right_tension())),c=this.UNITY/(3*Math.abs(v.left_tension())-this.UNITY),d=n[p-1]*(this.FRACTION_THREE-this.UNITY/Math.abs(v.left_tension())),x*=P=this.FRACTION_ONE-m[p-1]*a,(g=Math.abs(f.left_tension()))<(C=Math.abs(f.right_tension()))?x*=Math.pow(g/C,2):g>C&&(d*=Math.pow(C/g,2)),A=d/(d+x),m[p]=A*c,l=-o[p+1]*m[p],y.rtype===this.MP_CURL?(_[p]=0,u[p]=l-o[1]*(this.FRACTION_ONE-A)):(A=(this.FRACTION_ONE-A)/P,l-=o[p]*A,A*=a,u[p]=l-u[p-1]*A,_[p]=-_[p-1]*A),f.ltype===this.MP_END_CYCLE){for(a=0,c=this.FRACTION_ONE;0===(p-=1)&&(p=i),a=u[p]-a*m[p],c=_[p]-c*m[p],p!==i;);for(a/=this.FRACTION_ONE-c,b[i]=a,u[0]=a,N=1;N<i;N++)u[N]=u[N]+a*_[N];break}}else{if(f.ltype===this.MP_CURL){P=f.left_curl(),g=Math.abs(f.left_tension()),C=Math.abs(y.right_tension()),A=this.mp_curl_ratio(P,g,C),b[i]=-u[i-1]*A/(this.FRACTION_ONE-A*m[i-1]);break}if(f.ltype===this.MP_GIVEN){b[i]=f.left_given()-Math.atan2(s[i-1],r[i-1]),b[i]=this.reduce_angle(b[i]);break}}y=f,f=v,p+=1}for(p=i-1;p>-1;p--)b[p]=u[p]-b[p+1]*m[p];for(f=t,p=0;v=f.next,w=(E=this.mp_n_sin_cos(b[p]))[0],S=E[1],M=(O=this.mp_n_sin_cos(-o[p+1]-b[p+1]))[0],T=O[1],this.mp_set_controls(f,v,r[p],s[p],S,w,T,M),f=v,++p!==i;);},mp_n_sin_cos:function(t){return[Math.cos(t),Math.sin(t)]},mp_set_controls:function(t,e,i,r,s,n,o,a){var l,u,c,h,d;c=Math.abs(e.left_tension()),l=Math.abs(t.right_tension()),d=this.mp_velocity(s,n,o,a,l),u=this.mp_velocity(o,a,s,n,c),(t.right_tension()<0||e.left_tension()<0)&&(s>=0&&o>=0||s<=0&&o<=0)&&(h=Math.abs(s)*a+Math.abs(o)*n)>0&&(h*=1.00024414062,t.right_tension()<0&&this.mp_ab_vs_cd(Math.abs(o),this.FRACTION_ONE,d,h)<0&&(d=Math.abs(o)/h),e.left_tension()<0&&this.mp_ab_vs_cd(Math.abs(s),this.FRACTION_ONE,u,h)<0&&(u=Math.abs(s)/h)),t.rx=t.x+(i*n-r*s)*d,t.ry=t.y+(r*n+i*s)*d,e.lx=e.x-(i*a+r*o)*u,e.ly=e.y-(r*a-i*o)*u,t.rtype=this.MP_EXPLICIT,e.ltype=this.MP_EXPLICIT},mp_pyth_add:function(t,e){return math.A.hypot(t,e)},mp_curl_ratio:function(t,e,i){var r=1/e,s=1/i;return Math.min(4,((3-r)*r*r*t+s*s*s)/(r*r*r*t+(3-s)*s*s))},mp_ab_vs_cd:function(t,e,i,r){return t*e===i*r?0:t*e>i*r?1:-1},mp_velocity:function(t,e,i,r,s){return Math.min(4,(2+Math.sqrt(2)*(t-i/16)*(i-t/16)*(e-r))/(1.5*s*(2+(Math.sqrt(5)-1)*e+(3-Math.sqrt(5))*r)))},reduce_angle:function(t){return Math.abs(t)>this.ONE_EIGHTY_DEG&&(t>0?t-=this.THREE_SIXTY_DEG:t+=this.THREE_SIXTY_DEG),t},makeknots:function(t,e){var i,r,s=[];for(r=t.length,i=0;i<r;i++)s.push({x:t[i][0],y:t[i][1],ltype:this.MP_OPEN,rtype:this.MP_OPEN,lx:!1,rx:!1,ly:e,ry:e,left_curl:function(){return this.lx||0},right_curl:function(){return this.rx||0},left_tension:function(){return this.ly||1},right_tension:function(){return this.ry||1},set_right_curl:function(t){this.rx=t||0},set_left_curl:function(t){this.lx=t||0}});for(r=s.length,i=0;i<r;i++)s[i].next=s[i+1]||s[i],s[i].set_right_given=s[i].set_right_curl,s[i].set_left_given=s[i].set_left_curl,s[i].right_given=s[i].right_curl,s[i].left_given=s[i].left_curl;return s[r-1].next=s[0],s},curve:function(t,e){var i,r,s,n,o,a,l=!1,u=[],c=[];for(n in o=1,(e=e||{tension:1,direction:{},curl:{},isClosed:!1}).hasOwnProperty("tension")&&(o=utils_type.A.evaluate(e.tension)),r=(i=this.makeknots(t,o)).length,utils_type.A.exists(e.isClosed)&&utils_type.A.evaluate(e.isClosed)&&(l=!0),l||(i[0].ltype=this.MP_ENDPOINT,i[0].rtype=this.MP_CURL,i[r-1].rtype=this.MP_ENDPOINT,i[r-1].ltype=this.MP_CURL),e)if(e.hasOwnProperty(n)){if(s=parseInt(n,10),isNaN(s)||s<0||s>=r)continue;if(a=e[s],utils_type.A.exists(a.type)&&"curl"===a.type)o=utils_type.A.evaluate(a.curl),0===s?(i[s].rtype=this.MP_CURL,i[s].set_right_curl(o)):s===r-1?(i[s].ltype=this.MP_CURL,i[s].set_left_curl(o)):(i[s].ltype=this.MP_CURL,i[s].rtype=this.MP_CURL,i[s].lx=o,i[s].rx=o);utils_type.A.exists(a.direction)&&(o=utils_type.A.evaluate(a.direction),utils_type.A.isArray(o)?(!1!==o[0]&&(i[s].lx=o[0]*Math.PI/180,i[s].ltype=this.MP_GIVEN),!1!==o[1]&&(i[s].rx=o[1]*Math.PI/180,i[s].rtype=this.MP_GIVEN)):(i[s].lx=o*Math.PI/180,i[s].rx=o*Math.PI/180,i[s].ltype=i[s].rtype=this.MP_GIVEN)),utils_type.A.exists(a.tension)&&(o=utils_type.A.evaluate(a.tension),utils_type.A.isArray(o)?(!1!==o[0]&&(i[s].ly=utils_type.A.evaluate(o[0])),!1!==o[1]&&(i[s].ry=utils_type.A.evaluate(o[1]))):(i[s].ly=o,i[s].ry=o))}for(this.make_choices(i),s=0;s<r-1;s++)u.push(i[s].x),u.push(i[s].rx),u.push(i[s+1].lx),c.push(i[s].y),c.push(i[s].ry),c.push(i[s+1].ly);return u.push(i[r-1].x),c.push(i[r-1].y),l&&(u.push(i[r-1].rx),c.push(i[r-1].ry),u.push(i[0].lx),c.push(i[0].ly),u.push(i[0].x),c.push(i[0].y)),[u,c]}};const metapost=math.A.Metapost;var bitReverse=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],NAMEMAX=256;jxg.A.Util=jxg.A.Util||{},jxg.A.Util.Unzip=function(t){var i,r,s,n,o=[],a=0,l=[],u=new Array(32768),c=0,h=!1,d=t.length,p=0,f=1,_=new Array(288),m=new Array(32),g=0,y=null,v=0,A=new Array(17),b=[];function C(){return p<d?t[p++]:-1}function x(){f=1}function P(){var t;try{t=1&f,0===(f>>=1)&&(t=1&(f=C()),f=f>>1|128)}catch(e){throw console.log("Probably problems on iOS7 with >>"),e}return t}function E(t){var i=0,r=t;try{for(;r--;)i=i<<1|P();t&&(i=bitReverse[i]>>8-t)}catch(e){throw console.log("Probably problems on iOS7 with >>"),e}return i}function w(){c=0}function S(t){u[c++]=t,o.push(String.fromCharCode(t)),32768===c&&(c=0)}function O(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1}function M(){for(;;){if(A[v]>=n)return-1;if(s[A[v]]===v)return A[v]++;A[v]++}}function T(){var t,e=y[g];if(17===v)return-1;if(g++,v++,(t=M())>=0)e.b0=t;else if(e.b0=32768,T())return-1;if((t=M())>=0)e.b1=t,e.jump=null;else if(e.b1=32768,e.jump=y[g],e.jumppos=g,T())return-1;return v--,0}function j(t,e,i,r){var o;for(y=t,g=0,s=i,n=e,o=0;o<17;o++)A[o]=0;return v=0,T()?-1:0}function N(t){for(var e,i,r=0,s=t[r];;)if(P()){if(!(32768&s.b1))return s.b1;for(s=s.jump,e=t.length,i=0;i<e;i++)if(t[i]===s){r=i;break}}else{if(!(32768&s.b0))return s.b0;s=t[++r]}}function R(){var t,e,i,r,s,n,o,a,l,h,d,p,f,g,y;do{if(t=P(),0===(e=E(2)))for(x(),l=C(),l|=C()<<8,d=C(),65535&(l^~(d|=C()<<8))&&jxg.A.debug("BlockLen checksum mismatch\n");l--;)S(C());else if(1===e)for(;;)if((r=bitReverse[E(7)]>>1)>23?(r=r<<1|P())>199?r=(r-=128)<<1|P():(r-=48)>143&&(r+=136):r+=256,r<256)S(r);else{if(256===r)break;for(a=E(cplext[r-=257])+cplens[r],r=bitReverse[E(5)]>>3,cpdext[r]>8?(h=E(8),h|=E(cpdext[r]-8)<<8):h=E(cpdext[r]),h+=cpdist[r],r=0;r<a;r++)S(u[c-h&32767])}else if(2===e){for(n=new Array(320),f=257+E(5),g=1+E(5),y=4+E(4),r=0;r<19;r++)n[r]=0;for(r=0;r<y;r++)n[border[r]]=E(3);for(a=m.length,i=0;i<a;i++)m[i]=new O;if(j(m,19,n))return w(),1;for(p=f+g,i=0;i<p;)if((r=N(m))<16)n[i++]=r;else if(16===r){if(i+(r=3+E(2))>p)return w(),1;for(s=i?n[i-1]:0;r--;)n[i++]=s}else{if(i+(r=17===r?3+E(3):11+E(7))>p)return w(),1;for(;r--;)n[i++]=0}for(a=_.length,i=0;i<a;i++)_[i]=new O;if(j(_,f,n))return w(),1;for(a=_.length,i=0;i<a;i++)m[i]=new O;for(o=[],i=f;i<n.length;i++)o[i-f]=n[i];if(j(m,g,o))return w(),1;for(;;)if((r=N(_))>=256){if(0===(r-=256))break;for(a=E(cplext[r-=1])+cplens[r],r=N(m),cpdext[r]>8?(h=E(8),h|=E(cpdext[r]-8)<<8):h=E(cpdext[r]),h+=cpdist[r];a--;)S(u[c-h&32767])}else S(r)}}while(!t);return w(),x(),0}function k(){var t,s,n,u,c,d=[];try{if(o=[],h=!1,d[0]=C(),d[1]=C(),120===d[0]&&218===d[1]&&(R(),l[a]=[o.join(""),"geonext.gxt"],a++),31===d[0]&&139===d[1]&&(D(),l[a]=[o.join(""),"file"],a++),80===d[0]&&75===d[1]){if(h=!0,d[2]=C(),d[3]=C(),3===d[2]&&4===d[3]){for(d[0]=C(),d[1]=C(),i=C(),i|=C()<<8,c=C(),c|=C()<<8,C(),C(),C(),C(),C(),C()<<8,C()<<16,C()<<24,C(),C()<<8,C()<<16,C()<<24,C(),C()<<8,C()<<16,C()<<24,u=C(),u|=C()<<8,n=C(),n|=C()<<8,t=0,b=[];u--;)"/"===(s=C())|":"===s?t=0:t<NAMEMAX-1&&(b[t++]=String.fromCharCode(s));for(r||(r=b),t=0;t<n;)s=C(),t++;if(8===c&&(R(),l[a]=new Array(2),l[a][0]=o.join(""),l[a][1]=b.join(""),a++),D())return!1}return!0}}catch(e){throw console.log("Probably problems on iOS7 with >>"),e}return!1}function D(){var t,e,r=[];if(8&i&&(r[0]=C(),r[1]=C(),r[2]=C(),r[3]=C(),80===r[0]&&75===r[1]&&7===r[2]&&8===r[3]?(C(),C()<<8,C()<<16,C()<<24):r[0]|r[1]<<8|r[2]<<16|r[3]<<24,C(),C()<<8,C()<<16,C()<<24,C(),C()<<8,C()<<16,C()<<24),h&&k())return!1;if(r[0]=C(),8!==r[0])return!0;if(i=C(),C(),C(),C(),C(),C(),C(),4&i)for(r[0]=C(),r[2]=C(),v=r[0]+256*r[1],t=0;t<v;t++)C();if(8&i)for(t=0,b=[],e=C();e;)"7"!==e&&":"!==e||(t=0),t<NAMEMAX-1&&(b[t++]=e),e=C();if(16&i)for(e=C();e;)e=C();return 2&i&&(C(),C()),R(),C(),C()<<8,C()<<16,C()<<24,C(),C()<<8,C()<<16,C()<<24,h&&k(),!1}A[0]=0,jxg.A.Util.Unzip.prototype.unzipFile=function(t){var e;for(this.unzip(),e=0;e<l.length;e++)if(l[e][1]===t)return l[e][0];return""},jxg.A.Util.Unzip.prototype.unzip=function(){return k(),l}};const zip=jxg.A.Util;var UTF8_ACCEPT=0,UTF8D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,10,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,11,6,6,6,5,8,8,8,8,8,8,8,8,8,8,8,0,12,24,36,60,96,84,12,12,12,48,72,12,12,12,12,12,12,12,12,12,12,12,12,12,0,12,12,12,12,12,0,12,0,12,12,12,24,12,12,12,12,12,24,12,24,12,12,12,12,12,12,12,12,12,24,12,12,12,12,12,24,12,12,12,12,12,12,12,24,12,12,12,12,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,12,12,12,12,12];jxg.A.Util=jxg.A.Util||{},jxg.A.Util.UTF8={encode:function(t){var e,i,r="",s=t.length;if(t=t.replace(/\r\n/g,"\n"),"function"===typeof unescape&&"function"===typeof encodeURIComponent)return unescape(encodeURIComponent(t));for(e=0;e<s;e++)(i=t.charCodeAt(e))<128?r+=String.fromCharCode(i):i>127&&i<2048?(r+=String.fromCharCode(i>>6|192),r+=String.fromCharCode(63&i|128)):(r+=String.fromCharCode(i>>12|224),r+=String.fromCharCode(i>>6&63|128),r+=String.fromCharCode(63&i|128));return r},decode:function(t){var e,i,r,s=0,n=0,o=UTF8_ACCEPT,a=[],l=t.length,u=[];for(e=0;e<l;e++)i=t.charCodeAt(e),r=UTF8D[i],n=o!==UTF8_ACCEPT?63&i|n<<6:255>>r&i,(o=UTF8D[256+o+r])===UTF8_ACCEPT&&(n>65535?a.push(55232+(n>>10),56320+(1023&n)):a.push(n),++s%1e4===0&&(u.push(String.fromCharCode.apply(null,a)),a=[]));return u.push(String.fromCharCode.apply(null,a)),u.join("")},asciiCharCodeAt:function(t,e){var i=t.charCodeAt(e);if(i>255)switch(i){case 8364:i=128;break;case 8218:i=130;break;case 402:i=131;break;case 8222:i=132;break;case 8230:i=133;break;case 8224:i=134;break;case 8225:i=135;break;case 710:i=136;break;case 8240:i=137;break;case 352:i=138;break;case 8249:i=139;break;case 338:i=140;break;case 381:i=142;break;case 8216:i=145;break;case 8217:i=146;break;case 8220:i=147;break;case 8221:i=148;break;case 8226:i=149;break;case 8211:i=150;break;case 8212:i=151;break;case 732:i=152;break;case 8482:i=153;break;case 353:i=154;break;case 8250:i=155;break;case 339:i=156;break;case 382:i=158;break;case 376:i=159}return i}};const utils_encoding=jxg.A.Util.UTF8;var alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pad="=";jxg.A.Util=jxg.A.Util||{},jxg.A.Util.Base64={_getByte:function(t,e){return 255&t.charCodeAt(e)},_getIndex:function(t,e){return alphabet.indexOf(t.charAt(e))},encode:function(t){var e,i,r,s,n,o=[];for(s=(r=(n=utils_encoding.encode(t)).length)%3,e=0;e<r-s;e+=3)i=this._getByte(n,e)<<16|this._getByte(n,e+1)<<8|this._getByte(n,e+2),o.push(alphabet.charAt(i>>18),alphabet.charAt(i>>12&63),alphabet.charAt(i>>6&63),alphabet.charAt(63&i));switch(s){case 1:i=this._getByte(n,r-1),o.push(alphabet.charAt(i>>2),alphabet.charAt(i<<4&63),pad,pad);break;case 2:i=this._getByte(n,r-2)<<8|this._getByte(n,r-1),o.push(alphabet.charAt(i>>10),alphabet.charAt(i>>4&63),alphabet.charAt(i<<2&63),pad)}return o.join("")},decode:function(t,e){var i,r,s,n,o,a,l=[],u=[];if((s=(i=t.replace(/[^A-Za-z0-9+/=]/g,"")).length)%4!==0)throw new Error("JSXGraph/utils/base64: Can't decode string (invalid input length).");for(i.charAt(s-1)===pad&&(n=1,i.charAt(s-2)===pad&&(n=2),s-=4),r=0;r<s;r+=4)o=this._getIndex(i,r)<<18|this._getIndex(i,r+1)<<12|this._getIndex(i,r+2)<<6|this._getIndex(i,r+3),u.push(o>>16,o>>8&255,255&o),r%1e4===0&&(l.push(String.fromCharCode.apply(null,u)),u=[]);switch(n){case 1:o=this._getIndex(i,s)<<12|this._getIndex(i,s+1)<<6|this._getIndex(i,s+2),u.push(o>>10,o>>2&255);break;case 2:o=this._getIndex(i,r)<<6|this._getIndex(i,r+1),u.push(o>>4)}return l.push(String.fromCharCode.apply(null,u)),a=l.join(""),e&&(a=utils_encoding.decode(a)),a},decodeAsArray:function(t){var e,i=this.decode(t),r=[],s=i.length;for(e=0;e<s;e++)r[e]=i.charCodeAt(e);return r}};const base64=jxg.A.Util.Base64;jxg.A.Server={modules:{},runningCalls:{},handleError:function(t){jxg.A.debug("error occured, server says: "+t.message)},callServer:function(t,e,i,r){var s,n,o,a,l,u;r=r||!1,l=utils_type.A.toJSON(i);do{a=t+Math.floor(4096*Math.random())}while(utils_type.A.exists(this.runningCalls[a]));return this.runningCalls[a]={action:t},utils_type.A.exists(i.module)&&(this.runningCalls[a].module=i.module),s=jxg.A.serverBase+"JXGServer.py",n="action="+escape(t)+"&id="+a+"&dataJSON="+escape(base64.encode(l)),this.cbp=function(t){var i,r,s,n,o,a,l,u;if(i=new zip.Unzip(base64.decodeAsArray(t)).unzip(),utils_type.A.isArray(i)&&i.length>0&&(i=i[0][0]),utils_type.A.exists(i))if("error"===(r=window.JSON&&window.JSON.parse?window.JSON.parse(i):new Function("return "+i)()).type)this.handleError(r);else if("response"===r.type){for(a=r.id,l=0;l<r.fields.length;l++)n=(s=r.fields[l]).namespace+("object"===typeof new Function("return "+s.namespace)()?".":".prototype.")+s.name+" = "+s.value,new Function(n)();for(l=0;l<r.handler.length;l++){for(s=r.handler[l],o=[],u=0;u<s.parameters.length;u++)o[u]='"'+s.parameters[u]+'": '+s.parameters[u];n="if(typeof JXG.Server.modules."+this.runningCalls[a].module+' == "undefined")JXG.Server.modules.'+this.runningCalls[a].module+" = {};",n+="JXG.Server.modules."+this.runningCalls[a].module+"."+s.name+"_cb = "+s.callback+";",n+="JXG.Server.modules."+this.runningCalls[a].module+"."+s.name+" = function ("+s.parameters.join(",")+', __JXGSERVER_CB__, __JXGSERVER_SYNC) {if(typeof __JXGSERVER_CB__ == "undefined") __JXGSERVER_CB__ = JXG.Server.modules.'+this.runningCalls[a].module+"."+s.name+"_cb;var __JXGSERVER_PAR__ = {"+o.join(",")+', "module": "'+this.runningCalls[a].module+'", "handler": "'+s.name+'" };JXG.Server.callServer("exec", __JXGSERVER_CB__, __JXGSERVER_PAR__, __JXGSERVER_SYNC);};',new Function(n)()}delete this.runningCalls[a],e(r.data)}},this.cb=jxg.A.bind(this.cbp,this),window.XMLHttpRequest?(o=new XMLHttpRequest).overrideMimeType("text/plain; charset=iso-8859-1"):o=new ActiveXObject("Microsoft.XMLHTTP"),!(!o||(o.open("POST",s,!r),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r||(o.onreadystatechange=(u=this.cb,function(){return 4===o.readyState&&200===o.status&&(u(o.responseText),!0)})),o.send(n),!r))&&(this.cb(o.responseText),!0)},loadModule_cb:function(t){var e;for(e=0;e<t.length;e++)jxg.A.debug(t[e].name+": "+t[e].value)},loadModule:function(t){return jxg.A.Server.callServer("load",jxg.A.Server.loadModule_cb,{module:t},!0)}},jxg.A.Server.load=jxg.A.Server.loadModule;const server=jxg.A.Server;var undef;math.A.Symbolic={generateSymbolicCoordinatesPartial:function(t,e,i,r){var s,n,o,a=e.ancestors,l=0,u=function(t){return"underscore"===r?i+"_{"+t+"}":"brace"===r?i+"["+t+"]":i+t};for(n in t.listOfFreePoints=[],t.listOfDependantPoints=[],a)if(a.hasOwnProperty(n)&&(s=0,utils_type.A.isPoint(a[n]))){for(o in a[n].ancestors)a[n].ancestors.hasOwnProperty(o)&&s++;0===s?(a[n].symbolic.x=a[n].coords.usrCoords[1],a[n].symbolic.y=a[n].coords.usrCoords[2],t.listOfFreePoints.push(a[n])):(l+=1,a[n].symbolic.x=u(l),l+=1,a[n].symbolic.y=u(l),t.listOfDependantPoints.push(a[n]))}return utils_type.A.isPoint(e)&&(e.symbolic.x="x",e.symbolic.y="y"),l},clearSymbolicCoordinates:function(t){var e=function(t){var e,i=t&&t.length||0;for(e=0;e<i;e++)utils_type.A.isPoint(t[e])&&(t[e].symbolic.x="",t[e].symbolic.y="")};e(t.listOfFreePoints),e(t.listOfDependantPoints),delete t.listOfFreePoints,delete t.listOfDependantPoints},generatePolynomials:function(t,e,i){var r,s,n,o,a=e.ancestors,l=[],u=[];for(r in i&&this.generateSymbolicCoordinatesPartial(t,e,"u","brace"),a[e.id]=e,a)if(a.hasOwnProperty(r)&&(o=0,l=[],utils_type.A.isPoint(a[r]))){for(s in a[r].ancestors)a[r].ancestors.hasOwnProperty(s)&&o++;if(o>0)for(l=a[r].generatePolynomial(),n=0;n<l.length;n++)u.push(l[n])}return i&&this.clearSymbolicCoordinates(t),u},geometricLocusByGroebnerBase:function(t,e){var i,r,s,n,o,a,l,u,c,h,d,p,f=t.options.locus,_={},m=this.generateSymbolicCoordinatesPartial(t,e,"u","brace"),g=new base_coords.A(constants.A.COORDS_BY_USR,[0,0],t),y=new base_coords.A(constants.A.COORDS_BY_USR,[t.canvasWidth,t.canvasHeight],t),v=1,A=0,b=0,C=0;if(server.modules.geoloci===undef&&server.loadModule("geoloci"),server.modules.geoloci===undef)throw new Error("JSXGraph: Unable to load JXG.Server module 'geoloci.py'.");if(a=g.usrCoords[1],l=y.usrCoords[1],u=y.usrCoords[2],c=g.usrCoords[2],f.translateToOrigin&&t.listOfFreePoints.length>0){for(A=(s=f.toOrigin!==undef&&null!==f.toOrigin&&utils_type.A.isInArray(t.listOfFreePoints,f.toOrigin.id)?f.toOrigin:t.listOfFreePoints[0]).symbolic.x,b=s.symbolic.y,o=0;o<t.listOfFreePoints.length;o++)t.listOfFreePoints[o].symbolic.x-=A,t.listOfFreePoints[o].symbolic.y-=b;if(a-=A,l-=A,u-=b,c-=b,f.translateTo10&&t.listOfFreePoints.length>1){for(n=f.to10!==undef&&null!==f.to10&&f.to10.id!==f.toOrigin.id&&utils_type.A.isInArray(t.listOfFreePoints,f.to10.id)?f.to10:t.listOfFreePoints[0].id===s.id?t.listOfFreePoints[1]:t.listOfFreePoints[0],C=geometry.A.rad([1,0],[0,0],[n.symbolic.x,n.symbolic.y]),h=Math.cos(-C),d=Math.sin(-C),o=0;o<t.listOfFreePoints.length;o++)p=t.listOfFreePoints[o].symbolic.x,t.listOfFreePoints[o].symbolic.x=h*t.listOfFreePoints[o].symbolic.x-d*t.listOfFreePoints[o].symbolic.y,t.listOfFreePoints[o].symbolic.y=d*p+h*t.listOfFreePoints[o].symbolic.y;if(n.symbolic.y=0,p=a,a=h*a-d*u,u=d*p+h*u,p=l,l=h*l-d*c,c=d*p+h*c,f.stretch&&Math.abs(n.symbolic.x)>math.A.eps){for(v=n.symbolic.x,o=0;o<t.listOfFreePoints.length;o++)t.listOfFreePoints[o].symbolic.x/=v,t.listOfFreePoints[o].symbolic.y/=v;for(o=0;o<t.objectsList.length;o++)t.objectsList[o].elementClass===constants.A.OBJECT_CLASS_CIRCLE&&"pointRadius"===t.objectsList[o].method&&(_[o]=t.objectsList[o].radius,t.objectsList[o].radius/=v);a/=v,l/=v,u/=v,c/=v,n.symbolic.x=1}}for(o=0;o<t.listOfFreePoints.length;o++)p=t.listOfFreePoints[o].symbolic.x,Math.abs(p)<math.A.eps&&(t.listOfFreePoints[o].symbolic.x=0),Math.abs(p-Math.round(p))<math.A.eps&&(t.listOfFreePoints[o].symbolic.x=Math.round(p)),p=t.listOfFreePoints[o].symbolic.y,Math.abs(p)<math.A.eps&&(t.listOfFreePoints[o].symbolic.y=0),Math.abs(p-Math.round(p))<math.A.eps&&(t.listOfFreePoints[o].symbolic.y=Math.round(p))}for(o in i=this.generatePolynomials(t,e).join(","),this.cbp=function(t){r=t},this.cb=utils_type.A.bind(this.cbp,this),server.modules.geoloci.lociCoCoA(a,l,u,c,m,i,v,C,A,b,this.cb,!0),this.clearSymbolicCoordinates(t),_)_.hasOwnProperty(o)&&(t.objects[o].radius=_[o]);return r}};const symbolic=math.A.Symbolic;math.A.Clip={_isSeparator:function(t){return isNaN(t.coords.usrCoords[1])&&isNaN(t.coords.usrCoords[2])},makeDoublyLinkedList:function(t){var e,i=null,r=[],s=t.length;if(s>0)for(e=0;e<s;e++)this._isSeparator(t[e])?(t[e]._next=t[(e+1)%s],t[e]._prev=t[(s+e-1)%s]):(null===i&&(i=e,r.push(i)),this._isSeparator(t[(e+1)%s])||e===s-1?(t[e]._next=t[i],t[i]._prev=t[e],t[e]._end=!0,i=null):(t[e]._next=t[(e+1)%s],t[i]._prev=t[e]),this._isSeparator(t[(s+e-1)%s])||(t[e]._prev=t[(s+e-1)%s]));return r},Vertex:function(t,e,i,r,s,n){this.pos=e,this.intersection=!0,this.coords=t,this.elementClass=constants.A.OBJECT_CLASS_POINT,this.data={alpha:i,path:r,pathname:s,done:!1,type:n,idx:0},this.neighbour=null,this.entry_exit=!1},_addToList:function(t,e,i){var r=t.length,s=math.A.eps*math.A.eps;r>0&&Math.abs(t[r-1].coords.usrCoords[0]-e.usrCoords[0])<s&&Math.abs(t[r-1].coords.usrCoords[1]-e.usrCoords[1])<s&&Math.abs(t[r-1].coords.usrCoords[2]-e.usrCoords[2])<s||t.push({pos:i,intersection:!1,coords:e,elementClass:constants.A.OBJECT_CLASS_POINT})},sortIntersections:function(t){var e,i,r,s,n,o,a=[],l=t.length;for(e=0;e<l;e++)if(t[e].sort((function(t,e){return t.data.alpha>e.data.alpha?1:-1})),t[e].length>0){for(n=t[e].length-1,o=(s=(r=t[e][0]).data.path[r.pos])._next,e===l-1&&(s._end=!1),0===r.data.alpha&&"T"===r.data.type?(s.intersection=!0,s.data=r.data,s.neighbour=r.neighbour,s.neighbour.neighbour=s,s.entry_exit=!1,t[e][0]=s):(r._prev=s,r._prev._next=r),i=1;i<=n;i++)(r=t[e][i])._prev=t[e][i-1],r._prev._next=r;(r=t[e][n])._next=o,r._next._prev=r,e===l-1&&(r._end=!0),a=a.concat(t[e])}return a},_inbetween:function(t,e,i){var r,s=math.A.eps*math.A.eps,n=i[1]-e[1],o=i[2]-e[2],a=t[1]-e[1],l=t[2]-e[2];return 0===n&&0===o&&0===a&&0===l||(r=Math.abs(a)<s&&Math.abs(n)<s?l/o:a/n,Math.abs(r)<s&&(r=0),r)},_print_array:function(t){var i,r;for(i=0;i<t.length;i++)try{r="",t[i]._end&&(r=" end"),console.log(i,t[i].coords.usrCoords,t[i].data.type,"\t","prev",t[i]._prev.coords.usrCoords,"next",t[i]._next.coords.usrCoords+r)}catch(e){console.log(i,t[i].coords.usrCoords)}},_print_list:function(t){for(var e,i=0;i<100&&(e=t.data?t.data.alpha:"-",console.log("\t",t.coords.usrCoords,"\n\t\tis:",t.intersection,"end:",t._end,e,"\n\t\t-:",t._prev.coords.usrCoords,"\n\t\t+:",t._next.coords.usrCoords,"\n\t\tn:",t.intersection?t.neighbour.coords.usrCoords:"-"),!t._end);)t=t._next,i++},_noOverlap:function(t,e,i,r){var s,n,o,a,l,u=Math.sqrt(math.A.eps),c=!1;for(s=0;s<3;s++)if(n=Math.min(t[s],e[s]),o=Math.max(t[s],e[s]),a=Math.min(i[s],r[s]),l=Math.max(i[s],r[s]),o<a-u||n>l+u){c=!0;break}return c},findIntersections:function(t,e,i){var r,s,n,o,a,l,u,c,h,d,p,f,_,m=[],g=100*math.A.eps,y=t.length,v=e.length,A=[],b=[],C=[],x=!1,P=!1,E=!1;for(s=0;s<v;s++)C.push([]);for(r=0;r<y;r++)if(b.push([]),this._isSeparator(t[r])||this._isSeparator(t[(r+1)%y]))x=!0;else{if(x&&r===y-1)break;for(o=t[r].coords.usrCoords,a=t[(r+1)%y].coords.usrCoords,s=0;s<v;s++)if(this._isSeparator(e[s])||this._isSeparator(e[(s+1)%v]))P=!0;else{if(P&&s===v-1)break;if(l=e[s].coords.usrCoords,u=e[(s+1)%v].coords.usrCoords,!this._noOverlap(o,a,l,u)&&(m=geometry.A.meetSegmentSegment(o,a,l,u),c=geometry.A.distance(o,a,3),h=geometry.A.distance(l,u,3),m[1]*c>-g&&m[1]<1-g/c&&m[2]*h>-g&&m[2]<1-g/h||m[1]===1/0&&m[2]===1/0&&math.A.norm(m[0],3)<g)){if(n=new base_coords.A(constants.A.COORDS_BY_USER,m[0],i),p="X",Math.abs(m[1])*c<g||Math.abs(m[2])*h<g)p="T",Math.abs(m[1])*c<g&&(m[1]=0),Math.abs(m[2])*h<g&&(m[2]=0),n=0===m[1]?new base_coords.A(constants.A.COORDS_BY_USER,o,i):new base_coords.A(constants.A.COORDS_BY_USER,l,i);else if(m[1]===1/0&&m[2]===1/0&&math.A.norm(m[0],3)<g){(d=this._inbetween(o,l,u))>=0&&d<1&&(p="T",n=new base_coords.A(constants.A.COORDS_BY_USER,o,i),m[1]=0,m[2]=d,f=new this.Vertex(n,r,m[1],t,"S",p),_=new this.Vertex(n,s,m[2],e,"C",p),f.neighbour=_,_.neighbour=f,b[r].push(f),C[s].push(_)),d=this._inbetween(l,o,a),geometry.A.distance(o,l,3)>g&&d>=0&&d<1&&(p="T",n=new base_coords.A(constants.A.COORDS_BY_USER,l,i),m[1]=d,m[2]=0,f=new this.Vertex(n,r,m[1],t,"S",p),_=new this.Vertex(n,s,m[2],e,"C",p),f.neighbour=_,_.neighbour=f,b[r].push(f),C[s].push(_));continue}E,f=new this.Vertex(n,r,m[1],t,"S",p),_=new this.Vertex(n,s,m[2],e,"C",p),f.neighbour=_,_.neighbour=f,b[r].push(f),C[s].push(_)}}}for(A=this.sortIntersections(b),r=0;r<A.length;r++)A[r].data.idx=r,A[r].neighbour.data.idx=r;return[A,this.sortIntersections(C)]},_getPosition:function(t,e,i,r){var s=geometry.A.det3p(t,e,i),n=geometry.A.det3p(t,i,r);return geometry.A.det3p(e,i,r)>=0?s>=0&&n>=0?"left":"right":s>=0||n>=0?"left":"right"},_classifyDegenerateIntersections:function(t){var e,i,r,s,n,o,a,l,u,c,h,d,p,f,_=!1;for(_,u=geometry.A.det3p,a=0,t._tours=0;;){if(t.intersection&&"T"===t.data.type&&(e=t._next.coords.usrCoords,i=t._prev.coords.usrCoords,geometry.A.distance(t.coords.usrCoords,e,3)<math.A.eps&&(e=t._next._next.coords.usrCoords),geometry.A.distance(t.coords.usrCoords,i,3)<math.A.eps&&(i=t._prev._prev.coords.usrCoords),s=(n=t.neighbour)._prev.coords.usrCoords,r=n._next.coords.usrCoords,geometry.A.distance(n.coords.usrCoords,r,3)<math.A.eps&&(r=n._next._next.coords.usrCoords),geometry.A.distance(n.coords.usrCoords,s,3)<math.A.eps&&(s=n._prev._prev.coords.usrCoords),h=u(t.coords.usrCoords,i,s),d=u(t.coords.usrCoords,e,r),p=u(t.coords.usrCoords,i,r),f=u(t.coords.usrCoords,e,s),0===h&&0===d&&0===p&&0===f&&(t.coords.usrCoords[1]*=1+Math.random()*math.A.eps,t.coords.usrCoords[2]*=1+Math.random()*math.A.eps,n.coords.usrCoords[1]=t.coords.usrCoords[1],n.coords.usrCoords[2]=t.coords.usrCoords[2],h=u(t.coords.usrCoords,i,s),d=u(t.coords.usrCoords,e,r),p=u(t.coords.usrCoords,i,r),f=u(t.coords.usrCoords,e,s)),c=!1,0===h?geometry.A.affineRatio(t.coords.usrCoords,i,s)<0&&(c=!0):0===d?geometry.A.affineRatio(t.coords.usrCoords,e,r)<0&&(c=!0):0===p?geometry.A.affineRatio(t.coords.usrCoords,i,r)>0&&(c=!0):0===f&&geometry.A.affineRatio(t.coords.usrCoords,e,s)>0&&(c=!0),c&&(l=s,s=r,r=l,l=h,h=p,p=l,l=d,d=f,f=l),utils_type.A.exists(t.delayedStatus)||(t.delayedStatus=[]),0===h&&0===d?t.delayedStatus=["on","on"]:0===h?(o=this._getPosition(e,s,n.coords.usrCoords,r),t.delayedStatus=["on",o]):0===d?(o=this._getPosition(i,s,n.coords.usrCoords,r),t.delayedStatus=[o,"on"]):0===t.delayedStatus.length&&(this._getPosition(i,s,n.coords.usrCoords,r)!==this._getPosition(e,s,n.coords.usrCoords,r)?t.data.type="X":t.data.type="B")),utils_type.A.exists(t._tours)&&t._tours++,t._tours>3||t._end||a>1e3){a>1e3&&console.log("Clipping: _classifyDegenerateIntersections exit"),utils_type.A.exists(t._tours)&&delete t._tours;break}t.intersection&&a++,t=t._next}},_handleIntersectionChains:function(t){var e,i=0,r="Null",s=!1,n=!1,o=!1;for(o;!0===t.intersection&&("T"===t.data.type&&("on"!==t.delayedStatus[0]&&"on"===t.delayedStatus[1]?(s=!0,e=t,r=t.delayedStatus[0]):s&&"on"===t.delayedStatus[0]&&"on"===t.delayedStatus[1]?t.data.type="B":s&&"on"===t.delayedStatus[0]&&"on"!==t.delayedStatus[1]&&(s=!1,r===t.delayedStatus[1]?(e.data.type="DB",t.data.type="DB"):(e.data.type="DX",t.data.type="DX"))),i++),t._end&&(n=!0),!n||s;){if(i>1e3){console.log("Warning: _handleIntersectionChains: intersection chain reached maximum numbers of iterations");break}t=t._next}},_handleFullyDegenerateCase:function(t,e,i){var r,s,n,o,a,l,u,c,h,d,p,f,_,m,g=[t,e];for(n=0;n<2;n++){for(d=(r=g[n]).length,c=0,m=!0;c<d;c++)if(!r[c].intersection){m=!1;break}if(m)for(p=(s=g[(n+1)%2]).length,c=0;c<d;c++){for(a=r[c].coords.usrCoords,l=r[c]._next.coords.usrCoords,o=[.5*(a[0]+l[0]),.5*(a[1]+l[1]),.5*(a[2]+l[2])],h=0,f=!1;h<p;h++)if(Math.abs(geometry.A.det3p(s[h].coords.usrCoords,s[(h+1)%p].coords.usrCoords,o))<math.A.eps){f=!0;break}if(!f){u={pos:c,intersection:!1,coords:new base_coords.A(constants.A.COORDS_BY_USER,o,i),elementClass:constants.A.OBJECT_CLASS_POINT},_=r[c]._next,r[c]._next=u,u._prev=r[c],u._next=_,_._prev=u,r[c]._end&&(r[c]._end=!1,u._end=!0);break}}}},_getStatus:function(t,e){for(;t.intersection&&!t._end;)t=t._next;return[t,0===geometry.A.windingNumber(t.coords.usrCoords,e)?"entry":"exit"]},markEntryExit:function(t,e,i){var r,s,n,o,a,l,u,c=null,h=0;for(l=i.length,a=0;a<l;a++)for(u=i[a],this._classifyDegenerateIntersections(t[u]),this._handleIntersectionChains(t[u]),s=(o=this._getStatus(t[u],e))[0],r=o[1],s._starter=!0,n=0,c=null,h=0;!0===s.intersection&&("X"===s.data.type&&1===h&&(c.entry_exit=r,"exit"===r&&(c.data.type="X"),h=2),"X"!==s.data.type&&"DB"!==s.data.type||(s.entry_exit=r,r="entry"===r?"exit":"entry"),"DX"===s.data.type&&(0===h?(c=s,h=1):1===h?(s.entry_exit=r,c.entry_exit=r,"exit"===r?c.data.type="X":s.data.type="X",r="entry"===r?"exit":"entry",c=null,h=0):2===h&&(s.entry_exit=r,s.data.type="X",r="entry"===r?"exit":"entry",c=null,h=0))),s=s._next,!(utils_type.A.exists(s._starter)||n>1e4);)n++},_stayOnPath:function(t,e){var i=!0;return t.intersection&&"B"!==t.data.type&&(i=e===t.entry_exit),i},_addVertex:function(t,e,i){return isNaN(e.coords.usrCoords[1])||isNaN(e.coords.usrCoords[2])||t.push(e),e.intersection&&e.data.done?(i&&console.log("Add last intersection point",e.coords.usrCoords,"on",e.data.pathname,e.entry_exit,e.data.type),!0):(e.intersection&&(e.data.done=!0,i&&console.log("Add intersection point",e.coords.usrCoords,"on",e.data.pathname,e.entry_exit,e.data.type)),!1)},tracing:function(t,e,i){var r,s,n,o,a=0,l=1e4,u=0,c=[],h=!1,d=!1;for(d;u<e.length&&a<l;)if((n=e[u]).data.done||"X"!==n.data.type)u++;else{d,c.length>0&&c.push([NaN,NaN]),o=n.data.idx,r=t,h=this._addVertex(c,n,d),s=n.entry_exit;do{if(h)break;if("intersection"===i&&"entry"===n.entry_exit||"union"===i&&"exit"===n.entry_exit||"difference"===i&&r===t===("exit"===n.entry_exit)){d;do{if(n=n._next,h=this._addVertex(c,n,d))break}while(this._stayOnPath(n,s));a++}else{d;do{if(n=n._prev,h=this._addVertex(c,n,d))break}while(this._stayOnPath(n,s));a++}if(h)break;if(!n.neighbour)return console.log("Tracing: emergency break - no neighbour!!!!!!!!!!!!!!!!!",a),[[0],[0]];if((n=n.neighbour).data.done)break;n.data.done=!0,s=n.entry_exit,r=n.data.path}while(n.data.idx!==o&&a<l);a>=l&&console.log("Tracing: stopping an infinite loop!",a),u++}return this._getCoordsArrays(c,!1)},isEmptyCase:function(t,e,i){return"intersection"===i&&(0===t.length||0===e.length)||("union"===i&&0===t.length&&0===e.length||"difference"===i&&0===t.length)},_getCoordsArrays:function(t,e){var i,r=[],s=[],n=t.length;for(i=0;i<n;i++)t[i].coords?(r.push(t[i].coords.usrCoords[1]),s.push(t[i].coords.usrCoords[2])):(r.push(t[i][0]),s.push(t[i][1]));return e&&n>0&&(t[0].coords?(r.push(t[0].coords.usrCoords[1]),s.push(t[0].coords.usrCoords[2])):(r.push(t[0][0]),s.push(t[0][1]))),[r,s]},handleEmptyIntersection:function(t,e,i){var r,s,n=!1,o=[];if(0===t.length)return o="union"===i?e:[],this._getCoordsArrays(o,!0);if(0===e.length)return o="intersection"===i?[]:t,this._getCoordsArrays(o,!0);if(t.length>0)for(r=t[0];r.intersection&&!(r=r._next)._end;);if(e.length>0)for(s=e[0];s.intersection&&!(s=s._next)._end;);return 0===geometry.A.windingNumber(r.coords.usrCoords,e)?0!==geometry.A.windingNumber(s.coords.usrCoords,t)?("union"===i?(utils_type.A.concat(o,t),o.push(t[0])):"difference"===i&&(utils_type.A.concat(o,t),o.push(t[0]),geometry.A.signedPolygon(t)*geometry.A.signedPolygon(e)>0&&o.reverse(),o.push([NaN,NaN])),"difference"!==i&&"intersection"!==i||(utils_type.A.concat(o,e),o.push(e[0]),n=!1)):"difference"===i?(utils_type.A.concat(o,t),n=!0):"union"===i&&(utils_type.A.concat(o,t),o.push(t[0]),o.push([NaN,NaN]),utils_type.A.concat(o,e),o.push(e[0])):"intersection"===i?(utils_type.A.concat(o,t),n=!0):"union"===i&&(utils_type.A.concat(o,e),o.push(e[0])),this._getCoordsArrays(o,n)},_countCrossingIntersections:function(t){var e,i=t.length,r=0;for(e=0;e<i;e++)"X"===t[e].data.type&&r++;return r},_getPath:function(t,e){var i,r,s,n,o,a,l,u=[];if(t.elementClass!==constants.A.OBJECT_CLASS_CURVE||t.type!==constants.A.OBJECT_TYPE_ARC&&t.type!==constants.A.OBJECT_TYPE_SECTOR){if(t.elementClass===constants.A.OBJECT_CLASS_CURVE&&utils_type.A.exists(t.points))for(r=t.numberPoints,i=0;i<r;i++)this._addToList(u,t.points[i],i);else if(t.type===constants.A.OBJECT_TYPE_POLYGON)for(i=0;i<t.vertices.length;i++)this._addToList(u,t.vertices[i].coords,i);else if(t.elementClass===constants.A.OBJECT_CLASS_CIRCLE)for(l=359,s=t.Radius(),n=2*Math.PI/l,i=0;i<=l;i++)this._addToList(u,new base_coords.A(constants.A.COORDS_BY_USER,[t.center.coords.usrCoords[0],t.center.coords.usrCoords[1]+Math.cos(i*n)*s,t.center.coords.usrCoords[2]+Math.sin(i*n)*s],e),i);else if(utils_type.A.isArray(t))for(r=t.length,i=0;i<r;i++)utils_type.A.exists(t[i].coords)?this._addToList(u,t[i].coords,i):utils_type.A.isArray(t[i])?this._addToList(u,new base_coords.A(constants.A.COORDS_BY_USER,t[i],e),i):utils_type.A.exists(t[i].usrCoords)&&this._addToList(u,t[i],i)}else{for(o=geometry.A.rad(t.radiuspoint,t.center,t.anglepoint),l=Math.floor(180*o/Math.PI),s=t.Radius(),n=o/l,a=Math.atan2(t.radiuspoint.coords.usrCoords[2]-t.center.coords.usrCoords[2],t.radiuspoint.coords.usrCoords[1]-t.center.coords.usrCoords[1]),t.type===constants.A.OBJECT_TYPE_SECTOR&&this._addToList(u,t.center.coords,0),i=0;i<=l;i++)this._addToList(u,new base_coords.A(constants.A.COORDS_BY_USER,[t.center.coords.usrCoords[0],t.center.coords.usrCoords[1]+Math.cos(i*n+a)*s,t.center.coords.usrCoords[2]+Math.sin(i*n+a)*s],e),i+1);t.type===constants.A.OBJECT_TYPE_SECTOR&&this._addToList(u,t.center.coords,l+2)}return u},greinerHormann:function(t,e,i,r){var s,n,o,a,l=[],u=[];return(s=(l=this._getPath(t,r)).length)>0&&geometry.A.distance(l[0].coords.usrCoords,l[s-1].coords.usrCoords,3)<math.A.eps&&l.pop(),(s=(u=this._getPath(e,r)).length)>0&&geometry.A.distance(u[0].coords.usrCoords,u[s-1].coords.usrCoords,3)<math.A.eps*math.A.eps&&u.pop(),this.isEmptyCase(l,u,i)?[[],[]]:(o=this.makeDoublyLinkedList(l),a=this.makeDoublyLinkedList(u),n=this.findIntersections(l,u,r)[0],this._handleFullyDegenerateCase(l,u,r),this.markEntryExit(l,u,o),this.markEntryExit(u,l,a),0===this._countCrossingIntersections(n)?this.handleEmptyIntersection(l,u,i):this.tracing(l,n,i))},union:function(t,e,i){return this.greinerHormann(t,e,"union",i)},intersection:function(t,e,i){return this.greinerHormann(t,e,"intersection",i)},difference:function(t,e,i){return this.greinerHormann(t,e,"difference",i)}};const clip=math.A.Clip;math.A.Poly={},math.A.Poly.Ring=function(t){this.vars=t},jxg.A.extend(math.A.Poly.Ring.prototype,{}),math.A.Poly.Monomial=function(t,e,i){var r;if(!utils_type.A.exists(t))throw new Error("JSXGraph error: In JXG.Math.Poly.monomial missing parameter 'ring'.");for(utils_type.A.isArray(i)||(i=[]),r=(i=i.slice(0,t.vars.length)).length;r<t.vars.length;r++)i.push(0);this.ring=t,this.coefficient=e||0,this.exponents=utils_type.A.deepCopy(i)},jxg.A.extend(math.A.Poly.Monomial.prototype,{copy:function(){return new math.A.Poly.Monomial(this.ring,this.coefficient,this.exponents)},print:function(){var t,e=[];for(t=0;t<this.ring.vars.length;t++)e.push(this.ring.vars[t]+"^"+this.exponents[t]);return this.coefficient+"*"+e.join("*")}}),math.A.Poly.Polynomial=function(t,e){var i;if(!utils_type.A.exists(t))throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial missing parameter 'ring'.");i=utils_type.A.exists(e)&&utils_type.A.isString(e)?void 0:[],this.ring=t,this.monomials=i},jxg.A.extend(math.A.Poly.Polynomial.prototype,{findSignature:function(t){var e;for(e=0;e<this.monomials.length;e++)if(utils_type.A.cmpArrays(this.monomials[e].exponents,t))return e;return-1},addSubMonomial:function(t,e){var i;(i=this.findSignature(t.exponents))>-1?this.monomials[i].coefficient+=e*t.coefficient:(t.coefficient*=e,this.monomials.push(t))},add:function(t){var e;if(!utils_type.A.exists(t)||t.ring!==this.ring)throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.add either summand is undefined or rings don't match.");if(utils_type.A.isArray(t.exponents))this.addSubMonomial(t,1);else for(e=0;e<t.monomials.length;e++)this.addSubMonomial(t.monomials[e],1)},sub:function(t){var e;if(!utils_type.A.exists(t)||t.ring!==this.ring)throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.sub either summand is undefined or rings don't match.");if(utils_type.A.isArray(t.exponents))this.addSubMonomial(t,-1);else for(e=0;e<t.monomials.length;e++)this.addSubMonomial(t.monomials[e],-1)},copy:function(){var t,e;for(e=new math.A.Poly.Polynomial(this.ring),t=0;t<this.monomials.length;t++)e.monomials.push(this.monomials[t].copy());return e},print:function(){var t,e=[];for(t=0;t<this.monomials.length;t++)e.push("("+this.monomials[t].print()+")");return e.join("+")}});const poly=math.A.Poly;jxg.A.Complex=function(t,e){this.isComplex=!0,t&&t.isComplex&&(e=t.imaginary,t=t.real),this.real=t||0,this.imaginary=e||0,this.absval=0,this.angle=0},jxg.A.extend(jxg.A.Complex.prototype,{toString:function(){return this.real+" + "+this.imaginary+"i"},add:function(t){return utils_type.A.isNumber(t)?this.real+=t:(this.real+=t.real,this.imaginary+=t.imaginary),this},sub:function(t){return utils_type.A.isNumber(t)?this.real-=t:(this.real-=t.real,this.imaginary-=t.imaginary),this},mult:function(t){var e,i;return utils_type.A.isNumber(t)?(this.real*=t,this.imaginary*=t):(e=this.real,i=this.imaginary,this.real=e*t.real-i*t.imaginary,this.imaginary=e*t.imaginary+i*t.real),this},div:function(t){var e,i,r;if(utils_type.A.isNumber(t)){if(Math.abs(t)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;this.real/=t,this.imaginary/=t}else{if(Math.abs(t.real)<Math.eps&&Math.abs(t.imaginary)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;e=t.real*t.real+t.imaginary*t.imaginary,r=this.real,i=this.imaginary,this.real=(r*t.real+i*t.imaginary)/e,this.imaginary=(i*t.real-r*t.imaginary)/e}return this},conj:function(){return this.imaginary*=-1,this}}),jxg.A.C={},jxg.A.C.add=function(t,e){var i=new jxg.A.Complex(t);return i.add(e),i},jxg.A.C.sub=function(t,e){var i=new jxg.A.Complex(t);return i.sub(e),i},jxg.A.C.mult=function(t,e){var i=new jxg.A.Complex(t);return i.mult(e),i},jxg.A.C.div=function(t,e){var i=new jxg.A.Complex(t);return i.div(e),i},jxg.A.C.conj=function(t){var e=new jxg.A.Complex(t);return e.conj(),e},jxg.A.C.abs=function(t){var e=new jxg.A.Complex(t);return e.conj(),e.mult(t),Math.sqrt(e.real)},jxg.A.C.copy=function(t){return new jxg.A.Complex(t)},jxg.A.Complex.C=jxg.A.C;const complex=jxg.A.Complex;var src_options=__webpack_require__(412);jxg.A.AbstractRenderer=function(){this.vOffsetText=0,this.enhancedRendering=!0,this.container=null,this.type="",this.supportsForeignObject=!1,this.dashArray=[[2,2],[5,5],[10,10],[20,20],[20,10,10,10],[20,5,10,5],[0,5]]},jxg.A.extend(jxg.A.AbstractRenderer.prototype,{_updateVisual:function(t,e,i){(i||this.enhancedRendering)&&(e=e||{},this.setObjectViewport(t),this.setObjectTransition(t),utils_type.A.evaluate(t.visProp.draft)?this.setDraft(t):(e.stroke||(t.highlighted?(this.setObjectStrokeColor(t,t.visProp.highlightstrokecolor,t.visProp.highlightstrokeopacity),this.setObjectStrokeWidth(t,t.visProp.highlightstrokewidth)):(this.setObjectStrokeColor(t,t.visProp.strokecolor,t.visProp.strokeopacity),this.setObjectStrokeWidth(t,t.visProp.strokewidth))),e.fill||(t.highlighted?this.setObjectFillColor(t,t.visProp.highlightfillcolor,t.visProp.highlightfillopacity):this.setObjectFillColor(t,t.visProp.fillcolor,t.visProp.fillopacity)),e.dash||this.setDashStyle(t,t.visProp),e.shadow||this.setShadow(t),e.tabindex||this.setTabindex(t)))},_getHighlighted:function(t){var e=!1;return utils_type.A.exists(t.board)&&utils_type.A.exists(t.board.highlightedObjects)||(e=!0),!e&&utils_type.A.exists(t.board.highlightedObjects[t.id])?"highlight":""},drawPoint:function(t){var e,i=src_options.A.normalizePointFace(utils_type.A.evaluate(t.visProp.face));e="o"===i?"ellipse":"[]"===i?"rect":"path",t.rendNode=this.appendChildPrim(this.createPrim(e,t.id),utils_type.A.evaluate(t.visProp.layer)),this.appendNodesToElement(t,e),this._updateVisual(t,{dash:!0,shadow:!0},!0),this.updatePoint(t)},updatePoint:function(t){var e,i=utils_type.A.evaluate(t.visProp.size),r=src_options.A.normalizePointFace(utils_type.A.evaluate(t.visProp.face)),s=utils_type.A.evaluate(t.visProp.sizeunit),n=utils_type.A.evaluate(t.visProp.zoom);isNaN(t.coords.scrCoords[2]+t.coords.scrCoords[1])||("user"===s&&(i*=Math.sqrt(Math.abs(t.board.unitX*t.board.unitY))),e=0===(i*=t.board&&n?Math.sqrt(t.board.zoomX*t.board.zoomY):1)?0:i+1,"o"===r?this.updateEllipsePrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2],e,e):"[]"===r?this.updateRectPrim(t.rendNode,t.coords.scrCoords[1]-i,t.coords.scrCoords[2]-i,2*i,2*i):this.updatePathPrim(t.rendNode,this.updatePathStringPoint(t,i,r),t.board),this._updateVisual(t,{dash:!1,shadow:!1}),this.setShadow(t))},changePointStyle:function(t){var e=this.getElementById(t.id);utils_type.A.exists(e)&&this.remove(e),this.drawPoint(t),utils_type.A.clearVisPropOld(t),t.visPropCalc.visible||this.display(t,!1),utils_type.A.evaluate(t.visProp.draft)&&this.setDraft(t)},drawLine:function(t){t.rendNode=this.appendChildPrim(this.createPrim("line",t.id),utils_type.A.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"lines"),this.updateLine(t)},updateLine:function(t){this._updateVisual(t),this.updatePathWithArrowHeads(t),this.setLineCap(t)},drawCurve:function(t){t.rendNode=this.appendChildPrim(this.createPrim("path",t.id),utils_type.A.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"path"),this.updateCurve(t)},updateCurve:function(t){this._updateVisual(t),this.updatePathWithArrowHeads(t),this.setLineCap(t)},updatePathWithArrowHeads:function(t,e){var i,r,s=t.visProp,n=e?"highlight":"";i=e&&s.highlightstrokewidth?Math.max(utils_type.A.evaluate(s.highlightstrokewidth),utils_type.A.evaluate(s.strokewidth)):utils_type.A.evaluate(s.strokewidth),r=this.getArrowHeadData(t,i,n),this.makeArrows(t,r),t.elementClass===constants.A.OBJECT_CLASS_LINE?this.updateLineWithEndings(t,r):t.elementClass===constants.A.OBJECT_CLASS_CURVE&&this.updatePath(t),this.setArrowSize(t,r)},getArrowHeadData:function(t,e,i){var r,s,n,o,a=math.A.eps,l=0,u=0,c=0,h=0,d=utils_type.A.evaluate(t.visProp.firstarrow),p=utils_type.A.evaluate(t.visProp.lastarrow);return(d||p)&&(r=utils_type.A.exists(d.type)?utils_type.A.evaluate(d.type):t.elementClass===constants.A.OBJECT_CLASS_LINE?1:7,s=utils_type.A.exists(p.type)?utils_type.A.evaluate(p.type):t.elementClass===constants.A.OBJECT_CLASS_LINE?1:7,d&&(o=6,utils_type.A.exists(d.size)&&(o=utils_type.A.evaluate(d.size)),""!==i&&utils_type.A.exists(d[i+"size"])&&(o=utils_type.A.evaluate(d[i+"size"])),n=e*o,2===r?(n*=.5,a+=e*o):3===r?(n=e*o/3,a+=e):4===r||5===r||6===r?(n=e*o/1.5,a+=e*o):7===r?(n=0,o=10,a+=e):a+=e*o,l+=n,c=o),p&&(o=6,utils_type.A.exists(p.size)&&(o=utils_type.A.evaluate(p.size)),""!==i&&utils_type.A.exists(p[i+"size"])&&(o=utils_type.A.evaluate(p[i+"size"])),n=e*o,2===s?(n*=.5,a+=e*o):3===s?(n=e*o/3,a+=e):4===s||5===s||6===s?(n=e*o/1.5,a+=e*o):7===s?(n=0,o=10,a+=e):a+=e*o,u+=n,h=o)),t.visPropCalc.typeFirst=r,t.visPropCalc.typeLast=s,{evFirst:d,evLast:p,typeFirst:r,typeLast:s,offFirst:l,offLast:u,sizeFirst:c,sizeLast:h,showFirst:1,showLast:1,minLen:a,strokeWidth:e}},updateLineWithEndings:function(t,e){var i,r,s;return i=new base_coords.A(constants.A.COORDS_BY_USER,t.point1.coords.usrCoords,t.board),r=new base_coords.A(constants.A.COORDS_BY_USER,t.point2.coords.usrCoords,t.board),s=utils_type.A.evaluate(t.visProp.margin),geometry.A.calcStraight(t,i,r,s),this.handleTouchpoints(t,i,r,e),this.getPositionArrowHead(t,i,r,e),this.updateLinePrim(t.rendNode,i.scrCoords[1],i.scrCoords[2],r.scrCoords[1],r.scrCoords[2],t.board),this},updatePath:function(t){return utils_type.A.evaluate(t.visProp.handdrawing)?this.updatePathPrim(t.rendNode,this.updatePathStringBezierPrim(t),t.board):this.updatePathPrim(t.rendNode,this.updatePathStringPrim(t),t.board),this},getPositionArrowHead:function(t,e,i,r){var s,n,o,a,l;return(r.evFirst||r.evLast)&&(n=o=a=l=0,s=e.distance(constants.A.COORDS_BY_SCREEN,i),r.evFirst&&"vml"!==t.board.renderer.type&&(s>=r.minLen?(n=(i.scrCoords[1]-e.scrCoords[1])*r.offFirst/s,o=(i.scrCoords[2]-e.scrCoords[2])*r.offFirst/s):r.showFirst=0),r.evLast&&"vml"!==t.board.renderer.type&&(s>=r.minLen?(a=(i.scrCoords[1]-e.scrCoords[1])*r.offLast/s,l=(i.scrCoords[2]-e.scrCoords[2])*r.offLast/s):r.showLast=0),e.setCoordinates(constants.A.COORDS_BY_SCREEN,[e.scrCoords[1]+n,e.scrCoords[2]+o],!1,!0),i.setCoordinates(constants.A.COORDS_BY_SCREEN,[i.scrCoords[1]-a,i.scrCoords[2]-l],!1,!0)),this},handleTouchpoints:function(t,e,i,r){var s,n,o,a,l,u,c;return(r.evFirst||r.evLast)&&(o=a=l=u=c=0,s=utils_type.A.evaluate(t.point1.visProp.size)+utils_type.A.evaluate(t.point1.visProp.strokewidth),n=utils_type.A.evaluate(t.point2.visProp.size)+utils_type.A.evaluate(t.point2.visProp.strokewidth),r.evFirst&&utils_type.A.evaluate(t.visProp.touchfirstpoint)&&utils_type.A.evaluate(t.point1.visProp.visible)&&(o=e.distance(constants.A.COORDS_BY_SCREEN,i),a=(i.scrCoords[1]-e.scrCoords[1])*s/o,l=(i.scrCoords[2]-e.scrCoords[2])*s/o),r.evLast&&utils_type.A.evaluate(t.visProp.touchlastpoint)&&utils_type.A.evaluate(t.point2.visProp.visible)&&(o=e.distance(constants.A.COORDS_BY_SCREEN,i),u=(i.scrCoords[1]-e.scrCoords[1])*n/o,c=(i.scrCoords[2]-e.scrCoords[2])*n/o),e.setCoordinates(constants.A.COORDS_BY_SCREEN,[e.scrCoords[1]+a,e.scrCoords[2]+l],!1,!0),i.setCoordinates(constants.A.COORDS_BY_SCREEN,[i.scrCoords[1]-u,i.scrCoords[2]-c],!1,!0)),this},setArrowSize:function(t,e){return e.evFirst&&this._setArrowWidth(t.rendNodeTriangleStart,e.showFirst*e.strokeWidth,t.rendNode,e.sizeFirst),e.evLast&&this._setArrowWidth(t.rendNodeTriangleEnd,e.showLast*e.strokeWidth,t.rendNode,e.sizeLast),this},setLineCap:function(t){},drawTicks:function(t){t.rendNode=this.appendChildPrim(this.createPrim("path",t.id),utils_type.A.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"path")},updateTicks:function(t){},drawEllipse:function(t){t.rendNode=this.appendChildPrim(this.createPrim("ellipse",t.id),utils_type.A.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"ellipse"),this.updateEllipse(t)},updateEllipse:function(t){this._updateVisual(t);var e=t.Radius();Math.abs(t.center.coords.usrCoords[0])>math.A.eps&&!isNaN(e+t.center.coords.scrCoords[1]+t.center.coords.scrCoords[2])&&e*t.board.unitX<2e6&&this.updateEllipsePrim(t.rendNode,t.center.coords.scrCoords[1],t.center.coords.scrCoords[2],e*t.board.unitX,e*t.board.unitY),this.setLineCap(t)},drawPolygon:function(t){t.rendNode=this.appendChildPrim(this.createPrim("polygon",t.id),utils_type.A.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"polygon"),this.updatePolygon(t)},updatePolygon:function(t){this._updateVisual(t,{stroke:!0,dash:!0}),this.updatePolygonPrim(t.rendNode,t)},displayCopyright:function(t,e){},drawInternalText:function(t){},updateInternalText:function(t){},drawText:function(t){var e,i,r,s;"html"===utils_type.A.evaluate(t.visProp.display)&&env.A.isBrowser&&"no"!==this.type?((e=this.container.ownerDocument.createElement("div")).style.position="absolute",e.className=utils_type.A.evaluate(t.visProp.cssclass),r=utils_type.A.evaluate(t.visProp.layer),utils_type.A.exists(r)||(r=0),i=""===this.container.style.zIndex?0:parseInt(this.container.style.zIndex,10),e.style.zIndex=i+r,this.container.appendChild(e),e.setAttribute("id",this.container.id+"_"+t.id)):e=this.drawInternalText(t),t.rendNode=e,t.htmlStr="",t.visProp.islabel&&utils_type.A.exists(t.visProp.anchor)?(s=utils_type.A.evaluate(t.visProp.anchor.visProp.visible),t.prepareUpdate().updateVisibility(s)):t.prepareUpdate().updateVisibility(),this.updateText(t)},updateText:function(t){var i,r,s,n,o,a,l,u,c,h,d,p=t.plaintext;if(t.visPropCalc.visible)if(this.updateTextStyle(t,!1),"html"===utils_type.A.evaluate(t.visProp.display)&&"no"!==this.type){if(isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])||(r=t.coords.scrCoords[1],r=Math.abs(r)<1e6?r:1e6,"right"===(o=t.getAnchorX())?(i=t.board.canvasWidth-r,h="right"):"middle"===o?(i=r-.5*t.size[0],h="center"):(i=r,h="left"),t.visPropOld.left!==o+i&&("right"===o?(t.rendNode.style.right=i+"px",t.rendNode.style.left="auto"):(t.rendNode.style.left=i+"px",t.rendNode.style.right="auto"),t.visPropOld.left=o+i),r=t.coords.scrCoords[2]+this.vOffsetText,r=Math.abs(r)<1e6?r:1e6,"bottom"===(a=t.getAnchorY())?(i=t.board.canvasHeight-r,d="bottom"):"middle"===a?(i=r-.5*t.size[1],d="center"):(i=r,d="top"),t.visPropOld.top!==a+i&&("bottom"===a?(t.rendNode.style.top="auto",t.rendNode.style.bottom=i+"px"):(t.rendNode.style.bottom="auto",t.rendNode.style.top=i+"px"),t.visPropOld.top=a+i)),t.htmlStr!==p){try{t.type===utils_type.A.OBJECT_TYPE_BUTTON?t.rendNodeButton.innerHTML=p:t.type===utils_type.A.OBJECT_TYPE_CHECKBOX||t.type===utils_type.A.OBJECT_TYPE_INPUT?t.rendNodeLabel.innerHTML=p:t.rendNode.innerHTML=p}catch(e){s=t.rendNode.parentNode,t.rendNode.parentNode.removeChild(t.rendNode),t.rendNode.innerHTML=p,s.appendChild(t.rendNode)}if(t.htmlStr=p,utils_type.A.evaluate(t.visProp.usemathjax))try{MathJax.typeset?MathJax.typeset([t.rendNode]):MathJax.Hub.Queue(["Typeset",MathJax.Hub,t.rendNode])}catch(e){jxg.A.debug("MathJax (not yet) loaded")}else if(utils_type.A.evaluate(t.visProp.usekatex))try{(n=0===t.rendNode.innerHTML.indexOf("<span")&&t.rendNode.innerHTML.indexOf("<label")>0&&(t.rendNode.innerHTML.indexOf("<checkbox")>0||t.rendNode.innerHTML.indexOf("<input")>0)?t.rendNodeLabel:0===t.rendNode.innerHTML.indexOf("<button")?t.rendNodeButton:t.rendNode)&&katex.render(p,n,{macros:utils_type.A.evaluate(t.visProp.katexmacros),throwOnError:!1})}catch(e){jxg.A.debug("KaTeX not loaded (yet)")}else if(utils_type.A.evaluate(t.visProp.useasciimathml))try{AMprocessNode(t.rendNode,!1)}catch(e){jxg.A.debug("AsciiMathML not loaded (yet)")}}0!==(l=utils_type.A.evaluate(t.visProp.rotate))&&(l*=Math.PI/180,u=Math.cos(l),c=Math.sin(l),t.rendNode.style.transform="matrix("+[u,-1*c,c,u,0,0].join(",")+")",t.rendNode.style["transform-origin"]=h+" "+d),this.transformImage(t,t.transformations)}else this.updateInternalText(t)},_css2js:function(t){var e,i,r,s,n,o=[],a=utils_type.A.trim(t).replace(/;$/,"").split(";");for(i=a.length,e=0;e<i;++e)""!==utils_type.A.trim(a[e])&&(n=a[e].split(":"),r=utils_type.A.trim(n[0].replace(/-([a-z])/gi,(function(t,e){return e.toUpperCase()}))),s=utils_type.A.trim(n[1]),o.push({key:r,val:s}));return o},updateTextStyle:function(t,i){var r,s,n,o,a,l,u,c,h,d=t.visProp,p=env.A.isBrowser?d.display:"internal",f=["rendNode","rendNodeTag","rendNodeLabel"],_=f.length,m=utils_type.A.evaluate(d.fontunit),g=["cssdefaultstyle","cssstyle"],y=g.length;if(i?(n=d.highlightstrokecolor,s=d.highlightstrokeopacity,o=d.highlightcssclass):(n=d.strokecolor,s=d.strokeopacity,o=d.cssclass),"no"!==this.type&&("html"===p||"canvas"!==this.type)){for(c=0;c<y;c++)if(""!==(h=utils_type.A.evaluate(d[(i?"highlight":"")+g[c]]))&&t.visPropOld[g[c]]!==h){for(l=this._css2js(h),a=0;a<_;a++)if(utils_type.A.exists(t[f[a]]))for(u in l)l.hasOwnProperty(u)&&(t[f[a]].style[l[u].key]=l[u].val);t.visPropOld[g[c]]=h}if(r=utils_type.A.evaluate(d.fontsize),t.visPropOld.fontsize!==r){t.needsSizeUpdate=!0;try{for(a=0;a<_;a++)utils_type.A.exists(t[f[a]])&&(t[f[a]].style.fontSize=r+m)}catch(e){for(a=0;a<_;a++)utils_type.A.exists(t[f[a]])&&(t[f[a]].style.fontSize=r)}t.visPropOld.fontsize=r}}return this.setTabindex(t),this.setObjectTransition(t),"html"===p&&"no"!==this.type?(this.setObjectViewport(t,!0),t.visPropOld.cssclass!==o&&(t.rendNode.className=o,t.visPropOld.cssclass=o,t.needsSizeUpdate=!0),this.setObjectStrokeColor(t,n,s)):this.updateInternalTextStyle(t,n,s),this},updateInternalTextStyle:function(t,e,i){this.setObjectStrokeColor(t,e,i)},drawImage:function(t){},updateImage:function(t){this.updateRectPrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),this.updateImageURL(t),this.transformImage(t,t.transformations),this._updateVisual(t,{stroke:!0,dash:!0},!0)},joinTransforms:function(t,e){var i,r=t.board.origin.scrCoords[1],s=t.board.origin.scrCoords[2],n=t.board.unitX,o=t.board.unitY,a=e.length,l=[[1,0,0],[-r/n,1/n,0],[s/o,0,-1/o]];for(i=0;i<a;i++)l=math.A.matMatMult(e[i].matrix,l);return l=math.A.matMatMult([[1,0,0],[r,n,0],[s,0,-o]],l)},transformImage:function(t,e){},updateImageURL:function(t){},updateImageStyle:function(t,e){t.rendNode.className=utils_type.A.evaluate(e?t.visProp.highlightcssclass:t.visProp.cssclass)},drawForeignObject:function(t){},updateForeignObject:function(t){},appendChildPrim:function(t,e){},appendNodesToElement:function(t,e){},createPrim:function(t,e){return null},remove:function(t){},makeArrows:function(t,e){},_setArrowWidth:function(t,e,i){},updateEllipsePrim:function(t,e,i,r,s){},updateLinePrim:function(t,e,i,r,s,n){},updatePathPrim:function(t,e,i){},updatePathStringPoint:function(t,e,i){},updatePathStringPrim:function(t){},updatePathStringBezierPrim:function(t){},updatePolygonPrim:function(t,e){},updateRectPrim:function(t,e,i,r,s){},setPropertyPrim:function(t,e,i){},setTabindex:function(t){var e;t.board.attr.keyboard.enabled&&utils_type.A.exists(t.rendNode)&&(e=utils_type.A.evaluate(t.visProp.tabindex),t.visPropCalc.visible&&!utils_type.A.evaluate(t.visProp.fixed)||(e=null),e!==t.visPropOld.tabindex&&(t.rendNode.setAttribute("tabindex",e),t.visPropOld.tabindex=e))},display:function(t,e){t&&(t.visPropOld.visible=e)},show:function(t){},hide:function(t){},setBuffering:function(t,e){},setDashStyle:function(t){},setDraft:function(t){if(utils_type.A.evaluate(t.visProp.draft)){var e=t.board.options.elements.draft.color,i=t.board.options.elements.draft.opacity;this.setObjectViewport(t),this.setObjectTransition(t),t.type===constants.A.OBJECT_TYPE_POLYGON?this.setObjectFillColor(t,e,i):(t.elementClass===constants.A.OBJECT_CLASS_POINT?this.setObjectFillColor(t,e,i):this.setObjectFillColor(t,"none",0),this.setObjectStrokeColor(t,e,i),this.setObjectStrokeWidth(t,t.board.options.elements.draft.strokeWidth))}},removeDraft:function(t){this.setObjectViewport(t),this.setObjectTransition(t),t.type===constants.A.OBJECT_TYPE_POLYGON?this.setObjectFillColor(t,t.visProp.fillcolor,t.visProp.fillopacity):(t.type===constants.A.OBJECT_CLASS_POINT&&this.setObjectFillColor(t,t.visProp.fillcolor,t.visProp.fillopacity),this.setObjectStrokeColor(t,t.visProp.strokecolor,t.visProp.strokeopacity),this.setObjectStrokeWidth(t,t.visProp.strokewidth))},setGradient:function(t){},updateGradient:function(t){},setObjectTransition:function(t,e){},setObjectViewport:function(t,e){},setObjectFillColor:function(t,e,i){},setObjectStrokeColor:function(t,e,i){},setObjectStrokeWidth:function(t,e){},setShadow:function(t){},highlight:function(t,e){var i,r,s,n=t.visProp;if(this.setObjectViewport(t),this.setObjectTransition(t),!n.draft){if(t.type===constants.A.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(t,n.highlightfillcolor,n.highlightfillopacity),r=utils_type.A.evaluate(n.highlightbystrokewidth),i=0;i<t.borders.length;i++)this.highlight(t.borders[i],!r);else t.elementClass===constants.A.OBJECT_CLASS_TEXT?this.updateTextStyle(t,!0):t.type===constants.A.OBJECT_TYPE_IMAGE?(this.updateImageStyle(t,!0),this.setObjectFillColor(t,n.highlightfillcolor,n.highlightfillopacity)):(this.setObjectStrokeColor(t,n.highlightstrokecolor,n.highlightstrokeopacity),this.setObjectFillColor(t,n.highlightfillcolor,n.highlightfillopacity));n.highlightstrokewidth&&!e&&(s=Math.max(utils_type.A.evaluate(n.highlightstrokewidth),utils_type.A.evaluate(n.strokewidth)),this.setObjectStrokeWidth(t,s),t.elementClass!==constants.A.OBJECT_CLASS_LINE&&t.elementClass!==constants.A.OBJECT_CLASS_CURVE||this.updatePathWithArrowHeads(t,!0))}return this},noHighlight:function(t){var e,i,r=t.visProp;if(this.setObjectViewport(t),this.setObjectTransition(t),!utils_type.A.evaluate(t.visProp.draft)){if(t.type===constants.A.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(t,r.fillcolor,r.fillopacity),e=0;e<t.borders.length;e++)this.noHighlight(t.borders[e]);else t.elementClass===constants.A.OBJECT_CLASS_TEXT?this.updateTextStyle(t,!1):t.type===constants.A.OBJECT_TYPE_IMAGE?(this.updateImageStyle(t,!1),this.setObjectFillColor(t,r.fillcolor,r.fillopacity)):(this.setObjectStrokeColor(t,r.strokecolor,r.strokeopacity),this.setObjectFillColor(t,r.fillcolor,r.fillopacity));i=utils_type.A.evaluate(r.strokewidth),this.setObjectStrokeWidth(t,i),t.elementClass!==constants.A.OBJECT_CLASS_LINE&&t.elementClass!==constants.A.OBJECT_CLASS_CURVE||this.updatePathWithArrowHeads(t,!1)}return this},suspendRedraw:function(){},unsuspendRedraw:function(){},drawNavigationBar:function(t,e){var i,r,s=function(t){t||(t=window.event),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},n=function(e,n,o,a){var l;o=o||"",(l=i.createElement("span")).innerHTML=e,l.style.paddingLeft="7px",l.style.paddingRight="7px",void 0!==l.classList&&(l.classList.add("JXG_navigation_button"),l.classList.add("JXG_navigation_button_"+a)),l.setAttribute("id",o+"_navigation_"+a),r.appendChild(l),env.A.addEvent(l,"click",(function(e){return utils_type.A.bind(n,t)(),!1}),t),env.A.addEvent(l,"pointerup",s,t),env.A.addEvent(l,"pointerdown",s,t),env.A.addEvent(l,"pointerleave",s,t),env.A.addEvent(l,"mouseup",s,t),env.A.addEvent(l,"mousedown",s,t),env.A.addEvent(l,"touchend",s,t),env.A.addEvent(l,"touchstart",s,t)};env.A.isBrowser&&"no"!==this.type&&(i=t.containerObj.ownerDocument,(r=i.createElement("div")).setAttribute("id",t.container+"_navigationbar"),r.style.color=e.strokecolor,r.style.backgroundColor=e.fillcolor,r.style.padding=e.padding,r.style.position=e.position,r.style.fontSize=e.fontsize,r.style.cursor=e.cursor,r.style.zIndex=e.zindex,t.containerObj.appendChild(r),r.style.right=e.right,r.style.bottom=e.bottom,void 0!==r.classList&&r.classList.add("JXG_navigation"),t.attr.showfullscreen&&n(t.attr.fullscreen.symbol,(function(){t.toFullscreen(t.attr.fullscreen.id)}),t.container,"fullscreen"),t.attr.showscreenshot&&n(t.attr.screenshot.symbol,(function(){window.setTimeout((function(){t.renderer.screenshot(t,"",!1)}),330)}),t.container,"screenshot"),t.attr.showreload&&n("\u21bb",(function(){t.reload()}),t.container,"reload"),t.attr.showcleartraces&&n("\u2297",(function(){t.clearTraces()}),t.container,"cleartraces"),t.attr.shownavigation&&(t.attr.showzoom&&(n("\u2013",t.zoomOut,t.container,"out"),n("o",t.zoom100,t.container,"100"),n("+",t.zoomIn,t.container,"in")),n("\u2190",t.clickLeftArrow,t.container,"left"),n("\u2193",t.clickUpArrow,t.container,"down"),n("\u2191",t.clickDownArrow,t.container,"up"),n("\u2192",t.clickRightArrow,t.container,"right")))},getElementById:function(t){var e;return utils_type.A.exists(this.container)?(e=this.container.id+"_"+t,utils_type.A.exists(CSS)&&utils_type.A.exists(CSS.escape)&&(e=CSS.escape(e)),this.container.querySelector("#"+e)):""},removeToInsertLater:function(t){var e=t.parentNode,i=t.nextSibling;if(null!==e)return e.removeChild(t),function(){i?e.insertBefore(t,i):e.appendChild(t)}},resize:function(t,e){},createTouchpoints:function(t){},showTouchpoint:function(t){},hideTouchpoint:function(t){},updateTouchpoint:function(t,e){},dumpToDataURI:function(t){},dumpToCanvas:function(t,e,i,r){},screenshot:function(t){},setLayer:function(t,e){}});const renderer_abstract=jxg.A.AbstractRenderer;jxg.A.FileReader={handleRemoteFile:function(t,i,r,s,n,o){var a=!1;try{a=new XMLHttpRequest,"raw"===r.toLowerCase()?a.overrideMimeType("text/plain; charset="+n):a.overrideMimeType("text/xml; charset="+n)}catch(e){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(l){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(u){a=!1}}}if(a){a.open("GET",t,s),"raw"===r.toLowerCase()?this.cbp=function(){var t=a;4===t.readyState&&i(t.responseText)}:this.cbp=function(){var t=a,e="";4===t.readyState&&(e=!utils_type.A.exists(t.responseStream)||"PK"!==t.responseText.slice(0,2)&&31!==utils_encoding.asciiCharCodeAt(t.responseText.slice(0,1),0)?t.responseText:base64.decode(jxgBinFileReader(t)),this.parseString(e,i,r,o))},this.cb=utils_type.A.bind(this.cbp,this),a.onreadystatechange=this.cb;try{a.send(null)}catch(c){throw new Error("JSXGraph: A problem occurred while trying to read remote file '"+t+"'.")}}else jxg.A.debug("AJAX not activated!")},handleLocalFile:function(t,e,i,r,s,n){utils_type.A.exists(r)||(r=!0),"raw"===i.toLowerCase()?this.cbp=function(t){e(t.target.result)}:this.cbp=function(t){var r=t.target.result;this.parseString(r,e,i,n)},this.cb=utils_type.A.bind(this.cbp,this);var o=new FileReader;o.onload=this.cb,"raw"===i.toLowerCase()?o.readAsText(t):o.readAsText(t,s)},parseFileContent:function(t,e,i,r,s,n){utils_type.A.isString(t)||void 0===FileReader?this.handleRemoteFile(t,e,i,r,s,n):this.handleLocalFile(t,e,i,r,s,n)},parseString:function(t,e,i,r){var s;if(i=i.toLowerCase(),s=jxg.A.readers[i],utils_type.A.exists(s))new s(e,t).read();else if("jessiecode"!==i)throw new Error("JSXGraph: There is no reader available for '"+i+"'.");utils_type.A.isFunction(r)&&r(e)}},!env.A.isMetroApp()&&env.A.isBrowser&&"object"===typeof navigator&&/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&document&&document.write&&document.write('<script type="text/vbscript">\nFunction Base64Encode(inData)\n  Const Base64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"\n  Dim cOut, sOut, I\n  For I = 1 To LenB(inData) Step 3\n    Dim nGroup, pOut, sGroup\n    nGroup = &H10000 * AscB(MidB(inData, I, 1)) + _\n      &H100 * MyASC(MidB(inData, I + 1, 1)) + MyASC(MidB(inData, I + 2, 1))\n    nGroup = Oct(nGroup)\n    nGroup = String(8 - Len(nGroup), "0") & nGroup\n    pOut = Mid(Base64, CLng("&o" & Mid(nGroup, 1, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 3, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 5, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 7, 2)) + 1, 1)\n    sOut = sOut + pOut\n  Next\n  Select Case LenB(inData) Mod 3\n    Case 1: \'8 bit final\n      sOut = Left(sOut, Len(sOut) - 2) + "=="\n    Case 2: \'16 bit final\n      sOut = Left(sOut, Len(sOut) - 1) + "="\n  End Select\n  Base64Encode = sOut\nEnd Function\n\nFunction MyASC(OneChar)\n  If OneChar = "" Then MyASC = 0 Else MyASC = AscB(OneChar)\nEnd Function\n\nFunction jxgBinFileReader(xhr)\n    Dim byteString\n    Dim b64String\n    Dim i\n    byteString = xhr.responseBody\n    ReDim byteArray(LenB(byteString))\n    For i = 1 To LenB(byteString)\n        byteArray(i-1) = AscB(MidB(byteString, i, 1))\n    Next\n    b64String = Base64Encode(byteString)\n    jxgBinFileReader = b64String\nEnd Function\n<\/script>\n');const reader_file=jxg.A.FileReader;var geonext=__webpack_require__(72),jessiecode=__webpack_require__(922),utils_color=__webpack_require__(339);jxg.A.Composition=function(t){var e,i=this,r=["setAttribute","setParents","prepareUpdate","updateRenderer","update","fullUpdate","highlight","noHighlight"],s=function(t){return function(){var e;for(e in i.elements)i.elements.hasOwnProperty(e)&&utils_type.A.exists(i.elements[e][t])&&i.elements[e][t].apply(i.elements[e],arguments);return i}};for(e=0;e<r.length;e++)this[r[e]]=s(r[e]);for(e in this.elements={},this.objects=this.elements,this.elementsByName={},this.objectsList=[],this.groups={},this.methodMap={setAttribute:"setAttribute",setProperty:"setAttribute",setParents:"setParents",add:"add",remove:"remove",select:"select"},t)t.hasOwnProperty(e)&&this.add(e,t[e]);this.dump=!0,this.subs={}},jxg.A.extend(jxg.A.Composition.prototype,{add:function(t,e){return!(utils_type.A.exists(this[t])||!utils_type.A.exists(e))&&(utils_type.A.exists(e.id)?this.elements[e.id]=e:this.elements[t]=e,utils_type.A.exists(e.name)&&(this.elementsByName[e.name]=e),e.on("attribute:name",this.nameListener,this),this.objectsList.push(e),this[t]=e,this.methodMap[t]=e,!0)},remove:function(t){var e,i=!1;for(e in this.elements)if(this.elements.hasOwnProperty(e)&&this.elements[e].id===this[t].id){i=!0;break}return i&&(delete this.elements[this[t].id],delete this[t]),i},nameListener:function(t,e,i){delete this.elementsByName[t],this.elementsByName[e]=i},select:function(t){return utils_type.A.exists(jxg.A.Board)?jxg.A.Board.prototype.select.call(this,t):new jxg.A.Composition},getParents:function(){return this.parents},getType:function(){return this.elType},getAttributes:function(){var t,e={};for(t in this.subs)this.subs.hasOwnProperty(t)&&(e[t]=this.subs[t].visProp);return this.attr}});const composition=jxg.A.Composition;jxg.A.Board=function(t,e,i,r,s,n,o,a,l,u,c){if(this.BOARD_MODE_NONE=0,this.BOARD_MODE_DRAG=1,this.BOARD_MODE_MOVE_ORIGIN=2,this.BOARD_MODE_ZOOM=17,this.BOARD_QUALITY_LOW=1,this.BOARD_QUALITY_HIGH=2,utils_type.A.exists(c.document)&&!1!==c.document?this.document=c.document:env.A.isBrowser&&(this.document=document),this.container="",this.containerObj=null,utils_type.A.isString(t)?(this.container=t,this.containerObj=env.A.isBrowser?this.document.getElementById(this.container):null):env.A.isBrowser&&(this.containerObj=t,this.container=this.containerObj.getAttribute("id"),null===this.container&&(this.container="null"+parseInt(1e8*Math.random()).toString())),env.A.isBrowser&&"no"!==e.type&&null===this.containerObj)throw new Error('\nJSXGraph: HTML container element "'+t+'" not found.');this.renderer=e,this.grids=[],this.options=utils_type.A.deepCopy(src_options.A),this.attr=c,"default"!==this.attr.theme&&utils_type.A.exists(jxg.A.themes[this.attr.theme])&&utils_type.A.mergeAttr(this.options,jxg.A.themes[this.attr.theme],!0),this.dimension=2,this.jc=new jessiecode.A,this.jc.use(this),this.origin={},this.origin.usrCoords=[1,0,0],this.origin.scrCoords=[1,r[0],r[1]],this.zoomX=s,this.zoomY=n,this.unitX=o*this.zoomX,this.unitY=a*this.zoomY,this.keepaspectratio=!1,this.canvasWidth=l,this.canvasHeight=u,utils_type.A.exists(i)&&""!==i&&env.A.isBrowser&&!utils_type.A.exists(this.document.getElementById(i))?this.id=i:this.id=this.generateId(),utils_event.A.eventify(this),this.hooks=[],this.dependentBoards=[],this.inUpdate=!1,this.objects={},this.objectsList=[],this.groups={},this.animationObjects={},this.highlightedObjects={},this.numObjects=0,this.elementsByName={},this.mode=this.BOARD_MODE_NONE,this.updateQuality=this.BOARD_QUALITY_HIGH,this.isSuspendedRedraw=!1,this.calculateSnapSizes(),this.drag_dx=0,this.drag_dy=0,this.drag_position=[0,0],this.mouse={},this.touches=[],this.xmlString="",this.cPos=[],this.touchMoveLast=0,this.touchMoveLastId=1/0,this.positionAccessLast=0,this.downObjects=[],this.clickObjects={},this.focusObjects=[],this.attr.showcopyright&&this.renderer.displayCopyright(constants.A.licenseText,parseInt(this.options.text.fontSize,10)),this.needsFullUpdate=!1,this.reducedUpdate=!1,this.currentCBDef="none",this.geonextCompatibilityMode=!1,this.options.text.useASCIIMathML&&translateASCIIMath?init():this.options.text.useASCIIMathML=!1,this.hasMouseHandlers=!1,this.hasTouchHandlers=!1,this.hasPointerHandlers=!1,this.hasWheelHandlers=!1,this.hasMouseUp=!1,this.hasTouchEnd=!1,this.hasPointerUp=!1,this._drag_offset=[0,0],this._inputDevice="mouse",this._board_touches=[],this.selectingMode=!1,this.isSelecting=!1,this._isScrolling=!1,this._isResizing=!1,this.selectingBox=[[0,0],[0,0]],this.userLog=[],this.mathLib=Math,this.mathLibJXG=jxg.A.Math,!0===this.attr.registerevents?this.attr.registerevents={fullscreen:!0,keyboard:!0,pointer:!0,resize:!0,wheel:!0}:"object"===typeof this.attr.registerevents&&(utils_type.A.exists(this.attr.registerevents.fullscreen)||(this.attr.registerevents.fullscreen=!0),utils_type.A.exists(this.attr.registerevents.keyboard)||(this.attr.registerevents.keyboard=!0),utils_type.A.exists(this.attr.registerevents.pointer)||(this.attr.registerevents.pointer=!0),utils_type.A.exists(this.attr.registerevents.resize)||(this.attr.registerevents.resize=!0),utils_type.A.exists(this.attr.registerevents.wheel)||(this.attr.registerevents.wheel=!0)),!1!==this.attr.registerevents&&(this.attr.registerevents.fullscreen&&this.addFullscreenEventHandlers(),this.attr.registerevents.keyboard&&this.addKeyboardEventHandlers(),this.attr.registerevents.pointer&&this.addEventHandlers(),this.attr.registerevents.resize&&this.addResizeEventHandlers(),this.attr.registerevents.wheel&&this.addWheelEventHandlers()),this.methodMap={update:"update",fullUpdate:"fullUpdate",on:"on",off:"off",trigger:"trigger",setAttribute:"setAttribute",setBoundingBox:"setBoundingBox",setView:"setBoundingBox",getBoundingBox:"getBoundingBox",BoundingBox:"getBoundingBox",getView:"getBoundingBox",View:"getBoundingBox",migratePoint:"migratePoint",colorblind:"emulateColorblindness",suspendUpdate:"suspendUpdate",unsuspendUpdate:"unsuspendUpdate",clearTraces:"clearTraces",left:"clickLeftArrow",right:"clickRightArrow",up:"clickUpArrow",down:"clickDownArrow",zoomIn:"zoomIn",zoomOut:"zoomOut",zoom100:"zoom100",zoomElements:"zoomElements",remove:"removeObject",removeObject:"removeObject"}},jxg.A.extend(jxg.A.Board.prototype,{generateName:function(t){var e,i,r=this.attr.maxnamelength,s="",n="",o=[],a="";if(t.type===constants.A.OBJECT_TYPE_TICKS)return"";for(e=utils_type.A.isPoint(t)||utils_type.A.isPoint3D(t)?["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]:t.type===constants.A.OBJECT_TYPE_ANGLE?["","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;"]:["","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],utils_type.A.isPoint(t)||t.elementClass===constants.A.OBJECT_CLASS_LINE||t.type===constants.A.OBJECT_TYPE_ANGLE||(s=t.type===constants.A.OBJECT_TYPE_POLYGON?"P_{":t.elementClass===constants.A.OBJECT_CLASS_CIRCLE?"k_{":t.elementClass===constants.A.OBJECT_CLASS_TEXT?"t_{":"s_{",n="}"),i=0;i<r;i++)o[i]=0;for(;o[r-1]<e.length;){for(o[0]=1;o[0]<e.length;o[0]++){for(a=s,i=r;i>0;i--)a+=e[o[i-1]];if(!utils_type.A.exists(this.elementsByName[a+n]))return a+n}for(o[0]=e.length,i=1;i<r;i++)o[i-1]===e.length&&(o[i-1]=1,o[i]+=1)}return""},generateId:function(){for(var t=1;utils_type.A.exists(jxg.A.boards["jxgBoard"+t]);)t=Math.round(65535*Math.random());return"jxgBoard"+t},setId:function(t,e){var i,r=this.numObjects,s=t.id;if(this.numObjects+=1,""===s||!utils_type.A.exists(s))for(s=this.id+e+r;utils_type.A.exists(this.objects[s]);)i=Math.round(65535*Math.random()),s=this.id+e+r+"-"+i;return t.id=s,this.objects[s]=t,t._pos=this.objectsList.length,this.objectsList[this.objectsList.length]=t,s},finalizeAdding:function(t){!1===utils_type.A.evaluate(t.visProp.visible)&&this.renderer.display(t,!1)},finalizeLabel:function(t){t.hasLabel&&!utils_type.A.evaluate(t.label.visProp.islabel)&&!1===utils_type.A.evaluate(t.label.visProp.visible)&&this.renderer.display(t.label,!1)},checkFrameRate:function(t){var e=!1,i=(new Date).getTime();return utils_type.A.exists(t.pointerId)&&this.touchMoveLastId!==t.pointerId&&(e=!0,this.touchMoveLastId=t.pointerId),!e&&(i-this.touchMoveLast)*this.attr.maxframerate>=1e3&&(e=!0),e&&(this.touchMoveLast=i),e},getCoordsTopLeftCorner:function(){var t,e,i,r,s,n=this.document.ownerDocument||this.document,o=n.documentElement||this.document.body.parentNode,a=n.body,l=this.containerObj;if(this.cPos.length>0&&(this.mode===this.BOARD_MODE_DRAG||this.mode===this.BOARD_MODE_MOVE_ORIGIN||(new Date).getTime()-this.positionAccessLast<1e3))return this.cPos;if(this.positionAccessLast=(new Date).getTime(),l.getBoundingClientRect){for(i=l.getBoundingClientRect(),r=1,s=l;s&&utils_type.A.exists(s.parentNode);)utils_type.A.exists(s.style)&&utils_type.A.exists(s.style.zoom)&&""!==s.style.zoom&&(r*=parseFloat(s.style.zoom)),s=s.parentNode;return(t=[i.left*r,i.top*r])[0]+=env.A.getProp(l,"border-left-width"),t[1]+=env.A.getProp(l,"border-top-width"),"vml"!==this.renderer.type&&(t[0]+=env.A.getProp(l,"padding-left"),t[1]+=env.A.getProp(l,"padding-top")),this.cPos=t.slice(),this.cPos}return t=env.A.getOffset(l),e=this.document.documentElement.ownerDocument,!this.containerObj.currentStyle&&e.defaultView&&(t[0]+=env.A.getProp(o,"margin-left"),t[1]+=env.A.getProp(o,"margin-top"),t[0]+=env.A.getProp(o,"border-left-width"),t[1]+=env.A.getProp(o,"border-top-width"),t[0]+=env.A.getProp(o,"padding-left"),t[1]+=env.A.getProp(o,"padding-top")),a&&(t[0]+=env.A.getProp(a,"left"),t[1]+=env.A.getProp(a,"top")),"object"===typeof google&&google.translate&&(t[0]+=10,t[1]+=25),t[0]+=env.A.getProp(l,"border-left-width"),t[1]+=env.A.getProp(l,"border-top-width"),"vml"!==this.renderer.type&&(t[0]+=env.A.getProp(l,"padding-left"),t[1]+=env.A.getProp(l,"padding-top")),t[0]+=this.attr.offsetx,t[1]+=this.attr.offsety,this.cPos=t.slice(),this.cPos},getPointLoc:function(t,e){var i,r,s,n;return i=this.getBoundingBox(),2===(r=t).length&&r.unshift(void 0),s=[0,0],n=e||0,utils_type.A.isNumber(n)&&(n=[n,n,n,n]),r[1]>i[2]-n[1]&&(s[0]=1),r[1]<i[0]+n[3]&&(s[0]=-1),r[2]>i[1]-n[0]&&(s[1]=1),r[2]<i[3]+n[2]&&(s[1]=-1),s},getLocationOrigin:function(t){return this.getPointLoc([0,0],t)},getMousePosition:function(t,e){var i,r,s=this.getCoordsTopLeftCorner();return i=env.A.getPosition(t,e,this.document),this.updateCSSTransforms(),r=[1,i[0]-s[0],i[1]-s[1]],(r=math.A.matVecMult(this.cssTransMat,r))[1]/=r[0],r[2]/=r[0],[r[1],r[2]]},initMoveOrigin:function(t,e){this.drag_dx=t-this.origin.scrCoords[1],this.drag_dy=e-this.origin.scrCoords[2],this.mode=this.BOARD_MODE_MOVE_ORIGIN,this.updateQuality=this.BOARD_QUALITY_LOW},initMoveObject:function(t,e,i,r){var s,n,o,a=[],l=[],u=this.objectsList.length,c={visProp:{layer:-1e4}};for(this._shiftKey=i.shiftKey,this._ctrlKey=i.ctrlKey,n=0;n<u;n++)o=(s=this.objectsList[n]).hasPoint&&s.hasPoint(t,e),s.visPropCalc.visible&&o&&(s.triggerEventHandlers([r+"down","down"],[i]),this.downObjects.push(s)),o&&s.isDraggable&&s.visPropCalc.visible&&(this.geonextCompatibilityMode&&(utils_type.A.isPoint(s)||s.elementClass===constants.A.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!utils_type.A.evaluate(s.visProp.fixed)&&(s.visProp.layer>c.visProp.layer||s.visProp.layer===c.visProp.layer&&s.lastDragTime.getTime()>=c.lastDragTime.getTime())&&(this.attr.ignorelabels&&utils_type.A.exists(c.label)&&s===c.label||(c=s,a.push(c),utils_type.A.exists(c.coords)?l.push(statistics.A.subtract(c.coords.scrCoords.slice(1),[t,e])):l.push([0,0])));return this.attr.drag.enabled&&a.length>0&&(this.mode=this.BOARD_MODE_DRAG),this.attr.takefirst?(a.length=1,this._drag_offset=l[0]):(a=a.slice(-1),this._drag_offset=l[l.length-1]),this._drag_offset||(this._drag_offset=[0,0]),"svg"===this.renderer.type&&utils_type.A.exists(a[0])&&utils_type.A.evaluate(a[0].visProp.dragtotopoflayer)&&1===a.length&&utils_type.A.exists(a[0].rendNode)&&a[0].rendNode.parentNode.appendChild(a[0].rendNode),a.length>=1&&(a[0].highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[i,a[0]])),a},moveObject:function(t,e,i,r,s){var n,o,a,l=new base_coords.A(constants.A.COORDS_BY_SCREEN,this.getScrCoordsOfMouse(t,e),this);i&&i.obj&&((n=i.obj).coords&&(o=n.coords.scrCoords.slice()),this.addLogEntry("drag",n,l.usrCoords.slice(1)),this.drag_position=[l.scrCoords[1],l.scrCoords[2]],this.drag_position=statistics.A.add(this.drag_position,this._drag_offset),this._shiftKey=r.shiftKey,this._ctrlKey=r.ctrlKey,utils_type.A.exists(n.coords)?n.setPositionDirectly(constants.A.COORDS_BY_SCREEN,this.drag_position):(this.displayInfobox(!1),isNaN(i.targets[0].Xprev+i.targets[0].Yprev)||n.setPositionDirectly(constants.A.COORDS_BY_SCREEN,[l.scrCoords[1],l.scrCoords[2]],[i.targets[0].Xprev,i.targets[0].Yprev]),i.targets[0].Xprev=l.scrCoords[1],i.targets[0].Yprev=l.scrCoords[2]),utils_type.A.exists(n.coords)&&(n.prepareUpdate().update(!1).updateRenderer(),this.updateInfobox(n),n.prepareUpdate().update(!0).updateRenderer()),n.coords&&(a=n.coords.scrCoords),n.coords&&o[1]===a[1]&&o[2]===a[2]||(n.triggerEventHandlers([s+"drag","drag"],[r]),this.update()),n.highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[r,n]),n.lastDragTime=new Date)},twoFingerMove:function(t,e,i){var r;utils_type.A.exists(t)&&utils_type.A.exists(t.obj)&&((r=t.obj).elementClass===constants.A.OBJECT_CLASS_LINE||r.type===constants.A.OBJECT_TYPE_POLYGON?this.twoFingerTouchObject(t.targets,r,e):r.elementClass===constants.A.OBJECT_CLASS_CIRCLE&&this.twoFingerTouchCircle(t.targets,r,e),i&&r.triggerEventHandlers(["touchdrag","drag"],[i]))},getTwoFingerTransform(t,e,i,r){var s,n,o,a,l,u,c,h,d,p,f,_,m,g,y,v,A;return n=(s=new base_coords.A(constants.A.COORDS_BY_SCREEN,[t.Xprev,t.Yprev],this).usrCoords)[1],o=s[2],a=(s=new base_coords.A(constants.A.COORDS_BY_SCREEN,[e.Xprev,e.Yprev],this).usrCoords)[1],l=s[2],h=(s=new base_coords.A(constants.A.COORDS_BY_SCREEN,[t.X,t.Y],this).usrCoords)[1],d=s[2],g=((_=(p=(s=new base_coords.A(constants.A.COORDS_BY_SCREEN,[e.X,e.Y],this).usrCoords)[1])-h)*(u=a-n)+(m=(f=s[2])-d)*(c=l-o))/(v=u*u+c*c),y=(m*u-_*c)/v,i||(g/=A=math.A.hypot(g,y),y/=A),r||(y=0),[1,0,0,.5*(h+p-g*(n+a)+y*(o+l)),g,-y,.5*(d+f-y*(n+a)-g*(o+l)),y,g]},twoFingerTouchObject:function(t,e,i){var r,s,n,o,a,l,u=!1;if(utils_type.A.exists(t[0])&&utils_type.A.exists(t[1])&&!isNaN(t[0].Xprev+t[0].Yprev+t[1].Xprev+t[1].Yprev)){if(s=this.getTwoFingerTransform(t[0],t[1],utils_type.A.evaluate(e.visProp.scalable),utils_type.A.evaluate(e.visProp.rotatable)),(r=this.create("transform",s,{type:"generic"})).update(),e.elementClass===constants.A.OBJECT_CLASS_LINE)n=[],e.point1.draggable()&&n.push(e.point1),e.point2.draggable()&&n.push(e.point2),r.applyOnce(n);else if(e.type===constants.A.OBJECT_TYPE_POLYGON){for(a=e.vertices.length-1,l=e.visProp,u=utils_type.A.evaluate(l.snaptogrid)||utils_type.A.evaluate(l.snaptopoints),o=0;o<a&&!u;++o)l=e.vertices[o].visProp,u=(u=u||utils_type.A.evaluate(l.snaptogrid)||utils_type.A.evaluate(l.snaptopoints))||!e.vertices[o].draggable();if(!u){for(n=[],o=0;o<a;++o)e.vertices[o].draggable()&&n.push(e.vertices[o]);r.applyOnce(n)}}this.update(),e.highlight(!0)}},twoFingerTouchCircle:function(t,e,i){var r,s,n,o,a,l,u,c,h,d,p;"pointCircle"!==e.method&&"pointLine"!==e.method&&utils_type.A.exists(t[0])&&utils_type.A.exists(t[1])&&!isNaN(t[0].Xprev+t[0].Yprev+t[1].Xprev+t[1].Yprev)&&(i===t[0].num?(r=t[1],s=t[0]):(r=t[0],s=t[1]),a=new base_coords.A(constants.A.COORDS_BY_SCREEN,[r.Xprev,r.Yprev],this).usrCoords,o=new base_coords.A(constants.A.COORDS_BY_SCREEN,[s.Xprev,s.Yprev],this).usrCoords,n=new base_coords.A(constants.A.COORDS_BY_SCREEN,[s.X,s.Y],this).usrCoords,u=geometry.A.rad(o.slice(1),a.slice(1),n.slice(1)),c=this.create("transform",[-a[1],-a[2]],{type:"translate"}),h=this.create("transform",[u],{type:"rotate"}),c.melt(h),utils_type.A.evaluate(e.visProp.scalable)&&(l=geometry.A.distance(a,n)/geometry.A.distance(a,o),d=this.create("transform",[l,l],{type:"scale"}),c.melt(d)),p=this.create("transform",[a[1],a[2]],{type:"translate"}),c.melt(p),e.center.draggable()&&c.applyOnce([e.center]),"twoPoints"===e.method?e.point2.draggable()&&c.applyOnce([e.point2]):"pointRadius"===e.method&&utils_type.A.isNumber(e.updateRadius.origin)&&e.setRadius(e.radius*l),this.update(e.center),e.highlight(!0))},highlightElements:function(t,e,i,r){var s,n,o,a={},l=this.objectsList.length;for(s=0;s<l;s++)o=(n=this.objectsList[s]).id,utils_type.A.exists(n.hasPoint)&&n.visPropCalc.visible&&n.hasPoint(t,e)&&(this.updateInfobox(n),utils_type.A.exists(this.highlightedObjects[o])||(a[o]=n,n.highlight(),this.triggerEventHandlers(["mousehit","hit"],[i,n,r])),n.mouseover?n.triggerEventHandlers(["mousemove","move"],[i]):(n.triggerEventHandlers(["mouseover","over"],[i]),n.mouseover=!0));for(s=0;s<l;s++)o=(n=this.objectsList[s]).id,n.mouseover&&(a[o]||(n.triggerEventHandlers(["mouseout","out"],[i]),n.mouseover=!1))},saveStartPos:function(t,i){var r,s,n=[];if(t.type===constants.A.OBJECT_TYPE_TICKS)n.push([1,NaN,NaN]);else if(t.elementClass===constants.A.OBJECT_CLASS_LINE)n.push(t.point1.coords.usrCoords),n.push(t.point2.coords.usrCoords);else if(t.elementClass===constants.A.OBJECT_CLASS_CIRCLE)n.push(t.center.coords.usrCoords),"twoPoints"===t.method&&n.push(t.point2.coords.usrCoords);else if(t.type===constants.A.OBJECT_TYPE_POLYGON)for(s=t.vertices.length-1,r=0;r<s;r++)n.push(t.vertices[r].coords.usrCoords);else if(t.type===constants.A.OBJECT_TYPE_SECTOR)n.push(t.point1.coords.usrCoords),n.push(t.point2.coords.usrCoords),n.push(t.point3.coords.usrCoords);else if(utils_type.A.isPoint(t)||t.type===constants.A.OBJECT_TYPE_GLIDER)n.push(t.coords.usrCoords);else if(t.elementClass===constants.A.OBJECT_CLASS_CURVE)t.points.length>0&&n.push(t.points[0].usrCoords);else try{n.push(t.coords.usrCoords)}catch(e){jxg.A.debug("JSXGraph+ saveStartPos: obj.coords.usrCoords not available: "+e)}for(s=n.length,r=0;r<s;r++)i.Zstart.push(n[r][0]),i.Xstart.push(n[r][1]),i.Ystart.push(n[r][2])},mouseOriginMoveStart:function(t){var e,i;return(e=this._isRequiredKeyPressed(t,"pan"))&&(i=this.getMousePosition(t),this.initMoveOrigin(i[0],i[1])),e},mouseOriginMove:function(t){var e,i=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return i&&(e=this.getMousePosition(t),this.moveOrigin(e[0],e[1],!0)),i},touchStartMoveOriginOneFinger:function(t){var e,i,r=t.touches;return(e=this.attr.pan.enabled&&!this.attr.pan.needtwofingers&&1===r.length)&&(i=this.getMousePosition(t,0),this.initMoveOrigin(i[0],i[1])),e},touchOriginMove:function(t){var e,i=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return i&&(e=this.getMousePosition(t,0),this.moveOrigin(e[0],e[1],!0)),i},originMoveEnd:function(){this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE},addEventHandlers:function(){env.A.supportsPointerEvents()?this.addPointerEventHandlers():(this.addMouseEventHandlers(),this.addTouchEventHandlers()),null!==this.containerObj&&(this.containerObj.oncontextmenu=function(t){return utils_type.A.exists(t)&&t.preventDefault(),!1})},addResizeEventHandlers:function(){if(env.A.isBrowser){try{this.startResizeObserver()}catch(t){env.A.addEvent(window,"resize",this.resizeListener,this),this.startIntersectionObserver()}env.A.addEvent(window,"scroll",this.scrollListener,this)}},removeEventHandlers:function(){this.removeMouseEventHandlers(),this.removeTouchEventHandlers(),this.removePointerEventHandlers(),this.removeFullscreenEventHandlers(),this.removeKeyboardEventHandlers(),env.A.isBrowser&&(utils_type.A.exists(this.resizeObserver)?this.stopResizeObserver():(env.A.removeEvent(window,"resize",this.resizeListener,this),this.stopIntersectionObserver()),env.A.removeEvent(window,"scroll",this.scrollListener,this))},addPointerEventHandlers:function(){if(!this.hasPointerHandlers&&env.A.isBrowser){var t=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(env.A.addEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),env.A.addEvent(t,"MSPointerMove",this.pointerMoveListener,this)):(env.A.addEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),env.A.addEvent(t,"pointermove",this.pointerMoveListener,this),env.A.addEvent(t,"pointerleave",this.pointerLeaveListener,this),env.A.addEvent(t,"click",this.pointerClickListener,this),env.A.addEvent(t,"dblclick",this.pointerDblClickListener,this)),null!==this.containerObj&&(this.containerObj.style.touchAction="none"),this.hasPointerHandlers=!0}},addMouseEventHandlers:function(){if(!this.hasMouseHandlers&&env.A.isBrowser){var t=this.attr.movetarget||this.containerObj;env.A.addEvent(this.containerObj,"mousedown",this.mouseDownListener,this),env.A.addEvent(t,"mousemove",this.mouseMoveListener,this),env.A.addEvent(t,"click",this.mouseClickListener,this),env.A.addEvent(t,"dblclick",this.mouseDblClickListener,this),this.hasMouseHandlers=!0}},addTouchEventHandlers:function(t){if(!this.hasTouchHandlers&&env.A.isBrowser){var e=this.attr.movetarget||this.containerObj;env.A.addEvent(this.containerObj,"touchstart",this.touchStartListener,this),env.A.addEvent(e,"touchmove",this.touchMoveListener,this),this.hasTouchHandlers=!0}},addWheelEventHandlers:function(){!this.hasWheelHandlers&&env.A.isBrowser&&(env.A.addEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),env.A.addEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasWheelHandlers=!0)},addFullscreenEventHandlers:function(){var t,e=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],i=e.length;if(!this.hasFullscreenEventHandlers&&env.A.isBrowser){for(t=0;t<i;t++)env.A.addEvent(this.document,e[t],this.fullscreenListener,this);this.hasFullscreenEventHandlers=!0}},addKeyboardEventHandlers:function(){this.attr.keyboard.enabled&&!this.hasKeyboardHandlers&&env.A.isBrowser&&(env.A.addEvent(this.containerObj,"keydown",this.keyDownListener,this),env.A.addEvent(this.containerObj,"focusin",this.keyFocusInListener,this),env.A.addEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!0)},removeKeyboardEventHandlers:function(){this.hasKeyboardHandlers&&env.A.isBrowser&&(env.A.removeEvent(this.containerObj,"keydown",this.keyDownListener,this),env.A.removeEvent(this.containerObj,"focusin",this.keyFocusInListener,this),env.A.removeEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!1)},removeFullscreenEventHandlers:function(){var t,e=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],i=e.length;if(this.hasFullscreenEventHandlers&&env.A.isBrowser){for(t=0;t<i;t++)env.A.removeEvent(this.document,e[t],this.fullscreenListener,this);this.hasFullscreenEventHandlers=!1}},removePointerEventHandlers:function(){if(this.hasPointerHandlers&&env.A.isBrowser){var t=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(env.A.removeEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),env.A.removeEvent(t,"MSPointerMove",this.pointerMoveListener,this)):(env.A.removeEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),env.A.removeEvent(t,"pointermove",this.pointerMoveListener,this),env.A.removeEvent(t,"pointerleave",this.pointerLeaveListener,this),env.A.removeEvent(t,"click",this.pointerClickListener,this),env.A.removeEvent(t,"dblclick",this.pointerDblClickListener,this)),this.hasWheelHandlers&&(env.A.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),env.A.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this)),this.hasPointerUp&&(window.navigator.msPointerEnabled?env.A.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(env.A.removeEvent(this.document,"pointerup",this.pointerUpListener,this),env.A.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),this.hasPointerHandlers=!1}},removeMouseEventHandlers:function(){if(this.hasMouseHandlers&&env.A.isBrowser){var t=this.attr.movetarget||this.containerObj;env.A.removeEvent(this.containerObj,"mousedown",this.mouseDownListener,this),env.A.removeEvent(t,"mousemove",this.mouseMoveListener,this),env.A.removeEvent(t,"click",this.mouseClickListener,this),env.A.removeEvent(t,"dblclick",this.mouseDblClickListener,this),this.hasMouseUp&&(env.A.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),this.hasWheelHandlers&&(env.A.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),env.A.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this)),this.hasMouseHandlers=!1}},removeTouchEventHandlers:function(){if(this.hasTouchHandlers&&env.A.isBrowser){var t=this.attr.movetarget||this.containerObj;env.A.removeEvent(this.containerObj,"touchstart",this.touchStartListener,this),env.A.removeEvent(t,"touchmove",this.touchMoveListener,this),this.hasTouchEnd&&(env.A.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.hasTouchHandlers=!1}},clickLeftArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]+.1*this.canvasWidth,this.origin.scrCoords[2]),this},clickRightArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]-.1*this.canvasWidth,this.origin.scrCoords[2]),this},clickUpArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]-.1*this.canvasHeight),this},clickDownArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]+.1*this.canvasHeight),this},gestureChangeListener:function(t){var e,i,r,s,n,o,a,l,u,c,h,d,p,f=!1,_=this.attr.zoom.factorx,m=this.attr.zoom.factory,g=!1;return this.mode!==this.BOARD_MODE_ZOOM||(t.preventDefault(),o=geometry.A.distance([t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY],2),void 0===t.scale&&(t.scale=o/this.prevDist),!!utils_type.A.exists(this.prevCoords)&&(i=[t.touches[0].clientX-this.prevCoords[0][0],t.touches[0].clientY-this.prevCoords[0][1]],r=[t.touches[1].clientX-this.prevCoords[1][0],t.touches[1].clientY-this.prevCoords[1][1]],i[0]*i[0]+i[1]*i[1]<100&&r[0]*r[0]+r[1]*r[1]<100||(s=geometry.A.rad(i,[0,0],r),"pan"!==this.isPreviousGesture&&Math.abs(s)>.2*Math.PI&&Math.abs(s)<1.8*Math.PI&&(f=!0),"pan"===this.isPreviousGesture||f||(Math.abs(t.scale)<.77||Math.abs(t.scale)>1.3)&&(f=!0),n=t.scale/this.prevScale,this.prevScale=t.scale,this.prevCoords=[[t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY]],e=new base_coords.A(constants.A.COORDS_BY_SCREEN,this.getMousePosition(t,0),this),this.attr.pan.enabled&&this.attr.pan.needtwofingers&&!f?(this.isPreviousGesture="pan",this.moveOrigin(e.scrCoords[1],e.scrCoords[2],!0)):this.attr.zoom.enabled&&Math.abs(n-1)<.5&&(g=!1,u=this.attr.zoom.center,(this.attr.zoom.pinchhorizontal||this.attr.zoom.pinchvertical)&&(c=Math.abs(t.touches[0].clientX-t.touches[1].clientX),h=Math.abs(t.touches[0].clientY-t.touches[1].clientY),a=Math.abs(Math.atan2(h,c)),l=Math.PI*this.attr.zoom.pinchsensitivity/90),!this.keepaspectratio&&this.attr.zoom.pinchhorizontal&&a<l?(this.attr.zoom.factorx=n,this.attr.zoom.factory=1,d=0,p=0,g=!0):!this.keepaspectratio&&this.attr.zoom.pinchvertical&&Math.abs(a-.5*Math.PI)<l?(this.attr.zoom.factorx=1,this.attr.zoom.factory=n,d=0,p=0,g=!0):this.attr.zoom.pinch&&(this.attr.zoom.factorx=n,this.attr.zoom.factory=n,d=e.usrCoords[1],p=e.usrCoords[2],g=!0),g&&("board"===u?this.zoomIn():this.zoomIn(d,p),this.attr.zoom.factorx=_,this.attr.zoom.factory=m))),!1))},gestureStartListener:function(t){var e;return t.preventDefault(),this.prevScale=1,this.prevDist=geometry.A.distance([t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY],2),this.prevCoords=[[t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY]],this.isPreviousGesture="none",e=this.getMousePosition(t,0),this.initMoveOrigin(e[0],e[1]),this.mode=this.BOARD_MODE_ZOOM,!1},_isRequiredKeyPressed:function(t,e){var i=this.attr[e];return!!i.enabled&&!(!(i.needshift&&t.shiftKey||!i.needshift&&!t.shiftKey)||!(i.needctrl&&t.ctrlKey||!i.needctrl&&!t.ctrlKey))},_isPointerRegistered:function(t){var e,i=this._board_touches.length;for(e=0;e<i;e++)if(this._board_touches[e].pointerId===t.pointerId)return!0;return!1},_pointerStorePosition:function(t){var e,i;for(e=0,i=!1;e<this._board_touches.length;e++)if(this._board_touches[e].pointerId===t.pointerId){this._board_touches[e].clientX=t.clientX,this._board_touches[e].clientY=t.clientY,i=!0;break}return!i&&this._board_touches.length<2&&this._board_touches.push({pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY}),this},_pointerRemoveTouches:function(t){var e;for(e=0;e<this._board_touches.length;e++)if(this._board_touches[e].pointerId===t.pointerId){this._board_touches.splice(e,1);break}return this},_pointerClearTouches:function(t){this._board_touches.length>0&&this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE,this._board_touches=[],this.touches=[]},_getPointerInputDevice:function(t){if(env.A.isBrowser){if("touch"===t.pointerType||window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>1)return"touch";if("mouse"===t.pointerType)return"mouse";if("pen"===t.pointerType)return"pen"}return"mouse"},pointerDownListener:function(t,i,r){var s,n,o,a,l,u,c,h,d,p,f;if(!i&&this._isPointerRegistered(t))return!1;if(null===utils_type.A.evaluate(this.attr.movetarget)&&utils_type.A.exists(t.target)&&utils_type.A.exists(t.target.releasePointerCapture)&&t.target.releasePointerCapture(t.pointerId),!i&&t.isPrimary,this.hasPointerUp||(window.navigator.msPointerEnabled?env.A.addEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(env.A.addEvent(this.document,"pointerup",this.pointerUpListener,this),env.A.addEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!0),this.hasMouseHandlers&&this.removeMouseEventHandlers(),this.hasTouchHandlers&&this.removeTouchEventHandlers(),this.document.selection&&utils_type.A.isFunction(this.document.selection.empty))this.document.selection.empty();else if(window.getSelection&&(u=window.getSelection()).removeAllRanges)try{u.removeAllRanges()}catch(e){}if(this._inputDevice=this._getPointerInputDevice(t),h=this._inputDevice,this.options.precision.hasPoint=this.options.precision[h],a=this.getMousePosition(t),this._testForSelection(t),this.selectingMode)return this._startSelecting(a),void this.triggerEventHandlers(["touchstartselecting","pointerstartselecting","startselecting"],[t]);if(this.attr.drag.enabled&&i?(l=[i],this.mode=this.BOARD_MODE_DRAG):l=this.initMoveObject(a[0],a[1],t,h),c={num:t.pointerId,X:a[0],Y:a[1],Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},l.length>0){for(p=l[l.length-1],d=!1,s=0;s<this.touches.length;s++)if(this.touches[s].obj===p){n=s,o=this.touches[s].targets.push(c)-1,d=!0;break}d||(o=0,n=this.touches.push({obj:p,targets:[c]})-1),this.dehighlightAll(),p.highlight(!0),this.saveStartPos(p,this.touches[n].targets[o]),t&&t.preventDefault&&!r&&t.preventDefault()}return this.touches.length>0&&!r&&(t.preventDefault(),t.stopPropagation()),!!env.A.isBrowser&&("touch"!==this._getPointerInputDevice(t)?this.mode===this.BOARD_MODE_NONE&&this.mouseOriginMoveStart(t):(this._pointerStorePosition(t),t.touches=this._board_touches,1===t.touches.length&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(t)||2!==t.touches.length||this.mode!==this.BOARD_MODE_NONE&&this.mode!==this.BOARD_MODE_MOVE_ORIGIN||(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(t))),f="none",this.mode!==this.BOARD_MODE_NONE||!utils_type.A.evaluate(this.attr.browserpan)||utils_type.A.evaluate(this.attr.pan.enabled)&&!utils_type.A.evaluate(this.attr.pan.needtwofingers)||(f="pan-x pan-y"),this.containerObj.style.touchAction=f,this.triggerEventHandlers(["touchstart","down","pointerdown","MSPointerDown"],[t]),!0)},_handleClicks:function(t,e){var i,r,s=this;if(this.selectingMode)t.stopPropagation();else{if(r=utils_type.A.evaluate(this.attr.clickdelay),utils_type.A.evaluate(this.attr.dblclicksuppressclick))this._preventSingleClick=!1,this._singleClickTimer=setTimeout((function(){if(!s._preventSingleClick)for(i in s.triggerEventHandlers(e,[t]),s.clickObjects)s.clickObjects.hasOwnProperty(i)&&(s.clickObjects[i].triggerEventHandlers(e,[t]),delete s.clickObjects[i])}),r);else{for(i in s.triggerEventHandlers(e,[t]),s.clickObjects)s.clickObjects.hasOwnProperty(i)&&s.clickObjects[i].triggerEventHandlers(e,[t]);setTimeout((function(){for(i in s.clickObjects)s.clickObjects.hasOwnProperty(i)&&delete s.clickObjects[i]}),r)}t.stopPropagation()}},_handleDblClicks:function(t,e){var i;if(this.selectingMode)t.stopPropagation();else{for(i in this._preventSingleClick=!0,clearTimeout(this._singleClickTimer),this.triggerEventHandlers(e,[t]),this.clickObjects)this.clickObjects.hasOwnProperty(i)&&(this.clickObjects[i].triggerEventHandlers(e,[t]),delete this.clickObjects[i]);t.stopPropagation()}},pointerClickListener:function(t){this._handleClicks(t,["click","pointerclick"])},pointerDblClickListener:function(t){this._handleDblClicks(t,["dblclick","pointerdblclick"])},mouseClickListener:function(t){this._handleClicks(t,["click","mouseclick"])},mouseDblClickListener:function(t){this._handleDblClicks(t,["dblclick","mousedblclick"])},pointerMoveListener:function(t){var e,i,r,s,n,o;if("touch"===this._getPointerInputDevice(t)&&!this._isPointerRegistered(t))return this.BOARD_MODE_NONE;if(!this.checkFrameRate(t))return!1;if(this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.mode!==this.BOARD_MODE_NONE&&(t.preventDefault(),t.stopPropagation()),this.updateQuality=this.BOARD_QUALITY_LOW,this._inputDevice=this._getPointerInputDevice(t),o=this._inputDevice,this.options.precision.hasPoint=this.options.precision[o],s=.3333*this.options.precision.hasPoint,r=this.getMousePosition(t),null===utils_type.A.evaluate(this.attr.movetarget)&&r[0]<=s||r[1]<=s||r[0]>=this.canvasWidth-s||r[1]>=this.canvasHeight-s)return this.mode===this.BOARD_MODE_NONE;if(this.selectingMode)this._moveSelecting(r),this.triggerEventHandlers(["touchmoveselecting","moveselecting","pointermoveselecting"],[t,this.mode]);else if(!this.mouseOriginMove(t))if(this.mode===this.BOARD_MODE_DRAG){for(e=0;e<this.touches.length;e++)for(n=this.touches[e].targets,i=0;i<n.length;i++)if(n[i].num===t.pointerId){n[i].X=r[0],n[i].Y=r[1],1===n.length?this.moveObject(r[0],r[1],this.touches[e],t,o):2===n.length&&(this.twoFingerMove(this.touches[e],t.pointerId,t),n[i].Xprev=r[0],n[i].Yprev=r[1]);break}}else"touch"===this._getPointerInputDevice(t)&&(this._pointerStorePosition(t),2===this._board_touches.length&&(t.touches=this._board_touches,this.gestureChangeListener(t))),this.highlightElements(r[0],r[1],t,-1);return this.triggerEventHandlers(["pointermove","MSPointerMove","move"],[t,this.mode]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},pointerUpListener:function(t){var e,i,r,s,n,o=!1;if(this.triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[t]),this.displayInfobox(!1),t)for(e=0;e<this.touches.length;e++)for(n=this.touches[e].targets,i=0;i<n.length;i++)if(n[i].num===t.pointerId){n.splice(i,1),0===n.length&&this.touches.splice(e,1);break}if(this.originMoveEnd(),this.update(),this.selectingMode)this._stopSelecting(t),this.triggerEventHandlers(["touchstopselecting","pointerstopselecting","stopselecting"],[t]),this.stopSelectionMode();else for(e=this.downObjects.length-1;e>-1;e--){for(r=!1,i=0;i<this.touches.length;i++)this.touches[i].obj.id===this.downObjects[e].id&&(r=!0);r||(this.downObjects[e].triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[t]),utils_type.A.exists(this.downObjects[e].coords)||(this.downObjects[e].snapToGrid(),this.downObjects[e].snapToPoints(),o=!0),s=this.downObjects[e].eventHandlers,(utils_type.A.exists(s.click)&&s.click.length>0||utils_type.A.exists(s.pointerclick)&&s.pointerclick.length>0||utils_type.A.exists(s.dblclick)&&s.dblclick.length>0||utils_type.A.exists(s.pointerdblclick)&&s.pointerdblclick.length>0)&&(this.clickObjects[this.downObjects[e].id]=this.downObjects[e]),this.downObjects.splice(e,1))}return this.hasPointerUp&&(window.navigator.msPointerEnabled?env.A.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(env.A.removeEvent(this.document,"pointerup",this.pointerUpListener,this),env.A.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),this._pointerClearTouches(t.pointerId),"touch"!==this._getPointerInputDevice(t)&&this.dehighlightAll(),o&&this.update(),!0},pointerLeaveListener:function(t){return this.displayInfobox(!1),this.dehighlightAll(),!0},touchStartListener:function(t){var e,i,r,s,n,o,a,l,u,c,h=this.options.precision.touch,d=t.touches;for(this.hasTouchEnd||(env.A.addEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!0),this.document.selection&&utils_type.A.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,e=0;e<d.length;e++)d[e].jxg_isused=!1;for(e=0;e<this.touches.length;e++)for(c=this.touches[e].targets,s=0;s<c.length;s++){c[s].num=-1,h=this.options.precision.touch;do{for(n=0;n<d.length;n++)if(Math.abs(Math.pow(d[n].screenX-c[s].X,2)+Math.pow(d[n].screenY-c[s].Y,2))<h*h){c[s].num=n,c[s].X=d[n].screenX,c[s].Y=d[n].screenY,d[n].jxg_isused=!0;break}h*=2}while(-1===c[s].num&&h<this.options.precision.touchMax);-1===c[s].num&&(jxg.A.debug("i couldn't find a targettouches for target no "+s+" on "+this.touches[e].obj.name+" ("+this.touches[e].obj.id+"). Removed the target."),jxg.A.debug("eps = "+h+", touchMax = "+src_options.A.precision.touchMax),c.splice(e,1))}for(e=0;e<d.length;e++)if(!d[e].jxg_isused){if(i=this.getMousePosition(t,e),this.selectingMode)return this._startSelecting(i),this.triggerEventHandlers(["touchstartselecting","startselecting"],[t]),t.preventDefault(),t.stopPropagation(),this.options.precision.hasPoint=this.options.precision.mouse,this.touches.length>0;if(0!==(r=this.initMoveObject(i[0],i[1],t,"touch")).length)if(o=r[r.length-1],u={num:e,X:d[e].screenX,Y:d[e].screenY,Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},utils_type.A.isPoint(o)||o.elementClass===constants.A.OBJECT_CLASS_TEXT||o.type===constants.A.OBJECT_TYPE_TICKS||o.type===constants.A.OBJECT_TYPE_IMAGE)l=[u],this.saveStartPos(o,l[0]),this.touches.push({obj:o,targets:l}),o.highlight(!0);else if(o.elementClass===constants.A.OBJECT_CLASS_LINE||o.elementClass===constants.A.OBJECT_CLASS_CIRCLE||o.elementClass===constants.A.OBJECT_CLASS_CURVE||o.type===constants.A.OBJECT_TYPE_POLYGON){for(a=!1,s=0;s<this.touches.length;s++)o.id===this.touches[s].obj.id&&(a=!0,1===this.touches[s].targets.length&&(this.saveStartPos(o,u),this.touches[s].targets.push(u)),d[e].jxg_isused=!0);a||(l=[u],this.saveStartPos(o,l[0]),this.touches.push({obj:o,targets:l}),o.highlight(!0))}d[e].jxg_isused=!0}return this.touches.length>0&&(t.preventDefault(),t.stopPropagation()),1===d.length&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(t)||2!==d.length||this.mode!==this.BOARD_MODE_NONE&&this.mode!==this.BOARD_MODE_MOVE_ORIGIN||(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(t)),this.options.precision.hasPoint=this.options.precision.mouse,this.triggerEventHandlers(["touchstart","down"],[t]),!1},touchMoveListener:function(t){var e,i,r,s,n=t.touches;if(!this.checkFrameRate(t))return!1;if(this.mode!==this.BOARD_MODE_NONE&&(t.preventDefault(),t.stopPropagation()),this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,this.updateQuality=this.BOARD_QUALITY_LOW,this.selectingMode){for(e=0;e<n.length;e++)if(!n[e].jxg_isused){i=this.getMousePosition(t,e),this._moveSelecting(i),this.triggerEventHandlers(["touchmoves","moveselecting"],[t,this.mode]);break}}else if(!this.touchOriginMove(t))if(this.mode===this.BOARD_MODE_DRAG){for(e=0;e<this.touches.length;e++)if(1===(s=this.touches[e].targets).length){if(n[s[0].num]){if((i=this.getMousePosition(t,s[0].num))[0]<0||i[0]>this.canvasWidth||i[1]<0||i[1]>this.canvasHeight)return;s[0].X=i[0],s[0].Y=i[1],this.moveObject(i[0],i[1],this.touches[e],t,"touch")}}else if(2===s.length&&s[0].num>-1&&s[1].num>-1&&n[s[0].num]&&n[s[1].num]){if(i=this.getMousePosition(t,s[0].num),r=this.getMousePosition(t,s[1].num),i[0]<0||i[0]>this.canvasWidth||i[1]<0||i[1]>this.canvasHeight||r[0]<0||r[0]>this.canvasWidth||r[1]<0||r[1]>this.canvasHeight)return;s[0].X=i[0],s[0].Y=i[1],s[1].X=r[0],s[1].Y=r[1],this.twoFingerMove(this.touches[e],s[0].num,t),s[0].Xprev=i[0],s[0].Yprev=i[1],s[1].Xprev=r[0],s[1].Yprev=r[1]}}else 2===n.length&&this.gestureChangeListener(t),i=this.getMousePosition(t,0),this.highlightElements(i[0],i[1],t,-1);return this.mode!==this.BOARD_MODE_DRAG&&this.displayInfobox(!1),this.triggerEventHandlers(["touchmove","move"],[t,this.mode]),this.options.precision.hasPoint=this.options.precision.mouse,this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},touchEndListener:function(t){var e,i,r,s,n,o,a=this.options.precision.touch,l=[],u=t&&t.touches,c=!1;if(this.triggerEventHandlers(["touchend","up"],[t]),this.displayInfobox(!1),this.selectingMode)this._stopSelecting(t),this.triggerEventHandlers(["touchstopselecting","stopselecting"],[t]),this.stopSelectionMode();else if(u&&u.length>0){for(e=0;e<this.touches.length;e++)l[e]=this.touches[e];for(this.touches.length=0,e=0;e<u.length;e++)u[e].jxg_isused=!1;for(e=0;e<l.length;e++){for(s=!1,n=0,o=l[e].targets,i=0;i<o.length;i++)for(o[i].found=!1,r=0;r<u.length;r++)if(Math.abs(Math.pow(u[r].screenX-o[i].X,2)+Math.pow(u[r].screenY-o[i].Y,2))<a*a){o[i].found=!0,o[i].num=r,o[i].X=u[r].screenX,o[i].Y=u[r].screenY,n+=1;break}if(utils_type.A.isPoint(l[e].obj)?s=o[0]&&o[0].found:l[e].obj.elementClass===constants.A.OBJECT_CLASS_LINE?s=o[0]&&o[0].found||o[1]&&o[1].found:l[e].obj.elementClass===constants.A.OBJECT_CLASS_CIRCLE&&(s=1===n||3===n),s)for(this.touches.push({obj:l[e].obj,targets:[]}),i=0;i<o.length;i++)o[i].found&&this.touches[this.touches.length-1].targets.push({num:o[i].num,X:o[i].screenX,Y:o[i].screenY,Xprev:NaN,Yprev:NaN,Xstart:o[i].Xstart,Ystart:o[i].Ystart,Zstart:o[i].Zstart});else l[e].obj.noHighlight()}}else this.touches.length=0;for(e=this.downObjects.length-1;e>-1;e--){for(s=!1,i=0;i<this.touches.length;i++)this.touches[i].obj.id===this.downObjects[e].id&&(s=!0);s||(this.downObjects[e].triggerEventHandlers(["touchup","up"],[t]),utils_type.A.exists(this.downObjects[e].coords)||(this.downObjects[e].snapToGrid(),this.downObjects[e].snapToPoints(),c=!0),this.downObjects.splice(e,1))}return u&&0!==u.length||(this.hasTouchEnd&&(env.A.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.originMoveEnd(),c&&this.update()),!0},mouseDownListener:function(t){var e,i,r;if(this.document.selection&&utils_type.A.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),!this.hasMouseUp)return env.A.addEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!0,this._inputDevice="mouse",this.options.precision.hasPoint=this.options.precision.mouse,e=this.getMousePosition(t),this._testForSelection(t),this.selectingMode?(this._startSelecting(e),void this.triggerEventHandlers(["mousestartselecting","startselecting"],[t])):(0===(i=this.initMoveObject(e[0],e[1],t,"mouse")).length?(this.mode=this.BOARD_MODE_NONE,r=!0):(this.mouse={obj:null,targets:[{X:e[0],Y:e[1],Xprev:NaN,Yprev:NaN}]},this.mouse.obj=i[i.length-1],this.dehighlightAll(),this.mouse.obj.highlight(!0),this.mouse.targets[0].Xstart=[],this.mouse.targets[0].Ystart=[],this.mouse.targets[0].Zstart=[],this.saveStartPos(this.mouse.obj,this.mouse.targets[0]),t&&t.preventDefault?t.preventDefault():window.event&&(window.event.returnValue=!1)),this.mode===this.BOARD_MODE_NONE&&(r=this.mouseOriginMoveStart(t)),this.triggerEventHandlers(["mousedown","down"],[t]),r)},mouseMoveListener:function(t){var e;if(!this.checkFrameRate(t))return!1;e=this.getMousePosition(t),this.updateQuality=this.BOARD_QUALITY_LOW,this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.selectingMode?(this._moveSelecting(e),this.triggerEventHandlers(["mousemoveselecting","moveselecting"],[t,this.mode])):this.mouseOriginMove(t)||(this.mode===this.BOARD_MODE_DRAG?this.moveObject(e[0],e[1],this.mouse,t,"mouse"):this.highlightElements(e[0],e[1],t,-1),this.triggerEventHandlers(["mousemove","move"],[t,this.mode])),this.updateQuality=this.BOARD_QUALITY_HIGH},mouseUpListener:function(t){var e;if(!1===this.selectingMode&&this.triggerEventHandlers(["mouseup","up"],[t]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mouse&&this.mouse.obj&&(utils_type.A.exists(this.mouse.obj.coords)||(this.mouse.obj.snapToGrid(this.mouse.targets[0]),this.mouse.obj.snapToPoints())),this.originMoveEnd(),this.dehighlightAll(),this.update(),this.selectingMode)this._stopSelecting(t),this.triggerEventHandlers(["mousestopselecting","stopselecting"],[t]),this.stopSelectionMode();else for(e=0;e<this.downObjects.length;e++)this.downObjects[e].triggerEventHandlers(["mouseup","up"],[t]);this.downObjects.length=0,this.hasMouseUp&&(env.A.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),this.mouse=null},mouseWheelListener:function(t){var e,i;return!(this.attr.zoom.enabled&&this.attr.zoom.wheel&&this._isRequiredKeyPressed(t,"zoom"))||(e=(t=t||window.event).detail?-t.detail:t.wheelDelta/40,i="board"===this.attr.zoom.center?[]:new base_coords.A(constants.A.COORDS_BY_SCREEN,this.getMousePosition(t),this).usrCoords,e>0?this.zoomIn(i[1],i[2]):this.zoomOut(i[1],i[2]),this.triggerEventHandlers(["mousewheel"],[t]),t.preventDefault(),!1)},keyDownListener:function(t){var e,i,r,s,n,o,a=t.target.id,l=0,u=0,c=utils_type.A.evaluate(this.attr.keyboard.dx)/this.unitX,h=utils_type.A.evaluate(this.attr.keyboard.dy)/this.unitY,d=!1,p=!0;return!(!this.attr.keyboard.enabled||""===a)&&((!(s=this.containerObj.shadowRoot||document).activeElement||"INPUT"!==(i=s.activeElement).tagName&&"textarea"!==i.tagName)&&(e=a.replace(this.containerObj.id+"_",""),i=this.select(e),utils_type.A.exists(i.coords)&&(o=i.coords.usrCoords.slice(1)),utils_type.A.evaluate(this.attr.keyboard.panshift)&&t.shiftKey||utils_type.A.evaluate(this.attr.keyboard.panctrl)&&t.ctrlKey?(!0===utils_type.A.evaluate(this.attr.zoom.enabled)&&(d=!0),38===t.keyCode?this.clickUpArrow():40===t.keyCode?this.clickDownArrow():37===t.keyCode?this.clickLeftArrow():39===t.keyCode?this.clickRightArrow():d&&171===t.keyCode?this.zoomIn():d&&173===t.keyCode?this.zoomOut():d&&79===t.keyCode?this.zoom100():p=!1):(utils_type.A.exists(i.visProp)&&(utils_type.A.exists(i.visProp.snaptogrid)&&i.visProp.snaptogrid&&utils_type.A.evaluate(i.visProp.snapsizex)&&utils_type.A.evaluate(i.visProp.snapsizey)?(c=l=(r=i.getSnapSizes())[0],h=u=r[1]):utils_type.A.exists(i.visProp.attracttogrid)&&i.visProp.attracttogrid&&utils_type.A.evaluate(i.visProp.attractordistance)&&utils_type.A.evaluate(i.visProp.attractorunit)&&(u=l=1.1*utils_type.A.evaluate(i.visProp.attractordistance),"screen"===utils_type.A.evaluate(i.visProp.attractorunit)&&(l/=this.unitX,u/=this.unitX),c=Math.max(l,c),h=Math.max(u,h))),38===t.keyCode?n=[0,h]:40===t.keyCode?n=[0,-h]:37===t.keyCode?n=[-c,0]:39===t.keyCode?n=[c,0]:p=!1,n&&i.isDraggable&&i.visPropCalc.visible&&(this.geonextCompatibilityMode&&(utils_type.A.isPoint(i)||i.elementClass===constants.A.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!utils_type.A.evaluate(i.visProp.fixed)&&(this.mode=this.BOARD_MODE_DRAG,utils_type.A.exists(i.coords)&&(n[0]+=o[0],n[1]+=o[1]),utils_type.A.exists(i.coords)?(i.setPosition(jxg.A.COORDS_BY_USER,n),this.updateInfobox(i)):(this.displayInfobox(!1),i.setPositionDirectly(constants.A.COORDS_BY_USER,n,[0,0])),this.triggerEventHandlers(["keymove","move"],[t,this.mode]),i.triggerEventHandlers(["keydrag","drag"],[t]),this.mode=this.BOARD_MODE_NONE)),this.update(),p&&utils_type.A.exists(t.preventDefault)&&t.preventDefault(),p))},keyFocusInListener:function(t){var e,i,r=t.target.id;if(!this.attr.keyboard.enabled||""===r)return!1;e=r.replace(this.containerObj.id+"_",""),i=this.select(e),utils_type.A.exists(i.highlight)&&(i.highlight(!0),this.focusObjects=[e],i.triggerEventHandlers(["hit"],[t])),utils_type.A.exists(i.coords)&&this.updateInfobox(i)},keyFocusOutListener:function(t){if(!this.attr.keyboard.enabled)return!1;this.focusObjects=[],this.dehighlightAll(),this.displayInfobox(!1)},updateContainerDims:function(){var t,e,i,r,s,n;t=(i=this.containerObj.getBoundingClientRect()).width,e=i.height,window&&window.getComputedStyle&&(r=window.getComputedStyle(this.containerObj,null),s=parseFloat(r.getPropertyValue("border-left-width"))+parseFloat(r.getPropertyValue("border-right-width")),isNaN(s)||(t-=s),n=parseFloat(r.getPropertyValue("border-top-width"))+parseFloat(r.getPropertyValue("border-bottom-width")),isNaN(n)||(e-=n)),t<=0||e<=0||isNaN(t)||isNaN(e)||(isNaN(this.getBoundingBox()[0])&&this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"keep"),utils_type.A.exists(this._prevDim)&&this._prevDim.w===t&&this._prevDim.h===e||(this.resizeContainer(t,e,!0),this._prevDim={w:t,h:e}))},startResizeObserver:function(){var t=this;env.A.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&(this.resizeObserver=new ResizeObserver((function(e){t._isResizing||(t._isResizing=!0,window.setTimeout((function(){try{t.updateContainerDims()}catch(e){t.stopResizeObserver()}finally{t._isResizing=!1}}),t.attr.resize.throttle))})),this.resizeObserver.observe(this.containerObj))},stopResizeObserver:function(){env.A.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&utils_type.A.exists(this.resizeObserver)&&this.resizeObserver.unobserve(this.containerObj)},resizeListener:function(){var t=this;env.A.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&(this._isScrolling||this._isResizing||(this._isResizing=!0,window.setTimeout((function(){t.updateContainerDims(),t._isResizing=!1}),this.attr.resize.throttle)))},scrollListener:function(t){var e=this;env.A.isBrowser&&(this._isScrolling||(this._isScrolling=!0,window.setTimeout((function(){e._isScrolling=!1}),66)))},startIntersectionObserver:function(){var t=this;try{this.intersectionObserver=new IntersectionObserver((function(e){isNaN(t.getBoundingBox()[0])&&t.updateContainerDims()}),{root:null,rootMargin:"0px",threshold:.8}),this.intersectionObserver.observe(t.containerObj)}catch(e){jxg.A.debug("JSXGraph: IntersectionObserver not available in this browser.")}},stopIntersectionObserver:function(){utils_type.A.exists(this.intersectionObserver)&&this.intersectionObserver.unobserve(this.containerObj)},beforeprintListener:function(t){this.updateContainerDims()},initInfobox:function(t){var e=utils_type.A.copyAttributes(t,this.options,"infobox");return e.id=this.id+"_infobox",this.infobox=this.create("text",[0,0,"0,0"],e),this.infobox.dump=!1,this.displayInfobox(!1),this},updateInfobox:function(t){var e,i,r,s,n,o,a,l=utils_type.A.evaluate(t.visProp.showinfobox);return!utils_type.A.evaluate(this.attr.showinfobox)&&"inherit"===l||!l||utils_type.A.isPoint(t)&&(r=t.coords.usrCoords[1],s=t.coords.usrCoords[2],o=utils_type.A.evaluate(this.infobox.visProp.distancex),a=utils_type.A.evaluate(this.infobox.visProp.distancey),this.infobox.setCoords(r+o/this.unitX,s+a/this.unitY),n=utils_type.A.evaluate(t.visProp.infoboxdigits),"string"!==typeof t.infoboxText?("auto"===n?this.infobox.useLocale()?(e=this.infobox.formatNumberLocale(r),i=this.infobox.formatNumberLocale(s)):(e=utils_type.A.autoDigits(r),i=utils_type.A.autoDigits(s)):utils_type.A.isNumber(n)?this.infobox.useLocale()?(e=this.infobox.formatNumberLocale(r,n),i=this.infobox.formatNumberLocale(s,n)):(e=utils_type.A.toFixed(r,n),i=utils_type.A.toFixed(s,n)):(e=r,i=s),this.highlightInfobox(e,i,t)):this.highlightCustomInfobox(t.infoboxText,t),this.displayInfobox(!0)),this},displayInfobox:function(t){return!t&&this.focusObjects.length>0&&this.select(this.focusObjects[0]).elementClass===constants.A.OBJECT_CLASS_POINT||this.infobox.hiddenByParent===t&&(this.infobox.hiddenByParent=!t,this.infobox.prepareUpdate().updateVisibility(t).updateRenderer()),this},showInfobox:function(t){return this.displayInfobox(t)},highlightInfobox:function(t,e,i){return this.highlightCustomInfobox("("+t+", "+e+")",i),this},highlightCustomInfobox:function(t,e){return this.infobox.setText(t),this},dehighlightAll:function(){var t,e,i={},r=!1;for(t in this.highlightedObjects)this.highlightedObjects.hasOwnProperty(t)&&(e=this.highlightedObjects[t],this.focusObjects.indexOf(t)<0?((this.hasMouseHandlers||this.hasPointerHandlers)&&e.noHighlight(),r=!0):i[t]=e);return this.highlightedObjects=i,"canvas"===this.renderer.type&&r&&(this.prepareUpdate(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw()),this},getScrCoordsOfMouse:function(t,e){return[t,e]},getUsrCoordsOfMouse:function(t){var e=this.getCoordsTopLeftCorner(),i=env.A.getPosition(t,null,this.document),r=i[0]-e[0],s=i[1]-e[1];return new base_coords.A(constants.A.COORDS_BY_SCREEN,[r,s],this).usrCoords.slice(1)},getAllUnderMouse:function(t){var e=this.getAllObjectsUnderMouse(t);return e.push(this.getUsrCoordsOfMouse(t)),e},getAllObjectsUnderMouse:function(t){var e,i,r=this.getCoordsTopLeftCorner(),s=env.A.getPosition(t,null,this.document),n=s[0]-r[0],o=s[1]-r[1],a=[],l=this.objectsList.length;for(e=0;e<l;e++)(i=this.objectsList[e]).visPropCalc.visible&&i.hasPoint&&i.hasPoint(n,o)&&(a[a.length]=i);return a},updateCoords:function(){var t,e,i=this.objectsList.length;for(e=0;e<i;e++)t=this.objectsList[e],utils_type.A.exists(t.coords)&&(utils_type.A.evaluate(t.visProp.frozen)?t.is3D?t.element2D.coords.screen2usr():t.coords.screen2usr():t.is3D?t.element2D.coords.usr2screen():t.coords.usr2screen());return this},moveOrigin:function(t,e,i){var r,s,n,o;return utils_type.A.exists(t)&&utils_type.A.exists(e)&&(r=this.origin.scrCoords[1],s=this.origin.scrCoords[2],this.origin.scrCoords[1]=t,this.origin.scrCoords[2]=e,i&&(this.origin.scrCoords[1]-=this.drag_dx,this.origin.scrCoords[2]-=this.drag_dy),n=new base_coords.A(constants.A.COORDS_BY_SCREEN,[0,0],this).usrCoords,o=new base_coords.A(constants.A.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords,(n[1]<this.maxboundingbox[0]||n[2]>this.maxboundingbox[1]||o[1]>this.maxboundingbox[2]||o[2]<this.maxboundingbox[3])&&(this.origin.scrCoords[1]=r,this.origin.scrCoords[2]=s)),this.updateCoords().clearTraces().fullUpdate(),this.triggerEventHandlers(["boundingbox"]),this},addConditions:function(t){var e,i,r,s,n,o,a,l=[],u=t.indexOf("<data>"),c=t.indexOf("</data>"),h=function(t,e,i,r){return function(){var s,n;n=(s=t.select(e.id)).coords.usrCoords[r],2===r?s.setPositionDirectly(constants.A.COORDS_BY_USER,[i(),n]):s.setPositionDirectly(constants.A.COORDS_BY_USER,[n,i()]),s.prepareUpdate().update()}},d=function(t,e,i){return function(){var r,s;r=t.select(e.id),s=i(),r.setAttribute({visible:s})}},p=function(t,e,i,r){return function(){var s,n;s=t.select(e.id),n=i(),"strokewidth"===r?s.visProp.strokewidth=n:(n=utils_color.A.rgba2rgbo(n),s.visProp[r+"color"]=n[0],s.visProp[r+"opacity"]=n[1])}},f=function(t,e,i){return function(){t.select(e.id).position=i()}},_=function(t,e,i){return function(){t.select(e.id).setStyle(i())}};if(!(u<0)){for(;u>=0;){if(i=(e=t.slice(u+6,c)).indexOf("="),r=e.slice(0,i),s=e.slice(i+1),i=r.indexOf("."),n=r.slice(0,i),o=this.elementsByName[utils_type.A.unescapeHTML(n)],a=r.slice(i+1).replace(/\s+/g,"").toLowerCase(),s=utils_type.A.createFunction(s,this,"",!0),utils_type.A.exists(this.elementsByName[n]))switch(a){case"x":l.push(h(this,o,s,2));break;case"y":l.push(h(this,o,s,1));break;case"visible":l.push(d(this,o,s));break;case"position":l.push(f(this,o,s));break;case"stroke":l.push(p(this,o,s,"stroke"));break;case"style":l.push(_(this,o,s));break;case"strokewidth":l.push(p(this,o,s,"strokewidth"));break;case"fill":l.push(p(this,o,s,"fill"));break;case"label":break;default:jxg.A.debug('property "'+a+'" in conditions not yet implemented:'+s)}else jxg.A.debug("debug conditions: |"+n+"| undefined");u=(t=t.slice(c+7)).indexOf("<data>"),c=t.indexOf("</data>")}this.updateConditions=function(){var t;for(t=0;t<l.length;t++)l[t]();return this.prepareUpdate().updateElements(),!0},this.updateConditions()}},updateConditions:function(){return!1},calculateSnapSizes:function(){var t,e,i,r,s=this.getBoundingBox(),n=utils_type.A.evaluate(this.options.grid.majorStep),o=utils_type.A.evaluate(this.options.grid.gridX),a=utils_type.A.evaluate(this.options.grid.gridY);for(utils_type.A.isArray(n)||(n=[n,n]),n.length<2&&(n=[n[0],n[0]]),utils_type.A.exists(o)&&(n[0]=o),utils_type.A.exists(a)&&(n[1]=a),"auto"===n[0]?n[0]=1:n[0]=utils_type.A.parseNumber(n[0],Math.abs(s[1]-s[3]),1/this.unitX),"auto"===n[1]?n[1]=1:n[1]=utils_type.A.parseNumber(n[1],Math.abs(s[0]-s[2]),1/this.unitY),t=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],this),e=new base_coords.A(constants.A.COORDS_BY_USER,[n[0],n[1]],this),i=t.scrCoords[1]-e.scrCoords[1],r=t.scrCoords[2]-e.scrCoords[2],this.options.grid.snapSizeX=n[0];Math.abs(i)>25;)this.options.grid.snapSizeX*=2,i/=2;for(this.options.grid.snapSizeY=n[1];Math.abs(r)>25;)this.options.grid.snapSizeY*=2,r/=2;return this},applyZoom:function(){return this.updateCoords().calculateSnapSizes().clearTraces().fullUpdate(),this},zoomIn:function(t,e){var i=this.getBoundingBox(),r=this.attr.zoom.factorx,s=this.attr.zoom.factory,n=(i[2]-i[0])*(1-1/r),o=(i[1]-i[3])*(1-1/s),a=.5,l=.5,u=this.attr.zoom.eps||this.attr.zoom.min||.001;return this.zoomX>this.attr.zoom.max&&r>1||this.zoomY>this.attr.zoom.max&&s>1||this.zoomX<u&&r<1||this.zoomY<u&&s<1?this:(utils_type.A.isNumber(t)&&utils_type.A.isNumber(e)&&(a=(t-i[0])/(i[2]-i[0]),l=(i[1]-e)/(i[1]-i[3])),this.setBoundingBox([i[0]+n*a,i[1]-o*l,i[2]-n*(1-a),i[3]+o*(1-l)],this.keepaspectratio,"update"),this.applyZoom())},zoomOut:function(t,e){var i=this.getBoundingBox(),r=this.attr.zoom.factorx,s=this.attr.zoom.factory,n=(i[2]-i[0])*(1-r),o=(i[1]-i[3])*(1-s),a=.5,l=.5,u=this.attr.zoom.eps||this.attr.zoom.min||.001;return this.zoomX<u||this.zoomY<u?this:(utils_type.A.isNumber(t)&&utils_type.A.isNumber(e)&&(a=(t-i[0])/(i[2]-i[0]),l=(i[1]-e)/(i[1]-i[3])),this.setBoundingBox([i[0]+n*a,i[1]-o*l,i[2]-n*(1-a),i[3]+o*(1-l)],this.keepaspectratio,"update"),this.applyZoom())},zoom100:function(){var t,e,i;return utils_type.A.exists(this.attr.boundingbox)?this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"reset"):(e=((t=this.getBoundingBox())[2]-t[0])*(1-this.zoomX)*.5,i=(t[1]-t[3])*(1-this.zoomY)*.5,this.setBoundingBox([t[0]+e,t[1]-i,t[2]-e,t[3]+i],this.keepaspectratio,"reset")),this.applyZoom()},zoomAllPoints:function(){var t,e,i,r,s=0,n=0,o=0,a=0,l=this.objectsList.length;for(t=0;t<l;t++)r=this.objectsList[t],utils_type.A.isPoint(r)&&r.visPropCalc.visible&&(r.coords.usrCoords[1]<s?s=r.coords.usrCoords[1]:r.coords.usrCoords[1]>n&&(n=r.coords.usrCoords[1]),r.coords.usrCoords[2]>a?a=r.coords.usrCoords[2]:r.coords.usrCoords[2]<o&&(o=r.coords.usrCoords[2]));return e=50/this.unitX,i=50/this.unitY,this.setBoundingBox([s-e,a+i,n+e,o-i],this.keepaspectratio,"update"),this.applyZoom()},zoomElements:function(t){var e,i,r,s,n,o,a,l=[1/0,-1/0,-1/0,1/0];if(!utils_type.A.isArray(t)||0===t.length)return this;for(e=0;e<t.length;e++)i=this.select(t[e]).bounds(),utils_type.A.isArray(i)&&(i[0]<l[0]&&(l[0]=i[0]),i[1]>l[1]&&(l[1]=i[1]),i[2]>l[2]&&(l[2]=i[2]),i[3]<l[3]&&(l[3]=i[3]));return utils_type.A.isArray(l)&&(r=.5*(l[0]+l[2]),s=.5*(l[1]+l[3]),n=1.5*(l[2]-l[0])*.5,o=1.5*(l[1]-l[3])*.5,a=Math.max(n,o),this.setBoundingBox([r-a,s+a,r+a,s-a],this.keepaspectratio,"update")),this},setZoom:function(t,e){var i=this.attr.zoom.factorx,r=this.attr.zoom.factory;return this.attr.zoom.factorx=t/this.zoomX,this.attr.zoom.factory=e/this.zoomY,this.zoomIn(),this.attr.zoom.factorx=i,this.attr.zoom.factory=r,this},_removeObj:function(t,i){var r,s;if(utils_type.A.isArray(t)){for(s=0;s<t.length;s++)this._removeObj(t[s],i);return this}if(t=this.select(t),!utils_type.A.exists(t)||utils_type.A.isString(t))return this;try{for(r in t.childElements)t.childElements.hasOwnProperty(r)&&t.childElements[r].board._removeObj(t.childElements[r]);for(r in t.objects)t.objects.hasOwnProperty(r)&&t.objects[r].board._removeObj(t.objects[r]);if(i)for(r in this.objects)this.objects.hasOwnProperty(r)&&utils_type.A.exists(this.objects[r].childElements)&&utils_type.A.exists(this.objects[r].childElements.hasOwnProperty(t.id))&&(delete this.objects[r].childElements[t.id],delete this.objects[r].descendants[t.id]);else if(utils_type.A.exists(t.ancestors))for(r in t.ancestors)t.ancestors.hasOwnProperty(r)&&utils_type.A.exists(t.ancestors[r].childElements)&&utils_type.A.exists(t.ancestors[r].childElements.hasOwnProperty(t.id))&&(delete t.ancestors[r].childElements[t.id],delete t.ancestors[r].descendants[t.id]);if(t._pos>-1)for(this.objectsList.splice(t._pos,1),s=t._pos;s<this.objectsList.length;s++)this.objectsList[s]._pos--;else t.type!==constants.A.OBJECT_TYPE_TURTLE&&jxg.A.debug("Board.removeObject: object "+t.id+" not found in list.");delete this.objects[t.id],delete this.elementsByName[t.name],t.visProp&&utils_type.A.evaluate(t.visProp.trace)&&t.clearTrace(),utils_type.A.exists(t.remove)&&t.remove()}catch(e){jxg.A.debug(t.id+": Could not be removed: "+e)}return this},removeObject:function(t,e){var i;if(this.renderer.suspendRedraw(this),utils_type.A.isArray(t))for(i=0;i<t.length;i++)this._removeObj(t[i],e);else this._removeObj(t,e);return this.renderer.unsuspendRedraw(),this.update(),this},removeAncestors:function(t){var e;for(e in t.ancestors)t.ancestors.hasOwnProperty(e)&&this.removeAncestors(t.ancestors[e]);return this.removeObject(t),this},initGeonextBoard:function(){var t,e,i;return t=this.create("point",[0,0],{id:this.id+"g00e0",name:"Ursprung",withLabel:!1,visible:!1,fixed:!0}),e=this.create("point",[1,0],{id:this.id+"gX0e0",name:"Punkt_1_0",withLabel:!1,visible:!1,fixed:!0}),i=this.create("point",[0,1],{id:this.id+"gY0e0",name:"Punkt_0_1",withLabel:!1,visible:!1,fixed:!0}),this.create("line",[t,e],{id:this.id+"gXLe0",name:"X-Achse",withLabel:!1,visible:!1}),this.create("line",[t,i],{id:this.id+"gYLe0",name:"Y-Achse",withLabel:!1,visible:!1}),this},resizeContainer:function(t,e,i,r){var s,n,o,a,l;return n=this.canvasWidth,o=this.canvasHeight,r||(s=this.getBoundingBox()),this.canvasWidth=Math.max(parseFloat(t),math.A.eps),this.canvasHeight=Math.max(parseFloat(e),math.A.eps),i||(this.containerObj.style.width=this.canvasWidth+"px",this.containerObj.style.height=this.canvasHeight+"px"),this.renderer.resize(this.canvasWidth,this.canvasHeight),r?(a=(this.canvasWidth-n)/2,l=(this.canvasHeight-o)/2,this.moveOrigin(this.origin.scrCoords[1]+a,this.origin.scrCoords[2]+l)):this.setBoundingBox(s,this.keepaspectratio,"keep"),this},showDependencies:function(){var t,e,i,r,s;for(t in e="<p>\n",this.objects)if(this.objects.hasOwnProperty(t)){for(i in s=0,this.objects[t].childElements)this.objects[t].childElements.hasOwnProperty(i)&&(s+=1);for(i in s>=0&&(e+="<strong>"+this.objects[t].id+":</strong> "),this.objects[t].childElements)this.objects[t].childElements.hasOwnProperty(i)&&(e+=this.objects[t].childElements[i].id+"("+this.objects[t].childElements[i].name+"), ");e+="<p>\n"}return e+="</p>\n",(r=window.open()).document.open(),r.document.write(e),r.document.close(),this},showXML:function(){var t=window.open("");return t.document.open(),t.document.write("<pre>"+utils_type.A.escapeHTML(this.xmlString)+"</pre>"),t.document.close(),this},prepareUpdate:function(){var t,e,i=this.objectsList.length;for(t=0;t<i;t++)(e=this.objectsList[t]).needsUpdate=e.needsRegularUpdate||this.needsFullUpdate;for(t in this.groups)this.groups.hasOwnProperty(t)&&((e=this.groups[t]).needsUpdate=e.needsRegularUpdate||this.needsFullUpdate);return this},updateElements:function(t){var e,i;for(t=this.select(t),e=0;e<this.objectsList.length;e++)i=this.objectsList[e],this.needsFullUpdate&&i.elementClass===constants.A.OBJECT_CLASS_TEXT&&i.updateSize(),i.update(!utils_type.A.exists(t)||i.id!==t.id).updateVisibility();for(e in this.groups)this.groups.hasOwnProperty(e)&&this.groups[e].update(t);return this},updateRenderer:function(){var t,e=this.objectsList.length;if(this.renderer){if("canvas"===this.renderer.type)this.updateRendererCanvas();else for(t=0;t<e;t++)this.objectsList[t].updateRenderer();return this}},updateRendererCanvas:function(){var t,e,i,r,s,n=this.objectsList.length,o=this.options.layer,a=this.options.layer.numlayers,l=Number.NEGATIVE_INFINITY;for(i=0;i<a;i++){for(s in r=Number.POSITIVE_INFINITY,o)o.hasOwnProperty(s)&&o[s]>l&&o[s]<r&&(r=o[s]);for(l=r,t=0;t<n;t++)(e=this.objectsList[t]).visProp.layer===r&&e.prepareUpdate().updateRenderer()}return this},addHook:function(t,e,i){return jxg.A.deprecated("Board.addHook()","Board.on()"),e=utils_type.A.def(e,"update"),i=utils_type.A.def(i,this),this.hooks.push([e,t]),this.on(e,t,i),this.hooks.length-1},addEvent:jxg.A.shortcut(jxg.A.Board.prototype,"on"),removeHook:function(t){return jxg.A.deprecated("Board.removeHook()","Board.off()"),this.hooks[t]&&(this.off(this.hooks[t][0],this.hooks[t][1]),this.hooks[t]=null),this},removeEvent:jxg.A.shortcut(jxg.A.Board.prototype,"off"),updateHooks:function(t){var e=Array.prototype.slice.call(arguments,0);return jxg.A.deprecated("Board.updateHooks()","Board.triggerEventHandlers()"),e[0]=utils_type.A.def(e[0],"update"),this.triggerEventHandlers([e[0]],arguments),this},addChild:function(t){return utils_type.A.exists(t)&&utils_type.A.exists(t.containerObj)&&(this.dependentBoards.push(t),this.update()),this},removeChild:function(t){var e;for(e=this.dependentBoards.length-1;e>=0;e--)this.dependentBoards[e]===t&&this.dependentBoards.splice(e,1);return this},update:function(t){var e,i,r,s,n;if(this.inUpdate||this.isSuspendedUpdate)return this;for(this.inUpdate=!0,"all"===this.attr.minimizereflow&&this.containerObj&&"vml"!==this.renderer.type&&(n=this.document.activeElement,s=this.renderer.removeToInsertLater(this.containerObj)),"svg"===this.attr.minimizereflow&&"svg"===this.renderer.type&&(n=this.document.activeElement,s=this.renderer.removeToInsertLater(this.renderer.svgRoot)),this.prepareUpdate().updateElements(t).updateConditions(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw(),this.triggerEventHandlers(["update"],[]),s&&(s(),n.focus()),i=this.dependentBoards.length,e=0;e<i;e++)r=this.dependentBoards[e],utils_type.A.exists(r)&&r!==this&&(r.updateQuality=this.updateQuality,r.prepareUpdate().updateElements().updateConditions(),r.renderer.suspendRedraw(this),r.updateRenderer(),r.renderer.unsuspendRedraw(),r.triggerEventHandlers(["update"],[]));return this.inUpdate=!1,this},fullUpdate:function(){return this.needsFullUpdate=!0,this.update(),this.needsFullUpdate=!1,this},addGrid:function(){return this.create("grid",[]),this},removeGrids:function(){var t;for(t=0;t<this.grids.length;t++)this.removeObject(this.grids[t]);return this.grids.length=0,this.update(),this},create:function(t,e,i){var r,s;for(t=t.toLowerCase(),utils_type.A.exists(e)||(e=[]),utils_type.A.exists(i)||(i={}),s=0;s<e.length;s++)!utils_type.A.isString(e[s])||"text"===t&&2===s||"solidofrevolution3d"===t&&2===s||!("input"!==t&&"checkbox"!==t&&"button"!==t||2!==s&&3!==s)||"curve"===t||"functiongraph"===t||"implicitcurve"===t||(e[s]=this.select(e[s]));if(!utils_type.A.isFunction(jxg.A.elements[t]))throw new Error("JSXGraph: create: Unknown element type given: "+t);return r=jxg.A.elements[t](this,e,i),utils_type.A.exists(r)?(r.prepareUpdate&&r.update&&r.updateRenderer&&r.fullUpdate(),r):(jxg.A.debug("JSXGraph: create: failure creating "+t),r)},createElement:function(){return jxg.A.deprecated("Board.createElement()","Board.create()"),this.create.apply(this,arguments)},clearTraces:function(){var t;for(t=0;t<this.objectsList.length;t++)this.objectsList[t].clearTrace();return this.numTraces=0,this},suspendUpdate:function(){return this.inUpdate||(this.isSuspendedUpdate=!0),this},unsuspendUpdate:function(){return this.isSuspendedUpdate&&(this.isSuspendedUpdate=!1,this.fullUpdate()),this},setBoundingBox:function(t,e,i){var r,s,n,o,a,l,u,c,h,d=0,p=0,f=1,_=env.A.getDimensions(this.container,this.document);return utils_type.A.isArray(t)?(t[0]<this.maxboundingbox[0]||t[1]>this.maxboundingbox[1]||t[2]>this.maxboundingbox[2]||t[3]<this.maxboundingbox[3]||(utils_type.A.exists(i)||(i="reset"),n=this.unitX,o=this.unitY,this.canvasWidth=parseFloat(_.width),this.canvasHeight=parseFloat(_.height),s=this.canvasWidth,r=this.canvasHeight,e?(a=this.keepaspectratio?n/o:1,"keep"===i&&(f=this.zoomX/this.zoomY),c=n*(l=t[2]-t[0]),h=o*(u=t[1]-t[3]),s>=r?c>=h?(this.unitY=r/u,this.unitX=this.unitY*a):(this.unitY=r/Math.abs(l)*math.A.sign(u)/f,this.unitX=this.unitY*a):h>c?(this.unitX=s/l,this.unitY=this.unitX/a):(this.unitX=s/Math.abs(u)*math.A.sign(l)*f,this.unitY=this.unitX/a),d=.5*(s/this.unitX-l),p=.5*(r/this.unitY-u),this.keepaspectratio=!0):(this.unitX=s/(t[2]-t[0]),this.unitY=r/(t[1]-t[3]),this.keepaspectratio=!1),this.moveOrigin(-this.unitX*(t[0]-d),this.unitY*(t[1]+p)),"update"===i?(this.zoomX*=this.unitX/n,this.zoomY*=this.unitY/o):"reset"===i&&(this.zoomX=utils_type.A.exists(this.attr.zoomx)?this.attr.zoomx:1,this.zoomY=utils_type.A.exists(this.attr.zoomy)?this.attr.zoomy:1)),this):this},getBoundingBox:function(){var t=new base_coords.A(constants.A.COORDS_BY_SCREEN,[0,0],this).usrCoords,e=new base_coords.A(constants.A.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords;return[t[1],t[2],e[1],e[2]]},_set:function(t,e){t=t.toLocaleLowerCase(),null===e||!utils_type.A.isObject(e)||utils_type.A.exists(e.id)||utils_type.A.exists(e.name)?this.attr[t]=e:utils_type.A.mergeAttr(this.attr[t],e)},setAttribute:function(t){var e,i,r,s,n,o,a={};for(e=0;e<arguments.length;e++)i=arguments[e],utils_type.A.isString(i)?(r=i.split(":"),a[utils_type.A.trim(r[0])]=utils_type.A.trim(r[1])):utils_type.A.isArray(i)?a[i[0]]=i[1]:jxg.A.extend(a,i);for(e in a)if(a.hasOwnProperty(e)&&(s=e.replace(/\s+/g,"").toLowerCase(),n=a[e]),n=(!n.toLowerCase||"false"!==n.toLowerCase())&&n,this.attr[s]!==n)switch(s){case"axis":!1===n&&utils_type.A.exists(this.defaultAxes)&&(this.defaultAxes.x.setAttribute({visible:!1}),this.defaultAxes.y.setAttribute({visible:!1}));break;case"boundingbox":this.setBoundingBox(n,this.keepaspectratio),this._set(s,n);break;case"defaultaxes":utils_type.A.exists(this.defaultAxes.x)&&utils_type.A.exists(n.x)&&this.defaultAxes.x.setAttribute(n.x),utils_type.A.exists(this.defaultAxes.y)&&utils_type.A.exists(n.y)&&this.defaultAxes.y.setAttribute(n.y);break;case"description":this.document.getElementById(this.container+"_ARIAdescription").innerHTML=n,this._set(s,n);break;case"title":this.document.getElementById(this.container+"_ARIAlabel").innerHTML=n,this._set(s,n);break;case"keepaspectratio":this._set(s,n),this.setBoundingBox(this.getBoundingBox(),n,"keep");break;case"document":case"maxboundingbox":this[s]=n,this._set(s,n);break;case"zoomx":case"zoomy":this[s]=n,this._set(s,n),this.setZoom(this.attr.zoomx,this.attr.zoomy);break;case"registerevents":case"renderer":break;case"fullscreen":case"screenshot":(o=this.containerObj.ownerDocument.getElementById(this.container+"_navigation_"+s))&&utils_type.A.exists(n.symbol)&&(o.innerHTML=utils_type.A.evaluate(n.symbol)),this._set(s,n);break;case"selection":n.visible=!1,n.withLines=!1,n.vertices={visible:!1},this._set(s,n);break;case"showcopyright":"svg"===this.renderer.type&&((o=this.containerObj.ownerDocument.getElementById(this.renderer.uniqName("licenseText")))?o.style.display=utils_type.A.evaluate(n)?"inline":"none":utils_type.A.evaluate(n)&&this.renderer.displayCopyright(constants.A.licenseText,parseInt(this.options.text.fontSize,10)));default:utils_type.A.exists(this.attr[s])&&this._set(s,n)}return this.containerObj.ownerDocument.getElementById(this.container+"_navigationbar").remove(),this.renderer.drawNavigationBar(this,this.attr.navbar),this.triggerEventHandlers(["attribute"],[a,this]),this.fullUpdate(),this},addAnimation:function(t){var e=this;return this.animationObjects[t.id]=t,this.animationIntervalCode||(this.animationIntervalCode=window.setInterval((function(){e.animate()}),t.board.attr.animationdelay)),this},stopAllAnimation:function(){var t;for(t in this.animationObjects)this.animationObjects.hasOwnProperty(t)&&utils_type.A.exists(this.animationObjects[t])&&(this.animationObjects[t]=null,delete this.animationObjects[t]);return window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode,this},animate:function(){var t,e,i,r,s,n,o,a,l=0,u=null;for(e in this.animationObjects)if(this.animationObjects.hasOwnProperty(e)&&utils_type.A.exists(this.animationObjects[e])){if(l+=1,(i=this.animationObjects[e]).animationPath&&(r=utils_type.A.isFunction(i.animationPath)?i.animationPath((new Date).getTime()-i.animationStart):i.animationPath.pop(),!utils_type.A.exists(r)||!utils_type.A.isArray(r)&&isNaN(r)?delete i.animationPath:(i.setPositionDirectly(constants.A.COORDS_BY_USER,r),i.fullUpdate(),u=i)),i.animationData){for(s in o=0,i.animationData)i.animationData.hasOwnProperty(s)&&(n=i.animationData[s].pop(),utils_type.A.exists(n)?(o+=1,(t={})[s]=n,i.setAttribute(t)):delete i.animationData[n]);0===o&&delete i.animationData}utils_type.A.exists(i.animationData)||utils_type.A.exists(i.animationPath)||(this.animationObjects[e]=null,delete this.animationObjects[e],utils_type.A.exists(i.animationCallback)&&(a=i.animationCallback,i.animationCallback=null,a()))}return 0===l?(window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode):this.update(u),this},migratePoint:function(t,e,i){var r,s,n,o,a,l,u=!1;for(s in t=this.select(t),e=this.select(e),utils_type.A.exists(t.label)&&(l=t.label.id,u=!0,this.removeObject(t.label)),t.childElements)if(t.childElements.hasOwnProperty(s)){for(n in o=!1,r=t.childElements[s])r.hasOwnProperty(n)&&r[n]===t&&(r[n]=e,o=!0);for(o&&delete t.childElements[s],a=0;a<r.parents.length;a++)r.parents[a]===t.id&&(r.parents[a]=e.id);e.addChild(r)}return i&&(u&&(delete e.childElements[l],delete e.descendants[l]),e.label&&this.removeObject(e.label),delete this.elementsByName[e.name],e.name=t.name,u&&e.createLabel()),this.removeObject(t),utils_type.A.exists(e.name)&&""!==e.name&&(this.elementsByName[e.name]=e),this.fullUpdate(),this},emulateColorblindness:function(t){var e,i;if(utils_type.A.exists(t)||(t="none"),this.currentCBDef===t)return this;for(e in this.objects)this.objects.hasOwnProperty(e)&&(i=this.objects[e],"none"!==t?("none"===this.currentCBDef&&(i.visPropOriginal={strokecolor:i.visProp.strokecolor,fillcolor:i.visProp.fillcolor,highlightstrokecolor:i.visProp.highlightstrokecolor,highlightfillcolor:i.visProp.highlightfillcolor}),i.setAttribute({strokecolor:utils_color.A.rgb2cb(utils_type.A.evaluate(i.visPropOriginal.strokecolor),t),fillcolor:utils_color.A.rgb2cb(utils_type.A.evaluate(i.visPropOriginal.fillcolor),t),highlightstrokecolor:utils_color.A.rgb2cb(utils_type.A.evaluate(i.visPropOriginal.highlightstrokecolor),t),highlightfillcolor:utils_color.A.rgb2cb(utils_type.A.evaluate(i.visPropOriginal.highlightfillcolor),t)})):utils_type.A.exists(i.visPropOriginal)&&jxg.A.extend(i.visProp,i.visPropOriginal));return this.currentCBDef=t,this.update(),this},select:function(t,e){var i,r,s,n,o=t;if(null===o)return o;if(utils_type.A.isString(o)&&""!==o)utils_type.A.exists(this.objects[o])?o=this.objects[o]:utils_type.A.exists(this.elementsByName[o])?o=this.elementsByName[o]:utils_type.A.exists(this.groups[o])&&(o=this.groups[o]);else if(!e&&(utils_type.A.isFunction(o)||utils_type.A.isObject(o)&&!utils_type.A.isFunction(o.setAttribute))){for(r={},n=(i=utils_type.A.filterElements(this.objectsList,o)).length,s=0;s<n;s++)r[i[s].id]=i[s];o=new composition(r)}else utils_type.A.isObject(o)&&utils_type.A.exists(o.id)&&!utils_type.A.exists(this.objects[o.id])&&(o=null);return o},hasPoint:function(t,e){var i=t,r=e,s=this.getBoundingBox();return utils_type.A.exists(t)&&utils_type.A.isArray(t.usrCoords)&&(i=t.usrCoords[1],r=t.usrCoords[2]),!!(utils_type.A.isNumber(i)&&utils_type.A.isNumber(r)&&s[0]<i&&i<s[2]&&s[1]>r&&r>s[3])},updateCSSTransforms:function(){var t=this.containerObj,e=t,i=t;if(this.cssTransMat=env.A.getCSSTransformMatrix(e),utils_type.A.exists(e.getRootNode)){for(e=e.parentNode===e.getRootNode()?e.parentNode.host:e.parentNode;e;)this.cssTransMat=math.A.matMatMult(env.A.getCSSTransformMatrix(e),this.cssTransMat),e=e.parentNode===e.getRootNode()?e.parentNode.host:e.parentNode;this.cssTransMat=math.A.inverse(this.cssTransMat)}else{for(e=e.offsetParent;e;){for(this.cssTransMat=math.A.matMatMult(env.A.getCSSTransformMatrix(e),this.cssTransMat),i=i.parentNode;i!==e;)this.cssTransMat=math.A.matMatMult(env.A.getCSSTransformMatrix(e),this.cssTransMat),i=i.parentNode;e=e.offsetParent}this.cssTransMat=math.A.inverse(this.cssTransMat)}return this},startSelectionMode:function(){this.selectingMode=!0,this.selectionPolygon.setAttribute({visible:!0}),this.selectingBox=[[0,0],[0,0]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate()},stopSelectionMode:function(){return this.selectingMode=!1,this.selectionPolygon.setAttribute({visible:!1}),[this.selectionPolygon.vertices[0].coords,this.selectionPolygon.vertices[2].coords]},_startSelecting:function(t){this.isSelecting=!0,this.selectingBox=[[t[0],t[1]],[t[0],t[1]]],this._setSelectionPolygonFromBox()},_moveSelecting:function(t){this.isSelecting&&(this.selectingBox[1]=[t[0],t[1]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate())},_stopSelecting:function(t){var e=this.getMousePosition(t);this.isSelecting=!1,this.selectingBox[1]=[e[0],e[1]],this._setSelectionPolygonFromBox()},_setSelectionPolygonFromBox:function(){var t=this.selectingBox[0],e=this.selectingBox[1];this.selectionPolygon.vertices[0].setPositionDirectly(jxg.A.COORDS_BY_SCREEN,[t[0],t[1]]),this.selectionPolygon.vertices[1].setPositionDirectly(jxg.A.COORDS_BY_SCREEN,[t[0],e[1]]),this.selectionPolygon.vertices[2].setPositionDirectly(jxg.A.COORDS_BY_SCREEN,[e[0],e[1]]),this.selectionPolygon.vertices[3].setPositionDirectly(jxg.A.COORDS_BY_SCREEN,[e[0],t[1]])},_testForSelection:function(t){this._isRequiredKeyPressed(t,"selection")&&(utils_type.A.exists(this.selectionPolygon)||this._createSelectionPolygon(this.attr),this.startSelectionMode())},_createSelectionPolygon:function(t){var e;return utils_type.A.exists(this.selectionPolygon)||!0===(e=utils_type.A.copyAttributes(t,src_options.A,"board","selection")).enabled&&(this.selectionPolygon=this.create("polygon",[[0,0],[0,0],[0,0],[0,0]],e)),this},__evt__attribute:function(t){},__evt__down:function(t){},__evt__mousedown:function(t){},__evt__pendown:function(t){},__evt__pointerdown:function(t){},__evt__touchstart:function(t){},__evt__up:function(t){},__evt__mouseup:function(t){},__evt__pointerup:function(t){},__evt__touchend:function(t){},__evt__click:function(t){},__evt__dblclick:function(t){},__evt__mouseclick:function(t){},__evt__mousedblclick:function(t){},__evt__pointerclick:function(t){},__evt__pointerdblclick:function(t){},__evt__move:function(t,e){},__evt__mousemove:function(t,e){},__evt__penmove:function(t,e){},__evt__pointermove:function(t,e){},__evt__touchmove:function(t,e){},__evt__keymove:function(t,e){},__evt__hit:function(t,e,i){},__evt__mousehit:function(t,e,i){},__evt__update:function(){},__evt__boundingbox:function(){},__evt__startselecting:function(){},__evt__mousestartselecting:function(){},__evt__pointerstartselecting:function(){},__evt__touchstartselecting:function(){},__evt__stopselecting:function(){},__evt__mousestopselecting:function(){},__evt__pointerstopselecting:function(){},__evt__touchstopselecting:function(){},__evt__moveselecting:function(){},__evt__mousemoveselecting:function(){},__evt__pointermoveselecting:function(){},__evt__touchmoveselecting:function(){},__evt:function(){},toFullscreen:function(t){var e,i,r,s,n=this.document;return t=t||this.container,this._fullscreen_inner_id=t,r=n.getElementById(t),e="fullscreenwrap_"+t,utils_type.A.exists(r._cssFullscreenStore)||(s=this.containerObj.getBoundingClientRect(),r._cssFullscreenStore={w:s.width,h:s.height}),n.getElementById(e)?i=n.getElementById(e):((i=document.createElement("div")).classList.add("JXG_wrap_private"),i.setAttribute("id",e),r.parentNode.insertBefore(i,r),i.appendChild(r)),i.requestFullscreen=i.requestFullscreen||i.webkitRequestFullscreen||i.mozRequestFullScreen||i.msRequestFullscreen,null===(void 0!==n.fullscreenElement?n.fullscreenElement:void 0!==n.webkitFullscreenElement?n.webkitFullscreenElement:n.msFullscreenElement)?i.requestFullscreen&&(i.requestFullscreen(),this.startFullscreenResizeObserver(i)):(this.stopFullscreenResizeObserver(i),utils_type.A.exists(document.exitFullscreen)?document.exitFullscreen():utils_type.A.exists(document.webkitExitFullscreen)&&document.webkitExitFullscreen()),this},fullscreenListener:function(t){var e,i,r,s=this.document;e=this._fullscreen_inner_id,utils_type.A.exists(e)&&(r=void 0!==s.fullscreenElement?s.fullscreenElement:void 0!==s.webkitFullscreenElement?s.webkitFullscreenElement:s.msFullscreenElement,i=s.getElementById(e),r?(i._cssFullscreenStore.id=r.id,i._cssFullscreenStore.isFullscreen=!0,i._cssFullscreenStore.margin=i.style.margin,i._cssFullscreenStore.width=i.style.width,i._cssFullscreenStore.height=i.style.height,i._cssFullscreenStore.transform=i.style.transform,i.style.width=i._cssFullscreenStore.w+"px",i.style.height=i._cssFullscreenStore.h+"px",i.style.margin="",env.A.scaleJSXGraphDiv(r.id,e,s,utils_type.A.evaluate(this.attr.fullscreen.scale)),r=null):utils_type.A.exists(i._cssFullscreenStore)&&(i._cssFullscreenStore.isFullscreen=!1,i.style.margin=i._cssFullscreenStore.margin,i.style.width=i._cssFullscreenStore.width,i.style.height=i._cssFullscreenStore.height,i.style.transform=i._cssFullscreenStore.transform,i._cssFullscreenStore=null,i.parentElement.replaceWith(i)),this.updateCSSTransforms())},startFullscreenResizeObserver:function(t){var e=this;return env.A.isBrowser&&this.attr.resize&&this.attr.resize.enabled?(this.resizeObserver=new ResizeObserver((function(i){var r,s,n=e.document;e._isResizing||(e._isResizing=!0,window.setTimeout((function(){try{r=e._fullscreen_inner_id,null!==(s=void 0!==n.fullscreenElement?n.fullscreenElement:void 0!==n.webkitFullscreenElement?n.webkitFullscreenElement:n.msFullscreenElement)&&env.A.scaleJSXGraphDiv(s.id,r,n,utils_type.A.evaluate(e.attr.fullscreen.scale))}catch(i){e.stopFullscreenResizeObserver(t)}finally{e._isResizing=!1}}),e.attr.resize.throttle))})),this.resizeObserver.observe(t),this):this},stopFullscreenResizeObserver:function(t){return env.A.isBrowser&&this.attr.resize&&this.attr.resize.enabled?(utils_type.A.exists(this.resizeObserver)&&this.resizeObserver.unobserve(t),this):this},addLogEntry:function(t,e,i){var r,s,n=this.userLog.length-1;return utils_type.A.exists(e.elementClass)&&(s=e.id),utils_type.A.evaluate(this.attr.logging.enabled)&&(r=(new Date).getTime(),n>=0&&this.userLog[n].type===t&&this.userLog[n].id===s&&r-this.userLog[n].end<500?(this.userLog[n].end=r,this.userLog[n].endpos=i):this.userLog.push({type:t,id:s,start:r,startpos:i,end:r,endpos:i,bbox:this.getBoundingBox(),canvas:[this.canvasWidth,this.canvasHeight],zoom:[this.zoomX,this.zoomY]})),this},createRoulette:function(t,e,i,r,s,n,o){var a=this;return new function(){var l,u=0,c=0,h=0,d=i,p=numerics.A.root((function(i){var r=t.X(d),s=t.Y(d),n=e.X(i),o=e.Y(i);return(r-n)*(r-n)+(s-o)*(s-o)}),[0,2*Math.PI]),f=0,_=0,m=a.create("transform",[function(){return u}],{type:"rotate"}),g=a.create("transform",[function(){return u},function(){return t.X(d)},function(){return t.Y(d)}],{type:"rotate"}),y=a.create("transform",[function(){return c},function(){return h}],{type:"translate"}),v=function(t,e,i){var r=numerics.A.D(t.X)(e),s=numerics.A.D(t.Y)(e),n=numerics.A.D(t.X)(i),o=numerics.A.D(t.Y)(i),a=numerics.A.D(t.X)(.5*(e+i)),l=numerics.A.D(t.Y)(.5*(e+i)),u=math.A.hypot(r,s),c=math.A.hypot(n,o);return(u+4*math.A.hypot(a,l)+c)*(i-e)/6},A=function(t){return l-v(e,p,t)},b=Math.PI/18,C=9*b,x=null;return this.rolling=function(){var i,n,x,P,E;l=v(t,d,f=d+s*r),_=numerics.A.root(A,p),i=new complex(t.X(f),t.Y(f)),n=new complex(e.X(_),e.Y(_)),x=new complex(numerics.A.D(t.X)(f),numerics.A.D(t.Y)(f)),P=new complex(numerics.A.D(e.X)(_),numerics.A.D(e.Y)(_)),E=complex.C.div(x,P),u=Math.atan2(E.imaginary,E.real),E.div(complex.C.abs(E)),E.mult(n),c=i.real-E.real,h=i.imaginary-E.imaginary,u<-b&&u>-C?(u=-b,g.applyOnce(o)):u>b&&u<C?(u=b,g.applyOnce(o)):(m.applyOnce(o),y.applyOnce(o),d=f,p=_),a.update()},this.start=function(){return n>0&&(x=window.setInterval(this.rolling,n)),this},this.stop=function(){return window.clearInterval(x),this},this}}});const base_board=jxg.A.Board;jxg.A.SVGRenderer=function(t,i){var r;for(this.type="svg",this.isIE=-1!==navigator.appVersion.indexOf("MSIE")||navigator.userAgent.match(/Trident\//),this.svgRoot=null,this.svgNamespace="http://www.w3.org/2000/svg",this.xlinkNamespace="http://www.w3.org/1999/xlink",this.container=t,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.svgRoot=this.container.ownerDocument.createElementNS(this.svgNamespace,"svg"),this.svgRoot.style.overflow="hidden",this.svgRoot.style.display="block",this.resize(i.width,i.height),this.container.appendChild(this.svgRoot),this.defs=this.container.ownerDocument.createElementNS(this.svgNamespace,"defs"),this.svgRoot.appendChild(this.defs),this.createShadowFilter=function(t,e,i,r,s,n){var o,a,l,u,c,h=this.container.ownerDocument.createElementNS(this.svgNamespace,"filter");return h.setAttributeNS(null,"id",t),h.setAttributeNS(null,"width","300%"),h.setAttributeNS(null,"height","300%"),h.setAttributeNS(null,"filterUnits","userSpaceOnUse"),(o=this.container.ownerDocument.createElementNS(this.svgNamespace,"feOffset")).setAttributeNS(null,"in","SourceGraphic"),o.setAttributeNS(null,"result","offOut"),o.setAttributeNS(null,"dx",n[0]),o.setAttributeNS(null,"dy",n[1]),h.appendChild(o),(a=this.container.ownerDocument.createElementNS(this.svgNamespace,"feColorMatrix")).setAttributeNS(null,"in","offOut"),a.setAttributeNS(null,"result","colorOut"),a.setAttributeNS(null,"type","matrix"),"none"===e||!utils_type.A.isArray(e)||e.length<3?a.setAttributeNS(null,"values","0.1 0 0 0 0  0 0.1 0 0 0  0 0 0.1 0 0  0 0 0 "+i+" 0"):(e[0]/=255,e[1]/=255,e[2]/=255,c=r+" 0 0 0 "+e[0]+"  0 "+r+" 0 0 "+e[1]+"  0 0 "+r+" 0 "+e[2]+"  0 0 0 "+i+" 0",a.setAttributeNS(null,"values",c)),h.appendChild(a),(l=this.container.ownerDocument.createElementNS(this.svgNamespace,"feGaussianBlur")).setAttributeNS(null,"in","colorOut"),l.setAttributeNS(null,"result","blurOut"),l.setAttributeNS(null,"stdDeviation",s),h.appendChild(l),(u=this.container.ownerDocument.createElementNS(this.svgNamespace,"feBlend")).setAttributeNS(null,"in","SourceGraphic"),u.setAttributeNS(null,"in2","blurOut"),u.setAttributeNS(null,"mode","normal"),h.appendChild(u),h},this.uniqName=function(){return this.container.id+"_"+Array.prototype.slice.call(arguments).join("_")},this.toStr=function(){var t=Array.prototype.slice.call(arguments).join("");return utils_type.A.exists(CSS)&&utils_type.A.exists(CSS.escape)&&(t=CSS.escape(t)),t},this.toURL=function(){return"url(#"+this.toStr.apply(this,arguments)+")"},this.defs.appendChild(this.createShadowFilter(this.uniqName("f1"),"none",1,.1,3,[5,5])),this.layer=[],r=0;r<src_options.A.layer.numlayers;r++)this.layer[r]=this.container.ownerDocument.createElementNS(this.svgNamespace,"g"),this.svgRoot.appendChild(this.layer[r]);try{this.foreignObjLayer=this.container.ownerDocument.createElementNS(this.svgNamespace,"foreignObject"),this.foreignObjLayer.setAttribute("display","none"),this.foreignObjLayer.setAttribute("x",0),this.foreignObjLayer.setAttribute("y",0),this.foreignObjLayer.setAttribute("width","100%"),this.foreignObjLayer.setAttribute("height","100%"),this.foreignObjLayer.setAttribute("id",this.uniqName("foreignObj")),this.svgRoot.appendChild(this.foreignObjLayer),this.supportsForeignObject=!0}catch(e){this.supportsForeignObject=!1}},jxg.A.SVGRenderer.prototype=new renderer_abstract,jxg.A.extend(jxg.A.SVGRenderer.prototype,{_createArrowHead:function(t,e,i){var r,s,n,o,a=t.id+"Triangle";return utils_type.A.exists(e)&&(a+=e),utils_type.A.exists(i)&&(a+=i),(r=this.createPrim("marker",a)).setAttributeNS(null,"stroke",utils_type.A.evaluate(t.visProp.strokecolor)),r.setAttributeNS(null,"stroke-opacity",utils_type.A.evaluate(t.visProp.strokeopacity)),r.setAttributeNS(null,"fill",utils_type.A.evaluate(t.visProp.strokecolor)),r.setAttributeNS(null,"fill-opacity",utils_type.A.evaluate(t.visProp.strokeopacity)),r.setAttributeNS(null,"stroke-width",0),r.setAttributeNS(null,"orient","auto"),r.setAttributeNS(null,"markerUnits","strokeWidth"),s=this.container.ownerDocument.createElementNS(this.svgNamespace,"path"),o=5,"Start"===e?(n=0,2===i?s.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 L 5,5 z"):3===i?s.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z"):4===i?(o=3.31,s.setAttributeNS(null,"d","M 0.00,3.31 C 3.53,3.84 7.13,4.50 10.00,6.63 C 9.33,5.52 8.67,4.42 8.00,3.31 C 8.67,2.21 9.33,1.10 10.00,0.00 C 7.13,2.13 3.53,2.79 0.00,3.31")):5===i?(o=3.28,s.setAttributeNS(null,"d","M 0.00,3.28 C 3.39,4.19 6.81,5.07 10.00,6.55 C 9.38,5.56 9.00,4.44 9.00,3.28 C 9.00,2.11 9.38,0.99 10.00,0.00 C 6.81,1.49 3.39,2.37 0.00,3.28")):6===i?(o=2.84,s.setAttributeNS(null,"d","M 0.00,2.84 C 3.39,3.59 6.79,4.35 10.00,5.68 C 9.67,4.73 9.33,3.78 9.00,2.84 C 9.33,1.89 9.67,0.95 10.00,0.00 C 6.79,1.33 3.39,2.09 0.00,2.84")):7===i?(o=5.2,s.setAttributeNS(null,"d","M 0.00,5.20 C 4.04,5.20 7.99,6.92 10.00,10.39 M 10.00,0.00 C 7.99,3.47 4.04,5.20 0.00,5.20")):s.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 z"),t.elementClass===constants.A.OBJECT_CLASS_LINE&&(n=2===i?4.9:3===i?3.3:4===i||5===i||6===i?6.66:7===i?0:10)):(n=10,2===i?s.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 L 5,5 z"):3===i?(n=3.3,s.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z")):4===i?(o=3.31,s.setAttributeNS(null,"d","M 10.00,3.31 C 6.47,3.84 2.87,4.50 0.00,6.63 C 0.67,5.52 1.33,4.42 2.00,3.31 C 1.33,2.21 0.67,1.10 0.00,0.00 C 2.87,2.13 6.47,2.79 10.00,3.31")):5===i?(o=3.28,s.setAttributeNS(null,"d","M 10.00,3.28 C 6.61,4.19 3.19,5.07 0.00,6.55 C 0.62,5.56 1.00,4.44 1.00,3.28 C 1.00,2.11 0.62,0.99 0.00,0.00 C 3.19,1.49 6.61,2.37 10.00,3.28")):6===i?(o=2.84,s.setAttributeNS(null,"d","M 10.00,2.84 C 6.61,3.59 3.21,4.35 0.00,5.68 C 0.33,4.73 0.67,3.78 1.00,2.84 C 0.67,1.89 0.33,0.95 0.00,0.00 C 3.21,1.33 6.61,2.09 10.00,2.84")):7===i?(o=5.2,s.setAttributeNS(null,"d","M 10.00,5.20 C 5.96,5.20 2.01,6.92 0.00,10.39 M 0.00,0.00 C 2.01,3.47 5.96,5.20 10.00,5.20")):s.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 z"),t.elementClass===constants.A.OBJECT_CLASS_LINE&&(n=2===i?5.1:3===i?.02:4===i||5===i||6===i?3.33:7===i?10:.05)),7===i&&(r.setAttributeNS(null,"fill","none"),r.setAttributeNS(null,"stroke-width",1)),r.setAttributeNS(null,"refY",o),r.setAttributeNS(null,"refX",n),r.appendChild(s),r},_setArrowColor:function(t,e,i,r,s){t&&(utils_type.A.isString(e)&&(7!==s?this._setAttribute((function(){t.setAttributeNS(null,"stroke",e),t.setAttributeNS(null,"fill",e),t.setAttributeNS(null,"stroke-opacity",i),t.setAttributeNS(null,"fill-opacity",i)}),r.visPropOld.fillcolor):this._setAttribute((function(){t.setAttributeNS(null,"fill","none"),t.setAttributeNS(null,"stroke",e),t.setAttributeNS(null,"stroke-opacity",i)}),r.visPropOld.fillcolor)),this.isIE&&r.rendNode.parentNode.insertBefore(r.rendNode,r.rendNode))},_setArrowWidth:function(t,e,i,r){var s,n;t&&(n=(s=e)*r,t.setAttributeNS(null,"viewBox","0 0 "+10*s+" "+10*s),t.setAttributeNS(null,"markerHeight",n),t.setAttributeNS(null,"markerWidth",n),t.setAttributeNS(null,"display","inherit"),this.isIE&&i.parentNode.insertBefore(i,i))},updateTicks:function(t){var e,i,r,s,n,o,a,l,u="",c=t.ticks.length,h=!0;for(e=0;e<c;e++){for(n=(r=t.ticks[e])[0],o=r[1],a=n.length,l=" M "+n[0]+" "+o[0],utils_type.A.isNumber(n[0])||(h=!1),i=1;h&&i<a;++i)utils_type.A.isNumber(n[i])?l+=" L "+n[i]+" "+o[i]:h=!1;h&&(u+=l)}s=t.rendNode,utils_type.A.exists(s)||(s=this.createPrim("path",t.id),this.appendChildPrim(s,utils_type.A.evaluate(t.visProp.layer)),t.rendNode=s),s.setAttributeNS(null,"stroke",utils_type.A.evaluate(t.visProp.strokecolor)),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"stroke-opacity",utils_type.A.evaluate(t.visProp.strokeopacity)),s.setAttributeNS(null,"stroke-width",utils_type.A.evaluate(t.visProp.strokewidth)),this.updatePathPrim(s,u,t.board),this.setObjectViewport(t)},displayCopyright:function(t,e){var i,r=this.createPrim("text","licenseText");r.setAttributeNS(null,"x","20px"),r.setAttributeNS(null,"y",2+e+"px"),r.setAttributeNS(null,"style","font-family:Arial,Helvetica,sans-serif; font-size:"+e+"px; fill:#356AA0;  opacity:0.3;"),i=this.container.ownerDocument.createTextNode(t),r.appendChild(i),this.appendChildPrim(r,0)},drawInternalText:function(t){var e=this.createPrim("text",t.id);return e.style.whiteSpace="nowrap",t.rendNodeText=this.container.ownerDocument.createTextNode(""),e.appendChild(t.rendNodeText),this.appendChildPrim(e,utils_type.A.evaluate(t.visProp.layer)),e},updateInternalText:function(t){var e,i=t.plaintext,r=t.getAnchorX(),s=t.getAnchorY();t.rendNode.getAttributeNS(null,"class")!==t.visProp.cssclass&&(t.rendNode.setAttributeNS(null,"class",utils_type.A.evaluate(t.visProp.cssclass)),t.needsSizeUpdate=!0),isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])||(e=t.coords.scrCoords[1],t.visPropOld.left!==r+e&&(t.rendNode.setAttributeNS(null,"x",e+"px"),"left"===r?t.rendNode.setAttributeNS(null,"text-anchor","start"):"right"===r?t.rendNode.setAttributeNS(null,"text-anchor","end"):"middle"===r&&t.rendNode.setAttributeNS(null,"text-anchor","middle"),t.visPropOld.left=r+e),e=t.coords.scrCoords[2],t.visPropOld.top!==s+e&&(t.rendNode.setAttributeNS(null,"y",e+.5*this.vOffsetText+"px"),"bottom"===s?(t.rendNode.setAttributeNS(null,"dy","0"),t.rendNode.setAttributeNS(null,"dominant-baseline","auto")):"top"===s?(t.rendNode.setAttributeNS(null,"dy","1.6ex"),t.rendNode.setAttributeNS(null,"dominant-baseline","auto")):"middle"===s&&(t.rendNode.setAttributeNS(null,"dy","0.6ex"),t.rendNode.setAttributeNS(null,"dominant-baseline","auto")),t.visPropOld.top=s+e)),t.htmlStr!==i&&(t.rendNodeText.data=i,t.htmlStr=i),this.transformImage(t,t.transformations)},updateInternalTextStyle:function(t,e,i,r){this.setObjectViewport(t),this.setObjectFillColor(t,e,i)},drawImage:function(t){var e=this.createPrim("image",t.id);e.setAttributeNS(null,"preserveAspectRatio","none"),this.appendChildPrim(e,utils_type.A.evaluate(t.visProp.layer)),t.rendNode=e,this.updateImage(t)},transformImage:function(t,e){var i,r,s,n,o=t.rendNode,a="";if(e.length>0&&-1===(i=[(r=this.joinTransforms(t,e))[1][1],r[2][1],r[1][2],r[2][2],r[1][0],r[2][0]].join(",")).indexOf("NaN"))if(a+=" matrix("+i+") ",t.elementClass===constants.A.OBJECT_CLASS_TEXT&&"html"===t.visProp.display){switch(o.style.transform=a,s=-t.coords.scrCoords[1],n=-t.coords.scrCoords[2],utils_type.A.evaluate(t.visProp.anchorx)){case"right":s+=t.size[0];break;case"middle":s+=.5*t.size[0]}switch(utils_type.A.evaluate(t.visProp.anchory)){case"bottom":n+=t.size[1];break;case"middle":n+=.5*t.size[1]}o.style["transform-origin"]=s+"px "+n+"px"}else o.setAttributeNS(null,"transform",a)},updateImageURL:function(t){var e=utils_type.A.evaluate(t.url);return t._src!==e&&(t.imgIsLoaded=!1,t.rendNode.setAttributeNS(this.xlinkNamespace,"xlink:href",e),t._src=e,!0)},updateImageStyle:function(t,e){var i=utils_type.A.evaluate(e?t.visProp.highlightcssclass:t.visProp.cssclass);t.rendNode.setAttributeNS(null,"class",i)},drawForeignObject:function(t){t.rendNode=this.appendChildPrim(this.createPrim("foreignObject",t.id),utils_type.A.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"foreignObject"),this.updateForeignObject(t)},updateForeignObject:function(t){t._useUserSize?t.rendNode.style.overflow="hidden":t.rendNode.style.overflow="visible",this.updateRectPrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),t.rendNode.innerHTML=t.content,this._updateVisual(t,{stroke:!0,dash:!0},!0)},appendChildPrim:function(t,e){return utils_type.A.exists(e)?e>=src_options.A.layer.numlayers&&(e=src_options.A.layer.numlayers-1):e=0,this.layer[e].appendChild(t),t},createPrim:function(t,e){var i=this.container.ownerDocument.createElementNS(this.svgNamespace,t);return i.setAttributeNS(null,"id",this.uniqName(e)),i.style.position="absolute","path"===t&&(i.setAttributeNS(null,"stroke-linecap","round"),i.setAttributeNS(null,"stroke-linejoin","round"),i.setAttributeNS(null,"fill-rule","evenodd")),i},remove:function(t){utils_type.A.exists(t)&&utils_type.A.exists(t.parentNode)&&t.parentNode.removeChild(t)},setLayer:function(t,e){utils_type.A.exists(e)?e>=src_options.A.layer.numlayers&&(e=src_options.A.layer.numlayers-1):e=0,this.layer[e].appendChild(t.rendNode)},makeArrows:function(t,e){var i,r,s=e.evFirst,n=e.evLast;this.isIE&&t.visPropCalc.visible&&(s||n)?t.rendNode.parentNode.insertBefore(t.rendNode,t.rendNode):(i=t.rendNodeTriangleStart,s?(r=this.toStr(this.container.id,"_",t.id,"TriangleStart",e.typeFirst),utils_type.A.exists(i)&&i.id===r||(null===(i=this.container.ownerDocument.getElementById(r))&&(i=this._createArrowHead(t,"Start",e.typeFirst),this.defs.appendChild(i)),t.rendNodeTriangleStart=i,t.rendNode.setAttributeNS(null,"marker-start",this.toURL(r)))):utils_type.A.exists(i)&&(this.remove(i),t.rendNodeTriangleStart=null),i=t.rendNodeTriangleEnd,n?(r=this.toStr(this.container.id,"_",t.id,"TriangleEnd",e.typeLast),utils_type.A.exists(i)&&i.id===r||(null===(i=this.container.ownerDocument.getElementById(r))&&(i=this._createArrowHead(t,"End",e.typeLast),this.defs.appendChild(i)),t.rendNodeTriangleEnd=i,t.rendNode.setAttributeNS(null,"marker-end",this.toURL(r)))):utils_type.A.exists(i)&&(this.remove(i),t.rendNodeTriangleEnd=null))},updateEllipsePrim:function(t,e,i,r,s){var n;n=2e5,e=Math.abs(e)<n?e:n*e/Math.abs(e),i=Math.abs(i)<n?i:n*i/Math.abs(i),r=Math.abs(r)<n?r:n*r/Math.abs(r),s=Math.abs(s)<n?s:n*s/Math.abs(s),t.setAttributeNS(null,"cx",e),t.setAttributeNS(null,"cy",i),t.setAttributeNS(null,"rx",Math.abs(r)),t.setAttributeNS(null,"ry",Math.abs(s))},updateLinePrim:function(t,e,i,r,s){var n;n=2e5,isNaN(e+i+r+s)||(e=Math.abs(e)<n?e:n*e/Math.abs(e),i=Math.abs(i)<n?i:n*i/Math.abs(i),r=Math.abs(r)<n?r:n*r/Math.abs(r),s=Math.abs(s)<n?s:n*s/Math.abs(s),t.setAttributeNS(null,"x1",e),t.setAttributeNS(null,"y1",i),t.setAttributeNS(null,"x2",r),t.setAttributeNS(null,"y2",s))},updatePathPrim:function(t,e){""===e&&(e="M 0 0"),t.setAttributeNS(null,"d",e)},updatePathStringPoint:function(t,e,i){var r="",s=t.coords.scrCoords,n=e*Math.sqrt(3)*.5,o=.5*e;return"x"===i?r=" M "+(s[1]-e)+" "+(s[2]-e)+" L "+(s[1]+e)+" "+(s[2]+e)+" M "+(s[1]+e)+" "+(s[2]-e)+" L "+(s[1]-e)+" "+(s[2]+e):"+"===i?r=" M "+(s[1]-e)+" "+s[2]+" L "+(s[1]+e)+" "+s[2]+" M "+s[1]+" "+(s[2]-e)+" L "+s[1]+" "+(s[2]+e):"|"===i?r=" M "+s[1]+" "+(s[2]-e)+" L "+s[1]+" "+(s[2]+e):"-"===i?r=" M "+(s[1]-e)+" "+s[2]+" L "+(s[1]+e)+" "+s[2]:"<>"===i||"<<>>"===i?("<<>>"===i&&(e*=1.41),r=" M "+(s[1]-e)+" "+s[2]+" L "+s[1]+" "+(s[2]+e)+" L "+(s[1]+e)+" "+s[2]+" L "+s[1]+" "+(s[2]-e)+" Z "):"^"===i?r=" M "+s[1]+" "+(s[2]-e)+" L "+(s[1]-n)+" "+(s[2]+o)+" L "+(s[1]+n)+" "+(s[2]+o)+" Z ":"v"===i?r=" M "+s[1]+" "+(s[2]+e)+" L "+(s[1]-n)+" "+(s[2]-o)+" L "+(s[1]+n)+" "+(s[2]-o)+" Z ":">"===i?r=" M "+(s[1]+e)+" "+s[2]+" L "+(s[1]-o)+" "+(s[2]-n)+" L "+(s[1]-o)+" "+(s[2]+n)+" Z ":"<"===i&&(r=" M "+(s[1]-e)+" "+s[2]+" L "+(s[1]+o)+" "+(s[2]-n)+" L "+(s[1]+o)+" "+(s[2]+n)+" Z "),r},updatePathStringPrim:function(t){var e,i,r,s=" M ",n=s,o=5e3,a="";if(t.numberPoints<=0)return"";if(r=Math.min(t.points.length,t.numberPoints),1===t.bezierDegree)for(e=0;e<r;e++)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?n=s:(i[1]=Math.max(Math.min(i[1],o),-5e3),i[2]=Math.max(Math.min(i[2],o),-5e3),a+=n+i[1]+" "+i[2],n=" L ");else if(3===t.bezierDegree)for(e=0;e<r;)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?n=s:(a+=n+i[1]+" "+i[2]," C "===n&&(e+=1,a+=" "+(i=t.points[e].scrCoords)[1]+" "+i[2],e+=1,a+=" "+(i=t.points[e].scrCoords)[1]+" "+i[2]),n=" C "),e+=1;return a},updatePathStringBezierPrim:function(t){var e,i,r,s,n,o,a,l=" M ",u=l,c=5e3,h="",d=utils_type.A.evaluate(t.visProp.strokewidth),p="plot"!==utils_type.A.evaluate(t.visProp.curvetype);if(t.numberPoints<=0)return"";for(p&&t.board.options.curve.RDPsmoothing&&(t.points=numerics.A.RamerDouglasPeucker(t.points,.5)),a=Math.min(t.points.length,t.numberPoints),i=1;i<3;i++)for(u=l,e=0;e<a;e++)s=t.points[e].scrCoords,isNaN(s[1])||isNaN(s[2])?u=l:(s[1]=Math.max(Math.min(s[1],c),-5e3),s[2]=Math.max(Math.min(s[2],c),-5e3),u===l?h+=u+s[1]+" "+s[2]:(r=2*i,h+=[u,n+.333*(s[1]-n)+d*(r*Math.random()-i)," ",o+.333*(s[2]-o)+d*(r*Math.random()-i)," ",n+.666*(s[1]-n)+d*(r*Math.random()-i)," ",o+.666*(s[2]-o)+d*(r*Math.random()-i)," ",s[1]," ",s[2]].join("")),u=" C ",n=s[1],o=s[2]);return h},updatePolygonPrim:function(t,e){var i,r,s="",n=e.vertices.length;for(t.setAttributeNS(null,"stroke","none"),t.setAttributeNS(null,"fill-rule","evenodd"),"polygonalchain"===e.elType&&n++,i=0;i<n-1;i++){if(!e.vertices[i].isReal)return void t.setAttributeNS(null,"points","");s=s+(r=e.vertices[i].coords.scrCoords)[1]+","+r[2],i<n-2&&(s+=" ")}-1===s.indexOf("NaN")&&t.setAttributeNS(null,"points",s)},updateRectPrim:function(t,e,i,r,s){t.setAttributeNS(null,"x",e),t.setAttributeNS(null,"y",i),t.setAttributeNS(null,"width",r),t.setAttributeNS(null,"height",s)},setPropertyPrim:function(t,e,i){"stroked"!==e&&t.setAttributeNS(null,e,i)},display:function(t,e){var i;t&&t.rendNode&&(t.visPropOld.visible=e,i=t.rendNode,e?(i.setAttributeNS(null,"display","inline"),i.style.visibility="inherit"):(i.setAttributeNS(null,"display","none"),i.style.visibility="hidden"))},show:function(t){jxg.A.deprecated("Board.renderer.show()","Board.renderer.display()"),this.display(t,!0)},hide:function(t){jxg.A.deprecated("Board.renderer.hide()","Board.renderer.display()"),this.display(t,!1)},setBuffering:function(t,e){t.rendNode.setAttribute("buffered-rendering",e)},setDashStyle:function(t){var e=utils_type.A.evaluate(t.visProp.dash),i=utils_type.A.evaluate(t.visProp.dashscale)?.5*utils_type.A.evaluate(t.visProp.strokewidth):1,r=t.rendNode;e>0?r.setAttributeNS(null,"stroke-dasharray",this.dashArray[e-1].map((function(t){return t*i})).join(",")):r.hasAttributeNS(null,"stroke-dasharray")&&r.removeAttributeNS(null,"stroke-dasharray")},setGradient:function(t){var e,i,r,s=t.rendNode,n=utils_type.A.evaluate(t.visProp.gradient);"linear"===n||"radial"===n?(e=this.createPrim(n+"Gradient",t.id+"_gradient"),i=this.createPrim("stop",t.id+"_gradient1"),r=this.createPrim("stop",t.id+"_gradient2"),e.appendChild(i),e.appendChild(r),this.defs.appendChild(e),s.setAttributeNS(null,"style","fill:"+this.toURL(this.container.id+"_"+t.id+"_gradient")),t.gradNode1=i,t.gradNode2=r,t.gradNode=e):s.removeAttributeNS(null,"style")},updateGradientAngle:function(t,e){var i=1,r=Math.cos(e),s=Math.sin(e);Math.abs(r)>Math.abs(s)?i/=Math.abs(r):i/=Math.abs(s),r>=0?(t.setAttributeNS(null,"x1",0),t.setAttributeNS(null,"x2",r*i)):(t.setAttributeNS(null,"x1",-r*i),t.setAttributeNS(null,"x2",0)),s>=0?(t.setAttributeNS(null,"y1",0),t.setAttributeNS(null,"y2",s*i)):(t.setAttributeNS(null,"y1",-s*i),t.setAttributeNS(null,"y2",0))},updateGradientCircle:function(t,e,i,r,s,n,o){t.setAttributeNS(null,"cx",100*e+"%"),t.setAttributeNS(null,"cy",100*i+"%"),t.setAttributeNS(null,"r",100*r+"%"),t.setAttributeNS(null,"fx",100*s+"%"),t.setAttributeNS(null,"fy",100*n+"%"),t.setAttributeNS(null,"fr",100*o+"%")},updateGradient:function(t){var e,i,r=t.gradNode1,s=t.gradNode2,n=utils_type.A.evaluate(t.visProp.gradient);utils_type.A.exists(r)&&utils_type.A.exists(s)&&(i=(i=utils_type.A.evaluate(t.visProp.fillopacity))>0?i:0,e=utils_type.A.evaluate(t.visProp.fillcolor),r.setAttributeNS(null,"style","stop-color:"+e+";stop-opacity:"+i),s.setAttributeNS(null,"style","stop-color:"+utils_type.A.evaluate(t.visProp.gradientsecondcolor)+";stop-opacity:"+utils_type.A.evaluate(t.visProp.gradientsecondopacity)),r.setAttributeNS(null,"offset",100*utils_type.A.evaluate(t.visProp.gradientstartoffset)+"%"),s.setAttributeNS(null,"offset",100*utils_type.A.evaluate(t.visProp.gradientendoffset)+"%"),"linear"===n?this.updateGradientAngle(t.gradNode,utils_type.A.evaluate(t.visProp.gradientangle)):"radial"===n&&this.updateGradientCircle(t.gradNode,utils_type.A.evaluate(t.visProp.gradientcx),utils_type.A.evaluate(t.visProp.gradientcy),utils_type.A.evaluate(t.visProp.gradientr),utils_type.A.evaluate(t.visProp.gradientfx),utils_type.A.evaluate(t.visProp.gradientfy),utils_type.A.evaluate(t.visProp.gradientfr)))},setObjectTransition:function(t,e){var i,r,s,n=[],o=0,a=["rendNode","rendNodeTriangleStart","rendNodeTriangleEnd"];if(void 0===e&&(e=utils_type.A.evaluate(t.visProp.transitionduration)),i=utils_type.A.evaluate(t.visProp.transitionproperties),e!==t.visPropOld.transitionduration||i!==t.visPropOld.transitionproperties){for(utils_type.A.exists(i)&&(o=i.length),s=0;s<o;s++)n.push(i[s]+" "+e+"ms");for(r=n.join(", "),o=a.length,s=0;s<o;++s)t[a[s]]&&(t[a[s]].style.transition=r);t.visPropOld.transitionduration=e,t.visPropOld.transitionproperties=i}},setObjectViewport:function(t,e){var i,r,s,n,o,a,l,u,c,h=utils_type.A.evaluate(t.visProp.viewport),d=["rendNode"];for("inherit"===h&&(h=utils_type.A.evaluate(t.board.attr.viewport)),e&&(n=t.rendNode.getBoundingClientRect(),o=this.container.getBoundingClientRect(),l=parseFloat(h[1]),u=parseFloat(h[2]),c=parseFloat(h[3]),a=parseFloat(h[0]),utils_type.A.isString(h[1])&&h[1].indexOf("%")>0&&(l=o.height*l/100),utils_type.A.isString(h[2])&&h[2].indexOf("%")>0&&(u=o.width*u/100),utils_type.A.isString(h[3])&&h[3].indexOf("%")>0&&(c=o.height*c/100),utils_type.A.isString(h[0])&&h[0].indexOf("%")>0&&(a=o.width*a/100),l=parseFloat(o.top)-parseFloat(n.top)+l,u=parseFloat(n.right)-parseFloat(o.right)+u,c=parseFloat(n.bottom)-parseFloat(o.bottom)+c,h=[a=parseFloat(o.left)-parseFloat(n.left)+a,l,u,c]),i=["number"===typeof h[1]?h[1]+"px":h[1],"number"===typeof h[2]?h[2]+"px":h[2],"number"===typeof h[3]?h[3]+"px":h[3],"number"===typeof h[0]?h[0]+"px":h[0]].join(" "),s=d.length,r=0;r<s;++r)t[d[r]]&&(e?t[d[r]].style.clipPath="inset("+i+")":t[d[r]].setAttributeNS(null,"clip-path","view-box inset("+i+")"))},_setAttribute:function(t,e){""===e?t():window.setTimeout(t,1)},setObjectFillColor:function(t,e,i,r){var s,n,o,a,l=utils_type.A.evaluate(e),u=utils_type.A.evaluate(i),c=utils_type.A.evaluate(t.visProp.gradient);u=u>0?u:0,t.visPropOld.fillcolor===l&&t.visPropOld.fillopacity===u&&null===c||(utils_type.A.exists(l)&&!1!==l&&(9!==l.length?(n=l,a=u):(o=utils_color.A.rgba2rgbo(l),n=o[0],a=u*o[1]),s=void 0===r?t.rendNode:r,"none"!==n&&this._setAttribute((function(){s.setAttributeNS(null,"fill",n)}),t.visPropOld.fillcolor),t.type===jxg.A.OBJECT_TYPE_IMAGE?this._setAttribute((function(){s.setAttributeNS(null,"opacity",a)}),t.visPropOld.fillopacity):("none"===n?(a=0,s.setAttributeNS(null,"pointer-events","visibleStroke")):s.setAttributeNS(null,"pointer-events","visiblePainted"),this._setAttribute((function(){s.setAttributeNS(null,"fill-opacity",a)}),t.visPropOld.fillopacity)),"linear"!==c&&"radial"!==c||this.updateGradient(t)),t.visPropOld.fillcolor=l,t.visPropOld.fillopacity=u)},setObjectStrokeColor:function(t,e,i){var r,s,n,o,a=utils_type.A.evaluate(e),l=utils_type.A.evaluate(i);l=l>0?l:0,t.visPropOld.strokecolor===a&&t.visPropOld.strokeopacity===l||(utils_type.A.exists(a)&&!1!==a&&(9!==a.length?(r=a,n=l):(s=utils_color.A.rgba2rgbo(a),r=s[0],n=l*s[1]),o=t.rendNode,t.elementClass===constants.A.OBJECT_CLASS_TEXT?"html"===utils_type.A.evaluate(t.visProp.display)?this._setAttribute((function(){o.style.color=r,o.style.opacity=n}),t.visPropOld.strokecolor):this._setAttribute((function(){o.setAttributeNS(null,"style","fill:"+r),o.setAttributeNS(null,"style","fill-opacity:"+n)}),t.visPropOld.strokecolor):this._setAttribute((function(){o.setAttributeNS(null,"stroke",r),o.setAttributeNS(null,"stroke-opacity",n)}),t.visPropOld.strokecolor),t.elementClass!==constants.A.OBJECT_CLASS_CURVE&&t.elementClass!==constants.A.OBJECT_CLASS_LINE||(utils_type.A.evaluate(t.visProp.firstarrow)&&this._setArrowColor(t.rendNodeTriangleStart,r,n,t,t.visPropCalc.typeFirst),utils_type.A.evaluate(t.visProp.lastarrow)&&this._setArrowColor(t.rendNodeTriangleEnd,r,n,t,t.visPropCalc.typeLast))),t.visPropOld.strokecolor=a,t.visPropOld.strokeopacity=l)},setObjectStrokeWidth:function(t,e){var i,r=utils_type.A.evaluate(e);isNaN(r)||t.visPropOld.strokewidth===r||(i=t.rendNode,this.setPropertyPrim(i,"stroked","true"),utils_type.A.exists(r)&&this.setPropertyPrim(i,"stroke-width",r+"px"),t.visPropOld.strokewidth=r)},setLineCap:function(t){var e=utils_type.A.evaluate(t.visProp.linecap);void 0!==e&&""!==e&&t.visPropOld.linecap!==e&&utils_type.A.exists(t.rendNode)&&(this.setPropertyPrim(t.rendNode,"stroke-linecap",e),t.visPropOld.linecap=e)},setShadow:function(t){var e,i,r,s,n,o,a,l,u=utils_type.A.evaluate(t.visProp.shadow),c=!0,h=!1;(e=JSON.stringify(u))!==t.visPropOld.shadow&&("boolean"===typeof u?(c=!0,h=u,i="none",r=3,s=.1,n=[5,5],o=1):utils_type.A.evaluate(u.enabled)?(c=!1,h=!0,i=jxg.A.rgbParser(utils_type.A.evaluate(u.color)),r=utils_type.A.evaluate(u.blur),s=utils_type.A.evaluate(u.blend),n=utils_type.A.evaluate(u.offset),o=utils_type.A.evaluate(u.opacity)):h=!1,utils_type.A.exists(t.rendNode)&&(h?c?t.rendNode.setAttributeNS(null,"filter",this.toURL(this.container.id+"_f1")):((l=this.container.ownerDocument.getElementById(a))&&this.defs.removeChild(l),a=t.rendNode.id+"_f1",this.defs.appendChild(this.createShadowFilter(a,i,o,s,r,n)),t.rendNode.setAttributeNS(null,"filter",this.toURL(a))):t.rendNode.removeAttributeNS(null,"filter")),t.visPropOld.shadow=e)},suspendRedraw:function(){this.suspendHandle=this.svgRoot.suspendRedraw(1e4)},unsuspendRedraw:function(){this.svgRoot.unsuspendRedraw(this.suspendHandle)},resize:function(t,e){this.svgRoot.setAttribute("width",parseFloat(t)),this.svgRoot.setAttribute("height",parseFloat(e))},createTouchpoints:function(t){var e,i,r,s;for(this.touchpoints=[],e=0;e<t;e++)i="touchpoint1_"+e,s=this.createPrim("path",i),this.appendChildPrim(s,19),s.setAttributeNS(null,"d","M 0 0"),this.touchpoints.push(s),this.setPropertyPrim(s,"stroked","true"),this.setPropertyPrim(s,"stroke-width","1px"),s.setAttributeNS(null,"stroke","#000000"),s.setAttributeNS(null,"stroke-opacity",1),s.setAttributeNS(null,"display","none"),r="touchpoint2_"+e,s=this.createPrim("ellipse",r),this.appendChildPrim(s,19),this.updateEllipsePrim(s,0,0,0,0),this.touchpoints.push(s),this.setPropertyPrim(s,"stroked","true"),this.setPropertyPrim(s,"stroke-width","1px"),s.setAttributeNS(null,"stroke","#000000"),s.setAttributeNS(null,"stroke-opacity",1),s.setAttributeNS(null,"fill","#ffffff"),s.setAttributeNS(null,"fill-opacity",0),s.setAttributeNS(null,"display","none")},showTouchpoint:function(t){this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(this.touchpoints[2*t].setAttributeNS(null,"display","inline"),this.touchpoints[2*t+1].setAttributeNS(null,"display","inline"))},hideTouchpoint:function(t){this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(this.touchpoints[2*t].setAttributeNS(null,"display","none"),this.touchpoints[2*t+1].setAttributeNS(null,"display","none"))},updateTouchpoint:function(t,e){var i,r;this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(i=e[0],r=e[1],this.touchpoints[2*t].setAttributeNS(null,"d","M "+(i-37)+" "+r+" L "+(i+37)+" "+r+" M "+i+" "+(r-37)+" L "+i+" "+(r+37)),this.updateEllipsePrim(this.touchpoints[2*t+1],e[0],e[1],25,25))},_getValuesOfDOMElements:function(t){var e=[];if(1===t.nodeType)for(t=t.firstChild;t;)void 0!==t.id&&void 0!==t.value&&e.push([t.id,t.value]),utils_type.A.concat(e,this._getValuesOfDOMElements(t)),t=t.nextSibling;return e},_getImgDataURL:function(t){var e,i,r,s,n,o;if((i=(e=t.getElementsByTagName("image")).length)>0)for(r=document.createElement("canvas"),o=0;o<i;o++){e[o].setAttribute("crossorigin","anonymous"),s=r.getContext("2d"),r.width=e[o].getAttribute("width"),r.height=e[o].getAttribute("height");try{s.drawImage(e[o],0,0,r.width,r.height),n=r.toDataURL(),e[o].setAttribute("xlink:href",n)}catch(a){console.log("CORS problem! Image can not be used",a)}}return!0},dumpToDataURI:function(t){var e,i,r,s=this.svgRoot,n=window.btoa||base64.encode,o=[];if(this.container.hasChildNodes()&&utils_type.A.exists(this.foreignObjLayer)&&!t)for(this.foreignObjLayer.setAttribute("display","inline");s.nextSibling;)utils_type.A.concat(o,this._getValuesOfDOMElements(s.nextSibling)),this.foreignObjLayer.appendChild(s.nextSibling);if(this._getImgDataURL(s),s.setAttribute("xmlns","http://www.w3.org/2000/svg"),e=(new XMLSerializer).serializeToString(s),!0!==t)for(r=o.length,i=0;i<r;i++)e=e.replace('id="'+o[i][0]+'"','id="'+o[i][0]+'" value="'+o[i][1]+'"');if((e.match(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g)||[]).length>1&&(e=e.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,"")),e=(e=e.replace(/&nbsp;/g," ")).replace(/url\(&quot;(.*)&quot;\)/g,"url($1)"),utils_type.A.exists(this.foreignObjLayer)&&this.foreignObjLayer.hasChildNodes()){for(;this.foreignObjLayer.firstChild;)this.container.appendChild(this.foreignObjLayer.firstChild);this.foreignObjLayer.setAttribute("display","none")}return"data:image/svg+xml;base64,"+n(unescape(encodeURIComponent(e)))},dumpToCanvas:function(t,i,r,s){var n,o,a,l;return(a=this.container.ownerDocument.getElementById(t)).width=a.width,l=a.getContext("2d"),void 0!==i&&void 0!==r&&(a.style.width=parseFloat(i)+"px",a.style.height=parseFloat(r)+"px",a.setAttribute("width",parseFloat(i)),a.setAttribute("height",parseFloat(r))),o=new Image,n=this.dumpToDataURI(s),o.src=n,"Promise"in window?new Promise((function(t,s){try{o.onload=function(){l.drawImage(o,0,0,i,r),t()}}catch(e){s(e)}})):(o.onload=function(){window.setTimeout((function(){try{l.drawImage(o,0,0,i,r)}catch(t){console.log("screenshots not longer supported on IE")}}),200)},this)},screenshot:function(t,e,i){var r,s,n,o,a,l,u,c,h,d,p,f,_=this.container.ownerDocument,m=this.container.parentNode,g=t.attr.screenshot,y=!1;return"no"===this.type||(u=g.scale*this.container.getBoundingClientRect().width,c=g.scale*this.container.getBoundingClientRect().height,void 0===e||""===e?(y=!0,(o=new Image).style.width=u+"px",o.style.height=c+"px"):(y=!1,o=_.getElementById(e)),y&&((r=_.createElement("div")).style.cssText=g.css,r.style.width=u+"px",r.style.height=c+"px",r.style.zIndex=this.container.style.zIndex+120,r.style.position="absolute",r.style.top=this.container.offsetTop+"px",r.style.left=this.container.offsetLeft+"px"),s=_.createElement("canvas"),n=Math.random().toString(36).slice(2,7),s.setAttribute("id",n),s.setAttribute("width",u),s.setAttribute("height",c),s.style.width=u+"px",s.style.height=u+"px",s.style.display="none",m.appendChild(s),y&&(a=_.createElement("span"),l=_.createTextNode("\u2716"),a.style.cssText=g.cssButton,a.appendChild(l),a.onclick=function(){r.parentNode.removeChild(r)},r.appendChild(o),r.appendChild(a),m.insertBefore(r,this.container.nextSibling)),h=_.getElementById(this.uniqName("navigationbar")),utils_type.A.exists(h)&&(d=h.style.display,h.style.display="none",p=this.removeToInsertLater(h)),f=function(){o.src=s.toDataURL("image/png"),m.removeChild(s)},"Promise"in window?this.dumpToCanvas(n,u,c,i).then(f):(this.dumpToCanvas(n,u,c,i),window.setTimeout(f,200)),utils_type.A.exists(h)&&(h.style.display=d,p())),this}});const svg=jxg.A.SVGRenderer;jxg.A.VMLRenderer=function(t){this.type="vml",this.container=t,this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.container.onselectstart=function(){return!1},this.resolution=10,utils_type.A.exists(jxg.A.vmlStylesheet)||(t.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),jxg.A.vmlStylesheet=this.container.ownerDocument.createStyleSheet(),jxg.A.vmlStylesheet.addRule(".jxgvml","behavior:url(#default#VML)"));try{t.ownerDocument.namespaces.jxgvml||t.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),this.createNode=function(e){return t.ownerDocument.createElement("<jxgvml:"+e+' class="jxgvml">')}}catch(e){this.createNode=function(e){return t.ownerDocument.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="jxgvml">')}}this.dashArray=["Solid","1 1","ShortDash","Dash","LongDash","ShortDashDot","LongDashDot"]},jxg.A.VMLRenderer.prototype=new renderer_abstract,jxg.A.extend(jxg.A.VMLRenderer.prototype,{_setAttr:function(t,i,r,s){try{8===this.container.ownerDocument.documentMode?t[i]=r:t.setAttribute(i,r,s)}catch(e){jxg.A.debug("_setAttr: "+i+" "+r+"<br>\n")}},updateTicks:function(t){var e,i,r,s,n,o=this.resolution,a=[];for(i=t.ticks.length,e=0;e<i;e++)s=(r=t.ticks[e])[0],n=r[1],utils_type.A.isNumber(s[0])&&utils_type.A.isNumber(s[1])&&a.push(" m "+Math.round(o*s[0])+", "+Math.round(o*n[0])+" l "+Math.round(o*s[1])+", "+Math.round(o*n[1])+" ");utils_type.A.exists(t.rendNode)||(t.rendNode=this.createPrim("path",t.id),this.appendChildPrim(t.rendNode,utils_type.A.evaluate(t.visProp.layer))),this._setAttr(t.rendNode,"stroked","true"),this._setAttr(t.rendNode,"strokecolor",utils_type.A.evaluate(t.visProp.strokecolor),1),this._setAttr(t.rendNode,"strokeweight",utils_type.A.evaluate(t.visProp.strokewidth)),this._setAttr(t.rendNodeStroke,"opacity",100*utils_type.A.evaluate(t.visProp.strokeopacity)+"%"),this.updatePathPrim(t.rendNode,a,t.board)},displayCopyright:function(t,e){var i,r;(i=this.createNode("textbox")).style.position="absolute",this._setAttr(i,"id",this.container.id+"_licenseText"),i.style.left=20,i.style.top=2,i.style.fontSize=e,i.style.color="#356AA0",i.style.fontFamily="Arial,Helvetica,sans-serif",this._setAttr(i,"opacity","30%"),i.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 30, enabled = true)",r=this.container.ownerDocument.createTextNode(t),i.appendChild(r),this.appendChildPrim(i,0)},drawInternalText:function(t){var e;return(e=this.createNode("textbox")).style.position="absolute",t.rendNodeText=this.container.ownerDocument.createTextNode(""),e.appendChild(t.rendNodeText),this.appendChildPrim(e,9),e.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",e},updateInternalText:function(t){var e,i,r,s,n,o,a=t.plaintext,l=this.joinTransforms(t,t.transformations),u=[0,0],c=t.rendNode,h=[],d=t.getAnchorX(),p=t.getAnchorY();if(!isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])){for("right"===d?u[0]=1:"middle"===d&&(u[0]=.5),"bottom"===p?u[1]=1:"middle"===p&&(u[1]=.5),h[0]=math.A.matVecMult(l,[1,t.coords.scrCoords[1]-u[0]*t.size[0],t.coords.scrCoords[2]+(1-u[1])*t.size[1]+this.vOffsetText]),h[0][1]/=h[0][0],h[0][2]/=h[0][0],h[1]=math.A.matVecMult(l,[1,t.coords.scrCoords[1]+(1-u[0])*t.size[0],t.coords.scrCoords[2]+(1-u[1])*t.size[1]+this.vOffsetText]),h[1][1]/=h[1][0],h[1][2]/=h[1][0],h[2]=math.A.matVecMult(l,[1,t.coords.scrCoords[1]+(1-u[0])*t.size[0],t.coords.scrCoords[2]-u[1]*t.size[1]+this.vOffsetText]),h[2][1]/=h[2][0],h[2][2]/=h[2][0],h[3]=math.A.matVecMult(l,[1,t.coords.scrCoords[1]-u[0]*t.size[0],t.coords.scrCoords[2]-u[1]*t.size[1]+this.vOffsetText]),h[3][1]/=h[3][0],h[3][2]/=h[3][0],i=h[0][1],s=h[0][1],r=h[0][2],n=h[0][2],o=1;o<4;o++)i=Math.max(i,h[o][1]),s=Math.min(s,h[o][1]),r=Math.max(r,h[o][2]),n=Math.min(n,h[o][2]);e=1===u[0]?Math.floor(t.board.canvasWidth-i):Math.floor(s),t.visPropOld.left!==d+e&&(1===u[0]?(t.rendNode.style.right=e+"px",t.rendNode.style.left="auto"):(t.rendNode.style.left=e+"px",t.rendNode.style.right="auto"),t.visPropOld.left=d+e),e=1===u[1]?Math.floor(t.board.canvasHeight-r):Math.floor(n),t.visPropOld.top!==p+e&&(1===u[1]?(t.rendNode.style.bottom=e+"px",t.rendNode.style.top="auto"):(t.rendNode.style.top=e+"px",t.rendNode.style.bottom="auto"),t.visPropOld.top=p+e)}t.htmlStr!==a&&(t.rendNodeText.data=a,t.htmlStr=a),c.filters.item(0).M11=l[1][1],c.filters.item(0).M12=l[1][2],c.filters.item(0).M21=l[2][1],c.filters.item(0).M22=l[2][2],c.filters.item(0).enabled=!0},drawImage:function(t){var e;(e=this.container.ownerDocument.createElement("img")).style.position="absolute",this._setAttr(e,"id",this.container.id+"_"+t.id),this.container.appendChild(e),this.appendChildPrim(e,utils_type.A.evaluate(t.visProp.layer)),e.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand') progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",t.rendNode=e,this.updateImage(t)},transformImage:function(t,e){var i,r,s,n,o,a,l=t.rendNode,u=[];if(e.length>0){for(i=this.joinTransforms(t,e),u[0]=math.A.matVecMult(i,t.coords.scrCoords),u[0][1]/=u[0][0],u[0][2]/=u[0][0],u[1]=math.A.matVecMult(i,[1,t.coords.scrCoords[1]+t.size[0],t.coords.scrCoords[2]]),u[1][1]/=u[1][0],u[1][2]/=u[1][0],u[2]=math.A.matVecMult(i,[1,t.coords.scrCoords[1]+t.size[0],t.coords.scrCoords[2]-t.size[1]]),u[2][1]/=u[2][0],u[2][2]/=u[2][0],u[3]=math.A.matVecMult(i,[1,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1]]),u[3][1]/=u[3][0],u[3][2]/=u[3][0],r=u[0][1],n=u[0][1],s=u[0][2],o=u[0][2],a=1;a<4;a++)r=Math.max(r,u[a][1]),n=Math.min(n,u[a][1]),s=Math.max(s,u[a][2]),o=Math.min(o,u[a][2]);l.style.left=Math.floor(n)+"px",l.style.top=Math.floor(o)+"px",l.filters.item(0).M11=i[1][1],l.filters.item(0).M12=i[1][2],l.filters.item(0).M21=i[2][1],l.filters.item(0).M22=i[2][2],l.filters.item(0).enabled=!0}},updateImageURL:function(t){var e=utils_type.A.evaluate(t.url);this._setAttr(t.rendNode,"src",e)},appendChildPrim:function(t,e){return utils_type.A.exists(e)||(e=0),t.style.zIndex=e,this.container.appendChild(t),t},appendNodesToElement:function(t,e){"shape"!==e&&"path"!==e&&"polygon"!==e||(t.rendNodePath=this.getElementById(t.id+"_path")),t.rendNodeFill=this.getElementById(t.id+"_fill"),t.rendNodeStroke=this.getElementById(t.id+"_stroke"),t.rendNodeShadow=this.getElementById(t.id+"_shadow"),t.rendNode=this.getElementById(t.id)},createPrim:function(t,e){var i,r,s=this.createNode("fill"),n=this.createNode("stroke"),o=this.createNode("shadow");return this._setAttr(s,"id",this.container.id+"_"+e+"_fill"),this._setAttr(n,"id",this.container.id+"_"+e+"_stroke"),this._setAttr(o,"id",this.container.id+"_"+e+"_shadow"),"circle"===t||"ellipse"===t?((i=this.createNode("oval")).appendChild(s),i.appendChild(n),i.appendChild(o)):"polygon"===t||"path"===t||"shape"===t||"line"===t?((i=this.createNode("shape")).appendChild(s),i.appendChild(n),i.appendChild(o),r=this.createNode("path"),this._setAttr(r,"id",this.container.id+"_"+e+"_path"),i.appendChild(r)):((i=this.createNode(t)).appendChild(s),i.appendChild(n),i.appendChild(o)),i.style.position="absolute",i.style.left="0px",i.style.top="0px",this._setAttr(i,"id",this.container.id+"_"+e),i},remove:function(t){utils_type.A.exists(t)&&t.removeNode(!0)},makeArrows:function(t){var e,i=utils_type.A.evaluate(t.visProp.firstarrow),r=utils_type.A.evaluate(t.visProp.lastarrow);t.visPropOld.firstarrow===i&&t.visPropOld.lastarrow===r||(i?(e=t.rendNodeStroke,this._setAttr(e,"startarrow","block"),this._setAttr(e,"startarrowlength","long")):(e=t.rendNodeStroke,utils_type.A.exists(e)&&this._setAttr(e,"startarrow","none")),r?(e=t.rendNodeStroke,this._setAttr(e,"id",this.container.id+"_"+t.id+"stroke"),this._setAttr(e,"endarrow","block"),this._setAttr(e,"endarrowlength","long")):(e=t.rendNodeStroke,utils_type.A.exists(e)&&this._setAttr(e,"endarrow","none")),t.visPropOld.firstarrow=i,t.visPropOld.lastarrow=r)},updateEllipsePrim:function(t,e,i,r,s){t.style.left=Math.floor(e-r)+"px",t.style.top=Math.floor(i-s)+"px",t.style.width=Math.floor(2*Math.abs(r))+"px",t.style.height=Math.floor(2*Math.abs(s))+"px"},updateLinePrim:function(t,e,i,r,s,n){var o,a=this.resolution;isNaN(e+i+r+s)||(o=["m ",Math.floor(a*e),", ",Math.floor(a*i)," l ",Math.floor(a*r),", ",Math.floor(a*s)],this.updatePathPrim(t,o,n))},updatePathPrim:function(t,e,i){var r=i.canvasWidth,s=i.canvasHeight;e.length<=0&&(e=["m 0,0"]),t.style.width=r,t.style.height=s,this._setAttr(t,"coordsize",[Math.floor(this.resolution*r),Math.floor(this.resolution*s)].join(",")),this._setAttr(t,"path",e.join(""))},updatePathStringPoint:function(t,e,i){var r=[],s=Math.round,n=t.coords.scrCoords,o=e*Math.sqrt(3)*.5,a=.5*e,l=this.resolution;return"x"===i?r.push([" m ",s(l*(n[1]-e)),", ",s(l*(n[2]-e))," l ",s(l*(n[1]+e)),", ",s(l*(n[2]+e))," m ",s(l*(n[1]+e)),", ",s(l*(n[2]-e))," l ",s(l*(n[1]-e)),", ",s(l*(n[2]+e))].join("")):"+"===i?r.push([" m ",s(l*(n[1]-e)),", ",s(l*n[2])," l ",s(l*(n[1]+e)),", ",s(l*n[2])," m ",s(l*n[1]),", ",s(l*(n[2]-e))," l ",s(l*n[1]),", ",s(l*(n[2]+e))].join("")):"<>"===i||"<<>>"===i?("<<>>"===i&&(e*=1.41),r.push([" m ",s(l*(n[1]-e)),", ",s(l*n[2])," l ",s(l*n[1]),", ",s(l*(n[2]+e))," l ",s(l*(n[1]+e)),", ",s(l*n[2])," l ",s(l*n[1]),", ",s(l*(n[2]-e))," x e "].join(""))):"^"===i?r.push([" m ",s(l*n[1]),", ",s(l*(n[2]-e))," l ",s(l*(n[1]-o)),", ",s(l*(n[2]+a))," l ",s(l*(n[1]+o)),", ",s(l*(n[2]+a))," x e "].join("")):"v"===i?r.push([" m ",s(l*n[1]),", ",s(l*(n[2]+e))," l ",s(l*(n[1]-o)),", ",s(l*(n[2]-a))," l ",s(l*(n[1]+o)),", ",s(l*(n[2]-a))," x e "].join("")):">"===i?r.push([" m ",s(l*(n[1]+e)),", ",s(l*n[2])," l ",s(l*(n[1]-a)),", ",s(l*(n[2]-o))," l ",s(l*(n[1]-a)),", ",s(l*(n[2]+o))," l ",s(l*(n[1]+e)),", ",s(l*n[2])].join("")):"<"===i&&r.push([" m ",s(l*(n[1]-e)),", ",s(l*n[2])," l ",s(l*(n[1]+a)),", ",s(l*(n[2]-o))," l ",s(l*(n[1]+a)),", ",s(l*(n[2]+o))," x e "].join("")),r},updatePathStringPrim:function(t){var e,i,r=[],s=this.resolution,n=Math.round,o=" m ",a=o,l=Math.min(t.numberPoints,8192);if(t.numberPoints<=0)return"";if(l=Math.min(l,t.points.length),1===t.bezierDegree)for(e=0;e<l;e++)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?a=o:(i[1]>2e4?i[1]=2e4:i[1]<-2e4&&(i[1]=-2e4),i[2]>2e4?i[2]=2e4:i[2]<-2e4&&(i[2]=-2e4),r.push([a,n(s*i[1]),", ",n(s*i[2])].join("")),a=" l ");else if(3===t.bezierDegree)for(e=0;e<l;)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?a=o:(r.push([a,n(s*i[1]),", ",n(s*i[2])].join(""))," c "===a&&(e+=1,i=t.points[e].scrCoords,r.push([" ",n(s*i[1]),", ",n(s*i[2])].join("")),e+=1,i=t.points[e].scrCoords,r.push([" ",n(s*i[1]),", ",n(s*i[2])].join(""))),a=" c "),e+=1;return r.push(" e"),r},updatePathStringBezierPrim:function(t){var e,i,r,s,n,o,a=[],l=utils_type.A.evaluate(t.visProp.strokewidth),u=this.resolution,c=Math.round,h=" m ",d=h,p="plot"!==utils_type.A.evaluate(t.visProp.curvetype),f=Math.min(t.numberPoints,8192);if(t.numberPoints<=0)return"";for(p&&t.board.options.curve.RDPsmoothing&&(t.points=numerics.A.RamerDouglasPeucker(t.points,1)),f=Math.min(f,t.points.length),i=1;i<3;i++)for(d=h,e=0;e<f;e++)s=t.points[e].scrCoords,isNaN(s[1])||isNaN(s[2])?d=h:(s[1]>2e4?s[1]=2e4:s[1]<-2e4&&(s[1]=-2e4),s[2]>2e4?s[2]=2e4:s[2]<-2e4&&(s[2]=-2e4),d===h?a.push([d,c(u*s[1])," ",c(u*s[2])].join("")):(r=2*i,a.push([d,c(u*(n+.333*(s[1]-n)+l*(r*Math.random()-i)))," ",c(u*(o+.333*(s[2]-o)+l*(r*Math.random()-i)))," ",c(u*(n+.666*(s[1]-n)+l*(r*Math.random()-i)))," ",c(u*(o+.666*(s[2]-o)+l*(r*Math.random()-i)))," ",c(u*s[1])," ",c(u*s[2])].join(""))),d=" c ",n=s[1],o=s[2]);return a.push(" e"),a},updatePolygonPrim:function(t,e){var i,r,s=e.vertices.length,n=this.resolution,o=[];if(this._setAttr(t,"stroked","false"),r=e.vertices[0].coords.scrCoords,!isNaN(r[1]+r[2])){for(o.push(["m ",Math.floor(n*r[1]),",",Math.floor(n*r[2])," l "].join("")),i=1;i<s-1;i++){if(!e.vertices[i].isReal)return void this.updatePathPrim(t,"",e.board);if(r=e.vertices[i].coords.scrCoords,isNaN(r[1]+r[2]))return;o.push(Math.floor(n*r[1])+","+Math.floor(n*r[2])),i<s-2&&o.push(", ")}o.push(" x e"),this.updatePathPrim(t,o,e.board)}},updateRectPrim:function(t,e,i,r,s){t.style.left=Math.floor(e)+"px",t.style.top=Math.floor(i)+"px",r>=0&&(t.style.width=r+"px"),s>=0&&(t.style.height=s+"px")},setPropertyPrim:function(t,e,i){var r,s="";switch(e){case"stroke":s="strokecolor";break;case"stroke-width":s="strokeweight";break;case"stroke-dasharray":s="dashstyle"}""!==s&&(r=utils_type.A.evaluate(i),this._setAttr(t,s,r))},display:function(t,e){t&&t.rendNode&&(t.visPropOld.visible=e,t.rendNode.style.visibility=e?"inherit":"hidden")},show:function(t){jxg.A.deprecated("Board.renderer.show()","Board.renderer.display()"),t&&t.rendNode&&(t.rendNode.style.visibility="inherit")},hide:function(t){jxg.A.deprecated("Board.renderer.hide()","Board.renderer.display()"),t&&t.rendNode&&(t.rendNode.style.visibility="hidden")},setDashStyle:function(t,e){var i;e.dash>=0&&(i=t.rendNodeStroke,this._setAttr(i,"dashstyle",this.dashArray[e.dash]))},setGradient:function(t){var e=t.rendNodeFill,i=utils_type.A.evaluate(t.visProp.gradient);"linear"===i?(this._setAttr(e,"type","gradient"),this._setAttr(e,"color2",utils_type.A.evaluate(t.visProp.gradientsecondcolor)),this._setAttr(e,"opacity2",utils_type.A.evaluate(t.visProp.gradientsecondopacity)),this._setAttr(e,"angle",utils_type.A.evaluate(t.visProp.gradientangle))):"radial"===i?(this._setAttr(e,"type","gradientradial"),this._setAttr(e,"color2",utils_type.A.evaluate(t.visProp.gradientsecondcolor)),this._setAttr(e,"opacity2",utils_type.A.evaluate(t.visProp.gradientsecondopacity)),this._setAttr(e,"focusposition",100*utils_type.A.evaluate(t.visProp.gradientpositionx)+"%,"+100*utils_type.A.evaluate(t.visProp.gradientpositiony)+"%"),this._setAttr(e,"focussize","0,0")):this._setAttr(e,"type","solid")},setObjectFillColor:function(t,e,i){var r,s,n,o=utils_type.A.evaluate(e),a=utils_type.A.evaluate(i),l=t.rendNode;a=a>0?a:0,t.visPropOld.fillcolor===o&&t.visPropOld.fillopacity===a||(utils_type.A.exists(o)&&!1!==o&&(9!==o.length?(r=o,n=a):(r=(s=utils_color.A.rgba2rgbo(o))[0],n=a*s[1]),"none"===r||!1===r?this._setAttr(t.rendNode,"filled","false"):(this._setAttr(t.rendNode,"filled","true"),this._setAttr(t.rendNode,"fillcolor",r),utils_type.A.exists(n)&&t.rendNodeFill&&this._setAttr(t.rendNodeFill,"opacity",100*n+"%")),t.type===constants.A.OBJECT_TYPE_IMAGE&&l.filters.length>1&&(l.filters.item(1).opacity=Math.round(100*n),l.filters.item(1).enabled=!0)),t.visPropOld.fillcolor=o,t.visPropOld.fillopacity=a)},setObjectStrokeColor:function(t,e,i){var r,s,n,o,a=utils_type.A.evaluate(e),l=utils_type.A.evaluate(i),u=t.rendNode;l=l>0?l:0,t.visPropOld.strokecolor===a&&t.visPropOld.strokeopacity===l||(utils_type.A.exists(a)&&!1!==a&&(9!==a.length?(r=a,n=l):(r=(s=e.rgba2rgbo(a))[0],n=l*s[1]),t.elementClass===constants.A.OBJECT_CLASS_TEXT?(u.filters.length>1&&(u.filters.item(1).opacity=Math.round(100*n),u.filters.item(1).enabled=!0),u.style.color=r):(!1!==r&&(this._setAttr(u,"stroked","true"),this._setAttr(u,"strokecolor",r)),o=t.rendNodeStroke,utils_type.A.exists(n)&&t.type!==constants.A.OBJECT_TYPE_IMAGE&&this._setAttr(o,"opacity",100*n+"%"))),t.visPropOld.strokecolor=a,t.visPropOld.strokeopacity=l)},setObjectStrokeWidth:function(t,e){var i,r=utils_type.A.evaluate(e);isNaN(r)||t.visPropOld.strokewidth===r||(i=t.rendNode,this.setPropertyPrim(i,"stroked","true"),utils_type.A.exists(r)&&(this.setPropertyPrim(i,"stroke-width",r),0===r&&utils_type.A.exists(t.rendNodeStroke)&&this._setAttr(i,"stroked","false")),t.visPropOld.strokewidth=r)},setShadow:function(t){var e=t.rendNodeShadow,i=utils_type.A.evaluate(t.visProp.shadow);e&&t.visPropOld.shadow!==i&&(i?(this._setAttr(e,"On","True"),this._setAttr(e,"Offset","3pt,3pt"),this._setAttr(e,"Opacity","60%"),this._setAttr(e,"Color","#aaaaaa")):this._setAttr(e,"On","False"),t.visPropOld.shadow=i)},suspendRedraw:function(){this.container.style.display="none"},unsuspendRedraw:function(){this.container.style.display=""}});const vml=jxg.A.VMLRenderer;var uuidCharsStr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",uuidChars=uuidCharsStr.split("");jxg.A.Util=jxg.A.Util||{},jxg.A.Util.genUUID=function(t){var e,i,r=[],s=0;for(""!==(t=t||"")&&"-"!==t.slice(t.length-1)&&(t+="-"),i=0;i<36;i++)8===i||13===i||18===i||23===i?r[i]="-":14===i?r[i]="4":(s<=2&&(s=33554432+16777216*Math.random()|0),e=15&s,s>>=4,r[i]=uuidChars[19===i?3&e|8:e]);return t+r.join("")};const uuid=jxg.A.Util;jxg.A.CanvasRenderer=function(t,e){if(this.type="canvas",this.canvasRoot=null,this.suspendHandle=null,this.canvasId=uuid.genUUID(),this.canvasNamespace=null,env.A.isBrowser)this.container=t,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.container.innerHTML=['<canvas id="',this.canvasId,'" width="',e.width,'px" height="',e.height,'px"></canvas>'].join(""),this.canvasRoot=this.container.ownerDocument.getElementById(this.canvasId),this.canvasRoot.style.display="block",this.context=this.canvasRoot.getContext("2d");else if(env.A.isNode())try{this.canvasRoot=jxg.A.createCanvas(500,500),this.context=this.canvasRoot.getContext("2d")}catch(i){throw new Error('JXG.createCanvas not available.\nInstall the npm package `canvas`\nand call:\n    import { createCanvas } from "canvas.js";\n    JXG.createCanvas = createCanvas;\n')}},jxg.A.CanvasRenderer.prototype=new renderer_abstract,jxg.A.extend(jxg.A.CanvasRenderer.prototype,{_drawPolygon:function(t,e,i){var r,s=t.length,n=this.context;if(s>0){if(i&&(n.lineWidth=0),n.beginPath(),n.moveTo(t[0][0],t[0][1]),1===e)for(r=1;r<s;r++)n.lineTo(t[r][0],t[r][1]);else for(r=1;r<s;r+=3)n.bezierCurveTo(t[r][0],t[r][1],t[r+1][0],t[r+1][1],t[r+2][0],t[r+2][1]);i?(n.lineTo(t[0][0],t[0][1]),n.closePath(),n.fill("evenodd")):n.stroke()}},_fill:function(t){var e=this.context;e.save(),this._setColor(t,"fill")&&e.fill("evenodd"),e.restore()},_rotatePoint:function(t,e,i){return[e*Math.cos(t)-i*Math.sin(t),e*Math.sin(t)+i*Math.cos(t)]},_rotateShape:function(t,e){var i,r=[],s=t.length;if(s<=0)return t;for(i=0;i<s;i++)r.push(this._rotatePoint(e,t[i][0],t[i][1]));return r},updateGradientAngle:function(t,e){var i,r,s,n,o,a,l,u,c,h,d,p,f=1,_=Math.cos(-e),m=Math.sin(-e),g=t.getBoundingBox();return Math.abs(_)>Math.abs(m)?f/=Math.abs(_):f/=Math.abs(m),_>=0?(s=0,n=_*f):(s=-_*f,n=0),m>=0?(o=0,a=m*f):(o=-m*f,a=0),i=new base_coords.A(constants.A.COORDS_BY_USER,[g[0],g[1]],t.board),d=(r=new base_coords.A(constants.A.COORDS_BY_USER,[g[2],g[3]],t.board)).scrCoords[1]-i.scrCoords[1],p=r.scrCoords[2]-i.scrCoords[2],l=i.scrCoords[1]+d*s,c=i.scrCoords[2]+p*o,u=i.scrCoords[1]+d*n,h=i.scrCoords[2]+p*a,this.context.createLinearGradient(l,c,u,h)},updateGradientCircle:function(t,e,i,r,s,n,o){var a,l,u,c,h,d,p,f,_,m,g=t.getBoundingBox();return a=new base_coords.A(constants.A.COORDS_BY_USER,[g[0],g[1]],t.board),_=(l=new base_coords.A(constants.A.COORDS_BY_USER,[g[2],g[3]],t.board)).scrCoords[1]-a.scrCoords[1],m=a.scrCoords[2]-l.scrCoords[2],u=a.scrCoords[1]+_*e,c=l.scrCoords[2]+m*i,d=a.scrCoords[1]+_*s,p=l.scrCoords[2]+m*n,h=r*(_+m)*.5,f=o*(_+m)*.5,this.context.createRadialGradient(d,p,f,u,c,h)},updateGradient:function(t){var e,i,r=utils_type.A.evaluate(t.visProp.gradient);return e=utils_type.A.evaluate(t.visProp.fillcolor),"linear"===r?i=this.updateGradientAngle(t,utils_type.A.evaluate(t.visProp.gradientangle)):"radial"===r&&(i=this.updateGradientCircle(t,utils_type.A.evaluate(t.visProp.gradientcx),utils_type.A.evaluate(t.visProp.gradientcy),utils_type.A.evaluate(t.visProp.gradientr),utils_type.A.evaluate(t.visProp.gradientfx),utils_type.A.evaluate(t.visProp.gradientfy),utils_type.A.evaluate(t.visProp.gradientfr))),i.addColorStop(utils_type.A.evaluate(t.visProp.gradientstartoffset),e),i.addColorStop(utils_type.A.evaluate(t.visProp.gradientendoffset),utils_type.A.evaluate(t.visProp.gradientsecondcolor)),i},_setColor:function(t,e,i){var r,s,n,o,a,l,u,c,h=!0,d=t.visProp;return e=e||"stroke",i=i||e,r=this._getHighlighted(t),"linear"===(c=utils_type.A.evaluate(t.visProp.gradient))||"radial"===c?(this.context[i+"Style"]=this.updateGradient(t),h):("none"!==(n=utils_type.A.evaluate(d[r+e+"color"]))&&!1!==n?(l=(l=utils_type.A.evaluate(d[r+e+"opacity"]))>0?l:0,9!==n.length?(a=n,u=l):(a=(o=utils_color.A.rgba2rgbo(n))[0],u=l*o[1]),this.context.globalAlpha=u,this.context[i+"Style"]=a):h=!1,s=parseFloat(utils_type.A.evaluate(d[r+"strokewidth"])),"stroke"!==e||isNaN(s)||(0===s?this.context.globalAlpha=0:this.context.lineWidth=s),"stroke"===e&&void 0!==d.linecap&&""!==d.linecap&&(this.context.lineCap=d.linecap),h)},_stroke:function(t){var e=this.context,i=utils_type.A.evaluate(t.visProp.dash),r=utils_type.A.evaluate(t.visProp.dashscale)?.5*utils_type.A.evaluate(t.visProp.strokewidth):1;e.save(),i>0?e.setLineDash&&e.setLineDash(this.dashArray[i-1].map((function(t){return t*r}))):this.context.lineDashArray=[],this._setColor(t,"stroke")&&e.stroke(),e.restore()},_translateShape:function(t,e,i){var r,s=[],n=t.length;if(n<=0)return t;for(r=0;r<n;r++)s.push([t[r][0]+e,t[r][1]+i]);return s},drawPoint:function(t){var e=utils_type.A.evaluate(t.visProp.face),i=utils_type.A.evaluate(t.visProp.size),r=t.coords.scrCoords,s=i*Math.sqrt(3)*.5,n=.5*i,o=parseFloat(utils_type.A.evaluate(t.visProp.strokewidth))/2,a=this.context;if(t.visPropCalc.visible)switch(e){case"cross":case"x":a.beginPath(),a.moveTo(r[1]-i,r[2]-i),a.lineTo(r[1]+i,r[2]+i),a.moveTo(r[1]+i,r[2]-i),a.lineTo(r[1]-i,r[2]+i),a.lineCap="round",a.lineJoin="round",a.closePath(),this._stroke(t);break;case"circle":case"o":a.beginPath(),a.arc(r[1],r[2],i+1+o,0,2*Math.PI,!1),a.closePath(),this._fill(t),this._stroke(t);break;case"square":case"[]":if(i<=0)break;a.save(),this._setColor(t,"stroke","fill")&&a.fillRect(r[1]-i-o,r[2]-i-o,2*i+3*o,2*i+3*o),a.restore(),a.save(),this._setColor(t,"fill"),a.fillRect(r[1]-i+o,r[2]-i+o,2*i-o,2*i-o),a.restore();break;case"plus":case"+":a.beginPath(),a.moveTo(r[1]-i,r[2]),a.lineTo(r[1]+i,r[2]),a.moveTo(r[1],r[2]-i),a.lineTo(r[1],r[2]+i),a.lineCap="round",a.lineJoin="round",a.closePath(),this._stroke(t);break;case"divide":case"|":a.beginPath(),a.moveTo(r[1],r[2]-i),a.lineTo(r[1],r[2]+i),a.lineCap="round",a.lineJoin="round",a.closePath(),this._stroke(t);break;case"minus":case"-":a.beginPath(),a.moveTo(r[1]-i,r[2]),a.lineTo(r[1]+i,r[2]),a.lineCap="round",a.lineJoin="round",a.closePath(),this._stroke(t);break;case"diamond2":case"<<>>":i*=1.41;case"diamond":case"<>":a.beginPath(),a.moveTo(r[1]-i,r[2]),a.lineTo(r[1],r[2]+i),a.lineTo(r[1]+i,r[2]),a.lineTo(r[1],r[2]-i),a.closePath(),this._fill(t),this._stroke(t);break;case"triangleup":case"A":case"a":case"^":a.beginPath(),a.moveTo(r[1],r[2]-i),a.lineTo(r[1]-s,r[2]+n),a.lineTo(r[1]+s,r[2]+n),a.closePath(),this._fill(t),this._stroke(t);break;case"triangledown":case"v":a.beginPath(),a.moveTo(r[1],r[2]+i),a.lineTo(r[1]-s,r[2]-n),a.lineTo(r[1]+s,r[2]-n),a.closePath(),this._fill(t),this._stroke(t);break;case"triangleleft":case"<":a.beginPath(),a.moveTo(r[1]-i,r[2]),a.lineTo(r[1]+n,r[2]-s),a.lineTo(r[1]+n,r[2]+s),a.closePath(),this._fill(t),this._stroke(t);break;case"triangleright":case">":a.beginPath(),a.moveTo(r[1]+i,r[2]),a.lineTo(r[1]-n,r[2]-s),a.lineTo(r[1]-n,r[2]+s),a.closePath(),this._fill(t),this._stroke(t)}},updatePoint:function(t){this.drawPoint(t)},drawArrows:function(t,e,i,r,s){var n,o,a,l,u,c,h,d,p,f,_,m,g,y,v,A,b,C,x,P,E=this.context,w=1,S=1,O=1,M=s.evFirst,T=s.evLast;if("none"!==utils_type.A.evaluate(t.visProp.strokecolor)&&(M||T)){if(t.elementClass===constants.A.OBJECT_CLASS_LINE)n=e.scrCoords[1],o=e.scrCoords[2],a=i.scrCoords[1],l=i.scrCoords[2],x=P=Math.atan2(l-o,a-n);else{if(n=t.points[0].scrCoords[1],o=t.points[0].scrCoords[2],(C=t.points.length-1)<1)return;a=t.points[t.points.length-1].scrCoords[1],l=t.points[t.points.length-1].scrCoords[2],y=t.points[1].scrCoords[1]-t.points[0].scrCoords[1],v=t.points[1].scrCoords[2]-t.points[0].scrCoords[2],A=t.points[C].scrCoords[1]-t.points[C-1].scrCoords[1],b=t.points[C].scrCoords[2]-t.points[C-1].scrCoords[2],M&&(x=Math.atan2(v,y)),T&&(P=Math.atan2(b,A))}if(u=utils_type.A.evaluate(t.visProp[r+"strokewidth"]),M)if(c=u*s.sizeFirst,p=w=s.typeFirst,2===w)d=[[c,.5*-c],[0,0],[c,.5*c],[.5*c,0]];else if(3===w)d=[[c/3,.5*-c],[0,.5*-c],[0,.5*c],[c/3,.5*c]];else if(4===w)for(c/=10,S=3,g=(d=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]]).length,m=0;m<g;m++)d[m][0]*=-c,d[m][1]*=c,d[m][0]+=10*c,d[m][1]-=3.31*c;else if(5===w)for(c/=10,S=3,g=(d=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]]).length,m=0;m<g;m++)d[m][0]*=-c,d[m][1]*=c,d[m][0]+=10*c,d[m][1]-=3.28*c;else if(6===w)for(c/=10,S=3,g=(d=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]]).length,m=0;m<g;m++)d[m][0]*=-c,d[m][1]*=c,d[m][0]+=10*c,d[m][1]-=2.84*c;else if(7===w)for(c=u,S=3,g=(d=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]]).length,m=0;m<g;m++)d[m][0]*=-c,d[m][1]*=c,d[m][0]+=10*c,d[m][1]-=5.2*c;else d=[[c,.5*-c],[0,0],[c,.5*c]];if(T)if(c=u*s.sizeLast,f=w=s.typeLast,2===w)h=[[-c,.5*-c],[0,0],[-c,.5*c],[.5*-c,0]];else if(3===w)h=[[-c/3,.5*-c],[0,.5*-c],[0,.5*c],[-c/3,.5*c]];else if(4===w)for(c/=10,O=3,g=(h=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]]).length,m=0;m<g;m++)h[m][0]*=c,h[m][1]*=c,h[m][0]-=10*c,h[m][1]-=3.31*c;else if(5===w)for(c/=10,O=3,g=(h=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]]).length,m=0;m<g;m++)h[m][0]*=c,h[m][1]*=c,h[m][0]-=10*c,h[m][1]-=3.28*c;else if(6===w)for(c/=10,O=3,g=(h=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]]).length,m=0;m<g;m++)h[m][0]*=c,h[m][1]*=c,h[m][0]-=10*c,h[m][1]-=2.84*c;else if(7===w)for(c=u,O=3,g=(h=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]]).length,m=0;m<g;m++)h[m][0]*=c,h[m][1]*=c,h[m][0]-=10*c,h[m][1]-=5.2*c;else h=[[-c,.5*-c],[0,0],[-c,.5*c]];E.save(),this._setColor(t,"stroke","fill")&&(this._setColor(t,"stroke"),M&&(_=7!==p,this._drawPolygon(this._translateShape(this._rotateShape(d,x),n,o),S,_)),T&&(_=7!==f,this._drawPolygon(this._translateShape(this._rotateShape(h,P),a,l),O,_))),E.restore()}},drawLine:function(t){var e,i,r,s,n,o=new base_coords.A(constants.A.COORDS_BY_USER,t.point1.coords.usrCoords,t.board),a=new base_coords.A(constants.A.COORDS_BY_USER,t.point2.coords.usrCoords,t.board),l=null;t.visPropCalc.visible&&(r=this._getHighlighted(t),s=utils_type.A.evaluate(t.visProp[r+"strokewidth"]),((n=this.getArrowHeadData(t,s,r)).evFirst||n.evLast)&&(l=-4),geometry.A.calcStraight(t,o,a,l),this.handleTouchpoints(t,o,a,n),e=new base_coords.A(constants.A.COORDS_BY_USER,o.usrCoords,t.board),i=new base_coords.A(constants.A.COORDS_BY_USER,a.usrCoords,t.board),this.getPositionArrowHead(t,o,a,n),this.context.beginPath(),this.context.moveTo(o.scrCoords[1],o.scrCoords[2]),this.context.lineTo(a.scrCoords[1],a.scrCoords[2]),this._stroke(t),(n.evFirst||n.evLast)&&this.drawArrows(t,e,i,r,n))},updateLine:function(t){this.drawLine(t)},drawTicks:function(){},updateTicks:function(t){var e,i,r,s,n,o,a=t.ticks.length,l=this.context;for(l.beginPath(),e=0;e<a;e++)for(r=(i=t.ticks[e])[0],s=i[1],n=r.length,l.moveTo(r[0],s[0]),o=1;o<n;++o)l.lineTo(r[o],s[o]);l.lineCap="round",this._stroke(t)},drawCurve:function(t){var e,i,r;utils_type.A.evaluate(t.visProp.handdrawing)?this.updatePathStringBezierPrim(t):this.updatePathStringPrim(t),t.numberPoints>1&&(e=this._getHighlighted(t),i=utils_type.A.evaluate(t.visProp[e+"strokewidth"]),((r=this.getArrowHeadData(t,i,e)).evFirst||r.evLast)&&this.drawArrows(t,null,null,e,r))},updateCurve:function(t){this.drawCurve(t)},drawEllipse:function(t){var e=t.center.coords.scrCoords[1],i=t.center.coords.scrCoords[2],r=t.board.unitX,s=t.board.unitY,n=2*t.Radius(),o=2*t.Radius(),a=n*r,l=o*s,u=e-a/2,c=i-l/2,h=a/2*.5522848,d=l/2*.5522848,p=u+a,f=c+l,_=u+a/2,m=c+l/2,g=this.context;n>0&&o>0&&!isNaN(e+i)&&(g.beginPath(),g.moveTo(u,m),g.bezierCurveTo(u,m-d,_-h,c,_,c),g.bezierCurveTo(_+h,c,p,m-d,p,m),g.bezierCurveTo(p,m+d,_+h,f,_,f),g.bezierCurveTo(_-h,f,u,m+d,u,m),g.closePath(),this._fill(t),this._stroke(t))},updateEllipse:function(t){return this.drawEllipse(t)},displayCopyright:function(t,e){var i=this.context;i.save(),i.font=e+"px Arial",i.fillStyle="#aaa",i.lineWidth=.5,i.fillText(t,10,2+e),i.restore()},drawInternalText:function(t){var e=utils_type.A.evaluate(t.visProp.fontsize),i=utils_type.A.evaluate(t.visProp.fontunit),r=t.getAnchorX(),s=t.getAnchorY(),n=this.context;return n.save(),this._setColor(t,"stroke","fill")&&!isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])&&(n.font=(e>0?e:0)+i+" Arial",this.transformImage(t,t.transformations),"left"===r?n.textAlign="left":"right"===r?n.textAlign="right":"middle"===r&&(n.textAlign="center"),"bottom"===s?n.textBaseline="bottom":"top"===s?n.textBaseline="top":"middle"===s&&(n.textBaseline="middle"),n.fillText(t.plaintext,t.coords.scrCoords[1],t.coords.scrCoords[2])),n.restore(),null},updateInternalText:function(t){this.drawInternalText(t)},setObjectStrokeColor:function(t,e,i){var r,s,n,o,a=utils_type.A.evaluate(e),l=utils_type.A.evaluate(i);l=l>0?l:0,t.visPropOld.strokecolor===a&&t.visPropOld.strokeopacity===l||(utils_type.A.exists(a)&&!1!==a&&(9!==a.length?(r=a,n=l):(r=(s=utils_color.A.rgba2rgbo(a))[0],n=l*s[1]),o=t.rendNode,t.elementClass===constants.A.OBJECT_CLASS_TEXT&&"html"===utils_type.A.evaluate(t.visProp.display)&&(o.style.color=r,o.style.opacity=n)),t.visPropOld.strokecolor=a,t.visPropOld.strokeopacity=l)},drawImage:function(t){t.rendNode=new Image,t._src="",this.updateImage(t)},updateImage:function(t){var e=this.context,i=utils_type.A.evaluate(t.visProp.fillopacity),r=utils_type.A.bind((function(){t.imgIsLoaded=!0,t.size[0]<=0||t.size[1]<=0||(e.save(),e.globalAlpha=i,this.transformImage(t,t.transformations),e.drawImage(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),e.restore())}),this);this.updateImageURL(t)?t.rendNode.onload=r:t.imgIsLoaded&&r()},transformImage:function(t,e){var i,r,s,n,o,a=e.length,l=this.context;if(a>0)if(i=this.joinTransforms(t,e),t.elementClass===constants.A.OBJECT_CLASS_TEXT&&"html"===t.visProp.display){if(-1===(r=" matrix("+[i[1][1],i[2][1],i[1][2],i[2][2],i[1][0],i[2][0]].join(",")+") ").indexOf("NaN")){switch((o=t.rendNode).style.transform=r,s=-t.coords.scrCoords[1],n=-t.coords.scrCoords[2],utils_type.A.evaluate(t.visProp.anchorx)){case"right":s+=t.size[0];break;case"middle":s+=.5*t.size[0]}switch(utils_type.A.evaluate(t.visProp.anchory)){case"bottom":n+=t.size[1];break;case"middle":n+=.5*t.size[1]}o.style["transform-origin"]=s+"px "+n+"px"}}else Math.abs(numerics.A.det(i))>=math.A.eps&&l.transform(i[1][1],i[2][1],i[1][2],i[2][2],i[1][0],i[2][0])},updateImageURL:function(t){var e;return e=utils_type.A.evaluate(t.url),t._src!==e&&(t.imgIsLoaded=!1,t.rendNode.src=e,t._src=e,!0)},remove:function(t){utils_type.A.exists(t)&&utils_type.A.exists(t.parentNode)&&t.parentNode.removeChild(t)},updatePathStringPrim:function(t){var e,i,r,s,n,o="M",a=o,l=5e3,u=this.context;if(!(t.numberPoints<=0)){if(n=Math.min(t.points.length,t.numberPoints),u.beginPath(),1===t.bezierDegree)for(e=0;e<n;e++)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?a=o:(i[1]>l?i[1]=l:i[1]<-5e3&&(i[1]=-5e3),i[2]>l?i[2]=l:i[2]<-5e3&&(i[2]=-5e3),a===o?u.moveTo(i[1],i[2]):u.lineTo(i[1],i[2]),a="L");else if(3===t.bezierDegree)for(e=0;e<n;)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?a=o:(a===o?u.moveTo(i[1],i[2]):(e+=1,r=t.points[e].scrCoords,e+=1,s=t.points[e].scrCoords,u.bezierCurveTo(i[1],i[2],r[1],r[2],s[1],s[2])),a="C"),e+=1;u.lineCap="round",this._fill(t),this._stroke(t)}},updatePathStringBezierPrim:function(t){var e,i,r,s,n,o,a,l="M",u=l,c=5e3,h=utils_type.A.evaluate(t.visProp.strokewidth),d="plot"!==utils_type.A.evaluate(t.visProp.curvetype),p=this.context;if(!(t.numberPoints<=0)){for(d&&t.board.options.curve.RDPsmoothing&&(t.points=numerics.A.RamerDouglasPeucker(t.points,.5)),a=Math.min(t.points.length,t.numberPoints),p.beginPath(),i=1;i<3;i++)for(u=l,e=0;e<a;e++)s=t.points[e].scrCoords,isNaN(s[1])||isNaN(s[2])?u=l:(s[1]>c?s[1]=c:s[1]<-5e3&&(s[1]=-5e3),s[2]>c?s[2]=c:s[2]<-5e3&&(s[2]=-5e3),u===l?p.moveTo(s[1],s[2]):(r=2*i,p.bezierCurveTo(n+.333*(s[1]-n)+h*(r*Math.random()-i),o+.333*(s[2]-o)+h*(r*Math.random()-i),n+.666*(s[1]-n)+h*(r*Math.random()-i),o+.666*(s[2]-o)+h*(r*Math.random()-i),s[1],s[2])),u="C",n=s[1],o=s[2]);p.lineCap="round",this._fill(t),this._stroke(t)}},updatePolygonPrim:function(t,e){var i,r,s,n=e.vertices.length,o=this.context,a=!0;if(!(n<=0)&&e.visPropCalc.visible){for("polygonalchain"===e.elType&&n++,o.beginPath(),r=0;!e.vertices[r].isReal&&r<n-1;)r++,a=!1;for(i=e.vertices[r].coords.scrCoords,o.moveTo(i[1],i[2]),s=r;s<n-1;s++)e.vertices[s].isReal||(a=!1),i=e.vertices[s].coords.scrCoords,o.lineTo(i[1],i[2]);o.closePath(),a&&this._fill(e)}},display:function(t,e){t&&t.rendNode&&(t.visPropOld.visible=e,t.rendNode.style.visibility=e?"inherit":"hidden")},show:function(t){jxg.A.deprecated("Board.renderer.show()","Board.renderer.display()"),utils_type.A.exists(t.rendNode)&&(t.rendNode.style.visibility="inherit")},hide:function(t){jxg.A.deprecated("Board.renderer.hide()","Board.renderer.display()"),utils_type.A.exists(t.rendNode)&&(t.rendNode.style.visibility="hidden")},setGradient:function(t){},setShadow:function(t){t.visPropOld.shadow!==t.visProp.shadow&&(t.visPropOld.shadow=t.visProp.shadow)},highlight:function(t){return t.elementClass===constants.A.OBJECT_CLASS_TEXT&&"html"===utils_type.A.evaluate(t.visProp.display)?this.updateTextStyle(t,!0):(t.board.prepareUpdate(),t.board.renderer.suspendRedraw(t.board),t.board.updateRenderer(),t.board.renderer.unsuspendRedraw()),this},noHighlight:function(t){return t.elementClass===constants.A.OBJECT_CLASS_TEXT&&"html"===utils_type.A.evaluate(t.visProp.display)?this.updateTextStyle(t,!1):(t.board.prepareUpdate(),t.board.renderer.suspendRedraw(t.board),t.board.updateRenderer(),t.board.renderer.unsuspendRedraw()),this},suspendRedraw:function(t){this.context.save(),this.context.clearRect(0,0,this.canvasRoot.width,this.canvasRoot.height),t&&t.attr.showcopyright&&this.displayCopyright(jxg.A.licenseText,12)},unsuspendRedraw:function(){this.context.restore()},resize:function(t,e){this.container?(this.canvasRoot.style.width=parseFloat(t)+"px",this.canvasRoot.style.height=parseFloat(e)+"px",this.canvasRoot.setAttribute("width",2*parseFloat(t)+"px"),this.canvasRoot.setAttribute("height",2*parseFloat(e)+"px")):(this.canvasRoot.width=2*parseFloat(t),this.canvasRoot.height=2*parseFloat(e)),this.context=this.canvasRoot.getContext("2d"),this.context.scale(2,2)},removeToInsertLater:function(){return function(){}}});const canvas=jxg.A.CanvasRenderer;jxg.A.NoRenderer=function(){this.enhancedRendering=!1,this.type="no"},jxg.A.extend(jxg.A.NoRenderer.prototype,{drawPoint:function(t){},updatePoint:function(t){},changePointStyle:function(t){},drawLine:function(t){},updateLine:function(t){},drawTicks:function(t){},updateTicks:function(t){},drawCurve:function(t){},updateCurve:function(t){},drawEllipse:function(t){},updateEllipse:function(t){},drawPolygon:function(t){},updatePolygon:function(t){},displayCopyright:function(t,e){},drawInternalText:function(t){},updateInternalText:function(t){},drawText:function(t){},updateText:function(t){},updateTextStyle:function(t,e){},updateInternalTextStyle:function(t,e,i){},drawImage:function(t){},updateImage:function(t){},transformImage:function(t,e){},updateImageURL:function(t){},appendChildPrim:function(t,e){},appendNodesToElement:function(t,e){},createPrim:function(t,e){return null},remove:function(t){},makeArrows:function(t){},updateEllipsePrim:function(t,e,i,r,s){},updateLinePrim:function(t,e,i,r,s,n){},updatePathPrim:function(t,e,i){},updatePathStringPoint:function(t,e,i){},updatePathStringPrim:function(t){},updatePathStringBezierPrim:function(t){},updatePolygonPrim:function(t,e){},updateRectPrim:function(t,e,i,r,s){},setPropertyPrim:function(t,e,i){},display:function(t,e){t&&(t.visPropOld.visible=e)},show:function(t){},hide:function(t){},setBuffering:function(t,e){},setDashStyle:function(t){},setDraft:function(t){},removeDraft:function(t){},setGradient:function(t){},updateGradient:function(t){},setObjectTransition:function(t,e){},setObjectFillColor:function(t,e,i){},setObjectStrokeColor:function(t,e,i){},setObjectStrokeWidth:function(t,e){},setShadow:function(t){},highlight:function(t){},noHighlight:function(t){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawNavigationBar:function(t){},getElementById:function(t){return null},resize:function(t,e){},removeToInsertLater:function(){return function(){}}}),jxg.A.NoRenderer.prototype=new renderer_abstract;const no=jxg.A.NoRenderer;jxg.A.JSXGraph={rendererType:(src_options.A.board.renderer="no",env.A.supportsVML()&&(src_options.A.board.renderer="vml",document.onmousemove=function(){var t;return document.body&&(t=document.body.scrollLeft,t+=document.body.scrollTop),t}),env.A.supportsCanvas()&&(src_options.A.board.renderer="canvas"),env.A.supportsSVG()&&(src_options.A.board.renderer="svg"),env.A.isNode()&&env.A.supportsCanvas()&&(src_options.A.board.renderer="canvas"),(env.A.isNode()||"no"===src_options.A.renderer)&&(src_options.A.text.display="internal",src_options.A.infobox.display="internal"),src_options.A.board.renderer),initRenderer:function(t,e,i,r){var s;if(utils_type.A.exists(i)&&!1!==i||"object"!==typeof document||(i=document),"object"===typeof i&&null!==t)for(s=utils_type.A.isString(t)?i.getElementById(t):t;s.firstChild;)s.removeChild(s.firstChild);else s=t;return void 0!==r&&"auto"!==r||(r=this.rendererType),"svg"===r?new svg(s,e):"vml"===r?new vml(s):"canvas"===r?new canvas(s,e):new no},_setAttributes:function(t,e){var i,r,s=utils_type.A.copyAttributes(t,e,"board"),n=["drag","fullscreen","intl","keyboard","logging","navbar","pan","resize","screenshot","selection","zoom"],o=n.length;for(i=0;i<o;i++)s[r=n[i]]=utils_type.A.copyAttributes(s,e,"board",r);return s.movetarget=t.moveTarget||t.movetarget||e.board.moveTarget,s},_fillBoard:function(t,e,i){t.initInfobox(e.infobox),t.maxboundingbox=e.maxboundingbox,t.resizeContainer(i.width,i.height,!0,!0),t._createSelectionPolygon(e),t.renderer.drawNavigationBar(t,e.navbar),jxg.A.boards[t.id]=t},_setARIA:function(t,e){var i,r,s,n,o,a,l=e.document;if("object"!==typeof l){if(!env.A.isBrowser)return;l=document}i=(r=utils_type.A.isString(t)?l.getElementById(t):t).ownerDocument,n=r.parentNode,o=t+"_ARIAlabel",a=t+"_ARIAdescription",(s=i.createElement("div")).innerHTML=e.title,s.setAttribute("id",o),s.style.display="none",n.insertBefore(s,r),(s=i.createElement("div")).innerHTML=e.description,s.setAttribute("id",a),s.style.display="none",n.insertBefore(s,r),r.setAttribute("aria-labelledby",o),r.setAttribute("aria-describedby",a)},_removeARIANodes:function(t){var e,i,r;"object"===typeof(r=t.document||document)&&(i=t.containerObj.getAttribute("aria-labelledby"),(e=r.getElementById(i))&&e.parentNode&&e.parentNode.removeChild(e),i=t.containerObj.getAttribute("aria-describedby"),(e=r.getElementById(i))&&e.parentNode&&e.parentNode.removeChild(e))},initBoard:function(t,e){var i,r,s,n,o,a,l,u,c,h,d,p,f,_,m,g=0,y=0,v={};return"default"!==(e=e||{}).theme&&utils_type.A.exists(jxg.A.themes[e.theme])&&(v=jxg.A.themes[e.theme]),_=utils_type.A.deepCopy(src_options.A,v,!0),h=this._setAttributes(e,_),u=env.A.getDimensions(t,h.document),h.unitx||h.unity?(i=utils_type.A.def(h.originx,150),r=utils_type.A.def(h.originy,150),s=utils_type.A.def(h.unitx,50),n=utils_type.A.def(h.unity,50)):((c=h.boundingbox)[0]<h.maxboundingbox[0]&&(c[0]=h.maxboundingbox[0]),c[1]>h.maxboundingbox[1]&&(c[1]=h.maxboundingbox[1]),c[2]>h.maxboundingbox[2]&&(c[2]=h.maxboundingbox[2]),c[3]<h.maxboundingbox[3]&&(c[3]=h.maxboundingbox[3]),o=Math.max(parseInt(u.width,10),math.A.eps),a=Math.max(parseInt(u.height,10),math.A.eps),utils_type.A.exists(c)&&h.keepaspectratio?(s=o/(c[2]-c[0]),n=a/(c[1]-c[3]),Math.abs(s)<Math.abs(n)?y=.5*(a/(n=Math.abs(s)*n/Math.abs(n))-(c[1]-c[3])):g=.5*(o/(s=Math.abs(n)*s/Math.abs(s))-(c[2]-c[0]))):(s=o/(c[2]-c[0]),n=a/(c[1]-c[3])),i=-s*(c[0]-g),r=n*(c[1]+y)),l=this.initRenderer(t,u,h.document,h.renderer),this._setARIA(t,h),(m=new base_board(t,l,h.id,[i,r],h.zoomx,h.zoomy,s,n,u.width,u.height,h)).keepaspectratio=h.keepaspectratio,this._fillBoard(m,h,u),m.suspendUpdate(),(h=m.attr).axis&&(d="object"===typeof h.axis?h.axis:{},p=utils_type.A.deepCopy(_.board.defaultaxes.x,d),f=utils_type.A.deepCopy(_.board.defaultaxes.y,d),h.defaultaxes.x&&(p=utils_type.A.deepCopy(p,h.defaultaxes.x)),h.defaultaxes.y&&(f=utils_type.A.deepCopy(f,h.defaultaxes.y)),m.defaultAxes={},m.defaultAxes.x=m.create("axis",[[0,0],[1,0]],p),m.defaultAxes.y=m.create("axis",[[0,0],[0,1]],f)),h.grid&&m.create("grid",[],"object"===typeof h.grid?h.grid:{}),m.unsuspendUpdate(),m},loadBoardFromFile:function(t,e,i,r,s){var n,o,a,l,u;return r=r||{},n=this._setAttributes(r),l=env.A.getDimensions(t,n.document),o=this.initRenderer(t,l,n.document,n.renderer),this._setARIA(t,n),a=new base_board(t,o,"",[150,150],1,1,50,50,l.width,l.height,n),this._fillBoard(a,n,l),u=n.encoding||"iso-8859-1",reader_file.parseFileContent(e,a,i,!0,u,s),a},loadBoardFromString:function(t,e,i,r,s){var n,o,a,l;return r=r||{},n=this._setAttributes(r),l=env.A.getDimensions(t,n.document),o=this.initRenderer(t,l,n.document,n.renderer),this._setARIA(t,n),a=new base_board(t,o,"",[150,150],1,1,50,50,l.width,l.height,n),this._fillBoard(a,n,l),reader_file.parseString(e,a,i,!0,s),a},freeBoard:function(t){var e;for(e in"string"===typeof t&&(t=jxg.A.boards[t]),this._removeARIANodes(t),t.removeEventHandlers(),t.suspendUpdate(),t.objects)t.objects.hasOwnProperty(e)&&t.objects[e].remove();for(;t.containerObj.firstChild;)t.containerObj.removeChild(t.containerObj.firstChild);for(e in t.objects)t.objects.hasOwnProperty(e)&&delete t.objects[e];delete t.renderer,t.jc.creator.clearCache(),delete t.jc,delete jxg.A.boards[t.id]},registerElement:function(t,e){jxg.A.deprecated("JXG.JSXGraph.registerElement()","JXG.registerElement()"),jxg.A.registerElement(t,e)}},env.A.isBrowser&&"object"===typeof window&&"object"===typeof document&&env.A.addEvent(window,"load",(function(){var t,i,r,s,n,o,a,l,u,c,h,d,p,f,_,m,g,y,v=!1,A=document.getElementsByTagName("script"),b=function(t,e,i){var r=jxg.A.JSXGraph.initBoard(n,{boundingbox:i,keepaspectratio:!0,grid:_,axis:f,showReload:!0});if(e.toLowerCase().indexOf("script")>-1)r.construct(t);else try{r.jc.parse(t)}catch(s){jxg.A.debug(s)}return r},C=function(t,e,i,r){return function(){var s;jxg.A.JSXGraph.freeBoard(t),(s=b(e,i,r)).reload=C(s,e,i,r)}};for(i=0;i<A.length;i++)if(t=A[i].getAttribute("type",!1),utils_type.A.exists(t)&&("text/jessiescript"===t.toLowerCase()||"jessiescript"===t.toLowerCase()||"text/jessiecode"===t.toLowerCase()||"jessiecode"===t.toLowerCase())){if(d=A[i].getAttribute("class",!1)||"",l=A[i].getAttribute("width",!1)||"",u=A[i].getAttribute("height",!1)||"",c=A[i].getAttribute("maxwidth",!1)||"100%",h=A[i].getAttribute("aspectratio",!1)||"1/1",p=A[i].getAttribute("boundingbox",!1)||"-5, 5, 5, -5",n=A[i].getAttribute("container",!1),g=A[i].getAttribute("src",!1),4!==(p=p.split(",")).length)p=[-5,5,5,-5];else for(r=0;r<p.length;r++)p[r]=parseFloat(p[r]);if(f=utils_type.A.str2Bool(A[i].getAttribute("axis",!1)||"false"),_=utils_type.A.str2Bool(A[i].getAttribute("grid",!1)||"false"),utils_type.A.exists(n))s=document.getElementById(n);else{n="jessiescript_autgen_jxg_"+i,(s=document.createElement("div")).setAttribute("id",n),a=""!==l?"width:"+l+";":"",a+=""!==u?"height:"+u+";":"",a+=""!==c?"max-width:"+c+";":"",a+=""!==h?"aspect-ratio:"+h+";":"",s.setAttribute("style",a),s.setAttribute("class","jxgbox "+d);try{document.body.insertBefore(s,A[i])}catch(e){"object"===typeof jQuery&&jQuery(s).insertBefore(A[i])}}m="",utils_type.A.exists(g)?(v=!0,(y=new XMLHttpRequest).open("GET",g),y.overrideMimeType("text/plain; charset=x-user-defined"),y.addEventListener("load",(function(){if(!(this.status<400))throw new Error("\nJSXGraph: failed to load file",g,":",this.responseText);m=this.responseText+"\n"+m,(o=b(m,t,p)).reload=C(o,m,t,p)})),y.addEventListener("error",(function(t){throw new Error("\nJSXGraph: failed to load file",g,":",t)})),y.send()):v=!1,document.getElementById(n)?(m=(m=A[i].innerHTML).replace(/<!\[CDATA\[/g,"").replace(/\]\]>/g,""),A[i].innerHTML=m,v||((o=b(m,t,p)).reload=C(o,m,t,p))):jxg.A.debug("JSXGraph: Apparently the div injection failed. Can't create a board, sorry.")}}),window);const jsxgraph=jxg.A.JSXGraph;var base_element=__webpack_require__(774),coordselement=__webpack_require__(744);jxg.A.Point=function(t,e,i){this.constructor(t,i,constants.A.OBJECT_TYPE_POINT,constants.A.OBJECT_CLASS_POINT),this.element=this.board.select(i.anchor),this.coordsConstructor(e),this.elType="point",this.id=this.board.setId(this,"P"),this.board.renderer.drawPoint(this),this.board.finalizeAdding(this),this.createGradient(),this.createLabel()},jxg.A.Point.prototype=new base_element.A,utils_type.A.copyPrototypeMethods(jxg.A.Point,coordselement.A,"coordsConstructor"),jxg.A.extend(jxg.A.Point.prototype,{hasPoint:function(t,e){var i,r,s,n=this.coords.scrCoords,o=utils_type.A.evaluate(this.visProp.sizeunit);return utils_type.A.isObject(utils_type.A.evaluate(this.visProp.precision))?(s=this.board._inputDevice,r=utils_type.A.evaluate(this.visProp.precision[s])):r=this.board.options.precision.hasPoint,i=parseFloat(utils_type.A.evaluate(this.visProp.size)),"user"===o&&(i*=Math.sqrt(Math.abs(this.board.unitX*this.board.unitY))),(i+=.5*parseFloat(utils_type.A.evaluate(this.visProp.strokewidth)))<r&&(i=r),Math.abs(n[1]-t)<i+2&&Math.abs(n[2]-e)<i+2},update:function(t){return this.needsUpdate?(this.updateCoords(t),utils_type.A.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this):this},updateTransform:function(t){var e,i;if(0===this.transformations.length||null===this.baseElement)return this;for(this===this.baseElement?(e=this.transformations[0].apply(this.baseElement,"self"),this.coords.setCoordinates(constants.A.COORDS_BY_USER,e)):e=this.transformations[0].apply(this.baseElement),this.coords.setCoordinates(constants.A.COORDS_BY_USER,e),i=1;i<this.transformations.length;i++)this.coords.setCoordinates(constants.A.COORDS_BY_USER,this.transformations[i].apply(this));return this},updateRenderer:function(){return this.updateRendererGeneric("updatePoint"),this},bounds:function(){return this.coords.usrCoords.slice(1).concat(this.coords.usrCoords.slice(1))},makeIntersection:function(t,i,r,s){var n;t=this.board.select(t),i=this.board.select(i),n=geometry.A.intersectionFunction(this.board,t,i,r,s,this.visProp.alwaysintersect),this.addConstraint([n]);try{t.addChild(this),i.addChild(this)}catch(e){throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof t+"' and '"+typeof i+"'.")}this.type=constants.A.OBJECT_TYPE_INTERSECTION,this.elType="intersection",this.parents=[t.id,i.id,r,s],this.generatePolynomial=function(){var e=t.generatePolynomial(this),r=i.generatePolynomial(this);return 0===e.length||0===r.length?[]:[e[0],r[0]]},this.prepareUpdate().update()},setStyle:function(t){return this.visProp.face=["cross","cross","cross","circle","circle","circle","circle","square","square","square","plus","plus","plus"][t],this.visProp.size=[2,3,4,1,2,3,4,2,3,4,2,3,4][t],this.board.renderer.changePointStyle(this),this},normalizeFace:function(t){return jxg.A.deprecated("Point.normalizeFace()","JXG.normalizePointFace()"),src_options.A.normalizePointFace(t)},face:function(t){jxg.A.deprecated("Point.face()","Point.setAttribute()"),this.setAttribute({face:t})},size:function(t){jxg.A.deprecated("Point.size()","Point.setAttribute()"),this.setAttribute({size:t})},isOn:function(t,e){var i,r;return e=e||math.A.eps,utils_type.A.isPoint(t)?this.Dist(t)<e:t.elementClass===constants.A.OBJECT_CLASS_LINE?("segment"!==t.elType||utils_type.A.evaluate(this.visProp.alwaysintersect)||(i=jxg.A.Math.Geometry.projectCoordsToSegment(this.coords.usrCoords,t.point1.coords.usrCoords,t.point2.coords.usrCoords))[1]>=0&&i[1]<=1)&&geometry.A.distPointLine(this.coords.usrCoords,t.stdform)<e:t.elementClass===constants.A.OBJECT_CLASS_CIRCLE?utils_type.A.evaluate(t.visProp.hasinnerpoints)?this.Dist(t.center)<t.Radius()+e:Math.abs(this.Dist(t.center)-t.Radius())<e:t.elementClass===constants.A.OBJECT_CLASS_CURVE?(r=geometry.A.projectPointToCurve(this,t,this.board)[0],geometry.A.distance(this.coords.usrCoords,r.usrCoords,3)<e):t.type===constants.A.OBJECT_TYPE_POLYGON?!(!utils_type.A.evaluate(t.visProp.hasinnerpoints)||!t.pnpoly(this.coords.usrCoords[1],this.coords.usrCoords[2],jxg.A.COORDS_BY_USER))||(i=geometry.A.projectCoordsToPolygon(this.coords.usrCoords,t),geometry.A.distance(this.coords.usrCoords,i,3)<e):t.type===constants.A.OBJECT_TYPE_TURTLE&&(r=geometry.A.projectPointToTurtle(this,t,this.board),geometry.A.distance(this.coords.usrCoords,r.usrCoords,3)<e)},cloneToBackground:function(){var t={};return t.id=this.id+"T"+this.numTraces,this.numTraces+=1,t.coords=this.coords,t.visProp=utils_type.A.deepCopy(this.visProp,this.visProp.traceattributes,!0),t.visProp.layer=this.board.options.layer.trace,t.elementClass=constants.A.OBJECT_CLASS_POINT,t.board=this.board,utils_type.A.clearVisPropOld(t),t.visPropCalc={visible:utils_type.A.evaluate(t.visProp.visible)},this.board.renderer.drawPoint(t),this.traces[t.id]=t.rendNode,this}}),jxg.A.createPoint=function(t,e,i){var r,s;if(s=utils_type.A.copyAttributes(i,t.options,"point"),!(r=coordselement.A.create(jxg.A.Point,t,e,s)))throw new Error("JSXGraph: Can't create point with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return r},jxg.A.createGlider=function(t,e,i){var r,s,n=utils_type.A.copyAttributes(i,t.options,"glider");return s=1===e.length?[0,0]:e.slice(0,2),(r=t.create("point",s,n)).makeGlider(e[e.length-1]),r},jxg.A.createIntersectionPoint=function(t,i,r){var s,n,o,a,l,u,c=utils_type.A.copyAttributes(r,t.options,"intersection");i.push(0,0),n=t.select(i[0]),o=t.select(i[1]),l=i[2]||0,u=i[3]||0,s=t.create("point",[0,0,0],c),a=geometry.A.intersectionFunction(t,n,o,l,u,s.visProp.alwaysintersect),s.addConstraint([a]);try{n.addChild(s),o.addChild(s)}catch(e){throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.")}return s.type=constants.A.OBJECT_TYPE_INTERSECTION,s.elType="intersection",s.setParents([n.id,o.id]),s.intersectionNumbers=[l,u],s.getParents=function(){return this.parents.concat(this.intersectionNumbers)},s.generatePolynomial=function(){var t=n.generatePolynomial(s),e=o.generatePolynomial(s);return 0===t.length||0===e.length?[]:[t[0],e[0]]},s},jxg.A.createOtherIntersectionPoint=function(t,e,i){var r,s,n,o,a,l,u,c=!0,h=utils_type.A.copyAttributes(i,t.options,"otherintersection");if(3!==e.length)c=!1;else{for(s=t.select(e[0]),n=t.select(e[1]),a=utils_type.A.isArray(e[2])?e[2]:[e[2]],o=0;o<a.length;o++)if(a[o]=t.select(a[o]),!utils_type.A.isPoint(a[o])){c=!1;break}c&&((u=[s,n]).sort((function(t,e){return e.elementClass-t.elementClass})),([constants.A.OBJECT_CLASS_CIRCLE,constants.A.OBJECT_CLASS_CURVE].indexOf(u[0].elementClass)<0||[constants.A.OBJECT_CLASS_CIRCLE,constants.A.OBJECT_CLASS_CURVE,constants.A.OBJECT_CLASS_LINE].indexOf(u[1].elementClass)<0)&&(c=!1))}if(!c)throw new Error("JSXGraph: Can't create 'other intersection point' with parent types '"+typeof e[0]+"',  '"+typeof e[1]+"'and  '"+typeof e[2]+"'.\nPossible parent types: [circle|curve|line,circle|curve|line, point], not two lines");return r=t.create("point",[0,0,0],h),l=geometry.A.otherIntersectionFunction(u,a,r.visProp.alwaysintersect,r.visProp.precision),r.addConstraint([l]),r.type=constants.A.OBJECT_TYPE_INTERSECTION,r.elType="otherintersection",r.setParents([s.id,n.id]),r.addParents(a),s.addChild(r),n.addChild(r),s.elementClass===constants.A.OBJECT_CLASS_CIRCLE&&(r.generatePolynomial=function(){var t=s.generatePolynomial(r),e=n.generatePolynomial(r);return 0===t.length||0===e.length?[]:[t[0],e[0]]}),r},jxg.A.createPolePoint=function(t,e,i){var r,s,n,o,a,l,u;if(e.length>1&&(o=e[0].type===constants.A.OBJECT_TYPE_CONIC||e[0].elementClass===constants.A.OBJECT_CLASS_CIRCLE,a=e[1].type===constants.A.OBJECT_TYPE_CONIC||e[1].elementClass===constants.A.OBJECT_CLASS_CIRCLE,l=e[0].elementClass===constants.A.OBJECT_CLASS_LINE,u=e[1].elementClass===constants.A.OBJECT_CLASS_LINE),2!==e.length||!(o&&u||l&&a))throw new Error("JSXGraph: Can't create 'pole point' with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent type: [conic|circle,line], [line,conic|circle]");return u?(s=t.select(e[0]),n=t.select(e[1])):(s=t.select(e[1]),n=t.select(e[0])),r=t.create("point",[function(){var t=s.quadraticform,e=n.stdform.slice(0,3);return[jxg.A.Math.Numerics.det([e,t[1],t[2]]),jxg.A.Math.Numerics.det([t[0],e,t[2]]),jxg.A.Math.Numerics.det([t[0],t[1],e])]}],i),r.elType="polepoint",r.setParents([s.id,n.id]),s.addChild(r),n.addChild(r),r},jxg.A.registerElement("point",jxg.A.createPoint),jxg.A.registerElement("glider",jxg.A.createGlider),jxg.A.registerElement("intersection",jxg.A.createIntersectionPoint),jxg.A.registerElement("otherintersection",jxg.A.createOtherIntersectionPoint),jxg.A.registerElement("polepoint",jxg.A.createPolePoint);const point=jxg.A.Point;jxg.A.Line=function(t,e,i,r){this.constructor(t,r,constants.A.OBJECT_TYPE_LINE,constants.A.OBJECT_CLASS_LINE),this.point1=this.board.select(e),this.point2=this.board.select(i),this.ticks=[],this.defaultTicks=null,this.parentPolygon=null,this.id=this.board.setId(this,"L"),this.board.renderer.drawLine(this),this.board.finalizeAdding(this),this.elType="line",this.point1._is_new?(this.addChild(this.point1),delete this.point1._is_new):this.point1.addChild(this),this.point2._is_new?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this),this.inherits.push(this.point1,this.point2),this.updateStdform(),this.createLabel(),this.methodMap=jxg.A.deepCopy(this.methodMap,{point1:"point1",point2:"point2",getSlope:"Slope",Slope:"Slope",Direction:"Direction",getRise:"getRise",Rise:"getRise",getYIntersect:"getRise",YIntersect:"getRise",getAngle:"getAngle",Angle:"getAngle",L:"L",length:"L",setFixedLength:"setFixedLength",setStraight:"setStraight"})},jxg.A.Line.prototype=new base_element.A,jxg.A.extend(jxg.A.Line.prototype,{hasPoint:function(t,e){var i,r,s,n,o,a,l,u,c,h=[],d=[1,t,e],p=utils_type.A.evaluate(this.visProp.strokewidth);return utils_type.A.isObject(utils_type.A.evaluate(this.visProp.precision))?(c=this.board._inputDevice,u=utils_type.A.evaluate(this.visProp.precision[c])):u=this.board.options.precision.hasPoint,u+=.5*p,h[0]=this.stdform[0]-this.stdform[1]*this.board.origin.scrCoords[1]/this.board.unitX+this.stdform[2]*this.board.origin.scrCoords[2]/this.board.unitY,h[1]=this.stdform[1]/this.board.unitX,h[2]=this.stdform[2]/-this.board.unitY,i=geometry.A.distPointLine(d,h),!(isNaN(i)||i>u)&&(!(!utils_type.A.evaluate(this.visProp.straightfirst)||!utils_type.A.evaluate(this.visProp.straightlast))||(s=this.point1.coords,n=this.point2.coords,r=[0,h[1],h[2]],r=math.A.crossProduct(r,d),(r=math.A.crossProduct(r,h))[1]/=r[0],r[2]/=r[0],r[0]=1,r=new base_coords.A(constants.A.COORDS_BY_SCREEN,r.slice(1),this.board).usrCoords,o=s.distance(constants.A.COORDS_BY_USER,n),s=s.usrCoords.slice(0),n=n.usrCoords.slice(0),o<math.A.eps?a=0:(o===Number.POSITIVE_INFINITY&&(o=1/math.A.eps,Math.abs(n[0])<math.A.eps?(o/=geometry.A.distance([0,0,0],n),n=[1,s[1]+n[1]*o,s[2]+n[2]*o]):(o/=geometry.A.distance([0,0,0],s),s=[1,n[1]+s[1]*o,n[2]+s[2]*o])),o=n[l=1]-s[l],Math.abs(o)<math.A.eps&&(o=n[l=2]-s[l]),a=(r[l]-s[l])/o),!(!utils_type.A.evaluate(this.visProp.straightfirst)&&a<0)&&!(!utils_type.A.evaluate(this.visProp.straightlast)&&a>1)))},update:function(){var t;return this.needsUpdate?(this.constrained&&(utils_type.A.isFunction(this.funps)?(t=this.funps())&&t.length&&2===t.length&&(this.point1=t[0],this.point2=t[1]):(utils_type.A.isFunction(this.funp1)&&(t=this.funp1(),utils_type.A.isPoint(t)?this.point1=t:t&&t.length&&2===t.length&&this.point1.setPositionDirectly(constants.A.COORDS_BY_USER,t)),utils_type.A.isFunction(this.funp2)&&(t=this.funp2(),utils_type.A.isPoint(t)?this.point2=t:t&&t.length&&2===t.length&&this.point2.setPositionDirectly(constants.A.COORDS_BY_USER,t)))),this.updateSegmentFixedLength(),this.updateStdform(),utils_type.A.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this):this},updateSegmentFixedLength:function(){var t,e,i,r,s,n,o,a;return this.hasFixedLength?(t=this.point1.Dist(this.point2),e=Math.abs(this.fixedLength()),i=this.fixedLengthOldCoords[0].distance(constants.A.COORDS_BY_USER,this.point1.coords),r=this.fixedLengthOldCoords[1].distance(constants.A.COORDS_BY_USER,this.point2.coords),(i>math.A.eps||r>math.A.eps||t!==e)&&(s=this.point1.isDraggable&&this.point1.type!==constants.A.OBJECT_TYPE_GLIDER&&!utils_type.A.evaluate(this.point1.visProp.fixed),n=this.point2.isDraggable&&this.point2.type!==constants.A.OBJECT_TYPE_GLIDER&&!utils_type.A.evaluate(this.point2.visProp.fixed),t>math.A.eps?i>r&&n||i<=r&&n&&!s?(this.point2.setPositionDirectly(constants.A.COORDS_BY_USER,[this.point1.X()+(this.point2.X()-this.point1.X())*e/t,this.point1.Y()+(this.point2.Y()-this.point1.Y())*e/t]),this.point2.fullUpdate()):(i<=r&&s||i>r&&s&&!n)&&(this.point1.setPositionDirectly(constants.A.COORDS_BY_USER,[this.point2.X()+(this.point1.X()-this.point2.X())*e/t,this.point2.Y()+(this.point1.Y()-this.point2.Y())*e/t]),this.point1.fullUpdate()):(o=Math.random()-.5,a=Math.random()-.5,t=math.A.hypot(o,a),n?(this.point2.setPositionDirectly(constants.A.COORDS_BY_USER,[this.point1.X()+o*e/t,this.point1.Y()+a*e/t]),this.point2.fullUpdate()):s&&(this.point1.setPositionDirectly(constants.A.COORDS_BY_USER,[this.point2.X()+o*e/t,this.point2.Y()+a*e/t]),this.point1.fullUpdate())),this.fixedLengthOldCoords[0].setCoordinates(constants.A.COORDS_BY_USER,this.point1.coords.usrCoords),this.fixedLengthOldCoords[1].setCoordinates(constants.A.COORDS_BY_USER,this.point2.coords.usrCoords)),this):this},updateStdform:function(){var t=math.A.crossProduct(this.point1.coords.usrCoords,this.point2.coords.usrCoords);this.stdform[0]=t[0],this.stdform[1]=t[1],this.stdform[2]=t[2],this.stdform[3]=0,this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.point1.coords.usrCoords[1]+this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[1]+this.point2.coords.usrCoords[2])&&math.A.innerProduct(this.stdform,this.stdform,3)>=math.A.eps*math.A.eps,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateLine(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},generatePolynomial:function(t){var e=this.point1.symbolic.x,i=this.point1.symbolic.y,r=this.point2.symbolic.x,s=this.point2.symbolic.y,n=t.symbolic.x,o=t.symbolic.y;return[["(",i,")*(",n,")-(",i,")*(",r,")+(",o,")*(",r,")-(",e,")*(",o,")+(",e,")*(",s,")-(",n,")*(",s,")"].join("")]},getRise:function(){return Math.abs(this.stdform[2])>=math.A.eps?-this.stdform[0]/this.stdform[2]:1/0},Slope:function(){return Math.abs(this.stdform[2])>=math.A.eps?-this.stdform[1]/this.stdform[2]:1/0},getSlope:function(){return this.Slope()},getAngle:function(){return Math.atan2(-this.stdform[1],this.stdform[2])},Direction:function(){var t=this.point1.coords.usrCoords,e=this.point2.coords.usrCoords;return 0===e[0]&&0!==t[0]?e.slice(1):0===t[0]&&0!==e[0]?[-t[1],-t[2]]:[e[1]-t[1],e[2]-t[2]]},isVertical:function(){var t=this.Direction();return 0===t[0]&&0!==t[1]},isHorizontal:function(){var t=this.Direction();return 0===t[1]&&0!==t[0]},setStraight:function(t,e){return this.visProp.straightfirst=t,this.visProp.straightlast=e,this.board.renderer.updateLine(this),this},getTextAnchor:function(){return new base_coords.A(constants.A.COORDS_BY_USER,[.5*(this.point2.X()+this.point1.X()),.5*(this.point2.Y()+this.point1.Y())],this.board)},setLabelRelativeCoords:function(t){utils_type.A.exists(this.label)&&(this.label.relativeCoords=new base_coords.A(constants.A.COORDS_BY_SCREEN,[t[0],-t[1]],this.board))},getLabelAnchor:function(){var t,e,i,r,s,n,o,a,l=1.5,u=0,c=new base_coords.A(constants.A.COORDS_BY_USER,this.point1.coords.usrCoords,this.board),h=new base_coords.A(constants.A.COORDS_BY_USER,this.point2.coords.usrCoords,this.board),d=utils_type.A.evaluate(this.visProp.straightfirst),p=utils_type.A.evaluate(this.visProp.straightlast);if((d||p)&&geometry.A.calcStraight(this,c,h,0),c=c.scrCoords,h=h.scrCoords,!utils_type.A.exists(this.label))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(i=utils_type.A.evaluate(this.label.visProp.position),!utils_type.A.isString(i))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(i.indexOf("right")<0&&i.indexOf("left")<0)switch(i){case"last":t=h[1],e=h[2];break;case"first":t=c[1],e=c[2];break;case"lft":case"llft":case"ulft":c[1]<=h[1]?(t=c[1],e=c[2]):(t=h[1],e=h[2]);break;case"rt":case"lrt":case"urt":c[1]>h[1]?(t=c[1],e=c[2]):(t=h[1],e=h[2]);break;default:t=.5*(c[1]+h[1]),e=.5*(c[2]+h[2])}else r=utils_type.A.parsePosition(i),s=utils_type.A.parseNumber(r.pos,1,1),n=h[1]-c[1],o=h[2]-c[2],a=math.A.hypot(n,o),r.pos.indexOf("px")>=0||r.pos.indexOf("fr")>=0||r.pos.indexOf("%")>=0?(r.pos.indexOf("px")>=0&&(s/=a),t=c[1]+s*n,e=c[2]+s*o):(t=c[1]+s*this.board.unitX*n/a,e=c[2]+s*this.board.unitY*o/a),"left"===r.side?n*=-1:o*=-1,utils_type.A.exists(this.label)&&(l=.5*utils_type.A.evaluate(this.label.visProp.distance)/a),t+=o*this.label.size[0]*l,e+=n*this.label.size[1]*l;return(d||p)&&(utils_type.A.exists(this.label)&&(u=utils_type.A.evaluate(this.label.visProp.fontsize)),Math.abs(t)<math.A.eps?t=u:this.board.canvasWidth+math.A.eps>t&&t>this.board.canvasWidth-u-math.A.eps&&(t=this.board.canvasWidth-u),math.A.eps+u>e&&e>-math.A.eps?e=u:this.board.canvasHeight+math.A.eps>e&&e>this.board.canvasHeight-u-math.A.eps&&(e=this.board.canvasHeight-u)),new base_coords.A(constants.A.COORDS_BY_SCREEN,[t,e],this.board)},cloneToBackground:function(){var t,e,i,r={};return r.id=this.id+"T"+this.numTraces,r.elementClass=constants.A.OBJECT_CLASS_LINE,this.numTraces++,r.point1=this.point1,r.point2=this.point2,r.stdform=this.stdform,r.board=this.board,r.visProp=utils_type.A.deepCopy(this.visProp,this.visProp.traceattributes,!0),r.visProp.layer=this.board.options.layer.trace,utils_type.A.clearVisPropOld(r),r.visPropCalc={visible:utils_type.A.evaluate(r.visProp.visible)},e=this.getSlope(),t=this.getRise(),r.getSlope=function(){return e},r.getRise=function(){return t},i=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawLine(r),this.board.renderer.enhancedRendering=i,this.traces[r.id]=r.rendNode,this},addTransform:function(t){var e,i=utils_type.A.isArray(t)?t:[t],r=i.length;for(e=0;e<r;e++)this.point1.transformations.push(i[e]),this.point2.transformations.push(i[e]);return this},snapToGrid:function(t){var e,i,r,s,n,o,a,l;return utils_type.A.evaluate(this.visProp.snaptogrid)?this.parents.length<3?(this.point1.handleSnapToGrid(!0,!0),this.point2.handleSnapToGrid(!0,!0)):utils_type.A.exists(t)&&(a=utils_type.A.evaluate(this.visProp.snapsizex),l=utils_type.A.evaluate(this.visProp.snapsizey),n=(e=new base_coords.A(constants.A.COORDS_BY_SCREEN,[t.Xprev,t.Yprev],this.board)).usrCoords[1],o=e.usrCoords[2],a<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(a=(s=this.board.defaultAxes.x.defaultTicks).ticksDelta*(utils_type.A.evaluate(s.visProp.minorticks)+1)),l<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(l=(s=this.board.defaultAxes.y.defaultTicks).ticksDelta*(utils_type.A.evaluate(s.visProp.minorticks)+1)),a>0&&l>0&&(i=geometry.A.projectPointToLine({coords:e},this,this.board),r=statistics.A.subtract([1,Math.round(n/a)*a,Math.round(o/l)*l],i.usrCoords),this.board.create("transform",r.slice(1),{type:"translate"}).applyOnce([this.point1,this.point2]))):(this.point1.handleSnapToGrid(!1,!0),this.point2.handleSnapToGrid(!1,!0)),this},snapToPoints:function(){var t=utils_type.A.evaluate(this.visProp.snaptopoints);return this.parents.length<3&&(this.point1.handleSnapToPoints(t),this.point2.handleSnapToPoints(t)),this},X:function(t){var e,i=this.stdform[2];return e=Math.abs(this.point1.coords.usrCoords[0])>math.A.eps?this.point1.coords.usrCoords[1]:this.point2.coords.usrCoords[1],t=2*(t-.5),(1-Math.abs(t))*e-t*i},Y:function(t){var e,i=this.stdform[1];return e=Math.abs(this.point1.coords.usrCoords[0])>math.A.eps?this.point1.coords.usrCoords[2]:this.point2.coords.usrCoords[2],t=2*(t-.5),(1-Math.abs(t))*e+t*i},Z:function(t){var e=Math.abs(this.point1.coords.usrCoords[0])>math.A.eps?this.point1.coords.usrCoords[0]:this.point2.coords.usrCoords[0];return t=2*(t-.5),(1-Math.abs(t))*e},L:function(){return this.point1.Dist(this.point2)},setFixedLength:function(t){return this.hasFixedLength?(this.fixedLength=utils_type.A.createFunction(t,this.board),this.board.update(),this):this},minX:function(){return 0},maxX:function(){return 1},bounds:function(){var t=this.point1.coords.usrCoords,e=this.point2.coords.usrCoords;return[Math.min(t[1],e[1]),Math.max(t[2],e[2]),Math.max(t[1],e[1]),Math.min(t[2],e[2])]},remove:function(){this.removeAllTicks(),base_element.A.prototype.remove.call(this)}}),jxg.A.createLine=function(t,e,i){var r,s,n,o,a,l,u,c=[],h=!1,d=!1;if(2===e.length){if(l=utils_type.A.copyAttributes(i,t.options,"line","point1"),utils_type.A.isArray(e[0])&&e[0].length>1)n=t.create("point",e[0],l);else if(utils_type.A.isString(e[0])||utils_type.A.isPoint(e[0]))n=t.select(e[0]);else if(utils_type.A.isFunction(e[0])&&utils_type.A.isPoint(e[0]()))n=e[0](),d=!0;else if(utils_type.A.isFunction(e[0])&&e[0]().length&&e[0]().length>=2)n=jxg.A.createPoint(t,e[0](),l),d=!0;else{if(!utils_type.A.isObject(e[0])||!utils_type.A.isTransformationOrArray(e[1]))throw new Error("JSXGraph: Can't create line with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");h=!0,n=t.create("point",[e[0].point1,e[1]],l)}if(l=utils_type.A.copyAttributes(i,t.options,"line","point2"),h)o=t.create("point",[e[0].point2,e[1]],l);else if(utils_type.A.isArray(e[1])&&e[1].length>1)o=t.create("point",e[1],l);else if(utils_type.A.isString(e[1])||utils_type.A.isPoint(e[1]))o=t.select(e[1]);else if(utils_type.A.isFunction(e[1])&&utils_type.A.isPoint(e[1]()))o=e[1](),d=!0;else{if(!(utils_type.A.isFunction(e[1])&&e[1]().length&&e[1]().length>=2))throw new Error("JSXGraph: Can't create line with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");o=jxg.A.createPoint(t,e[1](),l),d=!0}l=utils_type.A.copyAttributes(i,t.options,"line"),s=new jxg.A.Line(t,n,o,l),d?(s.constrained=!0,s.funp1=e[0],s.funp2=e[1]):h||(s.isDraggable=!0),s.setParents([n.id,o.id])}else if(3===e.length){for(u=!0,a=0;a<3;a++)if(utils_type.A.isNumber(e[a]))c[a]=utils_type.A.createFunction(e[a]);else{if(!utils_type.A.isFunction(e[a]))throw new Error("JSXGraph: Can't create line with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");c[a]=e[a],u=!1}l=utils_type.A.copyAttributes(i,t.options,"line","point1"),n=u?t.create("point",[c[2]()*c[2]()+c[1]()*c[1](),c[2]()-c[1]()*c[0]()+c[2](),-c[1]()-c[2]()*c[0]()-c[1]()],l):t.create("point",[function(){return.5*(c[2]()*c[2]()+c[1]()*c[1]())},function(){return.5*(c[2]()-c[1]()*c[0]()+c[2]())},function(){return.5*(-c[1]()-c[2]()*c[0]()-c[1]())}],l),l=utils_type.A.copyAttributes(i,t.options,"line","point2"),o=u?t.create("point",[c[2]()*c[2]()+c[1]()*c[1](),-c[1]()*c[0]()+c[2](),-c[2]()*c[0]()-c[1]()],l):t.create("point",[function(){return c[2]()*c[2]()+c[1]()*c[1]()},function(){return-c[1]()*c[0]()+c[2]()},function(){return-c[2]()*c[0]()-c[1]()}],l),n.prepareUpdate().update(),o.prepareUpdate().update(),l=utils_type.A.copyAttributes(i,t.options,"line"),(s=new jxg.A.Line(t,n,o,l)).isDraggable=u,s.setParents([n,o])}else if(1===e.length&&utils_type.A.isFunction(e[0])&&2===e[0]().length&&utils_type.A.isPoint(e[0]()[0])&&utils_type.A.isPoint(e[0]()[1]))r=e[0](),l=utils_type.A.copyAttributes(i,t.options,"line"),(s=new jxg.A.Line(t,r[0],r[1],l)).constrained=!0,s.funps=e[0],s.setParents(r);else{if(!(1===e.length&&utils_type.A.isFunction(e[0])&&3===e[0]().length&&utils_type.A.isNumber(e[0]()[0])&&utils_type.A.isNumber(e[0]()[1])&&utils_type.A.isNumber(e[0]()[2])))throw new Error("JSXGraph: Can't create line with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");r=e[0],l=utils_type.A.copyAttributes(i,t.options,"line","point1"),n=t.create("point",[function(){var t=r();return[.5*(t[2]*t[2]+t[1]*t[1]),.5*(t[2]-t[1]*t[0]+t[2]),.5*(-t[1]-t[2]*t[0]-t[1])]}],l),l=utils_type.A.copyAttributes(i,t.options,"line","point2"),o=t.create("point",[function(){var t=r();return[t[2]*t[2]+t[1]*t[1],-t[1]*t[0]+t[2],-t[2]*t[0]-t[1]]}],l),l=utils_type.A.copyAttributes(i,t.options,"line"),(s=new jxg.A.Line(t,n,o,l)).constrained=!0,s.funps=e[0],s.setParents([n,o])}return s},jxg.A.registerElement("line",jxg.A.createLine),jxg.A.createSegment=function(t,e,i){var r,s;if(i.straightFirst=!1,i.straightLast=!1,s=utils_type.A.copyAttributes(i,t.options,"segment"),r=t.create("line",e.slice(0,2),s),3===e.length){if(r.hasFixedLength=!0,utils_type.A.isNumber(e[2]))r.fixedLength=function(){return e[2]};else{if(!utils_type.A.isFunction(e[2]))throw new Error("JSXGraph: Can't create segment with third parent type '"+typeof e[2]+"'.\nPossible third parent types: number or function");r.fixedLength=utils_type.A.createFunction(e[2],this.board)}r.getParents=function(){return this.parents.concat(this.fixedLength())},r.fixedLengthOldCoords=[],r.fixedLengthOldCoords[0]=new base_coords.A(constants.A.COORDS_BY_USER,r.point1.coords.usrCoords.slice(1,3),t),r.fixedLengthOldCoords[1]=new base_coords.A(constants.A.COORDS_BY_USER,r.point2.coords.usrCoords.slice(1,3),t)}return r.elType="segment",r},jxg.A.registerElement("segment",jxg.A.createSegment),jxg.A.createArrow=function(t,e,i){var r,s;return i.straightFirst=!1,i.straightLast=!1,s=utils_type.A.copyAttributes(i,t.options,"arrow"),(r=t.create("line",e,s)).type=constants.A.OBJECT_TYPE_VECTOR,r.elType="arrow",r},jxg.A.registerElement("arrow",jxg.A.createArrow),jxg.A.createAxis=function(t,e,i){var r,s,n,o;s=utils_type.A.copyAttributes(i,t.options,"axis");try{r=t.create("line",e,s)}catch(a){throw new Error("JSXGraph: Can't create axis with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]")}for(n in r.type=constants.A.OBJECT_TYPE_AXIS,r.isDraggable=!1,r.point1.isDraggable=!1,r.point2.isDraggable=!1,r._point1UsrCoordsOrg=r.point1.coords.usrCoords.slice(),r._point2UsrCoordsOrg=r.point2.coords.usrCoords.slice(),r.ancestors)r.ancestors.hasOwnProperty(n)&&(r.ancestors[n].type=constants.A.OBJECT_TYPE_AXISPOINT);return o=utils_type.A.exists(s.ticks.ticksdistance)?s.ticks.ticksdistance:utils_type.A.isArray(s.ticks.ticks)?s.ticks.ticks:1,r.defaultTicks=t.create("ticks",[r,o],s.ticks),r.defaultTicks.dump=!1,r.elType="axis",r.subs={ticks:r.defaultTicks},r.inherits.push(r.defaultTicks),r.update=function(){var t,e,i,s,n,o,a,l,u,c,h,d,p,f,_,m,g,y,v;if(t=this.board.getBoundingBox(),e=utils_type.A.evaluate(this.visProp.position),s=this.Direction(),n=this.isHorizontal(),o=this.isVertical(),a=utils_type.A.evaluate(this.visProp.ticksautopos),l=utils_type.A.evaluate(this.visProp.ticksautoposthreshold),l=n?utils_type.A.parseNumber(l,Math.abs(t[1]-t[3]),1/this.board.unitX)*this.board.unitX:o?utils_type.A.parseNumber(l,Math.abs(t[1]-t[3]),1/this.board.unitY)*this.board.unitY:utils_type.A.parseNumber(l,1,1),h=(c=utils_type.A.evaluate(this.visProp.anchor)).indexOf("left")>-1,d=c.indexOf("right")>-1,p=utils_type.A.evaluate(this.visProp.anchordist),p=n?utils_type.A.parseNumber(p,Math.abs(t[1]-t[3]),1/this.board.unitX):o?utils_type.A.parseNumber(p,Math.abs(t[0]-t[2]),1/this.board.unitY):0,m=this.board.getPointLoc(this._point1UsrCoordsOrg,p),f=this.point1.coords.usrCoords.slice(),_=this.point2.coords.usrCoords.slice(),"static"===e||!o&&!n||("fixed"===e?(n&&(s[0]>0&&d||s[0]<0&&h?(f[2]=t[3]+p,_[2]=t[3]+p):s[0]>0&&h||s[0]<0&&d?(f[2]=t[1]-p,_[2]=t[1]-p):(f=this._point1UsrCoordsOrg.slice(),_=this._point2UsrCoordsOrg.slice())),o&&(s[1]>0&&h||s[1]<0&&d?(f[1]=t[0]+p,_[1]=t[0]+p):s[1]>0&&d||s[1]<0&&h?(f[1]=t[2]-p,_[1]=t[2]-p):(f=this._point1UsrCoordsOrg.slice(),_=this._point2UsrCoordsOrg.slice()))):"sticky"===e&&(n&&(m[1]<0&&(s[0]>0&&d||s[0]<0&&h)?(f[2]=t[3]+p,_[2]=t[3]+p):m[1]>0&&(s[0]>0&&h||s[0]<0&&d)?(f[2]=t[1]-p,_[2]=t[1]-p):(f=this._point1UsrCoordsOrg.slice(),_=this._point2UsrCoordsOrg.slice())),o&&(m[0]<0&&(s[1]>0&&h||s[1]<0&&d)?(f[1]=t[0]+p,_[1]=t[0]+p):m[0]>0&&(s[1]>0&&d||s[1]<0&&h)?(f[1]=t[2]-p,_[1]=t[2]-p):(f=this._point1UsrCoordsOrg.slice(),_=this._point2UsrCoordsOrg.slice())))),this.point1.setPositionDirectly(jxg.A.COORDS_BY_USER,f),this.point2.setPositionDirectly(jxg.A.COORDS_BY_USER,_),g=this.defaultTicks.visProp.label,a&&(n||o)){if(utils_type.A.exists(g._anchorx_org)||(g._anchorx_org=utils_type.A.def(g.anchorx,this.board.options.text.anchorX)),utils_type.A.exists(g._anchory_org)||(g._anchory_org=utils_type.A.def(g.anchory,this.board.options.text.anchorY)),utils_type.A.exists(g._offset_org)||(g._offset_org=g.offset.slice()),v=g.offset,n){for(u=r.point1.coords.scrCoords[2]-.5*this.board.canvasHeight,y=g.anchory,u<0&&Math.abs(u)>l?"bottom"===g._side&&("top"===g.anchory&&(y="bottom"),v[1]*=-1,g._side="top"):u>0&&Math.abs(u)>l?"top"===g._side&&("bottom"===g.anchory&&(y="top"),v[1]*=-1,g._side="bottom"):(y=g._anchory_org,v=g._offset_org.slice(),"top"===y?g._side="bottom":"bottom"===y?g._side="top":v[1]<0?g._side="bottom":g._side="top"),i=0;i<r.defaultTicks.labels.length;i++)this.defaultTicks.labels[i].visProp.anchory=y;g.anchory=y}else if(o){for((u=r.point1.coords.scrCoords[1]-.5*this.board.canvasWidth)<0&&Math.abs(u)>l?"right"===g._side&&("left"===g.anchorx&&(y="right"),v[0]*=-1,g._side="left"):u>0&&Math.abs(u)>l?"left"===g._side&&("right"===g.anchorx&&(y="left"),v[0]*=-1,g._side="right"):(y=g._anchorx_org,v=g._offset_org.slice(),"left"===y?g._side="right":"right"===y||v[0]<0?g._side="left":g._side="right"),i=0;i<r.defaultTicks.labels.length;i++)this.defaultTicks.labels[i].visProp.anchorx=y;g.anchorx=y}g.offset=v}else delete g._anchorx_org,delete g._anchory_org,delete g._offset_org;return jxg.A.Line.prototype.update.call(this),this.defaultTicks.needsUpdate=!0,this},r},jxg.A.registerElement("axis",jxg.A.createAxis),jxg.A.createTangent=function(t,e,i){var r,s,n,o,a,l,u;if(1===e.length)r=e[0],s=r.slideObject;else{if(2!==e.length)throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [glider], [point,line|curve|circle|conic]");if(utils_type.A.isPoint(e[0]))r=e[0],s=e[1];else{if(!utils_type.A.isPoint(e[1]))throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [glider], [point,line|curve|circle|conic]");s=e[0],r=e[1]}}if(l=utils_type.A.copyAttributes(i,t.options,"tangent"),s.elementClass===constants.A.OBJECT_CLASS_LINE?(a=t.create("line",[s.point1,s.point2],l)).glider=r:s.elementClass===constants.A.OBJECT_CLASS_CURVE&&s.type!==constants.A.OBJECT_TYPE_CONIC?"plot"!==utils_type.A.evaluate(s.visProp.curvetype)?(a=t.create("line",[function(){var t=s.X,e=s.Y;return-r.X()*numerics.A.D(e)(r.position)+r.Y()*numerics.A.D(t)(r.position)},function(){return numerics.A.D(s.Y)(r.position)},function(){return-numerics.A.D(s.X)(r.position)}],l),r.addChild(a),a.glider=r):(u=function(t,e,i){var s,n,o,a,l,u,c,h,d,p,f,_,m=Math.floor(t);if(1===e.bezierDegree)m===e.numberPoints-1&&m--;else{if(3!==e.bezierDegree)return 0;o=(t*((_="sector"===e.elType?(f=e.points.slice(3,e.numberPoints-3)).length:(f=e.points).length)-1)-(m=3*Math.floor(t*(_-1)/3)))/3,m>=_-1&&(m=_-4,o=1)}if(m<0)return 1;switch(1===e.bezierDegree?(s=e.points[m].usrCoords,n=e.points[m+1].usrCoords):(a=f[m].usrCoords,l=f[m+1].usrCoords,u=f[m+2].usrCoords,c=f[m+3].usrCoords,h=(1-o)*(1-o)*(l[1]-a[1])+2*(1-o)*o*(u[1]-l[1])+o*o*(c[1]-u[1]),d=(1-o)*(1-o)*(l[2]-a[2])+2*(1-o)*o*(u[2]-l[2])+o*o*(c[2]-u[2]),h/=p=math.A.hypot(h,d),d/=p,n=[1,(s=r.coords.usrCoords)[1]+h,s[2]+d]),i){case 0:return s[2]*n[1]-s[1]*n[2];case 1:return n[2]-s[2];case 2:return s[1]-n[1]}return 0},a=t.create("line",[function(){return u(r.position,s,0)},function(){return u(r.position,s,1)},function(){return u(r.position,s,2)}],l),r.addChild(a),a.glider=r):s.type===constants.A.OBJECT_TYPE_TURTLE?(a=t.create("line",[function(){var t=Math.floor(r.position);for(n=0;n<s.objects.length;n++)if((o=s.objects[n]).type===constants.A.OBJECT_TYPE_CURVE){if(t<o.numberPoints)break;t-=o.numberPoints}return t===o.numberPoints-1&&t--,t<0?1:o.Y(t)*o.X(t+1)-o.X(t)*o.Y(t+1)},function(){var t=Math.floor(r.position);for(n=0;n<s.objects.length;n++)if((o=s.objects[n]).type===constants.A.OBJECT_TYPE_CURVE){if(t<o.numberPoints)break;t-=o.numberPoints}return t===o.numberPoints-1&&t--,t<0?0:o.Y(t+1)-o.Y(t)},function(){var t=Math.floor(r.position);for(n=0;n<s.objects.length;n++)if((o=s.objects[n]).type===constants.A.OBJECT_TYPE_CURVE){if(t<o.numberPoints)break;t-=o.numberPoints}return t===o.numberPoints-1&&t--,t<0?0:o.X(t)-o.X(t+1)}],l),r.addChild(a),a.glider=r):s.elementClass!==constants.A.OBJECT_CLASS_CIRCLE&&s.type!==constants.A.OBJECT_TYPE_CONIC||(a=t.create("line",[function(){return math.A.matVecMult(s.quadraticform,r.coords.usrCoords)[0]},function(){return math.A.matVecMult(s.quadraticform,r.coords.usrCoords)[1]},function(){return math.A.matVecMult(s.quadraticform,r.coords.usrCoords)[2]}],l),r.addChild(a),a.glider=r),!utils_type.A.exists(a))throw new Error("JSXGraph: Couldn't create tangent with the given parents.");return a.elType="tangent",a.type=constants.A.OBJECT_TYPE_TANGENT,a.setParents(e),a},jxg.A.createRadicalAxis=function(t,e,i){var r,s,n;if(2!==e.length||e[0].elementClass!==constants.A.OBJECT_CLASS_CIRCLE||e[1].elementClass!==constants.A.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create 'radical axis' with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent type: [circle,circle]");return s=t.select(e[0]),n=t.select(e[1]),(r=t.create("line",[function(){var t=s.stdform,e=n.stdform;return math.A.matVecMult(math.A.transpose([t.slice(0,3),e.slice(0,3)]),[e[3],-t[3]])}],i)).elType="radicalaxis",r.setParents([s.id,n.id]),s.addChild(r),n.addChild(r),r},jxg.A.createPolarLine=function(t,e,i){var r,s,n,o,a,l,u;if(e.length>1&&(o=e[0].type===constants.A.OBJECT_TYPE_CONIC||e[0].elementClass===constants.A.OBJECT_CLASS_CIRCLE,a=e[1].type===constants.A.OBJECT_TYPE_CONIC||e[1].elementClass===constants.A.OBJECT_CLASS_CIRCLE,l=utils_type.A.isPoint(e[0]),u=utils_type.A.isPoint(e[1])),2!==e.length||!(o&&u||l&&a))throw new Error("JSXGraph: Can't create 'polar line' with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent type: [conic|circle,point], [point,conic|circle]");return u?(s=t.select(e[0]),n=t.select(e[1])):(s=t.select(e[1]),n=t.select(e[0])),(r=t.create("tangent",[s,n],i)).elType="polarline",r},jxg.A.registerElement("tangent",jxg.A.createTangent),jxg.A.registerElement("polar",jxg.A.createTangent),jxg.A.registerElement("radicalaxis",jxg.A.createRadicalAxis),jxg.A.registerElement("polarline",jxg.A.createPolarLine);const line=jxg.A.Line;jxg.A.Group=function(t,e,i,r,s){var n,o,a,l;for(this.board=t,this.objects={},n=this.board.numObjects,this.board.numObjects+=1,""!==e&&utils_type.A.exists(e)?this.id=e:this.id=this.board.id+"Group"+n,this.board.groups[this.id]=this,this.type=constants.A.OBJECT_TYPE_POINT,this.elementClass=constants.A.OBJECT_CLASS_POINT,""!==i&&utils_type.A.exists(i)?this.name=i:this.name="group_"+this.board.generateName(this),delete this.type,this.coords={},this.needsRegularUpdate=s.needsregularupdate,this.rotationCenter="centroid",this.scaleCenter=null,this.rotationPoints=[],this.translationPoints=[],this.scalePoints=[],this.scaleDirections={},this.parents=[],o=utils_type.A.isArray(r)?r:Array.prototype.slice.call(arguments,3),a=0;a<o.length;a++)l=this.board.select(o[a]),!utils_type.A.evaluate(l.visProp.fixed)&&utils_type.A.exists(l.coords)&&this.addPoint(l);this.methodMap={ungroup:"ungroup",add:"addPoint",addPoint:"addPoint",addPoints:"addPoints",addGroup:"addGroup",remove:"removePoint",removePoint:"removePoint",setAttribute:"setAttribute",setProperty:"setAttribute"}},jxg.A.extend(jxg.A.Group.prototype,{ungroup:function(){var t,e,i;for(t in this.objects)this.objects.hasOwnProperty(t)&&(e=this.objects[t].point,utils_type.A.isArray(e.groups)&&(i=utils_type.A.indexOf(e.groups,this.id))>=0&&delete e.groups[i]);return this.objects={},this},addParents:function(t){var e,i,r;for(i=(r=utils_type.A.isArray(t)?t:arguments).length,e=0;e<i;++e)utils_type.A.isId(this.board,r[e])?this.parents.push(r[e]):utils_type.A.exists(r[e].id)&&this.parents.push(r[e].id);this.parents=utils_type.A.uniqueArray(this.parents)},setParents:function(t){return this.parents=[],this.addParents(t),this},getParents:function(){return utils_type.A.isArray(this.parents)?this.parents:[]},_updateCoordsCache:function(t){var e;""!==t&&utils_type.A.exists(this.objects[t])&&(e=this.objects[t].point,this.coords[e.id]={usrCoords:e.coords.usrCoords.slice(0)})},update:function(){var t,e,i,r,s,n,o,a,l,u,c=null;if(!this.needsUpdate)return this;if("nothing"===(t=this._update_find_drag_type()).action)return this._updateCoordsCache(t.id),this;if(c=this.objects[t.id].point,"translation"===t.action)l=[c.coords.usrCoords[1]-this.coords[t.id].usrCoords[1],c.coords.usrCoords[2]-this.coords[t.id].usrCoords[2]];else if("rotation"===t.action||"scaling"===t.action){if(i="rotation"===t.action?"rotationCenter":"scaleCenter",utils_type.A.isPoint(this[i]))u=this[i].coords.usrCoords.slice(1);else if("centroid"===this[i])u=this._update_centroid_center();else if(utils_type.A.isArray(this[i]))u=this[i];else{if(!utils_type.A.isFunction(this[i]))return this;u=this[i]()}if("rotation"===t.action)a=geometry.A.rad(this.coords[t.id].usrCoords.slice(1),u,this.objects[t.id].point),(l=this.board.create("transform",[a,u[0],u[1]],{type:"rotate"})).update();else{if("scaling"!==t.action)return this;if(s=geometry.A.distance(this.coords[t.id].usrCoords.slice(1),u),Math.abs(s)<math.A.eps)return this;s=geometry.A.distance(c.coords.usrCoords.slice(1),u)/s,n=this.scaleDirections[t.id].indexOf("x")>=0?s:1,o=this.scaleDirections[t.id].indexOf("y")>=0?s:1,(l=this.board.create("transform",[1,0,0,u[0]*(1-n),n,0,u[1]*(1-o),0,o],{type:"generic"})).update()}}for(e in this._update_apply_transformation(t,l),this.needsUpdate=!1,this.objects)if(this.objects.hasOwnProperty(e))for(r in this.objects[e].descendants)this.objects[e].descendants.hasOwnProperty(r)&&(this.objects[e].descendants.needsUpdate=this.objects[e].descendants.needsRegularUpdate||this.board.needsFullUpdate);for(e in this.board.updateElements(t),this.objects)this.objects.hasOwnProperty(e)&&this._updateCoordsCache(e);return this},_update_find_drag_type:function(){var t,e,i,r="nothing",s=[];for(t in this.objects)this.objects.hasOwnProperty(t)&&(e=this.objects[t].point).coords.distance(constants.A.COORDS_BY_USER,this.coords[t])>math.A.eps&&s.push(e.id);return 0===s.length?{action:r,id:"",changed:s}:(i=s[0],e=this.objects[i].point,s.length>1?r="translation":utils_type.A.isInArray(this.rotationPoints,e)&&utils_type.A.exists(this.rotationCenter)?r="rotation":utils_type.A.isInArray(this.scalePoints,e)&&utils_type.A.exists(this.scaleCenter)?r="scaling":utils_type.A.isInArray(this.translationPoints,e)&&(r="translation"),{action:r,id:i,changed:s})},_update_centroid_center:function(){var t,e,i;for(i in t=[0,0],e=0,this.coords)this.coords.hasOwnProperty(i)&&(t[0]+=this.coords[i].usrCoords[1],t[1]+=this.coords[i].usrCoords[2],++e);return e>0&&(t[0]/=e,t[1]/=e),t},_update_apply_transformation:function(t,e){var i,r;for(i in this.objects)this.objects.hasOwnProperty(i)&&(utils_type.A.exists(this.board.objects[i])?(r=this.objects[i].point).id!==t.id?"translation"===t.action?utils_type.A.isInArray(t.changed,r.id)||r.coords.setCoordinates(constants.A.COORDS_BY_USER,[this.coords[i].usrCoords[1]+e[0],this.coords[i].usrCoords[2]+e[1]]):"rotation"!==t.action&&"scaling"!==t.action||e.applyOnce([r]):"rotation"!==t.action&&"scaling"!==t.action||r.coords.setCoordinates(constants.A.COORDS_BY_USER,math.A.matVecMult(e.matrix,this.coords[r.id].usrCoords)):delete this.objects[i])},addPoint:function(t){return this.objects[t.id]={point:this.board.select(t)},this._updateCoordsCache(t.id),this.translationPoints.push(t),t.groups.push(this.id),t.groups=utils_type.A.uniqueArray(t.groups),this},addPoints:function(t){var e;for(e=0;e<t.length;e++)this.addPoint(t[e]);return this},addGroup:function(t){var e;for(e in t.objects)t.objects.hasOwnProperty(e)&&this.addPoint(t.objects[e].point);return this},removePoint:function(t){return delete this.objects[t.id],this},setRotationCenter:function(t){return this.rotationCenter=t,this},setRotationPoints:function(t){return this._setActionPoints("rotation",t)},addRotationPoint:function(t){return this._addActionPoint("rotation",t)},removeRotationPoint:function(t){return this._removeActionPoint("rotation",t)},setTranslationPoints:function(t){return this._setActionPoints("translation",t)},addTranslationPoint:function(t){return this._addActionPoint("translation",t)},removeTranslationPoint:function(t){return this._removeActionPoint("translation",t)},setScaleCenter:function(t){return this.scaleCenter=t,this},setScalePoints:function(t,e){var i,r,s;for(s=(i=utils_type.A.isArray(t)?t:arguments).length,r=0;r<s;++r)this.scaleDirections[this.board.select(i[r]).id]=e||"xy";return this._setActionPoints("scale",t)},addScalePoint:function(t,e){return this._addActionPoint("scale",t),this.scaleDirections[this.board.select(t).id]=e||"xy",this},removeScalePoint:function(t){return this._removeActionPoint("scale",t)},_setActionPoints:function(t,e){var i,r,s;for(s=(i=utils_type.A.isArray(e)?e:arguments).length,this[t+"Points"]=[],r=0;r<s;++r)this._addActionPoint(t,i[r]);return this},_addActionPoint:function(t,e){return this[t+"Points"].push(this.board.select(e)),this},_removeActionPoint:function(t,e){var i=this[t+"Points"].indexOf(this.board.select(e));return i>-1&&this[t+"Points"].splice(i,1),this},setProperty:function(){jxg.A.deprecated("Group.setProperty","Group.setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(){var t;for(t in this.objects)this.objects.hasOwnProperty(t)&&this.objects[t].point.setAttribute.apply(this.objects[t].point,arguments);return this}}),jxg.A.createGroup=function(t,e,i){var r=utils_type.A.copyAttributes(i,t.options,"group"),s=new jxg.A.Group(t,r.id,r.name,e,r);return s.elType="group",s.setParents(e),s},jxg.A.registerElement("group",jxg.A.createGroup);const group=jxg.A.Group;jxg.A.Circle=function(t,e,i,r,s){this.constructor(t,s,constants.A.OBJECT_TYPE_CIRCLE,constants.A.OBJECT_CLASS_CIRCLE),this.method=e,this.midpoint=this.board.select(i),this.center=this.board.select(i),this.point2=null,this.radius=0,this.line=null,this.circle=null,this.points=[],"twoPoints"===e?(this.point2=t.select(r),this.radius=this.Radius()):"pointRadius"===e?(this.gxtterm=r,this.updateRadius=utils_type.A.createFunction(r,this.board),this.updateRadius(),this.addParentsFromJCFunctions([this.updateRadius])):"pointLine"===e?(this.line=t.select(r),this.radius=this.line.point1.coords.distance(constants.A.COORDS_BY_USER,this.line.point2.coords)):"pointCircle"===e&&(this.circle=t.select(r),this.radius=this.circle.Radius()),this.id=this.board.setId(this,"C"),this.board.renderer.drawEllipse(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="circle",this.createLabel(),utils_type.A.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),"pointRadius"===e?this.notifyParents(r):"pointLine"===e?this.line.addChild(this):"pointCircle"===e?this.circle.addChild(this):"twoPoints"===e&&(utils_type.A.exists(this.point2._is_new)?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this)),this.methodMap=utils_type.A.deepCopy(this.methodMap,{setRadius:"setRadius",getRadius:"getRadius",Area:"Area",area:"Area",Perimeter:"Perimeter",Circumference:"Perimeter",radius:"Radius",Radius:"Radius",Diameter:"Diameter",center:"center",line:"line",point2:"point2"})},jxg.A.Circle.prototype=new base_element.A,jxg.A.extend(jxg.A.Circle.prototype,{hasPoint:function(t,e){var i,r,s,n,o,a=this.center.coords.usrCoords,l=new base_coords.A(constants.A.COORDS_BY_SCREEN,[t,e],this.board),u=this.Radius();return utils_type.A.isObject(utils_type.A.evaluate(this.visProp.precision))?(r=this.board._inputDevice,i=utils_type.A.evaluate(this.visProp.precision[r])):i=this.board.options.precision.hasPoint,s=a[1]-l.usrCoords[1],n=a[2]-l.usrCoords[2],o=math.A.hypot(s,n),i+=.5*utils_type.A.evaluate(this.visProp.strokewidth),i/=Math.sqrt(Math.abs(this.board.unitX*this.board.unitY)),utils_type.A.evaluate(this.visProp.hasinnerpoints)?o<u+i:Math.abs(o-u)<i},generatePolynomial:function(t){var e=this.center.symbolic.x,i=this.center.symbolic.y,r=t.symbolic.x,s=t.symbolic.y,n=this.generateRadiusSquared();return""===n?[]:["(("+r+")-("+e+"))^2 + (("+s+")-("+i+"))^2 - ("+n+")"]},generateRadiusSquared:function(){var t,e,i,r,s="";return"twoPoints"===this.method?(t=this.center.symbolic.x,e=this.center.symbolic.y,s="(("+(i=this.point2.symbolic.x)+")-("+t+"))^2 + (("+(r=this.point2.symbolic.y)+")-("+e+"))^2"):"pointRadius"===this.method?utils_type.A.isNumber(this.radius)&&(s=(this.radius*this.radius).toString()):"pointLine"===this.method?(i=this.line.point1.symbolic.x,r=this.line.point1.symbolic.y,s="(("+i+")-("+this.line.point2.symbolic.x+"))^2 + (("+r+")-("+this.line.point2.symbolic.y+"))^2"):"pointCircle"===this.method&&(s=this.circle.Radius()),s},update:function(){var t,e,i,r,s,n;if(this.needsUpdate)for(utils_type.A.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),"pointLine"===this.method?this.radius=this.line.point1.coords.distance(constants.A.COORDS_BY_USER,this.line.point2.coords):"pointCircle"===this.method?this.radius=this.circle.Radius():"pointRadius"===this.method&&(this.radius=this.updateRadius()),this.radius=Math.abs(this.radius),this.updateStdform(),this.updateQuadraticform(),i=this.center.coords.usrCoords[0],t=this.center.coords.usrCoords[1]/i,e=this.center.coords.usrCoords[2]/i,i/=i,r=this.Radius(),s=.551915024494,this.numberPoints=13,this.dataX=[t+r,t+r,t+r*s,t,t-r*s,t-r,t-r,t-r,t-r*s,t,t+r*s,t+r,t+r],this.dataY=[e,e+r*s,e+r,e+r,e+r,e+r*s,e,e-r*s,e-r,e-r,e-r,e-r*s,e],this.bezierDegree=3,n=0;n<this.numberPoints;n++)this.points[n]=new base_coords.A(constants.A.COORDS_BY_USER,[this.dataX[n],this.dataY[n]],this.board);return this},updateQuadraticform:function(){var t=this.center,e=t.X(),i=t.Y(),r=this.Radius();this.quadraticform=[[e*e+i*i-r*r,-e,-i],[-e,1,0],[-i,0,1]]},updateStdform:function(){this.stdform[3]=.5,this.stdform[4]=this.Radius(),this.stdform[1]=-this.center.coords.usrCoords[1],this.stdform[2]=-this.center.coords.usrCoords[2],isFinite(this.stdform[4])||(this.stdform[0]=utils_type.A.exists(this.point2)?-(this.stdform[1]*this.point2.coords.usrCoords[1]+this.stdform[2]*this.point2.coords.usrCoords[2]):0),this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.center.coords.usrCoords[1]+this.center.coords.usrCoords[2]+this.Radius())&&this.center.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateEllipse(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},notifyParents:function(t){utils_type.A.isString(t)&&geonext.A.findDependencies(this,t,this.board)},setRadius:function(t){return this.updateRadius=utils_type.A.createFunction(t,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(t){return utils_type.A.exists(t)?(this.setRadius(t),this.Radius()):"twoPoints"===this.method?utils_type.A.cmpArrays(this.point2.coords.usrCoords,[0,0,0])||utils_type.A.cmpArrays(this.center.coords.usrCoords,[0,0,0])?NaN:this.center.Dist(this.point2):"pointLine"===this.method||"pointCircle"===this.method?this.radius:"pointRadius"===this.method?Math.abs(this.updateRadius()):NaN},Diameter:function(){return 2*this.Radius()},getRadius:function(){return jxg.A.deprecated("Circle.getRadius()","Circle.Radius()"),this.Radius()},getTextAnchor:function(){return this.center.coords},getLabelAnchor:function(){var t,e,i,r,s,n,o=1.5,a=this.Radius(),l=this.center.coords.usrCoords,u=.7071067811865;if(!utils_type.A.exists(this.label))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(i=utils_type.A.evaluate(this.label.visProp.position),!utils_type.A.isString(i))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(!(i.indexOf("right")<0&&i.indexOf("left")<0))return l=this.center.coords.scrCoords,r=utils_type.A.parsePosition(i),s=utils_type.A.parseNumber(r.pos,2*Math.PI,1),r.pos.indexOf("fr")<0&&r.pos.indexOf("%")<0&&(r.pos.indexOf("px")>=0?s=0:s*=Math.PI/180),n=1,"left"===r.side&&(n=-1),utils_type.A.exists(this.label)&&(o=.5*n*utils_type.A.evaluate(this.label.visProp.distance)),t=l[1]+(a*this.board.unitX+this.label.size[0]*o)*Math.cos(s),e=l[2]-(a*this.board.unitY+this.label.size[1]*o)*Math.sin(s),new base_coords.A(constants.A.COORDS_BY_SCREEN,[t,e],this.board);switch(utils_type.A.evaluate(this.visProp.label.position)){case"lft":t=l[1]-a,e=l[2];break;case"llft":t=l[1]-u*a,e=l[2]-u*a;break;case"rt":t=l[1]+a,e=l[2];break;case"lrt":t=l[1]+u*a,e=l[2]-u*a;break;case"urt":t=l[1]+u*a,e=l[2]+u*a;break;case"top":t=l[1],e=l[2]+a;break;case"bot":t=l[1],e=l[2]-a;break;default:t=l[1]-u*a,e=l[2]+u*a}return new base_coords.A(constants.A.COORDS_BY_USER,[t,e],this.board)},cloneToBackground:function(){var t,e=this.Radius(),i={id:this.id+"T"+this.numTraces,elementClass:constants.A.OBJECT_CLASS_CIRCLE,center:{coords:this.center.coords},Radius:function(){return e},getRadius:function(){return e},board:this.board,visProp:utils_type.A.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return i.visProp.layer=this.board.options.layer.trace,this.numTraces++,utils_type.A.clearVisPropOld(i),i.visPropCalc={visible:utils_type.A.evaluate(i.visProp.visible)},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawEllipse(i),this.board.renderer.enhancedRendering=t,this.traces[i.id]=i.rendNode,this},addTransform:function(t){var e,i=utils_type.A.isArray(t)?t:[t],r=i.length;for(e=0;e<r;e++)this.center.transformations.push(i[e]),"twoPoints"===this.method&&this.point2.transformations.push(i[e]);return this},snapToGrid:function(){var t=utils_type.A.evaluate(this.visProp.snaptogrid);return this.center.handleSnapToGrid(t,!0),"twoPoints"===this.method&&this.point2.handleSnapToGrid(t,!0),this},snapToPoints:function(){var t=utils_type.A.evaluate(this.visProp.snaptopoints);return this.center.handleSnapToPoints(t),"twoPoints"===this.method&&this.point2.handleSnapToPoints(t),this},X:function(t){return this.Radius()*Math.cos(2*t*Math.PI)+this.center.coords.usrCoords[1]},Y:function(t){return this.Radius()*Math.sin(2*t*Math.PI)+this.center.coords.usrCoords[2]},Z:function(t){return 1},minX:function(){return 0},maxX:function(){return 1},Area:function(){var t=this.Radius();return t*t*Math.PI},Perimeter:function(){return 2*this.Radius()*Math.PI},bounds:function(){var t=this.center.coords.usrCoords,e=this.Radius();return[t[1]-e,t[2]+e,t[1]+e,t[2]-e]},getParents:function(){return 1===this.parents.length?this.parents.concat(this.radius):this.parents}}),jxg.A.createCircle=function(t,e,i){var r,s,n,o,a,l=["center","point2"];if(s=[],a=t.select(e[0]),utils_type.A.isObject(a)&&a.elementClass===constants.A.OBJECT_CLASS_CIRCLE&&utils_type.A.isTransformationOrArray(e[1]))return o=utils_type.A.copyAttributes(i,t.options,"circle"),(r=jxg.A.createEllipse(t,[a.center,a.center,function(){return 2*a.Radius()}],o)).addTransform(e[1]),r;for(n=0;n<e.length;n++)if(utils_type.A.isPointType(t,e[n])){if(e.length<3?s.push(utils_type.A.providePoints(t,[e[n]],i,"circle",[l[n]])[0]):s.push(utils_type.A.providePoints(t,[e[n]],i,"point")[0]),!1===s[s.length-1])throw new Error("JSXGraph: Can't create circle from this type. Please provide a point type.")}else s.push(e[n]);if(o=utils_type.A.copyAttributes(i,t.options,"circle"),2===s.length&&utils_type.A.isPoint(s[0])&&utils_type.A.isPoint(s[1]))r=new jxg.A.Circle(t,"twoPoints",s[0],s[1],o);else if((utils_type.A.isNumber(s[0])||utils_type.A.isFunction(s[0])||utils_type.A.isString(s[0]))&&utils_type.A.isPoint(s[1]))r=new jxg.A.Circle(t,"pointRadius",s[1],s[0],o);else if((utils_type.A.isNumber(s[1])||utils_type.A.isFunction(s[1])||utils_type.A.isString(s[1]))&&utils_type.A.isPoint(s[0]))r=new jxg.A.Circle(t,"pointRadius",s[0],s[1],o);else if(s[0].elementClass===constants.A.OBJECT_CLASS_CIRCLE&&utils_type.A.isPoint(s[1]))r=new jxg.A.Circle(t,"pointCircle",s[1],s[0],o);else if(s[1].elementClass===constants.A.OBJECT_CLASS_CIRCLE&&utils_type.A.isPoint(s[0]))r=new jxg.A.Circle(t,"pointCircle",s[0],s[1],o);else if(s[0].elementClass===constants.A.OBJECT_CLASS_LINE&&utils_type.A.isPoint(s[1]))r=new jxg.A.Circle(t,"pointLine",s[1],s[0],o);else if(s[1].elementClass===constants.A.OBJECT_CLASS_LINE&&utils_type.A.isPoint(s[0]))r=new jxg.A.Circle(t,"pointLine",s[0],s[1],o);else{if(!(3===e.length&&utils_type.A.isPoint(s[0])&&utils_type.A.isPoint(s[1])&&utils_type.A.isPoint(s[2])))throw new Error("JSXGraph: Can't create circle with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [point,number], [point,function], [point,circle], [point,point,point], [circle,transformation]");if(!jxg.A.elements.circumcircle)throw new Error("JSXGraph: Can't create circle with three points. Please include the circumcircle element (element/composition).");r=jxg.A.elements.circumcircle(t,s,o)}for(r.isDraggable=!0,r.setParents(s),r.elType="circle",n=0;n<s.length;n++)utils_type.A.isPoint(s[n])&&r.inherits.push(s[n]);return r},jxg.A.registerElement("circle",jxg.A.createCircle);const circle=jxg.A.Circle;jxg.A.createEllipse=function(t,e,i){var r,s,n,o,a,l,u,c=[],h=utils_type.A.copyAttributes(i,t.options,"conic","foci"),d=utils_type.A.copyAttributes(i,t.options,"conic","center"),p=utils_type.A.copyAttributes(i,t.options,"conic");for(l=0;l<2;l++)if(e[l].length>1)c[l]=t.create("point",e[l],h);else if(utils_type.A.isPoint(e[l]))c[l]=t.select(e[l]);else if(utils_type.A.isFunction(e[l])&&utils_type.A.isPoint(e[l]()))c[l]=e[l]();else{if(!utils_type.A.isString(e[l]))throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");c[l]=t.select(e[l])}if(utils_type.A.isNumber(e[2]))a=utils_type.A.createFunction(e[2],t);else if(utils_type.A.isFunction(e[2])&&utils_type.A.isNumber(e[2]()))a=e[2];else{if(utils_type.A.isPoint(e[2]))o=t.select(e[2]);else if(e[2].length>1)o=t.create("point",e[2],h);else if(utils_type.A.isFunction(e[2])&&utils_type.A.isPoint(e[2]()))o=e[2]();else{if(!utils_type.A.isString(e[2]))throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");o=t.select(e[2])}a=function(){return o.Dist(c[0])+o.Dist(c[1])}}for(utils_type.A.exists(e[4])||(e[4]=2*Math.PI),utils_type.A.exists(e[3])||(e[3]=0),n=t.create("point",[function(){return.5*(c[0].X()+c[1].X())},function(){return.5*(c[0].Y()+c[1].Y())}],d),(s=t.create("curve",[function(t){return 0},function(t){return 0},e[3],e[4]],p)).majorAxis=a,u=s.hasPoint,r=function(t,e){var i,r,n,o,l,u,h,d,p;e||(r=(i=a())*i,n=c[0].X(),o=c[0].Y(),h=n-(l=c[1].X()),d=o-(u=c[1].Y()),p=(r-n*n-o*o+l*l+u*u)/(2*i),s.quadraticform=[[p*p-l*l-u*u,p*h/i+l,p*d/i+u],[p*h/i+l,h*h/r-1,h*d/r],[p*d/i+u,h*d/r,d*d/r-1]])},s.X=function(t,e){var i=a(),s=c[1].Dist(c[0]),n=.5*(s*s-i*i)/(s*Math.cos(t)-i),o=Math.atan2(c[1].Y()-c[0].Y(),c[1].X()-c[0].X());return e||r(0,e),c[0].X()+Math.cos(o+t)*n},s.Y=function(t,e){var i=a(),r=c[1].Dist(c[0]),s=.5*(r*r-i*i)/(r*Math.cos(t)-i),n=Math.atan2(c[1].Y()-c[0].Y(),c[1].X()-c[0].X());return c[0].Y()+Math.sin(n+t)*s},s.midpoint=s.center=n,s.type=constants.A.OBJECT_TYPE_CONIC,s.subs={center:s.center},s.inherits.push(s.center,c[0],c[1]),utils_type.A.isPoint(o)&&s.inherits.push(o),s.hasPoint=function(t,e){var i,r,s,n;return utils_type.A.evaluate(this.visProp.hasinnerpoints)?(i=c[0].coords,r=c[1].coords,s=this.majorAxis(),(n=new base_coords.A(constants.A.COORDS_BY_SCREEN,[t,e],this.board)).distance(constants.A.COORDS_BY_USER,i)+n.distance(constants.A.COORDS_BY_USER,r)<=s):u.apply(this,arguments)},n.addChild(s),l=0;l<2;l++)utils_type.A.isPoint(c[l])&&c[l].addChild(s);return utils_type.A.isPoint(o)&&o.addChild(s),s.setParents(e),s},jxg.A.createHyperbola=function(t,e,i){var r,s,n,o,a,l,u=[],c=utils_type.A.copyAttributes(i,t.options,"conic","foci"),h=utils_type.A.copyAttributes(i,t.options,"conic","center"),d=utils_type.A.copyAttributes(i,t.options,"conic");for(l=0;l<2;l++)if(e[l].length>1)u[l]=t.create("point",e[l],c);else if(utils_type.A.isPoint(e[l]))u[l]=t.select(e[l]);else if(utils_type.A.isFunction(e[l])&&utils_type.A.isPoint(e[l]()))u[l]=e[l]();else{if(!utils_type.A.isString(e[l]))throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");u[l]=t.select(e[l])}if(utils_type.A.isNumber(e[2]))a=utils_type.A.createFunction(e[2],t);else if(utils_type.A.isFunction(e[2])&&utils_type.A.isNumber(e[2]()))a=e[2];else{if(utils_type.A.isPoint(e[2]))o=t.select(e[2]);else if(e[2].length>1)o=t.create("point",e[2],c);else if(utils_type.A.isFunction(e[2])&&utils_type.A.isPoint(e[2]()))o=e[2]();else{if(!utils_type.A.isString(e[2]))throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");o=t.select(e[2])}a=function(){return o.Dist(u[0])-o.Dist(u[1])}}for(utils_type.A.exists(e[4])||(e[4]=1.0001*Math.PI),utils_type.A.exists(e[3])||(e[3]=-1.0001*Math.PI),n=t.create("point",[function(){return.5*(u[0].X()+u[1].X())},function(){return.5*(u[0].Y()+u[1].Y())}],h),(s=t.create("curve",[function(t){return 0},function(t){return 0},e[3],e[4]],d)).majorAxis=a,r=function(t,e){var i,r,n,o,l,c,h,d,p;e||(r=(i=a())*i,n=u[0].X(),o=u[0].Y(),h=n-(l=u[1].X()),d=o-(c=u[1].Y()),p=(r-n*n-o*o+l*l+c*c)/(2*i),s.quadraticform=[[p*p-l*l-c*c,p*h/i+l,p*d/i+c],[p*h/i+l,h*h/r-1,h*d/r],[p*d/i+c,h*d/r,d*d/r-1]])},s.X=function(t,e){var i=a(),s=u[1].Dist(u[0]),n=.5*(s*s-i*i)/(s*Math.cos(t)+i),o=Math.atan2(u[1].Y()-u[0].Y(),u[1].X()-u[0].X());return e||r(0,e),u[0].X()+Math.cos(o+t)*n},s.Y=function(t,e){var i=a(),r=u[1].Dist(u[0]),s=.5*(r*r-i*i)/(r*Math.cos(t)+i),n=Math.atan2(u[1].Y()-u[0].Y(),u[1].X()-u[0].X());return u[0].Y()+Math.sin(n+t)*s},s.midpoint=s.center=n,s.subs={center:s.center},s.inherits.push(s.center,u[0],u[1]),utils_type.A.isPoint(o)&&s.inherits.push(o),s.type=constants.A.OBJECT_TYPE_CONIC,n.addChild(s),l=0;l<2;l++)utils_type.A.isPoint(u[l])&&u[l].addChild(s);return utils_type.A.isPoint(o)&&o.addChild(s),s.setParents(e),s},jxg.A.createParabola=function(t,e,i){var r,s,n,o,a=e[0],l=e[1],u=utils_type.A.copyAttributes(i,t.options,"conic","foci"),c=utils_type.A.copyAttributes(i,t.options,"conic","center"),h=utils_type.A.copyAttributes(i,t.options,"conic");if(e[0].length>1)a=t.create("point",e[0],u);else if(utils_type.A.isPoint(e[0]))a=t.select(e[0]);else if(utils_type.A.isFunction(e[0])&&utils_type.A.isPoint(e[0]()))a=e[0]();else{if(!utils_type.A.isString(e[0]))throw new Error("JSXGraph: Can't create Parabola with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,line]");a=t.select(e[0])}return utils_type.A.isArray(l)&&2===l.length&&(o=utils_type.A.copyAttributes(i,t.options,"conic","line"),l=t.create("line",l,o)),utils_type.A.exists(e[3])||(e[3]=2*Math.PI),utils_type.A.exists(e[2])||(e[2]=0),n=t.create("point",[function(){return geometry.A.projectPointToLine(a,l,t).usrCoords}],c),(s=t.create("curve",[function(t){return 0},function(t){return 0},e[2],e[3]],h)).midpoint=s.center=n,s.subs={center:s.center},s.inherits.push(s.center),r=function(t,e){var i,r,n,o,u,c;e||(i=l.stdform[1],r=l.stdform[2],n=l.stdform[0],o=i*i+r*r,u=a.X(),c=a.Y(),s.quadraticform=[[n*n-o*(u*u+c*c),n*i+o*u,n*r+o*c],[n*i+o*u,-r*r,i*r],[n*r+o*c,i*r,-i*i]])},s.X=function(t,e){var i,s=l.getAngle(),n=geometry.A.distPointLine(a.coords.usrCoords,l.stdform),o=l.point1.coords.usrCoords,u=l.point2.coords.usrCoords,c=a.coords.usrCoords;return 0===o[0]?o=[1,u[1]+l.stdform[2],u[2]-l.stdform[1]]:0===u[0]&&(u=[1,o[1]+l.stdform[2],o[2]-l.stdform[1]]),i=((u[1]-o[1])*(c[2]-o[2])-(u[2]-o[2])*(c[1]-o[1])>=0?1:-1)*n/(1-Math.sin(t)),e||r(0,e),a.X()+Math.cos(t+s)*i},s.Y=function(t,e){var i,r=l.getAngle(),s=geometry.A.distPointLine(a.coords.usrCoords,l.stdform),n=l.point1.coords.usrCoords,o=l.point2.coords.usrCoords,u=a.coords.usrCoords;return 0===n[0]?n=[1,o[1]+l.stdform[2],o[2]-l.stdform[1]]:0===o[0]&&(o=[1,n[1]+l.stdform[2],n[2]-l.stdform[1]]),i=((o[1]-n[1])*(u[2]-n[2])-(o[2]-n[2])*(u[1]-n[1])>=0?1:-1)*s/(1-Math.sin(t)),a.Y()+Math.sin(t+r)*i},s.type=constants.A.OBJECT_TYPE_CONIC,n.addChild(s),utils_type.A.isPoint(a)&&(a.addChild(s),s.inherits.push(a)),l.addChild(s),s.setParents(e),s},jxg.A.createConic=function(t,e,i){var r,s,n,o,a,l,u,c,h,d,p,f,_,m,g=[[1,0,0],[0,1,0],[0,0,1]],y=[[1,0,0],[0,1,0],[0,0,1]],v=[],A=[],b=utils_type.A.copyAttributes(i,t.options,"conic","point"),C=utils_type.A.copyAttributes(i,t.options,"conic","center"),x=utils_type.A.copyAttributes(i,t.options,"conic");if(5===e.length)m=!0;else{if(6!==e.length)throw new Error("JSXGraph: Can't create generic Conic with "+e.length+" parameters.");m=!1}if(m)for(f=0;f<5;f++)if(e[f].length>1)v[f]=t.create("point",e[f],b);else if(utils_type.A.isPoint(e[f]))v[f]=t.select(e[f]);else if(utils_type.A.isFunction(e[f])&&utils_type.A.isPoint(e[f]()))v[f]=e[f]();else{if(!utils_type.A.isString(e[f]))throw new Error("JSXGraph: Can't create Conic section with parent types '"+typeof e[f]+"'.\nPossible parent types: [point,point,point,point,point], [a00,a11,a22,a01,a02,a12]");v[f]=t.select(e[f])}else(_=[[0,0,0],[0,0,0],[0,0,0]])[0][0]=utils_type.A.isFunction(e[2])?function(){return e[2]()}:function(){return e[2]},_[0][1]=utils_type.A.isFunction(e[4])?function(){return e[4]()}:function(){return e[4]},_[0][2]=utils_type.A.isFunction(e[5])?function(){return e[5]()}:function(){return e[5]},_[1][1]=utils_type.A.isFunction(e[0])?function(){return e[0]()}:function(){return e[0]},_[1][2]=utils_type.A.isFunction(e[3])?function(){return e[3]()}:function(){return e[3]},_[2][2]=utils_type.A.isFunction(e[1])?function(){return e[1]()}:function(){return e[1]};if(a=function(t){var e,i;for(e=0;e<3;e++)for(i=e;i<3;i++)t[e][i]+=t[i][e];for(e=0;e<3;e++)for(i=0;i<e;i++)t[e][i]=t[i][e];return t},o=function(t,e){var i,r,s=[[0,0,0],[0,0,0],[0,0,0]];for(i=0;i<3;i++)for(r=0;r<3;r++)s[i][r]=t[i]*e[r];return a(s)},n=function(t,e,i){var r,s,n,o,a,l=[[0,0,0],[0,0,0],[0,0,0]];for(a=math.A.matVecMult(e,i),n=math.A.innerProduct(i,a),a=math.A.matVecMult(t,i),o=math.A.innerProduct(i,a),r=0;r<3;r++)for(s=0;s<3;s++)l[r][s]=n*t[r][s]-o*e[r][s];return l},s=t.create("curve",[function(t){return 0},function(t){return 0},0,2*Math.PI],x),r=function(t,e){var i,r,a;if(!e){if(m){for(i=0;i<5;i++)A[i]=v[i].coords.usrCoords;d=o(math.A.crossProduct(A[0],A[1]),math.A.crossProduct(A[2],A[3])),p=o(math.A.crossProduct(A[0],A[2]),math.A.crossProduct(A[1],A[3])),y=n(d,p,A[4])}else for(i=0;i<3;i++)for(r=i;r<3;r++)y[i][r]=_[i][r](),r>i&&(y[r][i]=y[i][r]);s.quadraticform=y,(l=numerics.A.Jacobi(y))[0][0][0]<0&&(l[0][0][0]*=-1,l[0][1][1]*=-1,l[0][2][2]*=-1),g=l[1],h=Math.sqrt(Math.abs(l[0][0][0])),u=Math.sqrt(Math.abs(l[0][1][1])),c=Math.sqrt(Math.abs(l[0][2][2]))}return l[0][1][1]<=0&&l[0][2][2]<=0?a=math.A.matVecMult(g,[1/h,Math.cos(t)/u,Math.sin(t)/c]):l[0][1][1]<=0&&l[0][2][2]>0?a=math.A.matVecMult(g,[Math.cos(t)/h,1/u,Math.sin(t)/c]):l[0][2][2]<0&&(a=math.A.matVecMult(g,[Math.sin(t)/h,Math.cos(t)/u,1/c])),utils_type.A.exists(a)?(a[1]/=a[0],a[2]/=a[0],a[0]=1):a=[1,NaN,NaN],a},s.X=function(t,e){return r(t,e)[1]},s.Y=function(t,e){return r(t,e)[2]},s.midpoint=t.create("point",[function(){var t=s.quadraticform;return[t[1][1]*t[2][2]-t[1][2]*t[1][2],t[1][2]*t[0][2]-t[2][2]*t[0][1],t[0][1]*t[1][2]-t[1][1]*t[0][2]]}],C),s.type=constants.A.OBJECT_TYPE_CONIC,s.center=s.midpoint,s.subs={center:s.center},s.inherits.push(s.center),s.inherits=s.inherits.concat(v),m){for(f=0;f<5;f++)utils_type.A.isPoint(v[f])&&v[f].addChild(s);s.setParents(e)}return s.addChild(s.center),s},jxg.A.registerElement("ellipse",jxg.A.createEllipse),jxg.A.registerElement("hyperbola",jxg.A.createHyperbola),jxg.A.registerElement("parabola",jxg.A.createParabola),jxg.A.registerElement("conic",jxg.A.createConic),jxg.A.Polygon=function(t,e,i){this.constructor(t,i,constants.A.OBJECT_TYPE_POLYGON,constants.A.OBJECT_CLASS_AREA);var r,s,n,o,a,l=utils_type.A.copyAttributes(i,t.options,"polygon","borders");for(this.withLines=i.withlines,this.attr_line=l,this.vertices=[],r=0;r<e.length;r++)this.vertices[r]=this.board.select(e[r]),this.vertices[r]._is_new&&(delete this.vertices[r]._is_new,this.vertices[r]._is_new_pol=!0);if(this.vertices.length>0&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.borders=[],this.withLines)for(n=this.vertices.length-1,o=0;o<n;o++)r=(o+1)%n,l.id=l.ids&&l.ids[r],l.name=l.names&&l.names[r],l.strokecolor=utils_type.A.isArray(l.colors)&&l.colors[r%l.colors.length]||l.strokecolor,l.visible=utils_type.A.exists(i.borders.visible)?i.borders.visible:i.visible,!1===l.strokecolor&&(l.strokecolor="none"),(s=t.create("segment",[this.vertices[r],this.vertices[r+1]],l)).dump=!1,this.borders[r]=s,s.parentPolygon=this,this.addChild(s);for(this.inherits.push(this.vertices,this.borders),this.id=this.board.setId(this,"Py"),r=0;r<this.vertices.length-1;r++)a=this.board.select(this.vertices[r]),utils_type.A.exists(a._is_new_pol)?(this.addChild(a),delete a._is_new_pol):a.addChild(this);this.board.renderer.drawPolygon(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="polygon",this.createLabel(),this.methodMap=jxg.A.deepCopy(this.methodMap,{borders:"borders",vertices:"vertices",A:"Area",Area:"Area",Perimeter:"Perimeter",L:"Perimeter",boundingBox:"bounds",BoundingBox:"bounds",addPoints:"addPoints",insertPoints:"insertPoints",removePoints:"removePoints",Intersect:"intersect"})},jxg.A.Polygon.prototype=new base_element.A,jxg.A.extend(jxg.A.Polygon.prototype,{pnpoly:function(t,e,i){return geometry.A.pnpoly(t,e,this.vertices,i)},hasPoint:function(t,e){var i,r;if(utils_type.A.evaluate(this.visProp.hasinnerpoints)&&this.pnpoly(t,e))return!0;for(r=this.borders.length,i=0;i<r;i++)if(this.borders[i].hasPoint(t,e))return!0;return!1},updateRenderer:function(){var t,e;if(!this.needsUpdate)return this;if(this.visPropCalc.visible){for(e=this.vertices.length-("polygonalchain"===this.elType?0:1),this.isReal=!0,t=0;t<e;++t)if(!this.vertices[t].isReal){this.isReal=!1;break}if(!this.isReal)for(t in this.updateVisibility(!1),this.childElements)this.childElements.hasOwnProperty(t)&&this.childElements[t].setDisplayRendNode(!1)}return this.visPropCalc.visible&&this.board.renderer.updatePolygon(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this},getTextAnchor:function(){var t,e,i,r,s;if(0===this.vertices.length)return new base_coords.A(constants.A.COORDS_BY_USER,[1,0,0],this.board);for(i=t=this.vertices[0].X(),r=e=this.vertices[0].Y(),s=0;s<this.vertices.length;s++)this.vertices[s].X()<t&&(t=this.vertices[s].X()),this.vertices[s].X()>i&&(i=this.vertices[s].X()),this.vertices[s].Y()>e&&(e=this.vertices[s].Y()),this.vertices[s].Y()<r&&(r=this.vertices[s].Y());return new base_coords.A(constants.A.COORDS_BY_USER,[.5*(t+i),.5*(e+r)],this.board)},getLabelAnchor:jxg.A.shortcut(jxg.A.Polygon.prototype,"getTextAnchor"),cloneToBackground:function(){var t,e={};return e.id=this.id+"T"+this.numTraces,this.numTraces++,e.vertices=this.vertices,e.visProp=utils_type.A.deepCopy(this.visProp,this.visProp.traceattributes,!0),e.visProp.layer=this.board.options.layer.trace,e.board=this.board,utils_type.A.clearVisPropOld(e),e.visPropCalc={visible:utils_type.A.evaluate(e.visProp.visible)},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawPolygon(e),this.board.renderer.enhancedRendering=t,this.traces[e.id]=e.rendNode,this},hideElement:function(t){var e;if(jxg.A.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),!t)for(e=0;e<this.borders.length;e++)this.borders[e].hideElement();this.hasLabel&&utils_type.A.exists(this.label)&&(this.label.hiddenByParent=!0,this.label.visPropCalc.visible&&this.label.hideElement())},showElement:function(t){var e;if(jxg.A.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!0),!t)for(e=0;e<this.borders.length;e++)this.borders[e].showElement().updateRenderer();return utils_type.A.exists(this.label)&&this.hasLabel&&this.label.hiddenByParent&&(this.label.hiddenByParent=!1,this.label.visPropCalc.visible||this.label.showElement().updateRenderer()),this},Area:function(){return Math.abs(geometry.A.signedPolygon(this.vertices,!0))},Perimeter:function(){var t,e=this.vertices.length,i=0;for(t=1;t<e;++t)i+=this.vertices[t].Dist(this.vertices[t-1]);return i},L:function(){return this.Perimeter()},boundingBox:function(){var t,e,i=[0,0,0,0],r=this.vertices.length-1;if(0===r)return i;for(i[0]=this.vertices[0].X(),i[2]=i[0],i[1]=this.vertices[0].Y(),i[3]=i[1],t=1;t<r;++t)(e=this.vertices[t].X())<i[0]?i[0]=e:e>i[2]&&(i[2]=e),(e=this.vertices[t].Y())>i[1]?i[1]=e:e<i[3]&&(i[3]=e);return i},bounds:function(){return this.boundingBox()},remove:function(){var t;for(t=0;t<this.borders.length;t++)this.board.removeObject(this.borders[t]);base_element.A.prototype.remove.call(this)},findPoint:function(t){var e;if(!utils_type.A.isPoint(t))return-1;for(e=0;e<this.vertices.length;e++)if(this.vertices[e].id===t.id)return e;return-1},addPoints:function(t){var e,i=Array.prototype.slice.call(arguments);return e="polygonalchain"===this.elType?this.vertices.length-1:this.vertices.length-2,this.insertPoints.apply(this,[e].concat(i))},insertPoints:function(t,e){var i,r,s,n,o;if(0===arguments.length)return this;if(s=this.vertices.length-1,"polygon"===this.elType&&s--,t<-1||t>s)return this;for(r=arguments.length-1,i=1;i<r+1;i++)(o=utils_type.A.providePoints(this.board,[arguments[i]],{},"polygon",["vertices"])[0])._is_new&&(this.addChild(o),delete o._is_new),this.vertices.splice(t+i,0,o);if(this.withLines)for(n=t+1,"polygon"===this.elType?t<0?(this.vertices[this.vertices.length-1]=this.vertices[0],this.borders[this.borders.length-1].point2=this.vertices[this.vertices.length-1]):this.borders[t].point2=this.vertices[n]:t>=0&&(t<this.borders.length?this.borders[t].point2=this.vertices[n]:n=t),i=n;i<n+r;i++)this.borders.splice(i,0,this.board.create("segment",[this.vertices[i],this.vertices[i+1]],this.attr_line));return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},removePoints:function(t){var e,i,r,s,n=[],o=[],a=[],l=[];for("polygon"===this.elType&&(s=this.vertices.pop()),e=0;e<arguments.length;e++)r=arguments[e],utils_type.A.isPoint(r)&&(r=this.findPoint(r)),utils_type.A.isNumber(r)&&r>-1&&r<this.vertices.length&&-1===utils_type.A.indexOf(a,r)&&a.push(r);if(0===a.length)return"polygon"===this.elType&&this.vertices.push(s),this;for(e=0;e<a.length;e++)this.vertices[a[e]].removeChild(this);for(a=a.sort(),n=this.vertices.slice(),o=this.borders.slice(),this.withLines&&l.push([a[a.length-1]]),e=a.length-1;e>-1;e--)n[a[e]]=-1,this.withLines&&a.length>1&&a[e]-1>a[e-1]&&(l[l.length-1][1]=a[e],l.push([a[e-1]]));for(this.withLines&&(l[l.length-1][1]=a[0]),this.vertices=[],e=0;e<n.length;e++)utils_type.A.isPoint(n[e])&&this.vertices.push(n[e]);if("polygon"===this.elType&&this.vertices.length>1&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.withLines){for(e=0;e<l.length;e++){for(i=l[e][1]-1;i<l[e][0]+1;i++)i<0?"polygon"===this.elType&&(this.board.removeObject(this.borders[o.length-1]),o[o.length-1]=-1):i<o.length&&(this.board.removeObject(this.borders[i]),o[i]=-1);0!==l[e][1]&&l[e][0]!==n.length-1&&(o[l[e][0]-1]=this.board.create("segment",[n[l[e][1]-1],n[l[e][0]+1]],this.attr_line))}for(this.borders=[],e=0;e<o.length;e++)-1!==o[e]&&this.borders.push(o[e]);"polygon"===this.elType&&this.vertices.length>2&&(l[0][1]===this.vertices.length-1||0===l[l.length-1][1])&&this.borders.push(this.board.create("segment",[this.vertices[this.vertices.length-2],this.vertices[0]],this.attr_line))}return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},getParents:function(){return this.setParents(this.vertices),this.parents},getAttributes:function(){var t,e=base_element.A.prototype.getAttributes.call(this);if(this.withLines)for(e.lines=e.lines||{},e.lines.ids=[],e.lines.colors=[],t=0;t<this.borders.length;t++)e.lines.ids.push(this.borders[t].id),e.lines.colors.push(this.borders[t].visProp.strokecolor);return e},snapToGrid:function(){var t,e;for(e=!!utils_type.A.evaluate(this.visProp.snaptogrid),t=0;t<this.vertices.length;t++)this.vertices[t].handleSnapToGrid(e,!0)},setPositionDirectly:function(t,e,i){var r,s,n,o=new base_coords.A(t,e,this.board),a=new base_coords.A(t,i,this.board);for(n=this.vertices.length-1,s=0;s<n;s++)if(!this.vertices[s].draggable())return this;return r=statistics.A.subtract(o.usrCoords,a.usrCoords),this.board.create("transform",r.slice(1),{type:"translate"}).applyOnce(this.vertices.slice(0,-1)),this},sutherlandHodgman:function(t){var e,i,r,s,n,o,a,l=jxg.A.Math.Geometry.sortVertices(this.vertices),u=jxg.A.Math.Geometry.sortVertices(t.vertices),c=l.length-1,h=u.length-1,d=[],p=function(t,e,i){return(e[1]-t[1])*(i[2]-t[2])-(e[2]-t[2])*(i[1]-t[1])>=0};for(r=0;r<h;r++)d.push(u[r]);for(r=0;r<c;r++)for(i=d.slice(0),d=[],n=i[(e=i.length)-1],s=0;s<e;s++)o=i[s],p(l[r],l[r+1],o)?(p(l[r],l[r+1],n)||((a=jxg.A.Math.Geometry.meetSegmentSegment(n,o,l[r],l[r+1]))[0][1]/=a[0][0],a[0][2]/=a[0][0],a[0][0]=1,d.push(a[0])),d.push(o)):p(l[r],l[r+1],n)&&((a=jxg.A.Math.Geometry.meetSegmentSegment(n,o,l[r],l[r+1]))[0][1]/=a[0][0],a[0][2]/=a[0][0],a[0][0]=1,d.push(a[0])),n=o;return d},intersect:function(t){return this.sutherlandHodgman(t)}}),jxg.A.createPolygon=function(t,e,i){var r,s,n,o,a,l,u=[],c=!1;if(utils_type.A.copyAttributes(i,t.options,"polygon"),null===(o=t.select(e[0]))&&(o=e[0]),utils_type.A.isObject(o)&&o.type===constants.A.OBJECT_TYPE_POLYGON&&utils_type.A.isTransformationOrArray(e[1]))for(c=!0,n=o.vertices.length-1,l=utils_type.A.copyAttributes(i,t.options,"polygon","vertices"),s=0;s<n;s++)l.withlabel&&(l.name=""===o.vertices[s].name?"":o.vertices[s].name+"'"),u.push(t.create("point",[o.vertices[s],e[1]],l));else if(!1===(u=utils_type.A.providePoints(t,e,i,"polygon",["vertices"])))throw new Error("JSXGraph: Can't create polygon / polygonalchain with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon and a transformation can be supplied");if(a=utils_type.A.copyAttributes(i,t.options,"polygon"),(r=new jxg.A.Polygon(t,u,a)).isDraggable=!0,c)for(r.prepareUpdate().update().updateVisibility().updateRenderer(),n=o.vertices.length-1,s=0;s<n;s++)u[s].prepareUpdate().update().updateVisibility().updateRenderer();return r},jxg.A.createRegularPolygon=function(t,e,i){var r,s,n,o,a,l,u,c=[];if(n=e[(a=e.length)-1],utils_type.A.isNumber(n)&&(3!==e.length||n<3))throw new Error("JSXGraph: A regular polygon needs two point types and a number > 2 as input.");if(utils_type.A.isNumber(t.select(n))?(a--,l=!1):(n=a,l=!0),!1===(c=utils_type.A.providePoints(t,e.slice(0,a),i,"regularpolygon",["vertices"])))throw new Error("JSXGraph: Can't create regular polygon with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates");for(u=utils_type.A.copyAttributes(i,t.options,"regularpolygon","vertices"),s=2;s<n;s++)o=t.create("transform",[Math.PI*(2-(n-2)/n),c[s-1]],{type:"rotate"}),l?(c[s].addTransform(c[s-2],o),c[s].fullUpdate()):(utils_type.A.isArray(u.ids)&&u.ids.length>=n-2&&(u.id=u.ids[s-2]),c[s]=t.create("point",[c[s-2],o],u),c[s].type=constants.A.OBJECT_TYPE_CAS,c[s].isDraggable=!0,c[s].visProp.fixed=!1);return u=utils_type.A.copyAttributes(i,t.options,"regularpolygon"),(r=t.create("polygon",c,u)).elType="regularpolygon",r},jxg.A.createPolygonalChain=function(t,e,i){var r,s;return r=utils_type.A.copyAttributes(i,t.options,"polygonalchain"),(s=t.create("polygon",e,r)).elType="polygonalchain",s.vertices.pop(),t.removeObject(s.borders[s.borders.length-1]),s.borders.pop(),s},jxg.A.createParallelogram=function(t,e,i){var r,s,n,o,a;if(!1===(n=utils_type.A.providePoints(t,e,i,"polygon",["vertices"]))||n.length<3)throw new Error("JSXGraph: Can't create parallelogram with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates.");return a=utils_type.A.copyAttributes(i,t.options,"parallelogram",["parallelpoint"]),s=t.create("parallelpoint",n,a),o=utils_type.A.copyAttributes(i,t.options,"parallelogram"),(r=t.create("polygon",[n[0],n[1],s,n[2]],o)).elType="parallelogram",r.parallelPoint=s,r.isDraggable=!0,s.isDraggable=!0,s.visProp.fixed=!1,r},jxg.A.registerElement("polygon",jxg.A.createPolygon),jxg.A.registerElement("regularpolygon",jxg.A.createRegularPolygon),jxg.A.registerElement("polygonalchain",jxg.A.createPolygonalChain),jxg.A.registerElement("parallelogram",jxg.A.createParallelogram);const polygon=jxg.A.Polygon;jxg.A.Curve=function(t,e,i){this.constructor(t,i,constants.A.OBJECT_TYPE_CURVE,constants.A.OBJECT_CLASS_CURVE),this.points=[],this.numberPoints=utils_type.A.evaluate(this.visProp.numberpointshigh),this.bezierDegree=1,this.dataX=null,this.dataY=null,this.ticks=[],this.qdt=null,utils_type.A.exists(e[0])?this.varname=e[0]:this.varname="x",this.xterm=e[1],this.yterm=e[2],this.generateTerm(this.varname,this.xterm,this.yterm,e[3],e[4]),this.updateCurve(),this.id=this.board.setId(this,"G"),this.board.renderer.drawCurve(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="curve",this.createLabel(),utils_type.A.isString(this.xterm)&&this.notifyParents(this.xterm),utils_type.A.isString(this.yterm)&&this.notifyParents(this.yterm),this.methodMap=utils_type.A.deepCopy(this.methodMap,{generateTerm:"generateTerm",setTerm:"generateTerm",move:"moveTo",moveTo:"moveTo",MinX:"minX",MaxX:"maxX"})},jxg.A.Curve.prototype=new base_element.A,jxg.A.extend(jxg.A.Curve.prototype,{minX:function(){return"polar"===utils_type.A.evaluate(this.visProp.curvetype)?0:new base_coords.A(constants.A.COORDS_BY_SCREEN,[.1*-this.board.canvasWidth,0],this.board,!1).usrCoords[1]},maxX:function(){return"polar"===utils_type.A.evaluate(this.visProp.curvetype)?2*Math.PI:new base_coords.A(constants.A.COORDS_BY_SCREEN,[1.1*this.board.canvasWidth,0],this.board,!1).usrCoords[1]},X:function(t){return NaN},Y:function(t){return NaN},Z:function(t){return 1},hasPoint:function(t,e,i){var r,s,n,o,a,l,u,c,h,d,p,f,_,m,g,y,v=[],A=utils_type.A.evaluate(this.visProp.numberpointslow),b=(this.maxX()-this.minX())/A,C=1/0,x=!0;if(utils_type.A.isObject(utils_type.A.evaluate(this.visProp.precision))?(f=this.board._inputDevice,p=utils_type.A.evaluate(this.visProp.precision[f])):p=this.board.options.precision.hasPoint,t=(l=new base_coords.A(constants.A.COORDS_BY_SCREEN,[t,e],this.board,!1)).usrCoords[1],e=l.usrCoords[2],1===this.bezierDegree&&utils_type.A.evaluate(this.visProp.hasinnerpoints)&&0!==geometry.A.windingNumber([1,t,e],this.points,!0))return!0;if(p+=.5*utils_type.A.evaluate(this.visProp.strokewidth),p*=p,_=this.board.unitX*this.board.unitX,m=this.board.unitY*this.board.unitY,y=this.minX(),this.maxX(),utils_type.A.exists(this._visibleArea)&&(y=this._visibleArea[0],b=(this._visibleArea[1]-y)/A),"parameter"===(g=utils_type.A.evaluate(this.visProp.curvetype))||"polar"===g)for(this.transformations.length>0&&(this.updateTransformMatrix(),c=math.A.inverse(this.transformMat),t=(s=math.A.matVecMult(c,[1,t,e]))[1],e=s[2]),n=0,r=y;n<A;n++){if((C=(t-(o=this.X(r,x)))*(t-o)*_+(e-(a=this.Y(r,x)))*(e-a)*m)<=p)return!0;r+=b}else if("plot"===g||"functiongraph"===g){for((!utils_type.A.exists(i)||i<0)&&(i=0),utils_type.A.exists(this.qdt)&&utils_type.A.evaluate(this.visProp.useqdt)&&3!==this.bezierDegree?u=(h=(d=this.qdt.query(new base_coords.A(constants.A.COORDS_BY_USER,[t,e],this.board))).points).length:(h=this.points,u=this.numberPoints-1),n=i;n<u;n++)if(3===this.bezierDegree?v=geometry.A.projectCoordsToBeziersegment([1,t,e],this,n):d?(h[n].prev&&(v=geometry.A.projectCoordsToSegment([1,t,e],h[n].prev.usrCoords,h[n].usrCoords)),h[n].next&&h[n+1]!==h[n].next&&(v=geometry.A.projectCoordsToSegment([1,t,e],h[n].usrCoords,h[n].next.usrCoords))):v=geometry.A.projectCoordsToSegment([1,t,e],h[n].usrCoords,h[n+1].usrCoords),v[1]>=0&&v[1]<=1&&(t-v[0][1])*(t-v[0][1])*_+(e-v[0][2])*(e-v[0][2])*m<=p)return!0;return!1}return C<p},allocatePoints:function(){var t,e;if(e=this.numberPoints,this.points.length<this.numberPoints)for(t=this.points.length;t<e;t++)this.points[t]=new base_coords.A(constants.A.COORDS_BY_USER,[0,0],this.board,!1)},update:function(){return this.needsUpdate&&(utils_type.A.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this.updateCurve()),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=plot.checkReal(this.points),this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateCurve(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateDataArray:function(){},updateCurve:function(){var t,e,i,r,s,n,o=this.visProp.plotversion,a=!1;if(this.updateTransformMatrix(),this.updateDataArray(),i=this.minX(),r=this.maxX(),utils_type.A.exists(this.dataX))for(this.numberPoints=this.dataX.length,e=this.numberPoints,this.allocatePoints(),t=0;t<e;t++)s=t,utils_type.A.exists(this.dataY)?(n=t,this.points[t].setCoordinates(constants.A.COORDS_BY_USER,[this.dataX[t],this.dataY[t]],!1)):(n=this.X(s),this.points[t].setCoordinates(constants.A.COORDS_BY_USER,[this.dataX[t],this.Y(n,a)],!1)),this.points[t]._t=t,a=!0;else if(utils_type.A.evaluate(this.visProp.doadvancedplot)?1===o||utils_type.A.evaluate(this.visProp.doadvancedplotold)?plot.updateParametricCurveOld(this,i,r):2===o?plot.updateParametricCurve_v2(this,i,r):3===o?plot.updateParametricCurve_v3(this,i,r):4===o?plot.updateParametricCurve_v4(this,i,r):plot.updateParametricCurve_v2(this,i,r):(this.board.updateQuality===this.board.BOARD_QUALITY_HIGH?this.numberPoints=utils_type.A.evaluate(this.visProp.numberpointshigh):this.numberPoints=utils_type.A.evaluate(this.visProp.numberpointslow),this.allocatePoints(),plot.updateParametricCurveNaive(this,i,r,this.numberPoints)),e=this.numberPoints,utils_type.A.evaluate(this.visProp.useqdt)&&this.board.updateQuality===this.board.BOARD_QUALITY_HIGH)for(this.qdt=new qdt(this.board.getBoundingBox()),t=0;t<this.points.length;t++)this.qdt.insert(this.points[t]),t>0&&(this.points[t].prev=this.points[t-1]),t<e-1&&(this.points[t].next=this.points[t+1]);for("plot"!==utils_type.A.evaluate(this.visProp.curvetype)&&utils_type.A.evaluate(this.visProp.rdpsmoothing)&&(this.points=numerics.A.RamerDouglasPeucker(this.points,.2),this.numberPoints=this.points.length),e=this.numberPoints,t=0;t<e;t++)this.updateTransform(this.points[t]);return this},updateTransformMatrix:function(){var t,e,i=this.transformations.length;for(this.transformMat=[[1,0,0],[0,1,0],[0,0,1]],e=0;e<i;e++)(t=this.transformations[e]).update(),this.transformMat=math.A.matMatMult(t.matrix,this.transformMat);return this},updateTransform:function(t){var e;return this.transformations.length>0&&(e=math.A.matVecMult(this.transformMat,t.usrCoords),t.setCoordinates(constants.A.COORDS_BY_USER,e,!1,!0)),t},addTransform:function(t){var e,i=utils_type.A.isArray(t)?t:[t],r=i.length;for(e=0;e<r;e++)this.transformations.push(i[e]);return this},interpolationFunctionFromArray:function(t){var e="data"+t,i=this;return function(t,r){var s,n,o,a,l=i[e],u=l.length,c=[];if(isNaN(t))return NaN;if(t<0)return utils_type.A.isFunction(l[0])?l[0]():l[0];if(3===i.bezierDegree){if(t>=(u-1)/3)return utils_type.A.isFunction(l[l.length-1])?l[l.length-1]():l[l.length-1];for(s=3*Math.floor(t),a=1-(o=t%1),n=0;n<4;n++)utils_type.A.isFunction(l[s+n])?c[n]=l[s+n]():c[n]=l[s+n];return a*a*(a*c[0]+3*o*c[1])+(3*a*c[2]+o*c[3])*o*o}if((s=t>u-2?u-2:parseInt(Math.floor(t),10))===t)return utils_type.A.isFunction(l[s])?l[s]():l[s];for(n=0;n<2;n++)utils_type.A.isFunction(l[s+n])?c[n]=l[s+n]():c[n]=l[s+n];return c[0]+(c[1]-c[0])*(t-s)}},generateTerm:function(t,e,i,r,s){var n,o;utils_type.A.isArray(e)?(this.dataX=e,this.numberPoints=this.dataX.length,this.X=this.interpolationFunctionFromArray.apply(this,["X"]),this.visProp.curvetype="plot",this.isDraggable=!0):(this.X=utils_type.A.createFunction(e,this.board,t),utils_type.A.isString(e)?this.visProp.curvetype="functiongraph":(utils_type.A.isFunction(e)||utils_type.A.isNumber(e))&&(this.visProp.curvetype="parameter"),this.isDraggable=!0),utils_type.A.isArray(i)?(this.dataY=i,this.Y=this.interpolationFunctionFromArray.apply(this,["Y"])):this.Y=utils_type.A.createFunction(i,this.board,t),utils_type.A.isFunction(e)&&utils_type.A.isArray(i)&&(n=utils_type.A.createFunction(i[0],this.board,""),o=utils_type.A.createFunction(i[1],this.board,""),this.X=function(t){return e(t)*Math.cos(t)+n()},this.X.deps=n.deps,this.Y=function(t){return e(t)*Math.sin(t)+o()},this.Y.deps=o.deps,this.visProp.curvetype="polar"),utils_type.A.exists(r)?this.minX=utils_type.A.createFunction(r,this.board,""):delete this.minX,utils_type.A.exists(s)?this.maxX=utils_type.A.createFunction(s,this.board,""):delete this.maxX,this.addParentsFromJCFunctions([this.X,this.Y,this.minX,this.maxX])},notifyParents:function(t){var e,i,r,s=!1;for(e in r={xterm:1,yterm:1})if(r.hasOwnProperty(e)&&this.hasOwnProperty(e)&&this[e].origin)for(i in s=!0,this[e].origin.deps)this[e].origin.deps.hasOwnProperty(i)&&this[e].origin.deps[i].addChild(this);s||geonext.A.findDependencies(this,t,this.board)},getLabelAnchor:function(){var t,e,i,r,s,n,o,a,l,u,c,h=1.5,d=.05*this.board.canvasWidth,p=.05*this.board.canvasHeight,f=.95*this.board.canvasWidth,_=.95*this.board.canvasHeight;if(!utils_type.A.exists(this.label))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(i=utils_type.A.evaluate(this.label.visProp.position),!utils_type.A.isString(i))return new base_coords.A(constants.A.COORDS_BY_SCREEN,[NaN,NaN],this.board);if(!(i.indexOf("right")<0&&i.indexOf("left")<0))return r=utils_type.A.parsePosition(i),s=utils_type.A.parseNumber(r.pos,this.maxX()-this.minX(),1),r.pos.indexOf("fr")<0&&r.pos.indexOf("%")<0&&(s=0),o=this.minX()+s,t=this.X(o),e=this.Y(o),c=new base_coords.A(constants.A.COORDS_BY_USER,[t,e],this.board).scrCoords,n=math.A.eps,o<this.minX()+n?(a=(this.X(o+n)-this.X(o))/n,l=(this.Y(o+n)-this.Y(o))/n):o>this.maxX()-n?(a=(this.X(o)-this.X(o-n))/n,l=(this.Y(o)-this.Y(o-n))/n):(a=.5*(this.X(o+n)-this.X(o-n))/n,l=.5*(this.Y(o+n)-this.Y(o-n))/n),u=math.A.hypot(a,l),"left"===r.side?l*=-1:a*=-1,utils_type.A.exists(this.label)&&(h=.5*utils_type.A.evaluate(this.label.visProp.distance)/u),t=c[1]+l*this.label.size[0]*h,e=c[2]-a*this.label.size[1]*h,new base_coords.A(constants.A.COORDS_BY_SCREEN,[t,e],this.board);switch(utils_type.A.evaluate(this.visProp.label.position)){case"ulft":t=d,e=p;break;case"llft":t=d,e=_;break;case"rt":t=f,e=.5*_;break;case"lrt":t=f,e=_;break;case"urt":t=f,e=p;break;case"top":t=.5*f,e=p;break;case"bot":t=.5*f,e=_;break;default:t=d,e=.5*_}return c=new base_coords.A(constants.A.COORDS_BY_SCREEN,[t,e],this.board,!1),geometry.A.projectCoordsToCurve(c.usrCoords[1],c.usrCoords[2],0,this,this.board)[0]},cloneToBackground:function(){var t,e={id:this.id+"T"+this.numTraces,elementClass:constants.A.OBJECT_CLASS_CURVE,points:this.points.slice(0),bezierDegree:this.bezierDegree,numberPoints:this.numberPoints,board:this.board,visProp:utils_type.A.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return e.visProp.layer=this.board.options.layer.trace,e.visProp.curvetype=this.visProp.curvetype,this.numTraces++,utils_type.A.clearVisPropOld(e),e.visPropCalc={visible:utils_type.A.evaluate(e.visProp.visible)},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawCurve(e),this.board.renderer.enhancedRendering=t,this.traces[e.id]=e.rendNode,this},bounds:function(){var t,e,i,r=1/0,s=-1/0,n=1/0,o=-1/0,a=this.points.length;if(3===this.bezierDegree){for(t=0;t<a;t++)this.points[t].X=utils_type.A.bind((function(){return this.usrCoords[1]}),this.points[t]),this.points[t].Y=utils_type.A.bind((function(){return this.usrCoords[2]}),this.points[t]);return i=(e=numerics.A.bezier(this.points))[3](),r=numerics.A.fminbr((function(t){return e[0](t)}),[0,i]),s=numerics.A.fminbr((function(t){return-e[0](t)}),[0,i]),n=numerics.A.fminbr((function(t){return e[1](t)}),[0,i]),o=numerics.A.fminbr((function(t){return-e[1](t)}),[0,i]),r=e[0](r),s=e[0](s),n=e[1](n),[r,o=e[1](o),s,n]}for(t=0;t<a;t++)r>this.points[t].usrCoords[1]&&(r=this.points[t].usrCoords[1]),s<this.points[t].usrCoords[1]&&(s=this.points[t].usrCoords[1]),n>this.points[t].usrCoords[2]&&(n=this.points[t].usrCoords[2]),o<this.points[t].usrCoords[2]&&(o=this.points[t].usrCoords[2]);return[r,o,s,n]},getParents:function(){var t=[this.xterm,this.yterm,this.minX(),this.maxX()];return 0!==this.parents.length&&(t=this.parents),t},moveTo:function(t){var e,i=[];return this.points.length>0&&!utils_type.A.evaluate(this.visProp.fixed)&&(e=this.points[0],i=3===t.length?[t[0]-e.usrCoords[0],t[1]-e.usrCoords[1],t[2]-e.usrCoords[2]]:[t[0]-e.usrCoords[1],t[1]-e.usrCoords[2]],this.setPosition(constants.A.COORDS_BY_USER,i)),this},getTransformationSource:function(){var t,e;return utils_type.A.exists(this._transformationSource)&&(e=this._transformationSource).elementClass===constants.A.OBJECT_CLASS_CURVE&&(t=!0),[t,e]}}),jxg.A.createCurve=function(t,e,i){var r,s,n=utils_type.A.copyAttributes(i,t.options,"curve");return r=t.select(e[0],!0),utils_type.A.isTransformationOrArray(e[1])&&utils_type.A.isObject(r)&&(r.type===constants.A.OBJECT_TYPE_CURVE||r.type===constants.A.OBJECT_TYPE_ANGLE||r.type===constants.A.OBJECT_TYPE_ARC||r.type===constants.A.OBJECT_TYPE_CONIC||r.type===constants.A.OBJECT_TYPE_SECTOR)?(r.type===constants.A.OBJECT_TYPE_SECTOR?n=utils_type.A.copyAttributes(i,t.options,"sector"):r.type===constants.A.OBJECT_TYPE_ARC?n=utils_type.A.copyAttributes(i,t.options,"arc"):r.type===constants.A.OBJECT_TYPE_ANGLE?(utils_type.A.exists(i.withLabel)||(i.withLabel=!1),n=utils_type.A.copyAttributes(i,t.options,"angle")):n=utils_type.A.copyAttributes(i,t.options,"curve"),n=utils_type.A.copyAttributes(n,t.options,"curve"),(s=new jxg.A.Curve(t,["x",[],[]],n)).updateDataArray=function(){var t,e=r.numberPoints;for(this.bezierDegree=r.bezierDegree,this.dataX=[],this.dataY=[],t=0;t<e;t++)this.dataX.push(r.points[t].usrCoords[1]),this.dataY.push(r.points[t].usrCoords[2]);return this},s.addTransform(e[1]),r.addChild(s),s.setParents([r]),s._transformationSource=r,s):(n=utils_type.A.copyAttributes(i,t.options,"curve"),new jxg.A.Curve(t,["x"].concat(e),n))},jxg.A.registerElement("curve",jxg.A.createCurve),jxg.A.createFunctiongraph=function(t,e,i){var r,s=["x","x"].concat(e);return r=utils_type.A.copyAttributes(i,t.options,"functiongraph"),(r=utils_type.A.copyAttributes(r,t.options,"curve")).curvetype="functiongraph",new jxg.A.Curve(t,s,r)},jxg.A.registerElement("functiongraph",jxg.A.createFunctiongraph),jxg.A.registerElement("plot",jxg.A.createFunctiongraph),jxg.A.createSpline=function(t,e,i){var r,s,n;return s=function(){var t,i=[],r=[];return[function(s,n){var o,a,l;if(!n){if(i=[],r=[],2===e.length&&utils_type.A.isArray(e[0])&&utils_type.A.isArray(e[1])&&e[0].length===e[1].length)for(o=0;o<e[0].length;o++)utils_type.A.isFunction(e[0][o])?i.push(e[0][o]()):i.push(e[0][o]),utils_type.A.isFunction(e[1][o])?r.push(e[1][o]()):r.push(e[1][o]);else for(o=0;o<e.length;o++)if(utils_type.A.isPoint(e[o]))i.push(e[o].X()),r.push(e[o].Y());else if(utils_type.A.isArray(e[o])&&2===e[o].length)for(a=0;a<e.length;a++)utils_type.A.isFunction(e[a][0])?i.push(e[a][0]()):i.push(e[a][0]),utils_type.A.isFunction(e[a][1])?r.push(e[a][1]()):r.push(e[a][1]);else utils_type.A.isFunction(e[o])&&2===e[o]().length&&(l=e[o](),i.push(l[0]),r.push(l[1]));t=numerics.A.splineDef(i,r)}return numerics.A.splineEval(s,i,r,t)},function(){return i[0]},function(){return i[i.length-1]}]},(i=utils_type.A.copyAttributes(i,t.options,"curve")).curvetype="functiongraph",n=s(),(r=new jxg.A.Curve(t,["x","x",n[0],n[1],n[2]],i)).setParents(e),r.elType="spline",r},jxg.A.registerElement("spline",jxg.A.createSpline),jxg.A.createCardinalSpline=function(t,e,i){var r,s,n,o,a,l,u,c,h,d,p="\nPossible parent types: [points:array, tau:number|function, type:string]";if(!utils_type.A.exists(e[0])||!utils_type.A.isArray(e[0]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 1 'points' has to be array of points or coordinate pairs"+p);if(!utils_type.A.exists(e[1])||!utils_type.A.isNumber(e[1])&&!utils_type.A.isFunction(e[1]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 2 'tau' has to be number between [0,1] or function'"+p);if(!utils_type.A.exists(e[2])||!utils_type.A.isString(e[2]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 3 'type' has to be string 'uniform' or 'centripetal'"+p);if(i=utils_type.A.copyAttributes(i,t.options,"curve"),(i=utils_type.A.copyAttributes(i,t.options,"cardinalspline")).curvetype="parameter",l=e[0],u=[],!i.isarrayofcoordinates&&2===l.length&&utils_type.A.isArray(l[0])&&utils_type.A.isArray(l[1])&&l[0].length===l[1].length)for(c=0;c<l[0].length;c++)u[c]=[],utils_type.A.isFunction(l[0][c])?u[c].push(l[0][c]()):u[c].push(l[0][c]),utils_type.A.isFunction(l[1][c])?u[c].push(l[1][c]()):u[c].push(l[1][c]);else for(c=0;c<l.length;c++)utils_type.A.isString(l[c])?u.push(t.select(l[c])):utils_type.A.isPoint(l[c])?u.push(l[c]):utils_type.A.isArray(l[c])&&2===l[c].length?(u[c]=[],utils_type.A.isFunction(l[c][0])?u[c].push(l[c][0]()):u[c].push(l[c][0]),utils_type.A.isFunction(l[c][1])?u[c].push(l[c][1]()):u[c].push(l[c][1])):utils_type.A.isFunction(l[c])&&2===l[c]().length&&u.push(e[c]());if(!0===i.createpoints)n=utils_type.A.providePoints(t,u,i,"cardinalspline",["points"]);else for(n=[],s=function(t){return{X:function(){return u[t][0]},Y:function(){return u[t][1]},Dist:function(t){var e=this.X()-t.X(),i=this.Y()-t.Y();return math.A.hypot(e,i)}}},c=0;c<u.length;c++)utils_type.A.isPoint(u[c])?n.push(u[c]):n.push(s(c));for(o=e[1],a=e[2],d=["x"].concat(numerics.A.CardinalSpline(n,o,a)),r=new jxg.A.Curve(t,d,i),h=n.length,r.setParents(n),c=0;c<h;c++)l=n[c],utils_type.A.isPoint(l)&&(utils_type.A.exists(l._is_new)?(r.addChild(l),delete l._is_new):l.addChild(r));return r.elType="cardinalspline",r},jxg.A.registerElement("cardinalspline",jxg.A.createCardinalSpline),jxg.A.createMetapostSpline=function(t,e,i){var r,s,n,o,a,l,u,c,h="\nPossible parent types: [points:array, controls:object";if(!utils_type.A.exists(e[0])||!utils_type.A.isArray(e[0]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 1 'points' has to be array of points or coordinate pairs"+h);if(!utils_type.A.exists(e[1])||!utils_type.A.isObject(e[1]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 2 'controls' has to be a JavaScript object'"+h);if(i=utils_type.A.copyAttributes(i,t.options,"curve"),(i=utils_type.A.copyAttributes(i,t.options,"metapostspline")).curvetype="parameter",a=e[0],l=[],!i.isarrayofcoordinates&&2===a.length&&utils_type.A.isArray(a[0])&&utils_type.A.isArray(a[1])&&a[0].length===a[1].length)for(u=0;u<a[0].length;u++)l[u]=[],utils_type.A.isFunction(a[0][u])?l[u].push(a[0][u]()):l[u].push(a[0][u]),utils_type.A.isFunction(a[1][u])?l[u].push(a[1][u]()):l[u].push(a[1][u]);else for(u=0;u<a.length;u++)utils_type.A.isString(a[u])?l.push(t.select(a[u])):utils_type.A.isPoint(a[u])?l.push(a[u]):utils_type.A.isArray(a[u])&&2===a[u].length?(l[u]=[],utils_type.A.isFunction(a[u][0])?l[u].push(a[u][0]()):l[u].push(a[u][0]),utils_type.A.isFunction(a[u][1])?l[u].push(a[u][1]()):l[u].push(a[u][1])):utils_type.A.isFunction(a[u])&&2===a[u]().length&&l.push(e[u]());if(!0===i.createpoints)n=utils_type.A.providePoints(t,l,i,"metapostspline",["points"]);else for(n=[],s=function(t){return{X:function(){return l[t][0]},Y:function(){return l[t][1]}}},u=0;u<l.length;u++)utils_type.A.isPoint(l[u])?n.push(l[u]):n.push(s);for(o=e[1],(r=new jxg.A.Curve(t,["t",[],[],0,a.length-1],i)).updateDataArray=function(){var t,e,i=n.length,r=[];for(e=0;e<i;e++)r.push([n[e].X(),n[e].Y()]);t=metapost.curve(r,o),this.dataX=t[0],this.dataY=t[1]},r.bezierDegree=3,c=n.length,r.setParents(n),u=0;u<c;u++)utils_type.A.isPoint(n[u])&&n[u].addChild(r);return r.elType="metapostspline",r},jxg.A.registerElement("metapostspline",jxg.A.createMetapostSpline),jxg.A.createRiemannsum=function(t,e,i){var r,s,n,o,a,l;if((l=utils_type.A.copyAttributes(i,t.options,"riemannsum")).curvetype="plot",n=e[0],r=utils_type.A.createFunction(e[1],t,""),!utils_type.A.exists(r))throw new Error("JSXGraph: JXG.createRiemannsum: argument '2' n has to be number or function.\nPossible parent types: [function,n:number|function,type,start:number|function,end:number|function]");if("string"===typeof e[2]&&(e[2]="'"+e[2]+"'"),s=utils_type.A.createFunction(e[2],t,""),!utils_type.A.exists(s))throw new Error("JSXGraph: JXG.createRiemannsum: argument 3 'type' has to be string or function.\nPossible parent types: [function,n:number|function,type,start:number|function,end:number|function]");return o=[[0],[0]].concat(e.slice(3)),(a=t.create("curve",o,l)).sum=0,a.Value=function(){return this.sum},a.updateDataArray=function(){var t=numerics.A.riemann(n,r(),s(),this.minX(),this.maxX());this.dataX=t[0],this.dataY=t[1],this.sum=t[2]},a.addParentsFromJCFunctions([r,s]),a},jxg.A.registerElement("riemannsum",jxg.A.createRiemannsum),jxg.A.createTracecurve=function(t,e,i){var r,s,n,o;if(2!==e.length)throw new Error("JSXGraph: Can't create trace curve with given parent'\nPossible parent types: [glider, point]");if(s=t.select(e[0]),n=t.select(e[1]),s.type!==constants.A.OBJECT_TYPE_GLIDER||!utils_type.A.isPoint(n))throw new Error("JSXGraph: Can't create trace curve with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [glider, point]");return(o=utils_type.A.copyAttributes(i,t.options,"tracecurve")).curvetype="plot",(r=t.create("curve",[[0],[0]],o)).updateDataArray=function(){var t,e,i,r,a,l,u,c,h,d=o.numberpoints,p=s.position,f=s.slideObject,_=f.minX();for(e=(f.maxX()-_)/d,this.dataX=[],this.dataY=[],f.elementClass!==constants.A.OBJECT_CLASS_CURVE&&d++,t=0;t<d;t++){for(r in i=_+t*e,l=f.X(i)/f.Z(i),u=f.Y(i)/f.Z(i),s.setPositionDirectly(constants.A.COORDS_BY_USER,[l,u]),c=!1,this.board.objects)if(this.board.objects.hasOwnProperty(r)&&((a=this.board.objects[r])===s&&(c=!0),c&&a.needsRegularUpdate&&(h=a.visProp.trace,a.visProp.trace=!1,a.needsUpdate=!0,a.update(!0),a.visProp.trace=h,a===n)))break;this.dataX[t]=n.X(),this.dataY[t]=n.Y()}for(r in s.position=p,c=!1,this.board.objects)if(this.board.objects.hasOwnProperty(r)&&((a=this.board.objects[r])===s&&(c=!0),c&&a.needsRegularUpdate&&(h=a.visProp.trace,a.visProp.trace=!1,a.needsUpdate=!0,a.update(!0),a.visProp.trace=h,a===n)))break},r},jxg.A.registerElement("tracecurve",jxg.A.createTracecurve),jxg.A.createStepfunction=function(t,e,i){var r,s;if(2!==e.length)throw new Error("JSXGraph: Can't create step function with given parent'\nPossible parent types: [array, array|function]");return s=utils_type.A.copyAttributes(i,t.options,"stepfunction"),(r=t.create("curve",e,s)).updateDataArray=function(){var t,e=0,i=this.xterm.length;if(this.dataX=[],this.dataY=[],0!==i)for(this.dataX[e]=this.xterm[0],this.dataY[e]=this.yterm[0],++e,t=1;t<i;++t)this.dataX[e]=this.xterm[t],this.dataY[e]=this.dataY[e-1],++e,this.dataX[e]=this.xterm[t],this.dataY[e]=this.yterm[t],++e},r},jxg.A.registerElement("stepfunction",jxg.A.createStepfunction),jxg.A.createDerivative=function(t,e,i){var r,s,n,o,a;if(1!==e.length&&e[0].class!==constants.A.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create derivative curve with given parent'\nPossible parent types: [curve]");return a=utils_type.A.copyAttributes(i,t.options,"curve"),s=e[0],n=numerics.A.D(s.X),o=numerics.A.D(s.Y),(r=t.create("curve",[function(t){return s.X(t)},function(t){return o(t)/n(t)},s.minX(),s.maxX()],a)).setParents(s),r},jxg.A.registerElement("derivative",jxg.A.createDerivative),jxg.A.createCurveIntersection=function(t,e,i){var r;if(2!==e.length)throw new Error("JSXGraph: Can't create curve intersection with given parent'\nPossible parent types: [array, array|function]");return(r=t.create("curve",[[],[]],i)).updateDataArray=function(){var t=clip.intersection(e[0],e[1],this.board);this.dataX=t[0],this.dataY=t[1]},r},jxg.A.createCurveUnion=function(t,e,i){var r;if(2!==e.length)throw new Error("JSXGraph: Can't create curve union with given parent'\nPossible parent types: [array, array|function]");return(r=t.create("curve",[[],[]],i)).updateDataArray=function(){var t=clip.union(e[0],e[1],this.board);this.dataX=t[0],this.dataY=t[1]},r},jxg.A.createCurveDifference=function(t,e,i){var r;if(2!==e.length)throw new Error("JSXGraph: Can't create curve difference with given parent'\nPossible parent types: [array, array|function]");return(r=t.create("curve",[[],[]],i)).updateDataArray=function(){var t=clip.difference(e[0],e[1],this.board);this.dataX=t[0],this.dataY=t[1]},r},jxg.A.registerElement("curvedifference",jxg.A.createCurveDifference),jxg.A.registerElement("curveintersection",jxg.A.createCurveIntersection),jxg.A.registerElement("curveunion",jxg.A.createCurveUnion),jxg.A.createBoxPlot=function(t,e,i){var r,s,n,o=utils_type.A.copyAttributes(i,t.options,"boxplot");if(3!==e.length)throw new Error("JSXGraph: Can't create box plot with given parent'\nPossible parent types: [array, number|function, number|function] containing quantiles, axis, width");if(e[0].length<5)throw new Error("JSXGraph: Can't create box plot with given parent[0]'\nparent[0] has to contain at least 5 quantiles.");for(r=t.create("curve",[[],[]],o),n=e[0].length,r.Q=[],s=0;s<n;s++)r.Q[s]=utils_type.A.createFunction(e[0][s],t);return r.x=utils_type.A.createFunction(e[1],t),r.w=utils_type.A.createFunction(e[2],t),r.updateDataArray=function(){var t,e,i,r,s,n,o,a,l;o=utils_type.A.evaluate(this.visProp.smallwidth),a=utils_type.A.evaluate(this.visProp.dir),i=(l=this.x())-.5*this.w(),r=l-.5*this.w()*o,s=l+.5*this.w(),t=[l,r,n=l+.5*this.w()*o,l,l,i,i,s,s,l,NaN,i,s,NaN,l,l,r,n,l],e=[this.Q[0](),this.Q[0](),this.Q[0](),this.Q[0](),this.Q[1](),this.Q[1](),this.Q[3](),this.Q[3](),this.Q[1](),this.Q[1](),NaN,this.Q[2](),this.Q[2](),NaN,this.Q[3](),this.Q[4](),this.Q[4](),this.Q[4](),this.Q[4]()],"vertical"===a?(this.dataX=t,this.dataY=e):(this.dataX=e,this.dataY=t)},r.addParentsFromJCFunctions([r.Q,r.x,r.w]),r},jxg.A.registerElement("boxplot",jxg.A.createBoxPlot),jxg.A.createImplicitCurve=function(t,e,i){var r,s;if(1!==e.length&&3!==e.length)throw new Error("JSXGraph: Can't create curve implicitCurve with given parent'\nPossible parent types: [f] or [f, dfx, dfy]\nwith functions f, dfx, dfy");return s=utils_type.A.copyAttributes(i,t.options,"implicitcurve"),(r=t.create("curve",[[],[]],s)).f=utils_type.A.createFunction(e[0],t,"x, y"),r.dfx=utils_type.A.createFunction(e[1],t,"x, y"),r.dfy=utils_type.A.createFunction(e[2],t,"x, y"),r.updateDataArray=function(){var t,e,i,r=this.board.getBoundingBox(),s=utils_type.A.evaluate(this.visProp.margin);r[0]-=s,r[1]+=s,r[2]+=s,r[3]-=s,e={resolution_out:Math.max(.01,utils_type.A.evaluate(this.visProp.resolution_outer)),resolution_in:Math.max(.01,utils_type.A.evaluate(this.visProp.resolution_inner)),max_steps:utils_type.A.evaluate(this.visProp.max_steps),alpha_0:utils_type.A.evaluate(this.visProp.alpha_0),tol_u0:utils_type.A.evaluate(this.visProp.tol_u0),tol_newton:utils_type.A.evaluate(this.visProp.tol_newton),tol_cusp:utils_type.A.evaluate(this.visProp.tol_cusp),tol_progress:utils_type.A.evaluate(this.visProp.tol_progress),qdt_box:utils_type.A.evaluate(this.visProp.qdt_box),kappa_0:utils_type.A.evaluate(this.visProp.kappa_0),delta_0:utils_type.A.evaluate(this.visProp.delta_0),h_initial:utils_type.A.evaluate(this.visProp.h_initial),h_critical:utils_type.A.evaluate(this.visProp.h_critical),h_max:utils_type.A.evaluate(this.visProp.h_max),loop_dist:utils_type.A.evaluate(this.visProp.loop_dist),loop_dir:utils_type.A.evaluate(this.visProp.loop_dir),loop_detection:utils_type.A.evaluate(this.visProp.loop_detection),unitX:this.board.unitX,unitY:this.board.unitY},this.dataX=[],this.dataY=[],t=new implicitplot(r,e,this.f,this.dfx,this.dfy),this.qdt=t.qdt,i=t.plot(),this.dataX=i[0],this.dataY=i[1]},r.elType="implicitcurve",r},jxg.A.registerElement("implicitcurve",jxg.A.createImplicitCurve);const curve=jxg.A.Curve;jxg.A.createArc=function(t,e,i){var r,s,n;if(!1===(n=utils_type.A.providePoints(t,e,i,"arc",["center","radiuspoint","anglepoint"]))||n.length<3)throw new Error("JSXGraph: Can't create Arc with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point], [arc, transformation]");return s=utils_type.A.copyAttributes(i,t.options,"arc"),(r=t.create("curve",[[0],[0]],s)).elType="arc",r.setParents(n),r.type=constants.A.OBJECT_TYPE_ARC,r.center=n[0],r.radiuspoint=n[1],r.point2=r.radiuspoint,r.anglepoint=n[2],r.point3=r.anglepoint,utils_type.A.exists(r.center._is_new)?(r.addChild(r.center),delete r.center._is_new):r.center.addChild(r),utils_type.A.exists(r.radiuspoint._is_new)?(r.addChild(r.radiuspoint),delete r.radiuspoint._is_new):r.radiuspoint.addChild(r),utils_type.A.exists(r.anglepoint._is_new)?(r.addChild(r.anglepoint),delete r.anglepoint._is_new):r.anglepoint.addChild(r),r.useDirection=s.usedirection,r.updateDataArray=function(){var t,e,i,r,s,o=1,a=this.radiuspoint,l=this.center,u=this.anglepoint,c=utils_type.A.evaluate(this.visProp.selection);e=geometry.A.rad(a,l,u),("minor"===c&&e>Math.PI||"major"===c&&e<Math.PI)&&(o=-1),this.useDirection&&(i=n[1].coords.usrCoords,r=n[3].coords.usrCoords,s=n[2].coords.usrCoords,(i[1]-s[1])*(i[2]-r[2])-(i[2]-s[2])*(i[1]-r[1])<0?(this.radiuspoint=n[1],this.anglepoint=n[2]):(this.radiuspoint=n[2],this.anglepoint=n[1])),a=a.coords.usrCoords,l=l.coords.usrCoords,u=u.coords.usrCoords,t=geometry.A.bezierArc(a,l,u,!1,o),this.dataX=t[0],this.dataY=t[1],this.bezierDegree=3,this.updateStdform(),this.updateQuadraticform()},r.Radius=function(){return this.radiuspoint.Dist(this.center)},r.getRadius=function(){return jxg.A.deprecated("Arc.getRadius()","Arc.Radius()"),this.Radius()},r.Value=function(t,e){var i;return e=e||geometry.A.rad(this.radiuspoint,this.center,this.anglepoint),""===(t=(t=t||"length").toLocaleLowerCase())||0===t.indexOf("len")?i=e*this.Radius():0===t.indexOf("rad")?i=e:0===t.indexOf("deg")?i=180*e/Math.PI:0===t.indexOf("sem")?i=e/Math.PI:0===t.indexOf("cir")&&(i=.5*e/Math.PI),i},r.L=function(){return this.Value("length")},r.hasPoint=function(t,e){var i,r,s,n,o,a,l,u=this.Radius();return utils_type.A.evaluate(this.visProp.hasinnerpoints)?this.hasPointSector(t,e):(utils_type.A.isObject(utils_type.A.evaluate(this.visProp.precision))?(l=this.board._inputDevice,a=utils_type.A.evaluate(this.visProp.precision[l])):a=this.board.options.precision.hasPoint,a/=Math.min(Math.abs(this.board.unitX),Math.abs(this.board.unitY)),r=new base_coords.A(constants.A.COORDS_BY_SCREEN,[t,e],this.board),this.transformations.length>0&&(this.updateTransformMatrix(),n=math.A.inverse(this.transformMat),o=math.A.matVecMult(n,r.usrCoords),r=new base_coords.A(constants.A.COORDS_BY_USER,o,this.board)),i=this.center.coords.distance(constants.A.COORDS_BY_USER,r),(s=Math.abs(i-u)<a)&&(s=geometry.A.coordsOnArc(this,r)),s)},r.hasPointSector=function(t,e){var i=new base_coords.A(constants.A.COORDS_BY_SCREEN,[t,e],this.board),r=this.Radius(),s=this.center.coords.distance(constants.A.COORDS_BY_USER,i)<r;return s&&(s=geometry.A.coordsOnArc(this,i)),s},r.getTextAnchor=function(){return this.center.coords},r.getLabelAnchor=function(){var t,e,i,r,s,n=geometry.A.rad(this.radiuspoint,this.center,this.anglepoint),o=10/this.board.unitX,a=10/this.board.unitY,l=this.point2.coords.usrCoords,u=this.center.coords.usrCoords,c=l[1]-u[1],h=l[2]-u[2],d=utils_type.A.evaluate(this.visProp.selection),p=this.label?this.label.visProp:this.visProp.label;return("minor"===d&&n>Math.PI||"major"===d&&n<Math.PI)&&(n=-(2*Math.PI-n)),i=(t=new base_coords.A(constants.A.COORDS_BY_USER,[u[1]+Math.cos(.5*n)*c-Math.sin(.5*n)*h,u[2]+Math.sin(.5*n)*c+Math.cos(.5*n)*h],this.board)).usrCoords[1]-u[1],r=t.usrCoords[2]-u[2],i=i*((s=math.A.hypot(i,r))+o)/s,r=r*(s+a)/s,e=[u[1]+i,u[2]+r],p.position=geometry.A.calcLabelQuadrant(geometry.A.rad([1,0],[0,0],e)),new base_coords.A(constants.A.COORDS_BY_USER,e,this.board)},r.updateQuadraticform=circle.prototype.updateQuadraticform,r.updateStdform=circle.prototype.updateStdform,r.methodMap=jxg.A.deepCopy(r.methodMap,{getRadius:"getRadius",radius:"Radius",Radius:"Radius",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",Value:"Value",L:"L"}),r.prepareUpdate().update(),r},jxg.A.registerElement("arc",jxg.A.createArc),jxg.A.createSemicircle=function(t,e,i){var r,s,n,o;if(!1===(o=utils_type.A.providePoints(t,e,i,"point"))||2!==o.length)throw new Error("JSXGraph: Can't create Semicircle with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point]");return n=utils_type.A.copyAttributes(i,t.options,"semicircle","center"),(s=t.create("midpoint",o,n)).dump=!1,n=utils_type.A.copyAttributes(i,t.options,"semicircle"),(r=t.create("arc",[s,o[1],o[0]],n)).elType="semicircle",r.setParents([o[0].id,o[1].id]),r.subs={midpoint:s},r.inherits.push(s),r.midpoint=r.center=s,r},jxg.A.registerElement("semicircle",jxg.A.createSemicircle),jxg.A.createCircumcircleArc=function(t,e,i){var r,s,n,o;if(!1===(o=utils_type.A.providePoints(t,e,i,"point"))||3!==o.length)throw new Error("JSXGraph: create Circumcircle Arc with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point]");return n=utils_type.A.copyAttributes(i,t.options,"circumcirclearc","center"),(s=t.create("circumcenter",o,n)).dump=!1,(n=utils_type.A.copyAttributes(i,t.options,"circumcirclearc")).usedirection=!0,(r=t.create("arc",[s,o[0],o[2],o[1]],n)).elType="circumcirclearc",r.setParents([o[0].id,o[1].id,o[2].id]),r.subs={center:s},r.inherits.push(s),r.center=s,r},jxg.A.registerElement("circumcirclearc",jxg.A.createCircumcircleArc),jxg.A.createMinorArc=function(t,e,i){return i.selection="minor",jxg.A.createArc(t,e,i)},jxg.A.registerElement("minorarc",jxg.A.createMinorArc),jxg.A.createMajorArc=function(t,e,i){return i.selection="major",jxg.A.createArc(t,e,i)},jxg.A.registerElement("majorarc",jxg.A.createMajorArc),jxg.A.createSector=function(t,e,i){var r,s,n,o,a,l,u="invalid";if(e[0].elementClass===constants.A.OBJECT_CLASS_LINE&&e[1].elementClass===constants.A.OBJECT_CLASS_LINE&&(utils_type.A.isArray(e[2])||utils_type.A.isNumber(e[2]))&&(utils_type.A.isArray(e[3])||utils_type.A.isNumber(e[3]))&&(utils_type.A.isNumber(e[4])||utils_type.A.isFunction(e[4])||utils_type.A.isString(e[4])))u="2lines";else{if(!1===(l=utils_type.A.providePoints(t,e,i,"sector",["center","radiusPoint","anglePoint"])))throw new Error("JSXGraph: Can't create Sector with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.");u="3points"}if(s=utils_type.A.copyAttributes(i,t.options,"sector"),(r=t.create("curve",[[0],[0]],s)).type=constants.A.OBJECT_TYPE_SECTOR,r.elType="sector",r.autoRadius=function(){var t=20/r.board.unitX,e=1/0,i=50/r.board.unitX;return utils_type.A.isPoint(r.center)&&(e=.3333*r.center.Dist(r.point2)),Math.max(t,Math.min(e,i))},"2lines"===u)r.Radius=function(){var t=utils_type.A.evaluate(e[4]);return"auto"===t?this.autoRadius():t},r.line1=t.select(e[0]),r.line2=t.select(e[1]),r.line1.addChild(r),r.line2.addChild(r),r.setParents(e),r.point1={visProp:{}},r.point2={visProp:{}},r.point3={visProp:{}},o=geometry.A.meetLineLine(r.line1.stdform,r.line2.stdform,0,t),utils_type.A.isArray(e[2])?(2===e[2].length&&(e[2]=[1].concat(e[2])),a=geometry.A.projectPointToLine({coords:{usrCoords:e[2]}},r.line1,t),a=statistics.A.subtract(a.usrCoords,o.usrCoords),r.direction1=math.A.innerProduct(a,[0,r.line1.stdform[2],-r.line1.stdform[1]],3)>=0?1:-1):r.direction1=e[2]>=0?1:-1,utils_type.A.isArray(e[3])?(2===e[3].length&&(e[3]=[1].concat(e[3])),a=geometry.A.projectPointToLine({coords:{usrCoords:e[3]}},r.line2,t),a=statistics.A.subtract(a.usrCoords,o.usrCoords),r.direction2=math.A.innerProduct(a,[0,r.line2.stdform[2],-r.line2.stdform[1]],3)>=0?1:-1):r.direction2=e[3]>=0?1:-1,r.methodMap=jxg.A.deepCopy(r.methodMap,{arc:"arc",center:"center",line1:"line1",line2:"line2"}),r.updateDataArray=function(){var t,e,i,s,n,o,a=[0,0,0];if(e=this.line1,i=this.line2,a=math.A.crossProduct(e.stdform,i.stdform),Math.abs(a[0])>math.A.eps*math.A.eps&&(a[1]/=a[0],a[2]/=a[0],a[0]/=a[0]),t=this.direction1*this.Radius(),s=statistics.A.add(a,[0,t*e.stdform[2],-t*e.stdform[1]]),t=this.direction2*this.Radius(),n=statistics.A.add(a,[0,t*i.stdform[2],-t*i.stdform[1]]),this.point2.coords=new base_coords.A(constants.A.COORDS_BY_USER,s,r.board),this.point1.coords=new base_coords.A(constants.A.COORDS_BY_USER,a,r.board),this.point3.coords=new base_coords.A(constants.A.COORDS_BY_USER,n,r.board),Math.abs(s[0])<math.A.eps||Math.abs(a[0])<math.A.eps||Math.abs(n[0])<math.A.eps)return this.dataX=[NaN],void(this.dataY=[NaN]);o=geometry.A.bezierArc(s,a,n,!0,1),this.dataX=o[0],this.dataY=o[1],this.bezierDegree=3};else if("3points"===u){for(r.point1=l[0],r.point2=l[1],r.point3=l[2],n=0;n<3;n++)utils_type.A.exists(l[n]._is_new)?(r.addChild(l[n]),delete l[n]._is_new):l[n].addChild(r);r.useDirection=i.usedirection,r.setParents(l),utils_type.A.exists(l[3])&&(r.point4=l[3],r.point4.addChild(r)),r.methodMap=jxg.A.deepCopy(r.methodMap,{arc:"arc",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint"}),r.updateDataArray=function(){var t,e,i,r,s,n=this.point2,o=this.point1,a=this.point3,l=1,u=utils_type.A.evaluate(this.visProp.selection);if(!n.isReal||!o.isReal||!a.isReal)return this.dataX=[NaN],void(this.dataY=[NaN]);s=geometry.A.rad(n,o,a),("minor"===u&&s>Math.PI||"major"===u&&s<Math.PI)&&(l=-1),this.useDirection&&utils_type.A.exists(this.point4)&&(e=this.point2.coords.usrCoords,i=this.point4.coords.usrCoords,r=this.point3.coords.usrCoords,(e[1]-r[1])*(e[2]-i[2])-(e[2]-r[2])*(e[1]-i[1])>=0&&(a=this.point2,n=this.point3)),n=n.coords.usrCoords,o=o.coords.usrCoords,a=a.coords.usrCoords,t=geometry.A.bezierArc(n,o,a,!0,l),this.dataX=t[0],this.dataY=t[1],this.bezierDegree=3},r.Radius=function(){return this.point2.Dist(this.point1)}}return r.center=r.point1,r.radiuspoint=r.point2,r.anglepoint=r.point3,s=utils_type.A.copyAttributes(i,t.options,"arc"),(s=utils_type.A.copyAttributes(s,t.options,"sector","arc")).withLabel=!1,s.selection=r.visProp.selection,s.name+="_arc","2lines"===u?(r.updateDataArray(),r.arc=t.create("arc",[function(){return r.point1.coords.usrCoords},function(){var t=r.point2.coords.distance(constants.A.COORDS_BY_USER,r.point1.coords);return 0===t?[r.point1.coords.usrCoords[1],r.point1.coords.usrCoords[2]]:[r.point1.coords.usrCoords[1]+r.Radius()*(r.point2.coords.usrCoords[1]-r.point1.coords.usrCoords[1])/t,r.point1.coords.usrCoords[2]+r.Radius()*(r.point2.coords.usrCoords[2]-r.point1.coords.usrCoords[2])/t]},function(){return r.point3.coords.usrCoords}],s)):r.arc=t.create("arc",[r.point1,function(){var t=r.point2.Dist(r.point1);return 0===t?[r.point1.X(),r.point1.Y()]:[r.point1.X()+r.Radius()*(r.point2.X()-r.point1.X())/t,r.point1.Y()+r.Radius()*(r.point2.Y()-r.point1.Y())/t]},r.point3],s),r.addChild(r.arc),r.hasPointCurve=function(t,e){var i,r,s,n,o,a,l=new base_coords.A(constants.A.COORDS_BY_SCREEN,[t,e],this.board),u=this.Radius(),c=this.center.coords.distance(constants.A.COORDS_BY_USER,l),h=utils_type.A.evaluate(this.visProp.selection);return utils_type.A.isObject(utils_type.A.evaluate(this.visProp.precision))?(o=this.board._inputDevice,n=utils_type.A.evaluate(this.visProp.precision[o])):n=this.board.options.precision.hasPoint,n/=Math.min(Math.abs(this.board.unitX),Math.abs(this.board.unitY)),(a=Math.abs(c-u)<n)&&(i=geometry.A.rad(this.point2,this.center,l.usrCoords.slice(1)),r=0,s=geometry.A.rad(this.point2,this.center,this.point3),("minor"===h&&s>Math.PI||"major"===h&&s<Math.PI)&&(r=s,s=2*Math.PI),(i<r||i>s)&&(a=!1)),a},r.hasPointSector=function(t,e){var i,r,s,n=new base_coords.A(constants.A.COORDS_BY_SCREEN,[t,e],this.board),o=this.Radius(),a=this.point1.coords.distance(constants.A.COORDS_BY_USER,n)<o,l=utils_type.A.evaluate(this.visProp.selection);return a&&(i=geometry.A.rad(this.radiuspoint,this.center,n.usrCoords.slice(1)),r=0,s=geometry.A.rad(this.radiuspoint,this.center,this.anglepoint),("minor"===l&&s>Math.PI||"major"===l&&s<Math.PI)&&(r=s,s=2*Math.PI),(i<r||i>s)&&(a=!1)),a},r.hasPoint=function(t,e){return utils_type.A.evaluate(this.visProp.highlightonsector)||utils_type.A.evaluate(this.visProp.hasinnerpoints)?this.hasPointSector(t,e):this.hasPointCurve(t,e)},r.getTextAnchor=function(){return this.point1.coords},r.getLabelAnchor=function(){var t,e,i,r,s,n=geometry.A.rad(this.point2,this.point1,this.point3),o=13/this.board.unitX,a=13/this.board.unitY,l=this.point2.coords.usrCoords,u=this.point1.coords.usrCoords,c=l[1]-u[1],h=l[2]-u[2],d=utils_type.A.evaluate(this.visProp.selection),p=this.label?this.label.visProp:this.visProp.label;return("minor"===d&&n>Math.PI||"major"===d&&n<Math.PI)&&(n=-(2*Math.PI-n)),i=(t=new base_coords.A(constants.A.COORDS_BY_USER,[u[1]+Math.cos(.5*n)*c-Math.sin(.5*n)*h,u[2]+Math.sin(.5*n)*c+Math.cos(.5*n)*h],this.board)).usrCoords[1]-u[1],r=t.usrCoords[2]-u[2],i=i*((s=math.A.hypot(i,r))+o)/s,r=r*(s+a)/s,e=[u[1]+i,u[2]+r],p.position=geometry.A.calcLabelQuadrant(geometry.A.rad([1,0],[0,0],e)),new base_coords.A(constants.A.COORDS_BY_USER,e,this.board)},r.setRadius=function(t){var e=utils_type.A.evaluate(t);"undefined"!==("auto"===t||"auto"===e?"auto":utils_type.A.isNumber(t)?"number":utils_type.A.isFunction(t)&&!utils_type.A.isString(e)?"function":"undefined")&&(this.visProp.radius=t),r.Radius=function(){var e=utils_type.A.evaluate(t);return"auto"===e?this.autoRadius():e}},r.getRadius=function(){return jxg.A.deprecated("Sector.getRadius()","Sector.Radius()"),this.Radius()},r.Value=function(t){return this.arc.Value(t)},r.L=function(){return this.arc.L()},r.Area=function(){var t=this.Radius();return.5*t*t*this.Value("radians")},r.Perimeter=function(){return this.L()+2*this.Radius()},"3points"===u&&(r.setPositionDirectly=function(t,e,i){var s,n=new base_coords.A(t,e,this.board),o=new base_coords.A(t,i,this.board);return r.point1.draggable()&&r.point2.draggable()&&r.point3.draggable()?(s=statistics.A.subtract(n.usrCoords,o.usrCoords),this.board.create("transform",s.slice(1),{type:"translate"}).applyOnce([r.point1,r.point2,r.point3]),this):this}),r.methodMap=jxg.A.deepCopy(r.methodMap,{radius:"Radius",Radius:"Radius",getRadius:"Radius",setRadius:"setRadius",Value:"Value",L:"L",Area:"Area",Perimeter:"Perimeter"}),r},jxg.A.registerElement("sector",jxg.A.createSector),jxg.A.createCircumcircleSector=function(t,e,i){var r,s,n,o;if(!1===(o=utils_type.A.providePoints(t,e,i,"point")))throw new Error("JSXGraph: Can't create circumcircle sector with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.");return(s=t.create("circumcenter",o.slice(0,3),n)).dump=!1,n=utils_type.A.copyAttributes(i,t.options,"circumcirclesector"),(r=t.create("sector",[s,o[0],o[2],o[1]],n)).elType="circumcirclesector",r.setParents(o),r.center=s,r.subs={center:s},r},jxg.A.registerElement("circumcirclesector",jxg.A.createCircumcircleSector),jxg.A.createMinorSector=function(t,e,i){return i.selection="minor",jxg.A.createSector(t,e,i)},jxg.A.registerElement("minorsector",jxg.A.createMinorSector),jxg.A.createMajorSector=function(t,e,i){return i.selection="major",jxg.A.createSector(t,e,i)},jxg.A.registerElement("majorsector",jxg.A.createMajorSector),jxg.A.createAngle=function(t,e,i){var r,s,n,o,a,l,u="invalid";if(e[0].elementClass===constants.A.OBJECT_CLASS_LINE&&e[1].elementClass===constants.A.OBJECT_CLASS_LINE&&(utils_type.A.isArray(e[2])||utils_type.A.isNumber(e[2]))&&(utils_type.A.isArray(e[3])||utils_type.A.isNumber(e[3])))u="2lines";else{if(n={name:""},!1===(l=utils_type.A.providePoints(t,e,n,"point")))throw new Error("JSXGraph: Can't create angle with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.");u="3points"}if(n=utils_type.A.copyAttributes(i,t.options,"angle"),utils_type.A.exists(n.name)&&""!==n.name||(n.name=t.generateName({type:constants.A.OBJECT_TYPE_ANGLE})),s=utils_type.A.exists(n.radius)?n.radius:0,t.suspendUpdate(),"2lines"===u?(e.push(s),(r=t.create("sector",e,n)).updateDataArraySector=r.updateDataArray,r.setAngle=function(t){},r.free=function(t){}):((r=t.create("sector",[l[1],l[0],l[2]],n)).arc.visProp.priv=!0,r.point=r.point2=r.radiuspoint=l[0],r.pointsquare=r.point3=r.anglepoint=l[2],r.Radius=function(){var t=utils_type.A.evaluate(s);return"auto"===t?r.autoRadius():t},r.updateDataArraySector=function(){var t,e,i=this.point2,r=this.point1,s=this.point3,n=this.Radius(),o=r.Dist(i),a=1,l=utils_type.A.evaluate(this.visProp.selection);e=geometry.A.rad(i,r,s),("minor"===l&&e>Math.PI||"major"===l&&e<Math.PI)&&(a=-1),i=i.coords.usrCoords,r=r.coords.usrCoords,s=s.coords.usrCoords,i=[1,r[1]+(i[1]-r[1])*n/o,r[2]+(i[2]-r[2])*n/o],s=[1,r[1]+(s[1]-r[1])*n/o,r[2]+(s[2]-r[2])*n/o],t=geometry.A.bezierArc(i,r,s,!0,a),this.dataX=t[0],this.dataY=t[1],this.bezierDegree=3},r.setAngle=function(t){var e,i,r,s=this.anglepoint,n=this.radiuspoint;return s.draggable()&&(e=this.board.create("transform",[t,this.center],{type:"rotate"}),s.addTransform(n,e),e.update(),s.moveTo(math.A.matVecMult(e.matrix,n.coords.usrCoords)),r=utils_type.A.isFunction(t)?function(){return 2*Math.PI-t()}:function(){return 2*Math.PI-t},i=this.board.create("transform",[r,this.center],{type:"rotate"}),s.coords.on("update",(function(){i.update(),n.moveTo(math.A.matVecMult(i.matrix,s.coords.usrCoords))})),s.setParents(n),this.hasFixedAngle=!0),this},r.free=function(){var t=this.anglepoint;return t.transformations.length>0&&(t.transformations.pop(),t.isDraggable=!0,t.parents=[],t.coords.off("update")),this.hasFixedAngle=!1,this},r.setParents(l)),utils_type.A.exists(r.visProp.text)&&r.label.setText(utils_type.A.evaluate(r.visProp.text)),r.elType="angle",r.type=constants.A.OBJECT_TYPE_ANGLE,r.subs={},r.updateDataArraySquare=function(){var t,e,i,r,s,n,o,a,l=this.Radius();"2lines"===u&&this.updateDataArraySector(),t=this.point2,e=this.point1,i=this.point3,t=t.coords.usrCoords,e=e.coords.usrCoords,i=i.coords.usrCoords,r=geometry.A.distance(t,e,3),s=geometry.A.distance(i,e,3),t=[1,e[1]+(t[1]-e[1])*l/r,e[2]+(t[2]-e[2])*l/r],i=[1,e[1]+(i[1]-e[1])*l/s,e[2]+(i[2]-e[2])*l/s],n=math.A.crossProduct(i,e),o=[-t[1]*n[1]-t[2]*n[2],t[0]*n[1],t[0]*n[2]],n=math.A.crossProduct(t,e),a=[-i[1]*n[1]-i[2]*n[2],i[0]*n[1],i[0]*n[2]],(n=math.A.crossProduct(o,a))[1]/=n[0],n[2]/=n[0],this.dataX=[e[1],t[1],n[1],i[1],e[1]],this.dataY=[e[2],t[2],n[2],i[2],e[2]],this.bezierDegree=1},r.updateDataArrayNone=function(){this.dataX=[NaN],this.dataY=[NaN],this.bezierDegree=1},r.updateDataArray=function(){var t=utils_type.A.evaluate(this.visProp.type),e=geometry.A.trueAngle(this.point2,this.point1,this.point3),i=utils_type.A.evaluate(this.visProp.selection);("minor"===i&&e>180||"major"===i&&e<180)&&(e=360-e),Math.abs(e-90)<utils_type.A.evaluate(this.visProp.orthosensitivity)+math.A.eps&&(t=utils_type.A.evaluate(this.visProp.orthotype)),"none"===t?this.updateDataArrayNone():"square"===t?this.updateDataArraySquare():"sector"===t?this.updateDataArraySector():"sectordot"===t&&(this.updateDataArraySector(),this.dot.visProp.visible||this.dot.setAttribute({visible:!0})),(!this.visProp.visible||"sectordot"!==t&&this.dot.visProp.visible)&&this.dot.setAttribute({visible:!1})},o=utils_type.A.copyAttributes(i,t.options,"angle","dot"),r.dot=t.create("point",[function(){var t,e,i,s,n,o,a,l,u;return utils_type.A.exists(r.dot)&&!r.dot.visProp.visible?[0,0]:(t=r.point2.coords.usrCoords,e=r.point1.coords.usrCoords,i=r.Radius(),s=geometry.A.distance(t,e,3),n=geometry.A.rad(r.point2,r.point1,r.point3),("minor"===(u=utils_type.A.evaluate(r.visProp.selection))&&n>Math.PI||"major"===u&&n<Math.PI)&&(n=-(2*Math.PI-n)),n*=.5,o=Math.cos(n),a=Math.sin(n),t=[1,e[1]+(t[1]-e[1])*i/s,e[2]+(t[2]-e[2])*i/s],l=[[1,0,0],[e[1]-.5*e[1]*o+.5*e[2]*a,.5*o,.5*-a],[e[2]-.5*e[1]*a-.5*e[2]*o,.5*a,.5*o]],math.A.matVecMult(l,t))}],o),r.dot.dump=!1,r.subs.dot=r.dot,"2lines"===u)for(a=0;a<2;a++)t.select(e[a]).addChild(r.dot);else for(a=0;a<3;a++)t.select(l[a]).addChild(r.dot);return t.unsuspendUpdate(),r.Value=function(t){return""===(t=t||"radians")&&(t="radians"),r.arc.Value(t)},r.getLabelAnchor=function(){var t,e,i,s,n,o,a,l,u,c=12,h=utils_type.A.evaluate(r.visProp.selection),d=this.label?this.label.visProp:this.visProp.label;return utils_type.A.exists(this.label)&&utils_type.A.exists(this.label.visProp.fontsize)&&(c=utils_type.A.evaluate(this.label.visProp.fontsize)),c/=this.board.unitX,e=r.point2.coords.usrCoords,i=r.point1.coords.usrCoords,s=r.Radius(),n=geometry.A.distance(e,i,3),o=geometry.A.rad(r.point2,r.point1,r.point3),("minor"===h&&o>Math.PI||"major"===h&&o<Math.PI)&&(o=-(2*Math.PI-o)),o*=.5,a=Math.cos(o),l=Math.sin(o),e=[1,i[1]+(e[1]-i[1])*s/n,i[2]+(e[2]-i[2])*s/n],u=[[1,0,0],[i[1]-.5*i[1]*a+.5*i[2]*l,.5*a,.5*-l],[i[2]-.5*i[1]*l-.5*i[2]*a,.5*l,.5*a]],(t=math.A.matVecMult(u,e))[1]/=t[0],t[2]/=t[0],t[0]/=t[0],n=geometry.A.distance(t,i,3),t=[t[0],i[1]+(t[1]-i[1])*(s+c)/n,i[2]+(t[2]-i[2])*(s+c)/n],d.position=geometry.A.calcLabelQuadrant(geometry.A.rad([1,0],[0,0],t)),new base_coords.A(constants.A.COORDS_BY_USER,t,this.board)},r.methodMap=utils_type.A.deepCopy(r.methodMap,{setAngle:"setAngle",Value:"Value",free:"free"}),r},jxg.A.registerElement("angle",jxg.A.createAngle),jxg.A.createNonreflexAngle=function(t,e,i){var r;return i.selection="minor",i=utils_type.A.copyAttributes(i,t.options,"nonreflexangle"),(r=jxg.A.createAngle(t,e,i)).Value=function(t){var e=geometry.A.rad(this.point2,this.point1,this.point3);return""===(t=t||"radians")&&(t="radians"),e=e<Math.PI?e:2*Math.PI-e,this.arc.Value(t,e)},r},jxg.A.registerElement("nonreflexangle",jxg.A.createNonreflexAngle),jxg.A.createReflexAngle=function(t,e,i){var r;return i.selection="major",i=utils_type.A.copyAttributes(i,t.options,"reflexangle"),(r=jxg.A.createAngle(t,e,i)).Value=function(t){var e=geometry.A.rad(this.point2,this.point1,this.point3);return""===(t=t||"radians")&&(t="radians"),e=e>=Math.PI?e:2*Math.PI-e,this.arc.Value(t,e)},r},jxg.A.registerElement("reflexangle",jxg.A.createReflexAngle),jxg.A.createOrthogonalProjection=function(t,e,i){var r,s,n,o;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),utils_type.A.isPointType(t,e[0])&&e[1].elementClass===constants.A.OBJECT_CLASS_LINE)s=utils_type.A.providePoints(t,[e[0]],i,"point")[0],r=e[1];else{if(!utils_type.A.isPointType(t,e[1])||e[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,line]");s=utils_type.A.providePoints(t,[e[1]],i,"point")[0],r=e[0]}return o=utils_type.A.copyAttributes(i,t.options,"orthogonalprojection"),n=t.create("point",[function(){return geometry.A.projectPointToLine(s,r,t)}],o),utils_type.A.exists(s._is_new)?(n.addChild(s),delete s._is_new):s.addChild(n),r.addChild(n),n.elType="orthogonalprojection",n.setParents([s.id,n.id]),n.update(),n.generatePolynomial=function(){var t=r.point1.symbolic.x,e=r.point1.symbolic.y,i=r.point2.symbolic.x,o=r.point2.symbolic.y,a=s.symbolic.x,l=s.symbolic.y,u=n.symbolic.x,c=n.symbolic.y;return["("+e+")*("+u+")-("+e+")*("+i+")+("+c+")*("+i+")-("+t+")*("+c+")+("+t+")*("+o+")-("+u+")*("+o+")","("+l+")*("+e+")-("+l+")*("+o+")-("+c+")*("+e+")+("+c+")*("+o+")+("+a+")*("+t+")-("+a+")*("+i+")-("+u+")*("+t+")+("+u+")*("+i+")"]},n},jxg.A.createPerpendicular=function(t,e,i){var r,s,n,o;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),utils_type.A.isPointType(t,e[0])&&e[1].elementClass===constants.A.OBJECT_CLASS_LINE)s=e[1],r=utils_type.A.providePoints(t,[e[0]],i,"point")[0];else{if(!utils_type.A.isPointType(t,e[1])||e[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [line,point]");s=e[0],r=utils_type.A.providePoints(t,[e[1]],i,"point")[0]}return o=utils_type.A.copyAttributes(i,t.options,"perpendicular"),(n=jxg.A.createLine(t,[function(){return s.stdform[2]*r.X()-s.stdform[1]*r.Y()},function(){return-s.stdform[2]*r.Z()},function(){return s.stdform[1]*r.Z()}],o)).elType="perpendicular",n.setParents([s.id,r.id]),utils_type.A.exists(r._is_new)?(n.addChild(r),delete r._is_new):r.addChild(n),s.addChild(n),n},jxg.A.createPerpendicularPoint=function(t,e,i){var r,s,n;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),utils_type.A.isPointType(t,e[0])&&e[1].elementClass===constants.A.OBJECT_CLASS_LINE)s=utils_type.A.providePoints(t,[e[0]],i,"point")[0],r=e[1];else{if(!utils_type.A.isPointType(t,e[1])||e[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,line]");s=utils_type.A.providePoints(t,[e[1]],i,"point")[0],r=e[0]}return n=t.create("point",[function(){return geometry.A.perpendicular(r,s,t)[0]}],i),utils_type.A.exists(s._is_new)?(n.addChild(s),delete s._is_new):s.addChild(n),r.addChild(n),n.elType="perpendicularpoint",n.setParents([s.id,r.id]),n.update(),n.generatePolynomial=function(){var t=r.point1.symbolic.x,e=r.point1.symbolic.y,i=r.point2.symbolic.x,o=r.point2.symbolic.y,a=s.symbolic.x,l=s.symbolic.y,u=n.symbolic.x,c=n.symbolic.y;return["("+e+")*("+u+")-("+e+")*("+i+")+("+c+")*("+i+")-("+t+")*("+c+")+("+t+")*("+o+")-("+u+")*("+o+")","("+l+")*("+e+")-("+l+")*("+o+")-("+c+")*("+e+")+("+c+")*("+o+")+("+a+")*("+t+")-("+a+")*("+i+")-("+u+")*("+t+")+("+u+")*("+i+")"]},n},jxg.A.createPerpendicularSegment=function(t,e,i){var r,s,n,o,a;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),utils_type.A.isPointType(t,e[0])&&e[1].elementClass===constants.A.OBJECT_CLASS_LINE)s=e[1],r=utils_type.A.providePoints(t,[e[0]],i,"point")[0];else{if(!utils_type.A.isPointType(t,e[1])||e[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [line,point]");s=e[0],r=utils_type.A.providePoints(t,[e[1]],i,"point")[0]}return a=utils_type.A.copyAttributes(i,t.options,"perpendicularsegment","point"),(o=jxg.A.createPerpendicularPoint(t,[s,r],a)).dump=!1,utils_type.A.exists(i.layer)||(i.layer=t.options.layer.line),a=utils_type.A.copyAttributes(i,t.options,"perpendicularsegment"),(n=jxg.A.createLine(t,[function(){return geometry.A.perpendicular(s,r,t)[1]?[o,r]:[r,o]}],a)).point=o,utils_type.A.exists(r._is_new)?(n.addChild(r),delete r._is_new):r.addChild(n),s.addChild(n),n.elType="perpendicularsegment",n.setParents([r.id,s.id]),n.subs={point:o},n.inherits.push(o),n},jxg.A.createMidpoint=function(t,e,i){var r,s,n,o,a;for(o=0;o<e.length;++o)e[o]=t.select(e[o]);if(2===e.length&&utils_type.A.isPointType(t,e[0])&&utils_type.A.isPointType(t,e[1]))e=utils_type.A.providePoints(t,e,i,"point"),r=e[0],s=e[1];else{if(1!==e.length||e[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create midpoint.\nPossible parent types: [point,point], [line]");r=e[0].point1,s=e[0].point2}return a=utils_type.A.copyAttributes(i,t.options,"midpoint"),n=t.create("point",[function(){var t=r.coords.usrCoords[1]+s.coords.usrCoords[1];return isNaN(t)||Math.abs(r.coords.usrCoords[0])<math.A.eps||Math.abs(s.coords.usrCoords[0])<math.A.eps?NaN:.5*t},function(){var t=r.coords.usrCoords[2]+s.coords.usrCoords[2];return isNaN(t)||Math.abs(r.coords.usrCoords[0])<math.A.eps||Math.abs(s.coords.usrCoords[0])<math.A.eps?NaN:.5*t}],a),utils_type.A.exists(r._is_new)?(n.addChild(r),delete r._is_new):r.addChild(n),utils_type.A.exists(s._is_new)?(n.addChild(s),delete s._is_new):s.addChild(n),n.elType="midpoint",n.setParents([r.id,s.id]),n.prepareUpdate().update(),n.generatePolynomial=function(){var t=r.symbolic.x,e=r.symbolic.y,i=s.symbolic.x,o=s.symbolic.y,a=n.symbolic.x,l=n.symbolic.y;return["("+e+")*("+a+")-("+e+")*("+i+")+("+l+")*("+i+")-("+t+")*("+l+")+("+t+")*("+o+")-("+a+")*("+o+")","("+t+")^2 - 2*("+t+")*("+a+")+("+e+")^2-2*("+e+")*("+l+")-("+i+")^2+2*("+i+")*("+a+")-("+o+")^2+2*("+o+")*("+l+")"]},n},jxg.A.createParallelPoint=function(t,e,i){var r,s,n,o,a,l;for(a=0;a<e.length;++a)e[a]=t.select(e[a]);if(3===e.length&&utils_type.A.isPointType(t,e[0])&&utils_type.A.isPointType(t,e[1])&&utils_type.A.isPointType(t,e[2]))e=utils_type.A.providePoints(t,e,i,"point"),r=e[0],s=e[1],n=e[2];else if(utils_type.A.isPointType(t,e[0])&&e[1].elementClass===constants.A.OBJECT_CLASS_LINE)n=utils_type.A.providePoints(t,[e[0]],i,"point")[0],r=e[1].point1,s=e[1].point2;else{if(!utils_type.A.isPointType(t,e[1])||e[0].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create parallel point with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [line,point], [point,point,point]");n=utils_type.A.providePoints(t,[e[1]],i,"point")[0],r=e[0].point1,s=e[0].point2}return l=utils_type.A.copyAttributes(i,t.options,"parallelpoint"),o=t.create("point",[function(){return n.coords.usrCoords[1]+s.coords.usrCoords[1]-r.coords.usrCoords[1]},function(){return n.coords.usrCoords[2]+s.coords.usrCoords[2]-r.coords.usrCoords[2]}],l),utils_type.A.exists(r._is_new)?(o.addChild(r),delete r._is_new):r.addChild(o),utils_type.A.exists(s._is_new)?(o.addChild(s),delete s._is_new):s.addChild(o),utils_type.A.exists(n._is_new)?(o.addChild(n),delete n._is_new):n.addChild(o),o.elType="parallelpoint",o.setParents([r.id,s.id,n.id]),o.prepareUpdate().update(),o.generatePolynomial=function(){var t=r.symbolic.x,e=r.symbolic.y,i=s.symbolic.x,a=s.symbolic.y,l=n.symbolic.x,u=n.symbolic.y,c=o.symbolic.x,h=o.symbolic.y;return["("+a+")*("+c+")-("+a+")*("+l+")-("+e+")*("+c+")+("+e+")*("+l+")-("+h+")*("+i+")+("+h+")*("+t+")+("+u+")*("+i+")-("+u+")*("+t+")","("+h+")*("+t+")-("+h+")*("+l+")-("+a+")*("+t+")+("+a+")*("+l+")-("+c+")*("+e+")+("+c+")*("+u+")+("+i+")*("+e+")-("+i+")*("+u+")"]},o},jxg.A.createParallel=function(t,e,i){var r,s,n,o,a,l,u=1;for(a=0;a<e.length;++a)e[a]=t.select(e[a]);return r=null,3===e.length?(r=(e=utils_type.A.providePoints(t,e,i,"point"))[2],u=0):utils_type.A.isPointType(t,e[0])?(r=utils_type.A.providePoints(t,[e[0]],i,"point")[0],o=function(){return e[1].stdform}):utils_type.A.isPointType(t,e[1])&&(r=utils_type.A.providePoints(t,[e[1]],i,"point")[0],o=function(){return e[0].stdform}),utils_type.A.exists(i.layer)||(i.layer=t.options.layer.line),l=utils_type.A.copyAttributes(i,t.options,"parallel","point"),(s=1===u?t.create("point",[function(){return math.A.crossProduct([1,0,0],o())}],l):t.create("parallelpoint",e,l)).isDraggable=!0,l=utils_type.A.copyAttributes(i,t.options,"parallel"),(n=t.create("line",[r,s],l)).elType="parallel",n.subs={point:s},n.inherits.push(s),n.setParents([e[0].id,e[1].id]),3===e.length&&n.addParents(e[2].id),n.point=s,n},jxg.A.createArrowParallel=function(t,i,r){var s,n;try{return!1===(n=utils_type.A.copyAttributes(r,t.options,"arrowparallel")).lastArrow&&(n.lastArrow=!0),(s=jxg.A.createParallel(t,i,n).setAttribute({straightFirst:!1,straightLast:!1})).type=constants.A.OBJECT_TYPE_VECTOR,s.elType="arrowparallel",s}catch(e){throw new Error("JSXGraph: Can't create arrowparallel with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [line,point], [point,point,point]")}},jxg.A.createNormal=function(t,e,i){var r,s,n,o,a,l,u,c,h;for(o=0;o<e.length;++o)e[o]=t.select(e[o]);if(1===e.length)r=e[0],s=r.slideObject;else{if(2!==e.length)throw new Error("JSXGraph: Can't create normal with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");if(utils_type.A.isPointType(t,e[0]))r=utils_type.A.providePoints(t,[e[0]],i,"point")[0],s=e[1];else{if(!utils_type.A.isPointType(t,e[1]))throw new Error("JSXGraph: Can't create normal with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");s=e[0],r=utils_type.A.providePoints(t,[e[1]],i,"point")[0]}}if(u=utils_type.A.copyAttributes(i,t.options,"normal"),s.elementClass===constants.A.OBJECT_CLASS_LINE)h=utils_type.A.copyAttributes(i,t.options,"normal","point"),c=t.create("point",[function(){var t=math.A.crossProduct([1,0,0],s.stdform);return[t[0],-t[2],t[1]]}],h),c.isDraggable=!0,(n=t.create("line",[r,c],u)).point=c,n.subs={point:c},n.inherits.push(c);else if(s.elementClass===constants.A.OBJECT_CLASS_CIRCLE)n=t.create("line",[s.midpoint,r],u);else if(s.elementClass===constants.A.OBJECT_CLASS_CURVE)"plot"!==utils_type.A.evaluate(s.visProp.curvetype)?(a=s.X,l=s.Y,n=t.create("line",[function(){return-r.X()*numerics.A.D(a)(r.position)-r.Y()*numerics.A.D(l)(r.position)},function(){return numerics.A.D(a)(r.position)},function(){return numerics.A.D(l)(r.position)}],u)):n=t.create("line",[function(){var t,e,i,n,o,a,l,u,c,h,d=Math.floor(r.position),p=r.position-d;if(1===s.bezierdegree)d===s.numberPoints-1&&(d-=1,p=1);else{if(3!==s.bezierDegree)return 0;d=3*Math.floor(r.position*(s.numberPoints-1)/3),i=(r.position*(s.numberPoints-1)-d)/3,d>=s.numberPoints-1&&(d=s.numberPoints-4,i=1)}return d<0?1:1===s.bezierDegree?(s.Y(d)+p*(s.Y(d+1)-s.Y(d)))*(s.Y(d)-s.Y(d+1))-(s.X(d)+p*(s.X(d+1)-s.X(d)))*(s.X(d+1)-s.X(d)):(n=s.points[d].usrCoords,o=s.points[d+1].usrCoords,a=s.points[d+2].usrCoords,l=s.points[d+3].usrCoords,u=(1-i)*(1-i)*(o[1]-n[1])+2*(1-i)*i*(a[1]-o[1])+i*i*(l[1]-a[1]),c=(1-i)*(1-i)*(o[2]-n[2])+2*(1-i)*i*(a[2]-o[2])+i*i*(l[2]-a[2]),u/=h=math.A.hypot(u,c),c/=h,e=[1,(t=r.coords.usrCoords)[1]-c,t[2]+u],t[2]*e[1]-t[1]*e[2])},function(){var t,e,i,n,o,a,l,u,c,h=Math.floor(r.position);if(1===s.bezierdegree)h===s.numberPoints-1&&(h-=1);else{if(3!==s.bezierDegree)return 0;h=3*Math.floor(r.position*(s.numberPoints-1)/3),e=(r.position*(s.numberPoints-1)-h)/3,h>=s.numberPoints-1&&(h=s.numberPoints-4,e=1)}return h<0?0:1===s.bezierDegree?s.X(h+1)-s.X(h):(i=s.points[h].usrCoords,n=s.points[h+1].usrCoords,o=s.points[h+2].usrCoords,a=s.points[h+3].usrCoords,l=(1-e)*(1-e)*(n[1]-i[1])+2*(1-e)*e*(o[1]-n[1])+e*e*(a[1]-o[1]),u=(1-e)*(1-e)*(n[2]-i[2])+2*(1-e)*e*(o[2]-n[2])+e*e*(a[2]-o[2]),l/=c=math.A.hypot(l,u),u/=c,[1,(t=r.coords.usrCoords)[1]-u,t[2]+l][2]-t[2])},function(){var t,e,i,n,o,a,l,u,c,h,d=Math.floor(r.position);if(1===s.bezierdegree)d===s.numberPoints-1&&(d-=1);else{if(3!==s.bezierDegree)return 0;d=3*Math.floor(r.position*(s.numberPoints-1)/3),i=(r.position*(s.numberPoints-1)-d)/3,d>=s.numberPoints-1&&(d=s.numberPoints-4,i=1)}return d<0?0:1===s.bezierDegree?s.Y(d+1)-s.Y(d):(n=s.points[d].usrCoords,o=s.points[d+1].usrCoords,a=s.points[d+2].usrCoords,l=s.points[d+3].usrCoords,u=(1-i)*(1-i)*(o[1]-n[1])+2*(1-i)*i*(a[1]-o[1])+i*i*(l[1]-a[1]),c=(1-i)*(1-i)*(o[2]-n[2])+2*(1-i)*i*(a[2]-o[2])+i*i*(l[2]-a[2]),u/=h=math.A.hypot(u,c),c/=h,e=[1,(t=r.coords.usrCoords)[1]-c,t[2]+u],t[1]-e[1])}],u);else{if(s.type!==constants.A.OBJECT_TYPE_TURTLE)throw new Error("JSXGraph: Can't create normal with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");n=t.create("line",[function(){var t,e,i=Math.floor(r.position),n=r.position-i;for(e=0;e<s.objects.length;e++)if((t=s.objects[e]).type===constants.A.OBJECT_TYPE_CURVE){if(i<t.numberPoints)break;i-=t.numberPoints}return i===t.numberPoints-1&&(i-=1,n=1),i<0?1:(t.Y(i)+n*(t.Y(i+1)-t.Y(i)))*(t.Y(i)-t.Y(i+1))-(t.X(i)+n*(t.X(i+1)-t.X(i)))*(t.X(i+1)-t.X(i))},function(){var t,e,i=Math.floor(r.position);for(e=0;e<s.objects.length;e++)if((t=s.objects[e]).type===constants.A.OBJECT_TYPE_CURVE){if(i<t.numberPoints)break;i-=t.numberPoints}return i===t.numberPoints-1&&(i-=1),i<0?0:t.X(i+1)-t.X(i)},function(){var t,e,i=Math.floor(r.position);for(e=0;e<s.objects.length;e++)if((t=s.objects[e]).type===constants.A.OBJECT_TYPE_CURVE){if(i<t.numberPoints)break;i-=t.numberPoints}return i===t.numberPoints-1&&(i-=1),i<0?0:t.Y(i+1)-t.Y(i)}],u)}return n.elType="normal",n.setParents(e),utils_type.A.exists(r._is_new)?(n.addChild(r),delete r._is_new):r.addChild(n),s.addChild(n),n},jxg.A.createBisector=function(t,e,i){var r,s,n,o;if(e=utils_type.A.providePoints(t,e,i,"point"),utils_type.A.isPoint(e[0])&&utils_type.A.isPoint(e[1])&&utils_type.A.isPoint(e[2])){for((o=utils_type.A.copyAttributes(i,t.options,"bisector","point")).snapToGrid=!1,(r=t.create("point",[function(){return geometry.A.angleBisector(e[0],e[1],e[2],t)}],o)).dump=!1,n=0;n<3;n++)utils_type.A.exists(e[n]._is_new)?(r.addChild(e[n]),delete e[n]._is_new):e[n].addChild(r);return utils_type.A.exists(i.layer)||(i.layer=t.options.layer.line),o=utils_type.A.copyAttributes(i,t.options,"bisector"),(s=jxg.A.createLine(t,[e[1],r],o)).point=r,s.elType="bisector",s.setParents(e),s.subs={point:r},s.inherits.push(r),s}throw new Error("JSXGraph: Can't create angle bisector with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point,point]")},jxg.A.createAngularBisectorsOfTwoLines=function(t,e,i){var r,s,n,o,a=t.select(e[0]),l=t.select(e[1]);if(a.elementClass!==constants.A.OBJECT_CLASS_LINE||l.elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create angle bisectors of two lines with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [line,line]");return utils_type.A.exists(i.layer)||(i.layer=t.options.layer.line),n=utils_type.A.copyAttributes(i,t.options,"bisectorlines","line1"),r=t.create("line",[function(){var t=math.A.hypot(a.stdform[1],a.stdform[2]),e=math.A.hypot(l.stdform[1],l.stdform[2]);return a.stdform[0]/t-l.stdform[0]/e},function(){var t=math.A.hypot(a.stdform[1],a.stdform[2]),e=math.A.hypot(l.stdform[1],l.stdform[2]);return a.stdform[1]/t-l.stdform[1]/e},function(){var t=math.A.hypot(a.stdform[1],a.stdform[2]),e=math.A.hypot(l.stdform[1],l.stdform[2]);return a.stdform[2]/t-l.stdform[2]/e}],n),utils_type.A.exists(i.layer)||(i.layer=t.options.layer.line),n=utils_type.A.copyAttributes(i,t.options,"bisectorlines","line2"),s=t.create("line",[function(){var t=math.A.hypot(a.stdform[1],a.stdform[2]),e=math.A.hypot(l.stdform[1],l.stdform[2]);return a.stdform[0]/t+l.stdform[0]/e},function(){var t=math.A.hypot(a.stdform[1],a.stdform[2]),e=math.A.hypot(l.stdform[1],l.stdform[2]);return a.stdform[1]/t+l.stdform[1]/e},function(){var t=math.A.hypot(a.stdform[1],a.stdform[2]),e=math.A.hypot(l.stdform[1],l.stdform[2]);return a.stdform[2]/t+l.stdform[2]/e}],n),o=new composition({line1:r,line2:s}),r.dump=!1,s.dump=!1,o.elType="bisectorlines",o.setParents([a.id,l.id]),o.subs={line1:r,line2:s},o},jxg.A.createCircumcenter=function(t,e,i){var r,s,n,o,a;if(e=utils_type.A.providePoints(t,e,i,"point"),utils_type.A.isPoint(e[0])&&utils_type.A.isPoint(e[1])&&utils_type.A.isPoint(e[2])){for(n=e[0],o=e[1],a=e[2],r=jxg.A.createPoint(t,[function(){return geometry.A.circumcenter(n,o,a,t)}],i),s=0;s<3;s++)utils_type.A.exists(e[s]._is_new)?(r.addChild(e[s]),delete e[s]._is_new):e[s].addChild(r);return r.elType="circumcenter",r.setParents(e),r.generatePolynomial=function(){var t=n.symbolic.x,e=n.symbolic.y,i=o.symbolic.x,s=o.symbolic.y,l=a.symbolic.x,u=a.symbolic.y,c=r.symbolic.x,h=r.symbolic.y;return[["((",c,")-(",t,"))^2+((",h,")-(",e,"))^2-((",c,")-(",i,"))^2-((",h,")-(",s,"))^2"].join(""),["((",c,")-(",t,"))^2+((",h,")-(",e,"))^2-((",c,")-(",l,"))^2-((",h,")-(",u,"))^2"].join("")]},r}throw new Error("JSXGraph: Can't create circumcircle midpoint with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point]")},jxg.A.createIncenter=function(t,e,i){var r,s,n,o,a;if(!((e=utils_type.A.providePoints(t,e,i,"point")).length>=3&&utils_type.A.isPoint(e[0])&&utils_type.A.isPoint(e[1])&&utils_type.A.isPoint(e[2])))throw new Error("JSXGraph: Can't create incenter with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point]");for(s=e[0],n=e[1],o=e[2],r=t.create("point",[function(){var e,i,r;return e=math.A.hypot(n.X()-o.X(),n.Y()-o.Y()),i=math.A.hypot(s.X()-o.X(),s.Y()-o.Y()),r=math.A.hypot(n.X()-s.X(),n.Y()-s.Y()),new base_coords.A(constants.A.COORDS_BY_USER,[(e*s.X()+i*n.X()+r*o.X())/(e+i+r),(e*s.Y()+i*n.Y()+r*o.Y())/(e+i+r)],t)}],i),a=0;a<3;a++)utils_type.A.exists(e[a]._is_new)?(r.addChild(e[a]),delete e[a]._is_new):e[a].addChild(r);return r.elType="incenter",r.setParents(e),r},jxg.A.createCircumcircle=function(t,i,r){var s,n,o,a;if(!1===(i=utils_type.A.providePoints(t,i,r,"point")))throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof i[0]+"', '"+typeof i[1]+"' and '"+typeof i[2]+"'.\nPossible parent types: [point,point,point]");try{for(o=utils_type.A.copyAttributes(r,t.options,"circumcircle","center"),(s=jxg.A.createCircumcenter(t,i,o)).dump=!1,utils_type.A.exists(r.layer)||(r.layer=t.options.layer.circle),o=utils_type.A.copyAttributes(r,t.options,"circumcircle"),(n=jxg.A.createCircle(t,[s,i[0]],o)).elType="circumcircle",n.setParents(i),n.subs={center:s},n.inherits.push(n),a=0;a<3;a++)utils_type.A.exists(i[a]._is_new)?(n.addChild(i[a]),delete i[a]._is_new):i[a].addChild(n)}catch(e){throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof i[0]+"', '"+typeof i[1]+"' and '"+typeof i[2]+"'.\nPossible parent types: [point,point,point]")}return n},jxg.A.createIncircle=function(t,i,r){var s,n,o,a;if(!1===(i=utils_type.A.providePoints(t,i,r,"point")))throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof i[0]+"', '"+typeof i[1]+"' and '"+typeof i[2]+"'.\nPossible parent types: [point,point,point]");try{for(a=utils_type.A.copyAttributes(r,t.options,"incircle","center"),(n=jxg.A.createIncenter(t,i,a)).dump=!1,utils_type.A.exists(r.layer)||(r.layer=t.options.layer.circle),a=utils_type.A.copyAttributes(r,t.options,"incircle"),(o=jxg.A.createCircle(t,[n,function(){var t=math.A.hypot(i[1].X()-i[2].X(),i[1].Y()-i[2].Y()),e=math.A.hypot(i[0].X()-i[2].X(),i[0].Y()-i[2].Y()),r=math.A.hypot(i[1].X()-i[0].X(),i[1].Y()-i[0].Y()),s=(t+e+r)/2;return Math.sqrt((s-t)*(s-e)*(s-r)/s)}],a)).elType="incircle",o.setParents(i),s=0;s<3;s++)utils_type.A.exists(i[s]._is_new)?(o.addChild(i[s]),delete i[s]._is_new):i[s].addChild(o);o.center=n,o.subs={center:o.center},o.inherits.push(n)}catch(e){throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof i[0]+"', '"+typeof i[1]+"' and '"+typeof i[2]+"'.\nPossible parent types: [point,point,point]")}return o},jxg.A.createReflection=function(t,e,i){var r,s,n,o,a,l,u,c,h="\nPossible parent types: [point|line|curve|polygon|circle|arc|sector, line]";for(l=0;l<e.length;++l)e[l]=t.select(e[l]);if(u=utils_type.A.copyAttributes(i,t.options,"reflection"),utils_type.A.isPoint(e[0]))s=utils_type.A.providePoints(t,[e[0]],c)[0];else{if(e[0].elementClass!==constants.A.OBJECT_CLASS_CURVE&&e[0].elementClass!==constants.A.OBJECT_CLASS_LINE&&e[0].type!==constants.A.OBJECT_TYPE_POLYGON&&e[0].elementClass!==constants.A.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create reflection element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+h);s=e[0]}if(e[1].elementClass!==constants.A.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+h);if(r=e[1],a=jxg.A.createTransform(t,[r],{type:"reflect"}),utils_type.A.isPoint(s))n=jxg.A.createPoint(t,[s,a],u);else if(s.elementClass===constants.A.OBJECT_CLASS_CURVE)n=jxg.A.createCurve(t,[s,a],u);else if(s.elementClass===constants.A.OBJECT_CLASS_LINE)n=jxg.A.createLine(t,[s,a],u);else if(s.type===constants.A.OBJECT_TYPE_POLYGON)n=jxg.A.createPolygon(t,[s,a],u);else{if(s.elementClass!==constants.A.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+h);"euclidean"===u.type.toLowerCase()?(c=utils_type.A.copyAttributes(i,t.options,"reflection","center"),(o=jxg.A.createPoint(t,[s.center,a],c)).prepareUpdate().update().updateVisibility(utils_type.A.evaluate(o.visProp.visible)).updateRenderer(),n=jxg.A.createCircle(t,[o,function(){return s.Radius()}],u)):n=jxg.A.createCircle(t,[s,a],u)}return utils_type.A.exists(s._is_new)&&(n.addChild(s),delete s._is_new),r.addChild(n),n.elType="reflection",n.addParents(r),n.prepareUpdate().update(),utils_type.A.isPoint(n)&&(n.generatePolynomial=function(){var t=r.point1.symbolic.x,e=r.point1.symbolic.y,i=r.point2.symbolic.x,o=r.point2.symbolic.y,a=s.symbolic.x,l=s.symbolic.y,u=n.symbolic.x,c=n.symbolic.y;return[["((",c,")-(",l,"))*((",e,")-(",o,"))+((",t,")-(",i,"))*((",u,")-(",a,"))"].join(""),["((",u,")-(",t,"))^2+((",c,")-(",e,"))^2-((",a,")-(",t,"))^2-((",l,")-(",e,"))^2"].join("")]}),n},jxg.A.createMirrorElement=function(t,e,i){var r,s,n,o,a,l,u,c,h="\nPossible parent types: [point|line|curve|polygon|circle|arc|sector, point]";for(s=0;s<e.length;++s)e[s]=t.select(e[s]);if(u=utils_type.A.copyAttributes(i,t.options,"mirrorelement"),utils_type.A.isPoint(e[0]))r=utils_type.A.providePoints(t,[e[0]],u)[0];else{if(e[0].elementClass!==constants.A.OBJECT_CLASS_CURVE&&e[0].elementClass!==constants.A.OBJECT_CLASS_LINE&&e[0].type!==constants.A.OBJECT_TYPE_POLYGON&&e[0].elementClass!==constants.A.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+h);r=e[0]}if(!utils_type.A.isPoint(e[1]))throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+h);if(c=utils_type.A.copyAttributes(i,t.options,"mirrorelement","point"),n=utils_type.A.providePoints(t,[e[1]],c)[0],l=jxg.A.createTransform(t,[Math.PI,n],{type:"rotate"}),utils_type.A.isPoint(r))o=jxg.A.createPoint(t,[r,l],u);else if(r.elementClass===constants.A.OBJECT_CLASS_CURVE)o=jxg.A.createCurve(t,[r,l],u);else if(r.elementClass===constants.A.OBJECT_CLASS_LINE)o=jxg.A.createLine(t,[r,l],u);else if(r.type===constants.A.OBJECT_TYPE_POLYGON)o=jxg.A.createPolygon(t,[r,l],u);else{if(r.elementClass!==constants.A.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+h);"euclidean"===u.type.toLowerCase()?(c=utils_type.A.copyAttributes(i,t.options,"mirrorelement","center"),(a=jxg.A.createPoint(t,[r.center,l],c)).prepareUpdate().update().updateVisibility(utils_type.A.evaluate(a.visProp.visible)).updateRenderer(),o=jxg.A.createCircle(t,[a,function(){return r.Radius()}],u)):o=jxg.A.createCircle(t,[r,l],u)}return utils_type.A.exists(r._is_new)&&(o.addChild(r),delete r._is_new),n.addChild(o),o.elType="mirrorelement",o.addParents(n),o.prepareUpdate().update(),o},jxg.A.createMirrorPoint=function(t,e,i){var r=jxg.A.createMirrorElement(t,e,i);return r.elType="mirrorpoint",r},jxg.A.createIntegral=function(t,e,i){var r,s,n,o,a,l,u,c,h,d,p,f,_,m,g,y=null;if(utils_type.A.isArray(e[0])&&e[1].elementClass===constants.A.OBJECT_CLASS_CURVE)r=e[0],s=e[1];else{if(!utils_type.A.isArray(e[1])||e[0].elementClass!==constants.A.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create integral with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [[number|function,number|function],curve]");r=e[1],s=e[0]}return(n=utils_type.A.copyAttributes(i,t.options,"integral")).withLabel=!1,g=t.create("curve",[[0],[0]],n),o=r[0],a=r[1],utils_type.A.isFunction(o)?(u=function(){return s.Y(l())},o=(l=o)()):(l=o,u=s.Y(o)),utils_type.A.isFunction(a)?(h=function(){return s.Y(c())},a=(c=a)()):(c=a,h=s.Y(a)),n=utils_type.A.copyAttributes(i,t.options,"integral","curveLeft"),d=t.create("glider",[l,u,s],n),utils_type.A.isFunction(l)&&d.hideElement(),n=utils_type.A.copyAttributes(i,t.options,"integral","baseLeft"),p=t.create("point",[function(){return"y"===utils_type.A.evaluate(g.visProp.axis)?0:d.X()},function(){return"y"===utils_type.A.evaluate(g.visProp.axis)?d.Y():0}],n),n=utils_type.A.copyAttributes(i,t.options,"integral","curveRight"),f=t.create("glider",[c,h,s],n),utils_type.A.isFunction(c)&&f.hideElement(),n=utils_type.A.copyAttributes(i,t.options,"integral","baseRight"),_=t.create("point",[function(){return"y"===utils_type.A.evaluate(g.visProp.axis)?0:f.X()},function(){return"y"===utils_type.A.evaluate(g.visProp.axis)?f.Y():0}],n),!1!==(n=utils_type.A.copyAttributes(i,t.options,"integral")).withlabel&&"y"!==n.axis&&(n=utils_type.A.copyAttributes(i,t.options,"integral","label"),n=utils_type.A.copyAttributes(n,t.options,"label"),m=function(){var t=numerics.A.NewtonCotes([p.X(),_.X()],s.Y),e=utils_type.A.evaluate(y.visProp.digits);return"&int; = "+(y.useLocale()?y.formatNumberLocale(t,e):utils_type.A.toFixed(t,e))},(y=t.create("text",[function(){var t=new base_coords.A(constants.A.COORDS_BY_SCREEN,[utils_type.A.evaluate(this.visProp.offset[0])+this.board.origin.scrCoords[1],0],this.board,!1),e=this.board.getBoundingBox(),i=.1*(e[2]-e[0]),r=f.X();return r<e[0]?r=e[0]+i:r>e[2]&&(r=e[2]-i),r+t.usrCoords[1]},function(){var t=new base_coords.A(constants.A.COORDS_BY_SCREEN,[0,utils_type.A.evaluate(this.visProp.offset[1])+this.board.origin.scrCoords[2]],this.board,!1),e=this.board.getBoundingBox(),i=.1*(e[1]-e[3]),r=f.Y();return r>e[1]?r=e[1]-i:r<e[3]&&(r=e[3]+i),r+t.usrCoords[2]},""],n)).setText(m),y.dump=!1,d.addChild(y),f.addChild(y)),d.dump=!1,p.dump=!1,f.dump=!1,_.dump=!1,g.elType="integral",g.setParents([s.id,r]),g.subs={curveLeft:d,baseLeft:p,curveRight:f,baseRight:_},g.inherits.push(d,p,f,_),n.withLabel&&(g.subs.label=y,g.inherits.push(y)),g.Value=function(){return numerics.A.I([p.X(),_.X()],s.Y)},g.updateDataArray=function(){var t,e,i,r,n,o,a,l,u;if("y"===utils_type.A.evaluate(this.visProp.axis)){for(d.Y()<f.Y()?(o=d.X(),l=d.Y(),a=f.X(),u=f.Y()):(o=f.X(),l=f.Y(),a=d.X(),u=d.Y()),r=Math.min(o,a),n=Math.max(o,a),t=[0,o],e=[l,l],i=0;i<s.numberPoints;i++)l<=s.points[i].usrCoords[2]&&r<=s.points[i].usrCoords[1]&&s.points[i].usrCoords[2]<=u&&s.points[i].usrCoords[1]<=n&&(t.push(s.points[i].usrCoords[1]),e.push(s.points[i].usrCoords[2]));t.push(a),e.push(u),t.push(0),e.push(u),t.push(0),e.push(l)}else{for(p.X()<_.X()?(r=p.X(),n=_.X()):(r=_.X(),n=p.X()),t=[r,r],e=[0,s.Y(r)],i=0;i<s.numberPoints;i++)r<=s.points[i].usrCoords[1]&&s.points[i].usrCoords[1]<=n&&(t.push(s.points[i].usrCoords[1]),e.push(s.points[i].usrCoords[2]));t.push(n),e.push(s.Y(n)),t.push(n),e.push(0),t.push(r),e.push(0)}this.dataX=t,this.dataY=e},d.addChild(g),f.addChild(g),p.addChild(g),_.addChild(g),g.baseLeft=p,g.baseRight=_,g.curveLeft=d,g.curveRight=f,g.methodMap=jxg.A.deepCopy(g.methodMap,{curveLeft:"curveLeft",baseLeft:"baseLeft",curveRight:"curveRight",baseRight:"baseRight",Value:"Value"}),g.label=y,g},jxg.A.createInequality=function(t,e,i){var r,s,n;if(n=utils_type.A.copyAttributes(i,t.options,"inequality"),e[0].elementClass===constants.A.OBJECT_CLASS_LINE)(s=t.create("curve",[[],[]],n)).hasPoint=function(){return!1},s.updateDataArray=function(){var i,r,s,n=t.getBoundingBox(),o=utils_type.A.evaluate(this.visProp.inverse),a=o?-1:1,l=1.5*Math.max(n[2]-n[0],n[1]-n[3]),u={coords:{usrCoords:[1,.5*(n[0]+n[2]),o?n[1]:n[3]]}},c=e[0].stdform.slice(1),h=c;s=1.5*Math.max(geometry.A.perpendicular(e[0],u,t)[0].distance(constants.A.COORDS_BY_USER,u.coords),l),s*=a,u={coords:{usrCoords:[1,.5*(n[0]+n[2]),.5*(n[1]+n[3])]}},i=[1,(u=Math.abs(math.A.innerProduct(u.coords.usrCoords,e[0].stdform,3))>=math.A.eps?geometry.A.perpendicular(e[0],u,t)[0].usrCoords:u.coords.usrCoords)[1]+c[1]*l,u[2]-c[0]*l],r=[1,u[1]-h[1]*l,u[2]+h[0]*l],this.dataX=[i[1],i[1]+c[0]*s,r[1]+h[0]*s,r[1],i[1]],this.dataY=[i[2],i[2]+c[1]*s,r[2]+h[1]*s,r[2],i[2]]};else if(e[0].elementClass===constants.A.OBJECT_CLASS_CURVE&&"functiongraph"===e[0].visProp.curvetype)(s=t.create("curve",[[],[]],n)).updateDataArray=function(){var t,i,r,s,n,o,a,l,u,c=this.board.getBoundingBox(),h=[],d=e[0].minX(),p=e[0].maxX(),f=.3*(c[1]-c[3]);if(t=utils_type.A.evaluate(this.visProp.inverse)?1:3,this.dataX=[],this.dataY=[],0!==(s=e[0].points.length))for(c[1]+=f,c[3]-=f,r=-1;r<s-1;){for(n=r+1,i=s;n<s;n++)if(e[0].points[n].isReal()){i=n;break}if(i>=s)break;for(n=i,r=s-1;n<s-1;n++)if(!e[0].points[n+1].isReal()){r=n;break}for(l=e[0].points[i].usrCoords[1],u=e[0].points[r].usrCoords[1],o=c[0]<d?d:c[0],a=c[2]>p?p:c[2],o=0===i?o:Math.max(o,l),a=r===s-1?a:Math.min(a,u),a=r===s-1?p:u,(h=[]).push([1,o=0===i?d:l,c[t]]),h.push([1,o,e[0].points[i].usrCoords[2]]),n=i;n<=r;n++)h.push(e[0].points[n].usrCoords);for(h.push([1,a,e[0].points[r].usrCoords[2]]),h.push([1,a,c[t]]),h.push(h[0]),n=0;n<h.length;n++)this.dataX.push(h[n][1]),this.dataY.push(h[n][2]);r<s-1&&(this.dataX.push(NaN),this.dataY.push(NaN))}},s.hasPoint=function(){return!1};else if(r=utils_type.A.createFunction(e[0]),s.addParentsFromJCFunctions([r]),!utils_type.A.exists(r))throw new Error("JSXGraph: Can't create area with the given parents.\nPossible parent types: [line], [function]");return s.addParents(e[0]),s},jxg.A.registerElement("arrowparallel",jxg.A.createArrowParallel),jxg.A.registerElement("bisector",jxg.A.createBisector),jxg.A.registerElement("bisectorlines",jxg.A.createAngularBisectorsOfTwoLines),jxg.A.registerElement("msector",jxg.A.createMsector),jxg.A.registerElement("circumcircle",jxg.A.createCircumcircle),jxg.A.registerElement("circumcirclemidpoint",jxg.A.createCircumcenter),jxg.A.registerElement("circumcenter",jxg.A.createCircumcenter),jxg.A.registerElement("incenter",jxg.A.createIncenter),jxg.A.registerElement("incircle",jxg.A.createIncircle),jxg.A.registerElement("integral",jxg.A.createIntegral),jxg.A.registerElement("midpoint",jxg.A.createMidpoint),jxg.A.registerElement("mirrorelement",jxg.A.createMirrorElement),jxg.A.registerElement("mirrorpoint",jxg.A.createMirrorPoint),jxg.A.registerElement("normal",jxg.A.createNormal),jxg.A.registerElement("orthogonalprojection",jxg.A.createOrthogonalProjection),jxg.A.registerElement("parallel",jxg.A.createParallel),jxg.A.registerElement("parallelpoint",jxg.A.createParallelPoint),jxg.A.registerElement("perpendicular",jxg.A.createPerpendicular),jxg.A.registerElement("perpendicularpoint",jxg.A.createPerpendicularPoint),jxg.A.registerElement("perpendicularsegment",jxg.A.createPerpendicularSegment),jxg.A.registerElement("reflection",jxg.A.createReflection),jxg.A.registerElement("inequality",jxg.A.createInequality),jxg.A.createGrid=function(t,e,i){const r=math.A.eps,s=5e3;var n,o,a,l,u,c,h,d,p=[],f=[];if((a=e).length>2||a.length>=1&&"axis"!==a[0].elType||a.length>=2&&"axis"!==a[1].elType)throw new Error("JSXGraph: Can't create 'grid' with parent type '"+e[0].elType+"'. Possible parent types: [axis,axis]");return!utils_type.A.exists(a[0])&&utils_type.A.exists(t.defaultAxes)&&(a[0]=t.defaultAxes.x),!utils_type.A.exists(a[1])&&utils_type.A.exists(t.defaultAxes)&&(a[1]=t.defaultAxes.y),d=function(t,e,i,r,s,n,o){var a,l,u,c,h,d,p;switch(t.toLowerCase()){case".":case"point":return e.visProp.linecap="round",e.visProp.strokewidth=s*e.board.unitX+n*e.board.unitY,[[i,i,NaN],[r,r,NaN]];case"o":case"circle":return e.visProp.linecap="square",e.bezierDegree=3,[[i+s,i+s,i+(l=4*Math.tan(Math.PI/8)/3)*s,i,i-l*s,i-s,i-s,i-s,i-l*s,i,i+l*s,i+s,i+s,NaN],[r,r+l*n,r+n,r+n,r+n,r+l*n,r,r-l*n,r-n,r-n,r-n,r-l*n,r,NaN]];case"regpol":case"regularpolygon":for(e.visProp.linecap="round",c=utils_type.A.evaluate(e.visProp.polygonvertices),h=[[],[]],a=0;a<=2*Math.PI;a+=2*Math.PI/c)h[0].push(i-s*Math.sin(a)),h[1].push(r-n*Math.cos(a));return h[0].push(NaN),h[1].push(NaN),h;case"[]":case"square":return e.visProp.linecap="square",[[i-s,i+s,i+s,i-s,i-s,NaN],[r+n,r+n,r-n,r-n,r+n,NaN]];case"<>":case"diamond":return e.visProp.linecap="square",[[i,i+s,i,i-s,i,NaN],[r+n,r,r-n,r,r+n,NaN]];case"<<>>":case"diamond2":return e.visProp.linecap="square",[[i,i+(d=s*Math.sqrt(2)),i,i-d,i,NaN],[r+(p=n*Math.sqrt(2)),r,r-p,r,r+p,NaN]];case"x":case"cross":return[[i-s,i+s,NaN,i-s,i+s,NaN],[r+n,r-n,NaN,r-n,r+n,NaN]];case"+":case"plus":return[[i-s,i+s,NaN,i,i,NaN],[r,r,NaN,r-n,r+n,NaN]];case"-":case"minus":return[[i-s,i+s,NaN],[r,r,NaN]];case"|":case"divide":return[[i,i,NaN],[r-n,r+n,NaN]];case"^":case"a":case"A":case"triangleup":return[[i-s,i,i+s,NaN],[r-n,r,r-n,NaN]];case"v":case"triangledown":return[[i-s,i,i+s,NaN],[r+n,r,r+n,NaN]];case"<":case"triangleleft":return[[i+s,i,i+s,NaN],[r+n,r,r-n,NaN]];case">":case"triangleright":return[[i-s,i,i-s,NaN],[r+n,r,r-n,NaN]];case"line":return u=utils_type.A.evaluate(e.visProp.margin),[[i,i,NaN,o[0]-u/e.board.unitX,o[2]+u/e.board.unitX,NaN],[o[1]+u/e.board.unitY,o[3]-u/e.board.unitY,NaN,r,r,NaN]];default:return[[],[]]}},l=utils_type.A.copyAttributes(i,t.options,"grid"),utils_type.A.mergeAttr(l,l.themes[l.theme],!1),u={},utils_type.A.mergeAttr(u,l,!0,!0),utils_type.A.mergeAttr(u,l.major,!0,!0),(n=t.create("curve",[[null],[null]],u)).elType="grid",n.type=constants.A.OBJECT_TYPE_GRID,c={},utils_type.A.mergeAttr(c,l,!0,!0),utils_type.A.mergeAttr(c,l.minor,!0,!0),c.id===u.id&&(c.id=n.id+"_minor"),c.name===u.name&&(c.name=n.name+"_minor"),(o=t.create("curve",[[null],[null]],c)).elType="grid",o.type=constants.A.OBJECT_TYPE_GRID,n.minorGrid=o,o.majorGrid=n,n.hasPoint=function(){return!1},o.hasPoint=function(){return!1},n.inherits.push(o),n.updateDataArray=function(){var t,e,i,o,l,u,c,_,m=this.board.getBoundingBox(),g=utils_type.A.evaluate(this.visProp.gridx),y=utils_type.A.evaluate(this.visProp.gridy),v=utils_type.A.evaluate(this.visProp.face),A=utils_type.A.evaluate(this.visProp.drawzero),b=!0===A||utils_type.A.isObject(A)&&!0===utils_type.A.evaluate(A.origin),C=!0===A||utils_type.A.isObject(A)&&!0===utils_type.A.evaluate(A.x),x=!0===A||utils_type.A.isObject(A)&&!0===utils_type.A.evaluate(A.y),P=utils_type.A.evaluate(this.visProp.includeboundaries),E=utils_type.A.evaluate(this.visProp.forcesquare);if(this.dataX=[],this.dataY=[],h=utils_type.A.evaluate(this.visProp.majorstep),utils_type.A.isArray(h)||(h=[h,h]),h.length<2&&(h=[h[0],h[0]]),utils_type.A.exists(g)&&(jxg.A.deprecated("gridX","majorStep"),h[0]=g),utils_type.A.exists(y)&&(jxg.A.deprecated("gridY","majorStep"),h[1]=y),"auto"===h[0]?(_=Math.pow(10,Math.floor(Math.log(50/this.board.unitX)/Math.LN10)),h[0]=_,utils_type.A.exists(a[0])&&(h[0]=a[0].ticks[0].getDistanceMajorTicks())):h[0]=utils_type.A.parseNumber(h[0],Math.abs(m[1]-m[3]),1/this.board.unitX),"auto"===h[1]?(_=Math.pow(10,Math.floor(Math.log(50/this.board.unitY)/Math.LN10)),h[1]=_,utils_type.A.exists(a[1])&&(h[1]=a[1].ticks[0].getDistanceMajorTicks())):h[1]=utils_type.A.parseNumber(h[1],Math.abs(m[0]-m[2]),1/this.board.unitY),"min"===E||!0===E?h[0]*this.board.unitX<=h[1]*this.board.unitY?h[1]=h[0]/this.board.unitY*this.board.unitX:h[0]=h[1]/this.board.unitX*this.board.unitY:"max"===E&&(h[0]*this.board.unitX<=h[1]*this.board.unitY?h[0]=h[1]/this.board.unitX*this.board.unitY:h[1]=h[0]/this.board.unitY*this.board.unitX),p=utils_type.A.evaluate(this.visProp.size),utils_type.A.isArray(p)||(p=[p,p]),p.length<2&&(p=[p[0],p[0]]),utils_type.A.isNumber(p[0],!0)&&(p[0]=p[0]+"px"),utils_type.A.isNumber(p[1],!0)&&(p[1]=p[1]+"px"),p[0]=utils_type.A.parseNumber(p[0],h[0],1/this.board.unitX),p[1]=utils_type.A.parseNumber(p[1],h[1],1/this.board.unitY),f[0]=p[0]/2,f[1]=p[1]/2,t=math.A.roundToStep(m[0],h[0]),e=math.A.roundToStep(m[1],h[1]),c=isFinite(t)&&isFinite(e)&&isFinite(m[2])&&isFinite(m[3])&&Math.abs(m[2])<Math.abs(h[0]*s)&&Math.abs(m[3])<Math.abs(h[1]*s),"line"===v.toLowerCase()){for(l=utils_type.A.evaluate(n.visProp.margin),o=e;c&&o>=m[3];o-=h[1])!b&&Math.abs(o)<r||!x&&Math.abs(o)<r||!P&&(o<=m[3]+f[1]||o>=m[1]-f[1])||(u=[[m[0]-l/n.board.unitX,m[2]+l/n.board.unitX,NaN],[o,o,NaN]],utils_type.A.concat(this.dataX,u[0]),utils_type.A.concat(this.dataY,u[1]));for(i=t;c&&i<=m[2];i+=h[0])!b&&Math.abs(i)<r||!C&&Math.abs(i)<r||!P&&(i<=m[0]+f[0]||i>=m[2]-f[0])||(u=[[i,i,NaN],[m[1]+l/n.board.unitY,m[3]-l/n.board.unitY,NaN]],utils_type.A.concat(this.dataX,u[0]),utils_type.A.concat(this.dataY,u[1]))}else for(o=e;c&&o>=m[3];o-=h[1])for(i=t;c&&i<=m[2];i+=h[0])!b&&Math.abs(o)<r&&Math.abs(i)<r||!C&&Math.abs(o)<r&&Math.abs(i)>=r||!x&&Math.abs(i)<r&&Math.abs(o)>=r||!P&&(i<=m[0]+f[0]||i>=m[2]-f[0]||o<=m[3]+f[1]||o>=m[1]-f[1])||(u=d(v,n,i,o,f[0],f[1],m),utils_type.A.concat(this.dataX,u[0]),utils_type.A.concat(this.dataY,u[1]))},o.updateDataArray=function(){var t,e,i,n,l,u,c,p,_,m,g,y,v,A,b,C,x,P,E,w=this.board.getBoundingBox(),S=[],O=[],M=utils_type.A.evaluate(this.visProp.minorelements),T=utils_type.A.evaluate(this.visProp.size),j=utils_type.A.evaluate(this.visProp.face),N=utils_type.A.evaluate(this.visProp.drawzero),R=!0===N||utils_type.A.isObject(N)&&!0===utils_type.A.evaluate(N.x),k=!0===N||utils_type.A.isObject(N)&&!0===utils_type.A.evaluate(N.y),D=utils_type.A.evaluate(this.majorGrid.visProp.face),L=utils_type.A.evaluate(this.majorGrid.visProp.drawzero),I=!0===L||utils_type.A.isObject(L)&&!0===utils_type.A.evaluate(L.origin),B=!0===L||utils_type.A.isObject(L)&&!0===utils_type.A.evaluate(L.x),F=!0===L||utils_type.A.isObject(L)&&!0===utils_type.A.evaluate(L.y),Y=utils_type.A.evaluate(this.visProp.includeboundaries);if(this.dataX=[],this.dataY=[],utils_type.A.isArray(M)||(M=[M,M]),M.length<2&&(M=[M[0],M[0]]),utils_type.A.isNumber(M[0],!0)?M[0]=parseFloat(M[0]):(M[0]=3,utils_type.A.exists(a[0])&&(M[0]=utils_type.A.evaluate(a[0].getAttribute("ticks").minorticks))),S[0]=h[0]/(M[0]+1),utils_type.A.isNumber(M[1],!0)?M[1]=parseFloat(M[1]):(M[1]=3,utils_type.A.exists(a[1])&&(M[1]=utils_type.A.evaluate(a[1].getAttribute("ticks").minorticks))),S[1]=h[1]/(M[1]+1),utils_type.A.isArray(T)||(T=[T,T]),T.length<2&&(T=[T[0],T[0]]),utils_type.A.isNumber(T[0],!0)&&(T[0]=T[0]+"px"),utils_type.A.isNumber(T[1],!0)&&(T[1]=T[1]+"px"),T[0]=utils_type.A.parseNumber(T[0],S[0],1/this.board.unitX),T[1]=utils_type.A.parseNumber(T[1],S[1],1/this.board.unitY),O[0]=.5*T[0],O[1]=.5*T[1],t=math.A.roundToStep(w[0],S[0]),e=math.A.roundToStep(w[1],S[1]),c=isFinite(t)&&isFinite(e)&&isFinite(w[2])&&isFinite(w[3])&&Math.abs(w[2])<=Math.abs(S[0]*s)&&Math.abs(w[3])<Math.abs(S[1]*s),"line"!==j.toLowerCase())for(n=e;c&&n>=w[3];n-=S[1])for(i=t;c&&i<=w[2];i+=S[0]){if(p=math.A.roundToStep(Math.abs(i),h[0]),p=Math.abs(p-Math.abs(i)),_=h[0]-p,m=math.A.roundToStep(Math.abs(n),h[1]),m=Math.abs(m-Math.abs(n)),g=h[1]-m,"line"===D){if(p-O[0]-f[0]<r||_-O[0]-f[0]<r||m-O[1]-f[1]<r||g-O[1]-f[1]<r)continue}else if((p-O[0]-f[0]<r||_-O[0]-f[0]<r)&&(m-O[1]-f[1]<r||g-O[1]-f[1]<r)&&(I||f[1]-Math.abs(n)+O[1]<r||f[0]-Math.abs(i)+O[0]<r)&&(B||f[1]-Math.abs(n)+O[1]<r||f[0]+Math.abs(i)-O[0]<r)&&(F||f[0]-Math.abs(i)+O[0]<r||f[1]+Math.abs(n)-O[1]<r))continue;!k&&Math.abs(i)<r||!R&&Math.abs(n)<r||(y=Math.abs(w[0]%h[0]),v=Math.abs(w[1]%h[1]),A=Math.abs(w[2]%h[0]),b=Math.abs(w[3]%h[1]),C=h[0]-y,x=h[1]-v,P=h[0]-A,E=h[1]-b,!Y&&(i-O[0]-w[0]-f[0]+C<r&&C-f[0]<r||i-O[0]-w[0]-f[0]-y<r&&y-f[0]<r||-i-O[0]+w[2]-f[0]+P<r&&P-f[0]<r||-i-O[0]+w[2]-f[0]-A<r&&A-f[0]<r||-n-O[1]+w[1]-f[1]+x<r&&x-f[1]<r||-n-O[1]+w[1]-f[1]-v<r&&v-f[1]<r||n-O[1]-w[3]-f[1]+E<r&&E-f[1]<r||n-O[1]-w[3]-f[1]-b<r&&b-f[1]<r||-n-O[1]+w[1]<r||i-O[0]-w[0]<r||n-O[1]-w[3]<r||-i-O[0]+w[2]<r)||(u=d(j,o,i,n,O[0],O[1],w),utils_type.A.concat(this.dataX,u[0]),utils_type.A.concat(this.dataY,u[1])))}else{for(l=utils_type.A.evaluate(o.visProp.margin),n=e;c&&n>=w[3];n-=S[1]){if(m=math.A.roundToStep(Math.abs(n),h[1]),m=Math.abs(m-Math.abs(n)),g=h[1]-m,"line"===D){if(m-O[1]-f[1]<r||g-O[1]-f[1]<r)continue}else if((m-O[1]-f[1]<r||g-O[1]-f[1]<r)&&(I||f[1]-Math.abs(n)+O[1]<r)&&(B||f[1]-Math.abs(n)+O[1]<r)&&(F||f[1]+Math.abs(n)-O[1]<r))continue;!R&&Math.abs(n)<r||(y=Math.abs(w[0]%h[0]),v=Math.abs(w[1]%h[1]),A=Math.abs(w[2]%h[0]),b=Math.abs(w[3]%h[1]),C=h[0]-y,x=h[1]-v,P=h[0]-A,E=h[1]-b,!Y&&(-n-O[1]+w[1]-f[1]+x<r&&x-f[1]<r||-n-O[1]+w[1]-f[1]-v<r&&v-f[1]<r||n-O[1]-w[3]-f[1]+E<r&&E-f[1]<r||n-O[1]-w[3]-f[1]-b<r&&b-f[1]<r||-n-O[1]+w[1]<r||n-O[1]-w[3]<r)||(u=[[w[0]-l/o.board.unitX,w[2]+l/o.board.unitX,NaN],[n,n,NaN]],utils_type.A.concat(this.dataX,u[0]),utils_type.A.concat(this.dataY,u[1])))}for(i=t;c&&i<=w[2];i+=S[0]){if(p=math.A.roundToStep(Math.abs(i),h[0]),p=Math.abs(p-Math.abs(i)),_=h[0]-p,"line"===D){if(p-O[0]-f[0]<r||_-O[0]-f[0]<r)continue}else if((p-O[0]-f[0]<r||_-O[0]-f[0]<r)&&(I||f[0]-Math.abs(i)+O[0]<r)&&(B||f[0]+Math.abs(i)-O[0]<r)&&(F||f[0]-Math.abs(i)+O[0]<r))continue;!k&&Math.abs(i)<r||(y=Math.abs(w[0]%h[0]),v=Math.abs(w[1]%h[1]),A=Math.abs(w[2]%h[0]),b=Math.abs(w[3]%h[1]),C=h[0]-y,x=h[1]-v,P=h[0]-A,E=h[1]-b,!Y&&(i-O[0]-w[0]-f[0]+C<r&&C-f[0]<r||i-O[0]-w[0]-f[0]-y<r&&y-f[0]<r||-i-O[0]+w[2]-f[0]+P<r&&P-f[0]<r||-i-O[0]+w[2]-f[0]-A<r&&A-f[0]<r||i-O[0]-w[0]<r||-i-O[0]+w[2]<r)||(u=[[i,i,NaN],[w[1]+l/o.board.unitY,w[3]-l/o.board.unitY,NaN]],utils_type.A.concat(this.dataX,u[0]),utils_type.A.concat(this.dataY,u[1])))}}},t.grids.push(n),t.grids.push(o),n},jxg.A.registerElement("grid",jxg.A.createGrid),jxg.A.createLocus=function(t,e,i){var r,s;if(!utils_type.A.isArray(e)||1!==e.length||!utils_type.A.isPoint(e[0]))throw new Error("JSXGraph: Can't create locus with parent of type other than point.\nPossible parent types: [point]");return s=e[0],(r=t.create("curve",[[null],[null]],i)).dontCallServer=!1,r.elType="locus",r.setParents([s.id]),r.updateDataArray=function(){var e,i,n;r.board.mode>0||(e=symbolic.generatePolynomials(t,s,!0).join("|"))!==r.spe&&(r.spe=e,i=function(t,e,i,s){var n;r.dataX=t,r.dataY=e,r.eq=i,r.ctime=s,r.generatePolynomial=(n=i,function(t){var e,i="("+t.symbolic.x+")",r="("+t.symbolic.y+")",s=[];for(e=0;e<n.length;e++)s[e]=n[e].replace(/\*\*/g,"^").replace(/x/g,i).replace(/y/g,r);return s})},i((n=symbolic.geometricLocusByGroebnerBase(t,s,i)).datax,n.datay,n.polynomial,n.exectime))},r},jxg.A.registerElement("locus",jxg.A.createLocus);var base_text=__webpack_require__(995);jxg.A.Image=function(t,e,i,r,s){this.constructor(t,i,constants.A.OBJECT_TYPE_IMAGE,constants.A.OBJECT_CLASS_OTHER),this.element=this.board.select(i.anchor),this.coordsConstructor(e),this.W=utils_type.A.createFunction(s[0],this.board,""),this.H=utils_type.A.createFunction(s[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*t.unitX),Math.abs(this.usrSize[1]*t.unitY)],this.url=r,this.elType="image",this.span=[this.coords.usrCoords.slice(0),[this.coords.usrCoords[0],this.W(),0],[this.coords.usrCoords[0],0,this.H()]],this.id=this.board.setId(this,"Im"),this.board.renderer.drawImage(this),this.board.finalizeAdding(this),this.methodMap=jxg.A.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform",W:"W",Width:"W",H:"H",Height:"H",setSize:"setSize"})},jxg.A.Image.prototype=new base_element.A,utils_type.A.copyPrototypeMethods(jxg.A.Image,coordselement.A,"coordsConstructor"),jxg.A.extend(jxg.A.Image.prototype,{hasPoint:function(t,e){var i,r,s,n,o,a,l,u,c,h=this.transformations.length;return utils_type.A.isObject(utils_type.A.evaluate(this.visProp.precision))?(n=this.board._inputDevice,o=utils_type.A.evaluate(this.visProp.precision[n])):o=this.board.options.precision.hasPoint,0===h?(i=t-this.coords.scrCoords[1],r=this.coords.scrCoords[2]-e,i>=-(s=o)&&i-this.size[0]<=s&&r>=-s&&r-this.size[1]<=s):(l=[(a=(a=new base_coords.A(constants.A.COORDS_BY_SCREEN,[t,e],this.board)).usrCoords)[0]-this.span[0][0],a[1]-this.span[0][1],a[2]-this.span[0][2]],0<=(u=(c=math.A.innerProduct)(l,this.span[1]))&&u<=c(this.span[1],this.span[1])&&0<=(u=c(l,this.span[2]))&&u<=c(this.span[2],this.span[2]))},update:function(t){return this.needsUpdate?(this.updateCoords(t),this.updateSize(),this.updateSpan(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateImage")},updateSize:function(){return this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)],this},updateSpan:function(){var t,e,i=this.transformations.length,r=[];if(0===i)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(r[0]=[this.Z(),this.X(),this.Y()],r[1]=[this.Z(),this.X()+this.W(),this.Y()],r[2]=[this.Z(),this.X(),this.Y()+this.H()],t=0;t<i;t++)for(e=0;e<3;e++)r[e]=math.A.matVecMult(this.transformations[t].matrix,r[e]);for(e=0;e<3;e++)r[e][1]/=r[e][0],r[e][2]/=r[e][0],r[e][0]/=r[e][0];for(e=1;e<3;e++)r[e][0]-=r[0][0],r[e][1]-=r[0][1],r[e][2]-=r[0][2];this.span=r}return this},addTransform:function(t){var e;if(utils_type.A.isArray(t))for(e=0;e<t.length;e++)this.transformations.push(t[e]);else this.transformations.push(t);return this},getParents:function(){var t=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return 0!==this.parents.length&&(t=this.parents),t},setSize:function(t,e){return this.W=utils_type.A.createFunction(t,this.board,""),this.H=utils_type.A.createFunction(e,this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}}),jxg.A.createImage=function(t,e,i){var r,s,n=e[0],o=e[1],a=e[2];if(r=utils_type.A.copyAttributes(i,t.options,"image"),!(s=coordselement.A.create(jxg.A.Image,t,o,r,n,a)))throw new Error("JSXGraph: Can't create image with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return 0!==r.rotate&&s.addRotation(r.rotate),s},jxg.A.registerElement("image",jxg.A.createImage);const base_image=jxg.A.Image;jxg.A.createSlider=function(t,e,i){var r,s,n,o,a,l,u,c,h,d,p,f,_,m,g,y,v,A,b,C,x,P,E;return v=(E=utils_type.A.copyAttributes(i,t.options,"slider")).withticks,y=E.withlabel,C=E.snapwidth,A=E.snapvalues,b=E.snapvaluedistance,u=t.create("point",e[0],E.point1),c=t.create("point",e[1],E.point2),(d=t.create("segment",[u,c],E.baseline)).updateStdform(),r=u.coords.usrCoords.slice(1),s=c.coords.usrCoords.slice(1),n=e[2][0],o=e[2][1],a=e[2][2],l=a-n,P=-1===(x=utils_type.A.evaluate(C))?o:Math.round(o/x)*x,m=r[0]+(s[0]-r[0])*(P-n)/(a-n),g=r[1]+(s[1]-r[1])*(P-n)/(a-n),E.withlabel=!1,(h=t.create("glider",[m,g,d],E)).setAttribute({snapwidth:C,snapvalues:A,snapvaluedistance:b}),p=t.create("segment",[u,h],E.highline),h.Value=function(){var t=this._smax-this._smin,e=utils_type.A.evaluate(this.visProp.snapwidth);return-1===e?this.position*t+this._smin:Math.round((this.position*t+this._smin)/e)*e},h.methodMap=utils_type.A.deepCopy(h.methodMap,{Value:"Value",setValue:"setValue",smax:"_smax",smin:"_smin",setMax:"setMax",setMin:"setMin",point1:"point1",point2:"point2",baseline:"baseline",highline:"highline",ticks:"ticks",label:"label"}),h._smax=a,h._smin=n,h.setMax=function(t){return this._smax=t,this},h.setValue=function(t){var e=this._smax-this._smin;return Math.abs(e)>math.A.eps?this.position=(t-this._smin)/e:this.position=0,this.position=Math.max(0,Math.min(1,this.position)),this},h.setMin=function(t){return this._smin=t,this},y&&(_=t.create("text",[function(){return.05*(c.X()-u.X())+c.X()},function(){return.05*(c.Y()-u.Y())+c.Y()},function(){var t,e=utils_type.A.evaluate(h.visProp.digits),i=utils_type.A.evaluate(h.visProp.suffixlabel),r=utils_type.A.evaluate(h.visProp.unitlabel),s=utils_type.A.evaluate(h.visProp.postlabel);return 2===e&&2!==utils_type.A.evaluate(h.visProp.precision)&&(e=utils_type.A.evaluate(h.visProp.precision)),t=null!==i?i:h.name&&""!==h.name?h.name+" = ":"",h.useLocale()?t+=h.formatNumberLocale(h.Value(),e):t+=utils_type.A.toFixed(h.Value(),e),null!==r&&(t+=r),null!==s&&(t+=s),t}],E.label),h.label=_,h.visProp.withlabel=!0,h.hasLabel=!0),h.point1=u,h.point2=c,h.baseline=d,h.highline=p,v&&(utils_type.A.exists(E.generatelabeltext)||(E.ticks.generateLabelText=function(t,e,i){var r=h.point1.Dist(h.point2),s=h._smin,n=h._smax,o=this.getDistanceFromZero(e,t)*(n-s)/r+s;return r<math.A.eps||Math.abs(o)<math.A.eps?"0":this.formatLabelText(o)}),f=t.create("ticks",[h.baseline,h.point1.Dist(u)/2,function(t){var e=h.point1.Dist(h.point2),i=h.point1.coords.distance(constants.A.COORDS_BY_USER,t);return e<math.A.eps?0:i/e*l+n}],E.ticks),h.ticks=f),h.remove=function(){y&&t.removeObject(_),t.removeObject(p),t.removeObject(d),t.removeObject(c),t.removeObject(u),point.prototype.remove.call(h)},u.dump=!1,c.dump=!1,d.dump=!1,p.dump=!1,y&&(_.dump=!1),h.elType="slider",h.parents=e,h.subs={point1:u,point2:c,baseLine:d,highLine:p},h.inherits.push(u,c,d,p),v&&(f.dump=!1,h.subs.ticks=f,h.inherits.push(f)),h.getParents=function(){return[this.point1.coords.usrCoords.slice(1),this.point2.coords.usrCoords.slice(1),[this._smin,this.position*(this._smax-this._smin)+this._smin,this._smax]]},h.baseline.on("up",(function(t){var e,i;utils_type.A.evaluate(h.visProp.moveonup)&&!utils_type.A.evaluate(h.visProp.fixed)&&(e=d.board.getMousePosition(t,0),i=new base_coords.A(constants.A.COORDS_BY_SCREEN,e,this.board),h.moveTo([i.usrCoords[1],i.usrCoords[2]]),h.triggerEventHandlers(["drag"],[t]))})),h.prepareUpdate().update(),t.isSuspendedUpdate||(h.updateVisibility().updateRenderer(),h.baseline.updateVisibility().updateRenderer(),h.highline.updateVisibility().updateRenderer(),v&&h.ticks.updateVisibility().updateRenderer()),h},jxg.A.registerElement("slider",jxg.A.createSlider),jxg.A.PrefixParser={parse:function(t,e){var i,r,s,n,o,a;if(utils_type.A.isNumber(t)||utils_type.A.isString(t))return t;if(!utils_type.A.isArray(t)||t.length<2)throw new Error("prefixParser.parse: term is not an array, number or string");if(i=t[0],s=t.length,"execute"===e)if(utils_type.A.isInArray(["+","-","*","/"],i))for(n=this.parse(t[1],e),r=2;r<s;r++)switch(a=this.parse(t[r],e),i){case"+":n+=a;break;case"-":n-=a;break;case"*":n*=a;break;case"/":n/=a}else if("exec"===i){for(o=t[1],a=[],r=2;r<s;r++)a.push(this.parse(t[r],e));if(utils_type.A.exists(Math[o]))n=Math[o].apply(this,a);else{if(!utils_type.A.exists(math.A[o]))throw new Error("PrefixParser.parse: "+o+" is not allowed");n=math.A[o].apply(this,a)}}else{if("V"===(o=t[0])&&(o="Value"),!utils_type.A.exists(t[1][o]))throw new Error("PrefixParser.parse: "+o+" is not a method of "+t[1]);for(a=[],r=2;r<s;r++)a.push(this.parse(t[r],e));n=t[1][o].apply(t[1],a)}return n},dimension:function(t){var e,i,r,s,n,o,a,l;if(utils_type.A.isNumber(t))return 0;if(!utils_type.A.isArray(t)||t.length<2)throw new Error("PrefixParser.dimension: term is not an array");if(e=t[0],r=t.length,utils_type.A.isInArray(["+","-","*","/"],e))for(s=this.dimension(t[1]),i=2;i<r;i++)switch(a=this.dimension(t[i]),e){case"+":case"-":a!==s&&(s=NaN);break;case"*":s+=a;break;case"/":s-=a}else if("exec"===e)t[2].type===utils_type.A.OBJECT_TYPE_MEASUREMENT?(s=t[2].Dimension(),utils_type.A.exists(t[2].visProp.dim)&&null!==(o=utils_type.A.evaluate(t[2].visProp.dim))&&(s=o)):s=0;else switch(n=t[0]){case"L":case"Length":case"Perimeter":case"Radius":case"R":s=1;break;case"Area":case"A":s=2;break;default:t[1].type===utils_type.A.OBJECT_TYPE_MEASUREMENT?(s=t[1].Dimension(),utils_type.A.exists(t[1].visProp.dim)&&null!==(o=utils_type.A.evaluate(t[1].visProp.dim))&&(s=o)):(s=0,"Value"!==n&&"V"!==n||[constants.A.OBJECT_TYPE_ARC,constants.A.OBJECT_TYPE_SECTOR,constants.A.OBJECT_TYPE_ANGLE].indexOf(t[1].type)>=0&&(l="",3===t.length&&utils_type.A.isString(t[2])&&(l=t[2].toLowerCase()),s=""===l?t[1].type===constants.A.OBJECT_TYPE_ANGLE?0:1:0===l.indexOf("len")?1:0))}return s},toPrefix:function(t){var e,i,r,s;if(utils_type.A.isNumber(t))return t;if(!utils_type.A.isArray(t)||t.length<2)throw new Error("PrefixParser.toPrefix: term is not an array");for(e=t[0],r=t.length,s=[e],i=1;i<r;i++)utils_type.A.isInArray(["+","-","*","/"],e)?s.push(this.toPrefix(t[i])):"V"===e&&t[i].type===utils_type.A.OBJECT_TYPE_MEASUREMENT?s=t[i].toPrefix():"exec"===e?1===i?s.push(t[i]):s.push(this.toPrefix(t[i])):s=[e,t[i].id];return s},getParents:function(t){var e,i,r,s;if(utils_type.A.isNumber(t))return[];if(!utils_type.A.isArray(t)||t.length<2)throw new Error("PrefixParser.getParents: term is not an array");for(e=t[0],r=t.length,s=[],i=1;i<r;i++)utils_type.A.isInArray(["+","-","*","/"],e)?utils_type.A.concat(s,this.getParents(t[i])):"V"===e&&t[i].type===utils_type.A.OBJECT_TYPE_MEASUREMENT?utils_type.A.concat(s,t[i].getParents()):"exec"===e?i>1&&utils_type.A.concat(s,this.getParents(t[i])):s.push(t[i]);return s}};const prefix=jxg.A.PrefixParser;jxg.A.createTapemeasure=function(t,e,i){var r,s,n,o,a,l,u,c,h,d;return r=e[0],s=e[1],n=utils_type.A.copyAttributes(i,t.options,"tapemeasure","point1"),u=t.create("point",r,n),n=utils_type.A.copyAttributes(i,t.options,"tapemeasure","point2"),c=t.create("point",s,n),u.setAttribute({ignoredSnapToPoints:[c.id]}),c.setAttribute({ignoredSnapToPoints:[u.id]}),n=utils_type.A.copyAttributes(i,t.options,"tapemeasure"),o=n.withticks,a=n.withlabel,2===n.digits&&2!==n.precision&&n.precision,a&&(n.withlabel=!0),l=t.create("segment",[u,c],n),a&&(h=i.name&&""!==i.name?i.name+" = ":"",l.label.setText((function(){var t=utils_type.A.evaluate(l.label.visProp.digits);return l.label.useLocale()?h+l.label.formatNumberLocale(u.Dist(c),t):h+utils_type.A.toFixed(u.Dist(c),t)}))),o&&(n=utils_type.A.copyAttributes(i,t.options,"tapemeasure","ticks"),d=t.create("ticks",[l,.1],n),l.inherits.push(d)),l.remove=function(){o&&l.removeTicks(d),t.removeObject(c),t.removeObject(u),base_element.A.prototype.remove.call(this)},l.Value=function(){return u.Dist(c)},u.dump=!1,c.dump=!1,l.elType="tapemeasure",l.getParents=function(){return[[u.X(),u.Y()],[c.X(),c.Y()]]},l.subs={point1:u,point2:c},o&&(d.dump=!1),l.methodMap=jxg.A.deepCopy(l.methodMap,{Value:"Value"}),l.prepareUpdate().update(),t.isSuspendedUpdate||(l.updateVisibility().updateRenderer(),l.point1.updateVisibility().updateRenderer(),l.point2.updateVisibility().updateRenderer()),l},jxg.A.registerElement("tapemeasure",jxg.A.createTapemeasure),jxg.A.createMeasurement=function(t,e,i){var r,s,n,o,a,l;for(s=utils_type.A.copyAttributes(i,t.options,"measurement"),n=e[0],o=e[1],a=e[2],(r=t.create("text",[n,o,""],s)).type=utils_type.A.OBJECT_TYPE_MEASUREMENT,r.elType="measurement",r.Value=function(){return prefix.parse(a,"execute")},r.Dimension=function(){var t=utils_type.A.evaluate(r.visProp.dim);return null!==t?t:prefix.dimension(a)},r.Unit=function(){var t="",e=utils_type.A.evaluate(r.visProp.units),i=r.Dimension();return utils_type.A.isObject(e)&&utils_type.A.exists(e[i])&&!1!==e[i]?t=utils_type.A.evaluate(e[i]):utils_type.A.isObject(e)&&utils_type.A.exists(e["dim"+i])&&!1!==e["dim"+i]?t=utils_type.A.evaluate(e["dim"+i]):(t=utils_type.A.evaluate(r.visProp.baseunit),0===i?t="":i>1&&""!==t&&(t=t+"^{"+i+"}")),t},r.getTerm=function(){return a},r.getMethod=function(){var t=a[0];return"V"===t&&(t="Value"),t},r.toPrefix=function(){return prefix.toPrefix(a)},r.getParents=function(){return prefix.getParents(a)},r.addParents(r.getParents()),l=0;l<r.parents.length;l++)t.select(r.parents[l]).addChild(r);return r.setText((function(){var t,e="",i="",s=r.Dimension(),n=utils_type.A.evaluate(r.visProp.digits),o=r.Unit(),a=r.Value();if(utils_type.A.evaluate(r.visProp.showprefix)&&(e=r.visProp.formatprefix.apply(r,[utils_type.A.evaluate(r.visProp.prefix)])),utils_type.A.evaluate(r.visProp.showsuffix)&&(i=r.visProp.formatsuffix.apply(r,[utils_type.A.evaluate(r.visProp.suffix)])),utils_type.A.isNumber(a))"none"===n||(a="auto"===n?r.useLocale()?r.formatNumberLocale(a):utils_type.A.autoDigits(a):r.useLocale()?r.formatNumberLocale(a,n):utils_type.A.toFixed(a,n));else if(utils_type.A.isArray(a))for(t=0;t<a.length;t++)utils_type.A.isNumber(a[t])&&("none"===n||("auto"===n?r.useLocale()?a[t]=r.formatNumberLocale(a[t]):a[t]=utils_type.A.autoDigits(a[t]):r.useLocale()?a[t]=r.formatNumberLocale(a[t],n):a[t]=utils_type.A.toFixed(a[t],n)));return"coords"===s&&utils_type.A.isArray(a)&&(2===a.length&&a.unshift(void 0),a=r.visProp.formatcoords.apply(r,[a[1],a[2],a[0]])),"direction"===s&&utils_type.A.isArray(a)&&(2===a.length&&a.unshift(void 0),a=r.visProp.formatdirection.apply(r,[a[1],a[2]])),utils_type.A.isString(s)?e+a+i:isNaN(s)?e+"NaN"+i:e+a+o+i})),r.methodMap=utils_type.A.deepCopy(r.methodMap,{Value:"Value",Dimension:"Dimension",Unit:"Unit",getTerm:"getTerm",Term:"getTerm",getMethod:"getMethod",Method:"getMethod",getParents:"getParents",Parents:"getParents"}),r},jxg.A.registerElement("measurement",jxg.A.createMeasurement),jxg.A.DataSource=function(){return this.data=[],this.columnHeaders=[],this.rowHeaders=[],this},jxg.A.extend(jxg.A.DataSource.prototype,{loadFromArray:function(t,e,i){var r,s,n;if(utils_type.A.isArray(e)&&(this.columnHeaders=e,e=!1),utils_type.A.isArray(i)&&(this.rowHeaders=i,i=!1),this.data=[],e&&(this.columnHeaders=[]),i&&(this.rowHeaders=[]),utils_type.A.exists(t)){for(this.data=[],r=0;r<t.length;r++)for(this.data[r]=[],s=0;s<t[r].length;s++)n=t[r][s],parseFloat(n).toString()===n?this.data[r][s]=parseFloat(n):this.data[r][s]="-"!==n?n:NaN;if(e&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),i)for(this.rowHeaders=[],r=0;r<this.data.length;r++)this.rowHeaders.push(this.data[r][0]),this.data[r]=this.data[r].slice(1)}return this},loadFromTable:function(t,e,i){var r,s,n,o,a;if(utils_type.A.isArray(e)&&(this.columnHeaders=e,e=!1),utils_type.A.isArray(i)&&(this.rowHeaders=i,i=!1),this.data=[],e&&(this.columnHeaders=[]),i&&(this.rowHeaders=[]),t=document.getElementById(t),utils_type.A.exists(t)){for(r=t.getElementsByTagName("tr"),this.data=[],s=0;s<r.length;s++)for(o=r[s].getElementsByTagName("td"),this.data[s]=[],n=0;n<o.length;n++)a=o[n].innerHTML,parseFloat(a).toString()===a?this.data[s][n]=parseFloat(a):this.data[s][n]="-"!==a?a:NaN;if(e&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),i)for(this.rowHeaders=[],s=0;s<this.data.length;s++)this.rowHeaders.push(this.data[s][0]),this.data[s]=this.data[s].slice(1)}return this},addColumn:function(t,e,i){throw new Error("not implemented")},addRow:function(t,e,i){throw new Error("not implemented")},getColumn:function(t){var e,i=[];if(utils_type.A.isString(t))for(e=0;e<this.columnHeaders.length;e++)if(t===this.columnHeaders[e]){t=e;break}for(e=0;e<this.data.length;e++)this.data[e].length>t&&(i[e]=parseFloat(this.data[e][t]));return i},getRow:function(t){var e,i;if(utils_type.A.isString(t))for(i=0;i<this.rowHeaders.length;i++)if(t===this.rowHeaders[i]){t=i;break}for(e=[],i=0;i<this.data[t].length;i++)e[i]=this.data[t][i];return e}});const datasource=jxg.A.DataSource;jxg.A.Chart=function(t,e,i){var r,s,n,o,a,l;if(this.constructor(t,i),!utils_type.A.isArray(e)||0===e.length)throw new Error("JSXGraph: Can't create a chart without data");if(this.elements=[],utils_type.A.isNumber(e[0]))for(s=e,r=[],n=0;n<s.length;n++)r[n]=n+1;else if(1===e.length&&utils_type.A.isArray(e[0]))for(s=e[0],r=[],l=utils_type.A.evaluate(s).length,n=0;n<l;n++)r[n]=n+1;else 2===e.length&&(l=Math.min(e[0].length,e[1].length),r=e[0].slice(0,l),s=e[1].slice(0,l));if(utils_type.A.isArray(s)&&0===s.length)throw new Error("JSXGraph: Can't create charts without data.");for(a=i.chartstyle.replace(/ /g,"").split(","),n=0;n<a.length;n++){switch(a[n]){case"bar":o=this.drawBar(t,r,s,i);break;case"line":o=this.drawLine(t,r,s,i);break;case"fit":o=this.drawFit(t,r,s,i);break;case"spline":o=this.drawSpline(t,r,s,i);break;case"pie":o=this.drawPie(t,s,i);break;case"point":o=this.drawPoints(t,r,s,i);break;case"radar":o=this.drawRadar(t,e,i)}this.elements.push(o)}return this.id=this.board.setId(this,"Chart"),this.elements},jxg.A.Chart.prototype=new base_element.A,jxg.A.extend(jxg.A.Chart.prototype,{drawLine:function(t,e,i,r){return r.fillcolor="none",r.highlightfillcolor="none",t.create("curve",[e,i],r)},drawSpline:function(t,e,i,r){return r.fillColor="none",r.highlightfillcolor="none",t.create("spline",[e,i],r)},drawFit:function(t,e,i,r){var s=r.degree;return s=Math.max(parseInt(s,10),1)||1,r.fillcolor="none",r.highlightfillcolor="none",t.create("functiongraph",[numerics.A.regressionPolynomial(s,e,i)],r)},drawBar:function(t,e,i,r){var s,n,o,a,l,u,c,h,d,p,f=[],_=[],m=function(t,i){return function(){return e[t]()-i*o}},g={fixed:!0,withLabel:!1,visible:!1,name:""};if((d=utils_type.A.copyAttributes(r,t.options,"chart"))&&d.width)o=d.width;else{if(e.length<=1)o=1;else for(o=e[1]-e[0],s=1;s<e.length-1;s++)o=e[s+1]-e[s]<o?e[s+1]-e[s]:o;o*=.8}for(p=utils_type.A.copyAttributes(r,t.options,"chart","label"),s=0;s<e.length;s++)utils_type.A.isFunction(e[s])?(a=m(s,-.5),l=m(s,0),u=m(s,.5)):(a=e[s]-.5*o,l=e[s],u=e[s]+.5*o),c=utils_type.A.isFunction(i[s])?i[s]():i[s],c=i[s],"horizontal"===d.dir?(_[0]=t.create("point",[0,a],g),_[1]=t.create("point",[c,a],g),_[2]=t.create("point",[c,u],g),_[3]=t.create("point",[0,u],g),utils_type.A.exists(d.labels)&&utils_type.A.exists(d.labels[s])&&(p.anchorY="middle",(n=t.create("text",[c,l,d.labels[s]],p)).visProp.anchorx=function(t){return function(){return t.X()>=0?"left":"right"}}(n))):(_[0]=t.create("point",[a,0],g),_[1]=t.create("point",[a,c],g),_[2]=t.create("point",[u,c],g),_[3]=t.create("point",[u,0],g),utils_type.A.exists(d.labels)&&utils_type.A.exists(d.labels[s])&&(p.anchorX="middle",(n=t.create("text",[l,c,d.labels[s]],p)).visProp.anchory=function(t){return function(){return t.Y()>=0?"bottom":"top"}}(n))),utils_type.A.isArray(d.colors)&&(h=d.colors,d.fillcolor=h[s%h.length]),f[s]=t.create("polygon",_,d),utils_type.A.exists(d.labels)&&utils_type.A.exists(d.labels[s])&&(f[s].text=n);return f},drawPoints:function(t,e,i,r){var s,n=[],o=r.infoboxarray;for(r.fixed=!0,r.name="",s=0;s<e.length;s++)r.infoboxtext=!!o&&o[s%o.length],n[s]=t.create("point",[e[s],i[s]],r);return n},drawPie:function(t,e,i){var r,s,n=[],o=[],a=i.colors,l=i.highlightcolors,u=i.labels,c=i.radius||4,h=c,d=i.center||[0,0],p=d[0],f=d[1],_=function(t,i,r){return function(){var s,n,o,a=0;for(n=0;n<=t;n++)a+=parseFloat(utils_type.A.evaluate(e[n]));for(s=a,n=t+1;n<e.length;n++)s+=parseFloat(utils_type.A.evaluate(e[n]));return o=0!==s?2*Math.PI*a/s:0,h()*Math[i](o)+r}},m=function(t,e){var i=-this.point1.coords.usrCoords[1]+this.point2.coords.usrCoords[1],r=-this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[2];utils_type.A.exists(this.label)&&(this.label.rendNode.style.fontSize=e*utils_type.A.evaluate(this.label.visProp.fontsize)+"px",this.label.fullUpdate()),this.point2.coords=new base_coords.A(constants.A.COORDS_BY_USER,[this.point1.coords.usrCoords[1]+i*t,this.point1.coords.usrCoords[2]+r*t],this.board),this.fullUpdate()},g=function(){this.highlighted||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this),m.call(this,1.1,2))},y=function(){this.highlighted&&(this.highlighted=!1,this.board.renderer.noHighlight(this),m.call(this,.9090909,1))},v={fixed:!0,withLabel:!1,visible:!1,name:""};if(!utils_type.A.isArray(u))for(u=[],r=0;r<e.length;r++)u[r]="";for(utils_type.A.isFunction(c)||(h=function(){return c}),i.highlightonsector=i.highlightonsector||!1,i.straightfirst=!1,i.straightlast=!1,s=t.create("point",[p,f],v),n[0]=t.create("point",[function(){return h()+p},function(){return f}],v),r=0;r<e.length;r++)n[r+1]=t.create("point",[_(r,"cos",p),_(r,"sin",f)],v),i.name=u[r],i.withlabel=""!==i.name,i.fillcolor=a&&a[r%a.length],i.labelcolor=a&&a[r%a.length],i.highlightfillcolor=l&&l[r%l.length],o[r]=t.create("sector",[s,n[r],n[r+1]],i),i.highlightonsector&&(o[r].hasPoint=o[r].hasPointSector),i.highlightbysize&&(o[r].highlight=g,o[r].noHighlight=y);return{sectors:o,points:n,midpoint:s}},drawRadar:function(t,e,i){var r,s,n,o,a,l,u,c,h,d,p,f,_,m,g,y,v,A,b,C,x,P,E,w,S,O,M,T,j,N,R,k,D,L,I,B,F,Y,U,z,X,J,H=e.length,G=function(){var t,e,i,r,s=utils_type.A.evaluate(this.visProp.label.offset).slice(0);return t=this.point1.X(),e=this.point2.X(),i=this.point1.Y(),r=this.point2.Y(),e<t&&(s[0]=-s[0]),r<i&&(s[1]=-s[1]),this.setLabelRelativeCoords(s),new base_coords.A(constants.A.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)},W=function(e,i){var r,s,n;return r=t.create("transform",[-(g[i]-_[i]),0],{type:"translate"}),s=t.create("transform",[b/(y[i]+m[i]-(g[i]-_[i])),1],{type:"scale"}),r.melt(s),n=t.create("transform",[e],{type:"rotate"}),r.melt(n),r};if(H<=0)throw new Error("JSXGraph radar chart: no data");if(n=i.paramarray,!utils_type.A.exists(n))throw new Error("JSXGraph radar chart: need paramArray attribute");if((o=n.length)<=1)throw new Error("JSXGraph radar chart: need more than one param in paramArray");for(r=0;r<H;r++)if(o!==e[r].length)throw new Error("JSXGraph radar chart: use data length equal to number of params ("+e[r].length+" != "+o+")");for(a=[],l=[],s=0;s<o;s++)a[s]=e[0][s],l[s]=a[s];for(r=1;r<H;r++)for(s=0;s<o;s++)e[r][s]>a[s]&&(a[s]=e[r][s]),e[r][s]<l[s]&&(l[s]=e[r][s]);for(u=[],c=[],r=0;r<H;r++)u[r]="",c[r]=[];for(h=[],d=[],p=i.startshiftratio||0,f=i.endshiftratio||0,r=0;r<o;r++)h[r]=(a[r]-l[r])*p,d[r]=(a[r]-l[r])*f;if(_=i.startshiftarray||h,m=i.endshiftarray||d,g=i.startarray||l,utils_type.A.exists(i.start))for(r=0;r<o;r++)g[r]=i.start;if(y=i.endarray||a,utils_type.A.exists(i.end))for(r=0;r<o;r++)y[r]=i.end;if(_.length!==o)throw new Error("JSXGraph radar chart: start shifts length is not equal to number of parameters");if(m.length!==o)throw new Error("JSXGraph radar chart: end shifts length is not equal to number of parameters");if(g.length!==o)throw new Error("JSXGraph radar chart: starts length is not equal to number of parameters");if(y.length!==o)throw new Error("JSXGraph radar chart: snds length is not equal to number of parameters");for(v=i.labelarray||u,A=i.colors,b=i.radius||10,X=i.strokewidth||1,utils_type.A.exists(i.highlightonsector)||(i.highlightonsector=!1),C={name:i.name,id:i.id,strokewidth:X,polystrokewidth:i.polystrokewidth||X,strokecolor:i.strokecolor||"black",straightfirst:!1,straightlast:!1,fillcolor:i.fillColor||"#FFFF88",fillopacity:i.fillOpacity||.4,highlightfillcolor:i.highlightFillColor||"#FF7400",highlightstrokecolor:i.highlightStrokeColor||"black",gradient:i.gradient||"none"},P=(x=i.center||[0,0])[0],E=x[1],w=t.create("point",[P,E],{name:"",fixed:!0,withlabel:!1,visible:!1}),Math.PI/2-Math.PI/o,O=S=i.startangle||0,M=[],T=[],r=0;r<o;r++)for(O+=2*Math.PI/o,N=b*Math.cos(O)+P,R=b*Math.sin(O)+E,M[r]=t.create("point",[N,R],{name:"",fixed:!0,withlabel:!1,visible:!1}),T[r]=t.create("line",[w,M[r]],{name:n[r],strokeColor:C.strokecolor,strokeWidth:C.strokewidth,strokeOpacity:1,straightFirst:!1,straightLast:!1,withLabel:!0,highlightStrokeColor:C.highlightstrokecolor}),T[r].getLabelAnchor=G,j=W(O,r),s=0;s<e.length;s++)J=e[s][r],c[s][r]=t.create("point",[J,0],{name:"",fixed:!0,withlabel:!1,visible:!1}),c[s][r].addTransform(c[s][r],j);for(k=[],r=0;r<H;r++)for(C.labelcolor=A&&A[r%A.length],C.strokecolor=A&&A[r%A.length],C.fillcolor=A&&A[r%A.length],k[r]=t.create("polygon",c[r],{withLines:!0,withLabel:!1,fillColor:C.fillcolor,fillOpacity:C.fillopacity,highlightFillColor:C.highlightfillcolor}),s=0;s<o;s++)k[r].borders[s].setAttribute("strokecolor:"+A[r%A.length]),k[r].borders[s].setAttribute("strokewidth:"+C.polystrokewidth);switch(i.legendposition||"none"){case"right":L=i.legendleftoffset||2,I=i.legendtopoffset||1,this.legend=t.create("legend",[P+b+L,E+b-I],{labels:v,colors:A});break;case"none":break;default:jxg.A.debug("Unknown legend position")}if(D=[],i.showcircles){for(B=[],r=0;r<6;r++)B[r]=20*r;if(B[0]="0",(Y=(F=i.circlelabelarray||B).length)<2)throw new Error("JSXGraph radar chart: too less circles in circleLabelArray");for(U=[],j=W(S+Math.PI/o,0),C.fillcolor="none",C.highlightfillcolor="none",C.strokecolor=i.strokecolor||"black",C.strokewidth=i.circlestrokewidth||.5,C.layer=0,z=(y[0]-g[0])/(Y-1),r=0;r<Y;r++)U[r]=t.create("point",[g[0]+r*z,0],{name:F[r],size:0,fixed:!0,withLabel:!0,visible:!0}),U[r].addTransform(U[r],j),D[r]=t.create("circle",[w,U[r]],C)}return this.rendNode=k[0].rendNode,{circles:D,lines:T,points:c,midpoint:w,polygons:k}},updateRenderer:function(){return this},update:function(){return this.needsUpdate&&this.updateDataArray(),this},updateDataArray:function(){return this}}),jxg.A.createChart=function(t,e,i){var r,s,n,o,a,l,u,c,h,d,p,f,_,m,g,y,v=[],A=env.A.isBrowser?t.document.getElementById(e[0]):null;if(1===e.length&&utils_type.A.isString(e[0])){if(utils_type.A.exists(A)){if(h=utils_type.A.copyAttributes(i,t.options,"chart"),r=(A=(new datasource).loadFromTable(e[0],h.withheaders,h.withheaders)).data,a=A.columnHeaders,s=A.rowHeaders,d=h.width,p=h.name,f=h.strokecolor,_=h.fillcolor,m=h.highlightstrokecolor,g=h.highlightfillcolor,t.suspendUpdate(),y=r.length,c=[],h.rows&&utils_type.A.isArray(h.rows)){for(n=0;n<y;n++)for(o=0;o<h.rows.length;o++)if(h.rows[o]===n||h.withheaders&&h.rows[o]===s[n]){c.push(r[n]);break}}else c=r;for(y=c.length,n=0;n<y;n++){if(u=[],h.chartstyle&&-1!==h.chartstyle.indexOf("bar")){for(l=d||.8,u.push(1-l/2+(n+.5)*l/y),o=1;o<c[n].length;o++)u.push(u[o-1]+1);h.width=l/y}p&&p.length===y?h.name=p[n]:h.withheaders&&(h.name=a[n]),f&&f.length===y?h.strokecolor=f[n]:h.strokecolor=utils_color.A.hsv2rgb((n+1)/y*360,.9,.6),_&&_.length===y?h.fillcolor=_[n]:h.fillcolor=utils_color.A.hsv2rgb((n+1)/y*360,.9,1),m&&m.length===y?h.highlightstrokecolor=m[n]:h.highlightstrokecolor=utils_color.A.hsv2rgb((n+1)/y*360,.9,1),g&&g.length===y?h.highlightfillcolor=g[n]:h.highlightfillcolor=utils_color.A.hsv2rgb((n+1)/y*360,.9,.6),h.chartstyle&&-1!==h.chartstyle.indexOf("bar")?v.push(new jxg.A.Chart(t,[u,c[n]],h)):v.push(new jxg.A.Chart(t,[c[n]],h))}t.unsuspendUpdate()}return v}return h=utils_type.A.copyAttributes(i,t.options,"chart"),new jxg.A.Chart(t,e,h)},jxg.A.registerElement("chart",jxg.A.createChart),jxg.A.Legend=function(t,e,i){var r;if(this.constructor(),r=utils_type.A.copyAttributes(i,t.options,"legend"),this.board=t,this.coords=new base_coords.A(constants.A.COORDS_BY_USER,e,this.board),this.myAtts={},this.label_array=r.labelarray||r.labels,this.color_array=r.colorarray||r.colors,this.lines=[],this.myAtts.strokewidth=r.strokewidth||5,this.myAtts.straightfirst=!1,this.myAtts.straightlast=!1,this.myAtts.withlabel=!0,this.myAtts.fixed=!0,this.style=r.legendstyle||r.style,"vertical"!==this.style)throw new Error("JSXGraph: Unknown legend style: "+this.style);this.drawVerticalLegend(t,r)},jxg.A.Legend.prototype=new base_element.A,jxg.A.Legend.prototype.drawVerticalLegend=function(t,e){var i,r=e.linelength||1,s=(e.rowheight||20)/this.board.unitY,n=function(){return this.setLabelRelativeCoords(this.visProp.label.offset),new base_coords.A(constants.A.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)};for(i=0;i<this.label_array.length;i++)this.myAtts.name=this.label_array[i],this.myAtts.strokecolor=this.color_array[i%this.color_array.length],this.myAtts.highlightstrokecolor=this.color_array[i%this.color_array.length],this.myAtts.label={offset:[10,0],strokeColor:this.color_array[i%this.color_array.length],strokeWidth:this.myAtts.strokewidth},this.lines[i]=t.create("line",[[this.coords.usrCoords[1],this.coords.usrCoords[2]-i*s],[this.coords.usrCoords[1]+r,this.coords.usrCoords[2]-i*s]],this.myAtts),this.lines[i].getLabelAnchor=n,this.lines[i].prepareUpdate().update().updateVisibility(utils_type.A.evaluate(this.lines[i].visProp.visible)).updateRenderer()},jxg.A.createLegend=function(t,e,i){var r=[0,0];if(!utils_type.A.exists(e)||2!==e.length)throw new Error("JSXGraph: Legend element needs two numbers as parameters");return r=e,new jxg.A.Legend(t,r,i)},jxg.A.registerElement("legend",jxg.A.createLegend);const chart={Chart:jxg.A.Chart,Legend:jxg.A.Legend};jxg.A.Transformation=function(t,e,i){this.elementClass=constants.A.OBJECT_CLASS_OTHER,this.type=constants.A.OBJECT_TYPE_TRANSFORMATION,this.matrix=[[1,0,0],[0,1,0],[0,0,1]],this.board=t,this.isNumericMatrix=!1,this.setMatrix(t,e,i),this.methodMap={apply:"apply",applyOnce:"applyOnce",bindTo:"bindTo",bind:"bindTo",melt:"melt"}},jxg.A.Transformation.prototype={},jxg.A.extend(jxg.A.Transformation.prototype,{update:function(){return this},setMatrix:function(t,e,i){var r;for(this.isNumericMatrix=!0,r=0;r<i.length;r++)if("number"!==typeof i[r]){this.isNumericMatrix=!1;break}if("translate"===e){if(2!==i.length)throw new Error("JSXGraph: translate transformation needs 2 parameters.");this.evalParam=utils_type.A.createEvalFunction(t,i,2),this.update=function(){this.matrix[1][0]=this.evalParam(0),this.matrix[2][0]=this.evalParam(1)}}else if("scale"===e){if(2!==i.length)throw new Error("JSXGraph: scale transformation needs 2 parameters.");this.evalParam=utils_type.A.createEvalFunction(t,i,2),this.update=function(){this.matrix[1][1]=this.evalParam(0),this.matrix[2][2]=this.evalParam(1)}}else if("reflect"===e)i.length<4&&(i[0]=t.select(i[0])),2===i.length&&(i[1]=t.select(i[1])),4===i.length&&(this.evalParam=utils_type.A.createEvalFunction(t,i,4)),this.update=function(){var t,e,r,s,n,o,a,l;1===i.length?a=i[0].stdform:2===i.length?a=math.A.crossProduct(i[1].coords.usrCoords,i[0].coords.usrCoords):4===i.length&&(a=math.A.crossProduct([1,this.evalParam(2),this.evalParam(3)],[1,this.evalParam(0),this.evalParam(1)])),t=a[1],e=a[2],o=(l=[-(r=a[0])*t,-r*e,t*t+e*e])[2],s=l[0]/l[2],n=l[1]/l[2],t=-a[2],e=a[1],this.matrix[1][1]=(t*t-e*e)/o,this.matrix[1][2]=2*t*e/o,this.matrix[2][1]=this.matrix[1][2],this.matrix[2][2]=-this.matrix[1][1],this.matrix[1][0]=s*(1-this.matrix[1][1])-n*this.matrix[1][2],this.matrix[2][0]=n*(1-this.matrix[2][2])-s*this.matrix[2][1]};else if("rotate"===e)3===i.length?this.evalParam=utils_type.A.createEvalFunction(t,i,3):i.length>0&&i.length<=2&&(this.evalParam=utils_type.A.createEvalFunction(t,i,1),2!==i.length||utils_type.A.isArray(i[1])||(i[1]=t.select(i[1]))),this.update=function(){var t,e,r=this.evalParam(0),s=Math.cos(r),n=Math.sin(r);this.matrix[1][1]=s,this.matrix[1][2]=-n,this.matrix[2][1]=n,this.matrix[2][2]=s,i.length>1&&(3===i.length?(t=this.evalParam(1),e=this.evalParam(2)):utils_type.A.isArray(i[1])?(t=i[1][0],e=i[1][1]):(t=i[1].X(),e=i[1].Y()),this.matrix[1][0]=t*(1-s)+e*n,this.matrix[2][0]=e*(1-s)-t*n)};else if("shear"===e){if(2!==i.length)throw new Error("JSXGraph: shear transformation needs 2 parameters.");this.evalParam=utils_type.A.createEvalFunction(t,i,2),this.update=function(){this.matrix[1][2]=this.evalParam(0),this.matrix[2][1]=this.evalParam(1)}}else if("generic"===e){if(9!==i.length)throw new Error("JSXGraph: generic transformation needs 9 parameters.");this.evalParam=utils_type.A.createEvalFunction(t,i,9),this.update=function(){this.matrix[0][0]=this.evalParam(0),this.matrix[0][1]=this.evalParam(1),this.matrix[0][2]=this.evalParam(2),this.matrix[1][0]=this.evalParam(3),this.matrix[1][1]=this.evalParam(4),this.matrix[1][2]=this.evalParam(5),this.matrix[2][0]=this.evalParam(6),this.matrix[2][1]=this.evalParam(7),this.matrix[2][2]=this.evalParam(8)}}},apply:function(t,e){return this.update(),utils_type.A.exists(e)?math.A.matVecMult(this.matrix,t.initialCoords.usrCoords):math.A.matVecMult(this.matrix,t.coords.usrCoords)},applyOnce:function(t){var e,i,r;for(utils_type.A.isArray(t)||(t=[t]),i=t.length,r=0;r<i;r++)this.update(),e=math.A.matVecMult(this.matrix,t[r].coords.usrCoords),t[r].coords.setCoordinates(constants.A.COORDS_BY_USER,e)},bindTo:function(t){var e,i;if(utils_type.A.isArray(t))for(i=t.length,e=0;e<i;e++)t[e].transformations.push(this);else t.transformations.push(this)},setProperty:function(t){jxg.A.deprecated("Transformation.setProperty()","Transformation.setAttribute()")},setAttribute:function(t){},melt:function(t){var e,i,r,s,n,o,a=[];for(i=t.matrix.length,r=this.matrix[0].length,e=0;e<i;e++)a[e]=[];for(this.update(),t.update(),e=0;e<i;e++)for(o=0;o<r;o++){for(n=0,s=0;s<i;s++)n+=t.matrix[e][s]*this.matrix[s][o];a[e][o]=n}return this.update=function(){var t=this.matrix.length,i=this.matrix[0].length;for(e=0;e<t;e++)for(o=0;o<i;o++)this.matrix[e][o]=a[e][o]},this},getParents:function(){var t=[[].concat.apply([],this.matrix)];return 0!==this.parents.length&&(t=this.parents),t}}),jxg.A.createTransform=function(t,e,i){return new jxg.A.Transformation(t,i.type,e)},jxg.A.registerElement("transform",jxg.A.createTransform);const transformation=jxg.A.Transformation;jxg.A.Turtle=function(t,e,i){var r,s,n;return this.constructor(t,i,constants.A.OBJECT_TYPE_TURTLE,constants.A.OBJECT_CLASS_OTHER),this.turtleIsHidden=!1,this.board=t,this.visProp.curveType="plot",this._attributes=utils_type.A.copyAttributes(this.visProp,t.options,"turtle"),delete this._attributes.id,r=0,s=0,n=90,0!==e.length&&(3===e.length?(r=e[0],s=e[1],n=e[2]):2===e.length?utils_type.A.isArray(e[0])?(r=e[0][0],s=e[0][1],n=e[1]):(r=e[0],s=e[1]):(r=e[0][0],s=e[0][1])),this.init(r,s,n),this.methodMap=utils_type.A.deepCopy(this.methodMap,{forward:"forward",fd:"forward",back:"back",bk:"back",right:"right",rt:"right",left:"left",lt:"left",penUp:"penUp",pu:"penUp",up:"penUp",penDown:"penDown",pd:"penDown",down:"penDown",clearScreen:"clearScreen",cs:"clearScreen",clean:"clean",setPos:"setPos",home:"home",hideTurtle:"hideTurtle",ht:"hideTurtle",hide:"hideTurtle",showTurtle:"showTurtle",st:"showTurtle",show:"showTurtle",penSize:"setPenSize",setPenSize:"setPenSize",penColor:"setPenColor",setPenColor:"setPenColor",highlightPenColor:"setHighlightPenColor",setHighlightPenColor:"setHighlightPenColor",getPenColor:"getPenColor",Color:"getPenColor",getHighlightPenColor:"getHighlightPenColor",HighlightColor:"getHighlightPenColor",getPenSize:"getPenSize",Size:"getPenSize",pushTurtle:"pushTurtle",push:"pushTurtle",popTurtle:"popTurtle",pop:"popTurtle",lookTo:"lookTo",pos:"pos",Pos:"pos",moveTo:"moveTo",X:"X",Y:"Y"}),this},jxg.A.Turtle.prototype=new base_element.A,jxg.A.extend(jxg.A.Turtle.prototype,{init:function(t,e,i){var r={fixed:!0,name:"",visible:!1,withLabel:!1};this.arrowLen=20/math.A.hypot(this.board.unitX,this.board.unitY),this.pos=[t,e],this.isPenDown=!0,this.dir=90,this.stack=[],this.objects=[],this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.turtle=this.board.create("point",this.pos,r),this.objects.push(this.turtle),this.turtle2=this.board.create("point",[this.pos[0],this.pos[1]+this.arrowLen],r),this.objects.push(this.turtle2),this.visProp.arrow.lastArrow=!0,this.visProp.arrow.straightFirst=!1,this.visProp.arrow.straightLast=!1,this.arrow=this.board.create("line",[this.turtle,this.turtle2],this.visProp.arrow),this.objects.push(this.arrow),this.subs={arrow:this.arrow},this.inherits.push(this.arrow),this.right(90-i),this.board.update()},forward:function(t){if(0===t)return this;var e,i=t*Math.cos(this.dir*Math.PI/180),r=t*Math.sin(this.dir*Math.PI/180);return this.turtleIsHidden||((e=this.board.create("transform",[i,r],{type:"translate"})).applyOnce(this.turtle),e.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]+=i,this.pos[1]+=r,this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update(),this},back:function(t){return this.forward(-t)},right:function(t){(this.dir-=t,this.dir%=360,this.turtleIsHidden)||this.board.create("transform",[-t*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2);return this.board.update(),this},left:function(t){return this.right(-t)},penUp:function(){return this.isPenDown=!1,this},penDown:function(){return this.isPenDown=!0,this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this},clean:function(){var t,e;for(t=0;t<this.objects.length;t++)(e=this.objects[t]).type===constants.A.OBJECT_TYPE_CURVE&&(this.board.removeObject(e),this.objects.splice(t,1));return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},clearScreen:function(){var t,e,i=this.objects.length;for(t=0;t<i;t++)e=this.objects[t],this.board.removeObject(e);return this.init(0,0,90),this},setPos:function(t,e){return utils_type.A.isArray(t)?this.pos=t:this.pos=[t,e],this.turtleIsHidden||(this.turtle.setPositionDirectly(constants.A.COORDS_BY_USER,[t,e]),this.turtle2.setPositionDirectly(constants.A.COORDS_BY_USER,[t,e+this.arrowLen]),this.board.create("transform",[-(this.dir-90)*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2)),this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},setPenSize:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeWidth",t)),this.objects.push(this.curve),this},setPenColor:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeColor",t)),this.objects.push(this.curve),this},getPenAttribute:function(t){var e,i=this.objects.length;return e=4===i?0:i-1,utils_type.A.evaluate(this.objects[e].visProp[t])},getPenSize:function(){return this.getPenAttribute("strokewidth")},getPenColor:function(){return this.getPenAttribute("strokecolor")},getHighlightPenColor:function(){return this.getPenAttribute("highlightstrokecolor")},setHighlightPenColor:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("highlightStrokeColor",t)),this.objects.push(this.curve),this},setAttribute:function(t){var e,i,r,s=this.objects.length;for(e=0;e<s;e++)(i=this.objects[e]).type===constants.A.OBJECT_TYPE_CURVE&&i.setAttribute(t);return r=this.visProp.id,this.visProp=utils_type.A.deepCopy(this.curve.visProp),this.visProp.id=r,this._attributes=utils_type.A.deepCopy(this.visProp),delete this._attributes.id,this},copyAttr:function(t,e){return this._attributes[t.toLowerCase()]=e,this._attributes},showTurtle:function(){return this.turtleIsHidden=!1,this.arrow.setAttribute({visible:!0}),this.visProp.arrow.visible=!1,this.setPos(this.pos[0],this.pos[1]),this.board.update(),this},hideTurtle:function(){return this.turtleIsHidden=!0,this.arrow.setAttribute({visible:!1}),this.visProp.arrow.visible=!1,this.board.update(),this},home:function(){return this.pos=[0,0],this.setPos(this.pos[0],this.pos[1]),this},pushTurtle:function(){return this.stack.push([this.pos[0],this.pos[1],this.dir]),this},popTurtle:function(){var t=this.stack.pop();return this.pos[0]=t[0],this.pos[1]=t[1],this.dir=t[2],this.setPos(this.pos[0],this.pos[1]),this},lookTo:function(t){var e,i,r,s,n;return utils_type.A.isArray(t)?(e=this.pos[0],i=this.pos[1],r=t[0],s=t[1],n=Math.atan2(s-i,r-e),this.right(this.dir-180*n/Math.PI)):utils_type.A.isNumber(t)&&this.right(this.dir-t),this},moveTo:function(t){var e,i,r;return utils_type.A.isArray(t)&&(e=t[0]-this.pos[0],i=t[1]-this.pos[1],this.turtleIsHidden||((r=this.board.create("transform",[e,i],{type:"translate"})).applyOnce(this.turtle),r.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]=t[0],this.pos[1]=t[1],this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update()),this},fd:function(t){return this.forward(t)},bk:function(t){return this.back(t)},lt:function(t){return this.left(t)},rt:function(t){return this.right(t)},pu:function(){return this.penUp()},pd:function(){return this.penDown()},ht:function(){return this.hideTurtle()},st:function(){return this.showTurtle()},cs:function(){return this.clearScreen()},push:function(){return this.pushTurtle()},pop:function(){return this.popTurtle()},evalAt:function(t,e){var i,r,s,n,o=this.objects.length;for(i=0,r=0;i<o;i++)if((s=this.objects[i]).elementClass===constants.A.OBJECT_CLASS_CURVE){if(r<=t&&t<r+s.numberPoints)return n=t-r,s[e](n);r+=s.numberPoints}return this[e]()},X:function(t){return utils_type.A.exists(t)?this.evalAt(t,"X"):this.pos[0]},Y:function(t){return utils_type.A.exists(t)?this.evalAt(t,"Y"):this.pos[1]},Z:function(t){return 1},minX:function(){return 0},maxX:function(){var t,e=this.objects.length,i=0;for(t=0;t<e;t++)this.objects[t].elementClass===constants.A.OBJECT_CLASS_CURVE&&(i+=this.objects[t].numberPoints);return i},hasPoint:function(t,e){var i,r;for(i=0;i<this.objects.length;i++)if((r=this.objects[i]).type===constants.A.OBJECT_TYPE_CURVE&&r.hasPoint(t,e))return!0;return!1}}),jxg.A.createTurtle=function(t,e,i){var r;return e=e||[],r=utils_type.A.copyAttributes(i,t.options,"turtle"),new jxg.A.Turtle(t,e,r)},jxg.A.registerElement("turtle",jxg.A.createTurtle);const turtle=jxg.A.Turtle;jxg.A.Ticks=function(t,e,i){if(this.constructor(t.board,i,constants.A.OBJECT_TYPE_TICKS,constants.A.OBJECT_CLASS_OTHER),this.line=t,this.board=this.line.board,this.fixedTicks=null,this.equidistant=!1,this.labelsData=[],utils_type.A.isFunction(e))throw this.ticksFunction=e,new Error("Function arguments are no longer supported.");utils_type.A.isArray(e)?this.fixedTicks=e:this.equidistant=!0,this.ticks=[],this.labels=[],this.labelCounter=0,this.id=this.line.addTicks(this),this.elType="ticks",this.inherits.push(this.labels),this.board.setId(this,"Ti")},jxg.A.Ticks.prototype=new base_element.A,jxg.A.extend(jxg.A.Ticks.prototype,{hasPoint:function(t,e){var i,r,s,n,o=this.ticks&&this.ticks.length||0;if(utils_type.A.isObject(utils_type.A.evaluate(this.visProp.precision))?(n=this.board._inputDevice,s=utils_type.A.evaluate(this.visProp.precision[n])):s=this.board.options.precision.hasPoint,s+=.5*utils_type.A.evaluate(this.visProp.strokewidth),!utils_type.A.evaluate(this.line.visProp.scalable)||this.line.elementClass===constants.A.OBJECT_CLASS_CURVE)return!1;if(0!==this.line.stdform[1]&&0!==this.line.stdform[2]&&this.line.type!==constants.A.OBJECT_TYPE_AXIS)return!1;for(i=0;i<o;i++)if((r=this.ticks[i])[2]&&!(0===this.line.stdform[1]&&Math.abs(r[0][0]-this.line.point1.coords.scrCoords[1])<math.A.eps||0===this.line.stdform[2]&&Math.abs(r[1][0]-this.line.point1.coords.scrCoords[2])<math.A.eps)&&(Math.abs(r[0][0]-r[0][1])>=1||Math.abs(r[1][0]-r[1][1])>=1))if(0===this.line.stdform[1]){if(Math.abs(e-this.line.point1.coords.scrCoords[2])<2*s&&r[0][0]-s<t&&t<r[0][1]+s)return!0}else if(0===this.line.stdform[2]&&Math.abs(t-this.line.point1.coords.scrCoords[1])<2*s&&r[1][0]-s<e&&e<r[1][1]+s)return!0;return!1},setPositionDirectly:function(t,e,i){var r,s,n=new base_coords.A(t,e,this.board),o=new base_coords.A(t,i,this.board),a=this.board.getBoundingBox();return this.line.type===constants.A.OBJECT_TYPE_AXIS&&utils_type.A.evaluate(this.line.visProp.scalable)?(Math.abs(this.line.stdform[1])<math.A.eps&&Math.abs(n.usrCoords[1]*o.usrCoords[1])>math.A.eps?(r=o.usrCoords[1]/n.usrCoords[1],a[0]*=r,a[2]*=r,this.board.setBoundingBox(a,this.board.keepaspectratio,"update")):Math.abs(this.line.stdform[2])<math.A.eps&&Math.abs(n.usrCoords[2]*o.usrCoords[2])>math.A.eps&&(s=o.usrCoords[2]/n.usrCoords[2],a[3]*=s,a[1]*=s,this.board.setBoundingBox(a,this.board.keepaspectratio,"update")),this):this},calculateTicksCoordinates:function(){var t,e,i,r;if(!(this.line.elementClass===constants.A.OBJECT_CLASS_LINE&&(this.setTicksSizeVariables(),Math.abs(this.dx)<math.A.eps&&Math.abs(this.dy)<math.A.eps)))return t=this.getZeroCoordinates(),e=this.line.elementClass===constants.A.OBJECT_CLASS_LINE?this.getLowerAndUpperBounds(t,"ticksdistance"):{lower:this.line.minX(),upper:this.line.maxX(),a1:0,a2:0,m1:0,m2:0},"polar"===utils_type.A.evaluate(this.visProp.type)&&(r=this.board.getBoundingBox(),i=Math.max(math.A.hypot(r[0],r[1]),math.A.hypot(r[2],r[3])),e.upper=i),this.ticks=[],this.labelsData=[],this.equidistant?this.generateEquidistantTicks(t,e):this.generateFixedTicks(t,e),this},setTicksSizeVariables:function(t){var e,i,r,s,n=.5*utils_type.A.evaluate(this.visProp.majorheight),o=.5*utils_type.A.evaluate(this.visProp.minorheight);utils_type.A.exists(t)?(i=this.line.minX(),r=this.line.maxX(),(s=this.line.points.length)<2?(this.dxMaj=0,this.dyMaj=0):math.A.relDif(t,i)<math.A.eps?(this.dxMaj=this.line.points[0].usrCoords[2]-this.line.points[1].usrCoords[2],this.dyMaj=this.line.points[1].usrCoords[1]-this.line.points[0].usrCoords[1]):math.A.relDif(t,r)<math.A.eps?(this.dxMaj=this.line.points[s-2].usrCoords[2]-this.line.points[s-1].usrCoords[2],this.dyMaj=this.line.points[s-1].usrCoords[1]-this.line.points[s-2].usrCoords[1]):(this.dxMaj=-numerics.A.D(this.line.Y)(t),this.dyMaj=numerics.A.D(this.line.X)(t))):(this.dxMaj=this.line.stdform[1],this.dyMaj=this.line.stdform[2]),this.dxMin=this.dxMaj,this.dyMin=this.dyMaj,this.dx=this.dxMaj,this.dy=this.dyMaj,e=math.A.hypot(this.dxMaj*this.board.unitX,this.dyMaj*this.board.unitY),this.dxMaj*=n/e*this.board.unitX,this.dyMaj*=n/e*this.board.unitY,this.dxMin*=o/e*this.board.unitX,this.dyMin*=o/e*this.board.unitY,this.minStyle=utils_type.A.evaluate(this.visProp.minorheight)<0?"infinite":"finite",this.majStyle=utils_type.A.evaluate(this.visProp.majorheight)<0?"infinite":"finite"},getZeroCoordinates:function(){var t,e,i,r,s,n,o,a,l=utils_type.A.evaluate(this.visProp.anchor);return this.line.elementClass===constants.A.OBJECT_CLASS_LINE?this.line.type===constants.A.OBJECT_TYPE_AXIS?geometry.A.projectPointToLine({coords:{usrCoords:[1,0,0]}},this.line,this.board):(i=this.line.point1.coords.usrCoords[0],t=this.line.point1.coords.usrCoords[1],e=this.line.point1.coords.usrCoords[2],n=this.line.point2.coords.usrCoords[0],r=this.line.point2.coords.usrCoords[1],s=this.line.point2.coords.usrCoords[2],"right"===l?this.line.point2.coords:"middle"===l?new base_coords.A(constants.A.COORDS_BY_USER,[.5*(i+n),.5*(t+r),.5*(e+s)],this.board):utils_type.A.isNumber(l)?new base_coords.A(constants.A.COORDS_BY_USER,[i+(n-i)*l,t+(r-t)*l,e+(s-e)*l],this.board):this.line.point1.coords):(o=this.line.minX(),a=this.line.maxX(),"right"===l?a:"middle"===l?.5*(o+a):utils_type.A.isNumber(l)?o*(1-l)+a*l:o)},getLowerAndUpperBounds:function(t,e){var i,r,s,n,o,a,l,u,c,h,d,p,f,_,m,g=10*math.A.eps,y=utils_type.A.evaluate(this.line.visProp.straightfirst),v=utils_type.A.evaluate(this.line.visProp.straightlast),A=utils_type.A.evaluate(this.visProp.includeboundaries);return this.line.elementClass===constants.A.OBJECT_CLASS_CURVE?{lower:this.line.minX(),upper:this.line.maxX()}:(o=new base_coords.A(constants.A.COORDS_BY_USER,this.line.point1.coords.usrCoords,this.board),a=new base_coords.A(constants.A.COORDS_BY_USER,this.line.point2.coords.usrCoords,this.board),l=Math.abs(o.usrCoords[0])>=math.A.eps&&o.scrCoords[1]>=0&&o.scrCoords[1]<=this.board.canvasWidth&&o.scrCoords[2]>=0&&o.scrCoords[2]<=this.board.canvasHeight,u=Math.abs(a.usrCoords[0])>=math.A.eps&&a.scrCoords[1]>=0&&a.scrCoords[1]<=this.board.canvasWidth&&a.scrCoords[2]>=0&&a.scrCoords[2]<=this.board.canvasHeight,utils_type.A.exists(e)&&"ticksdistance"===e?(geometry.A.calcStraight(this.line,o,a,0),_=this.getDistanceFromZero(t,o),m=this.getDistanceFromZero(t,a),geometry.A.calcStraight(this.line,o,a,utils_type.A.evaluate(this.line.visProp.margin)),_=this.getDistanceFromZero(t,o)-_,m=this.getDistanceFromZero(t,a).m2):geometry.A.calcLineDelimitingPoints(this.line,o,a),s=utils_type.A.evaluate(this.line.visProp.firstarrow),n=utils_type.A.evaluate(this.line.visProp.lastarrow),p=this.getDistanceFromZero(t,o),f=this.getDistanceFromZero(t,a),(s||n)&&(d=this.board.renderer.getArrowHeadData(this.line,utils_type.A.evaluate(this.line.visProp.strokewidth),""),this.board.renderer.getPositionArrowHead(this.line,o,a,d)),(c=this.getDistanceFromZero(t,o))<(h=this.getDistanceFromZero(t,a))?(i=c,r=h,y||!l||A||(i+=g),v||!u||A||(r-=g)):h<c?(i=h,r=c,v||!u||A||(i+=g),y||!l||A||(r-=g)):(i=0,r=0),{lower:i,upper:r,a1:p=c-p,a2:f=c-f,m1:_,m2:m})},getDistanceFromZero:function(t,e){var i,r,s,n,o;return i=this.line.point1.coords,r=this.line.point2.coords,o=t.distance(constants.A.COORDS_BY_USER,e),s=[r.usrCoords[0]-i.usrCoords[0],r.usrCoords[1]-i.usrCoords[1],r.usrCoords[2]-i.usrCoords[2]],n=[e.usrCoords[0]-t.usrCoords[0],e.usrCoords[1]-t.usrCoords[1],e.usrCoords[2]-t.usrCoords[2]],math.A.innerProduct(s,n,3)<0&&(o*=-1),o},generateEquidistantTicks:function(t,e){var i,r,s,n=math.A.eps,o=utils_type.A.evaluate(this.visProp.minorticks);if(s=this.getDistanceMajorTicks(),this.line.elementClass===constants.A.OBJECT_CLASS_LINE&&(r=this.getXandYdeltas()),s*=utils_type.A.evaluate(this.visProp.scale),s/=o+1,this.ticksDelta=s,!(s<math.A.eps)){for(i=0,utils_type.A.evaluate(this.visProp.drawzero)||(i=s);i<=e.upper+n&&(i>=e.lower-n&&this.processTickPosition(t,i,s,r),i+=s,!(e.upper-i>1e4*s)););for(i=-s;i>=e.lower-n&&(i<=e.upper+n&&this.processTickPosition(t,i,s,r),!((i-=s)-e.lower>1e4*s)););}},getDistanceMajorTicks:function(){var t,e,i,r,s,n,o,a;return utils_type.A.evaluate(this.visProp.insertticks)?(n=((i=this.getLowerAndUpperBounds(this.getZeroCoordinates(),"")).upper-i.lower)/6/(s=utils_type.A.evaluate(this.visProp.scale)),o=utils_type.A.evaluate(this.visProp.minticksdistance)/s,a=utils_type.A.evaluate(this.visProp.minorticks),(r=this.getXandYdeltas()).x*=this.board.unitX,r.y*=this.board.unitY,o/=math.A.hypot(r.x,r.y),o*=a+1,2*(t=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)))>=o?t*=2:5*t>=o&&(t*=5),5*(e=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)))<n?e*=5:2*e<n&&(e*=2),t=Math.max(t,e)):utils_type.A.evaluate(this.visProp.ticksdistance)},processTickPosition:function(t,e,i,r){var s,n,o,a,l,u=utils_type.A.evaluate(this.visProp.ticksperlabel),c=null;this.line.elementClass===constants.A.OBJECT_CLASS_LINE?(s=t.usrCoords[1]+e*r.x,n=t.usrCoords[2]+e*r.y):(s=this.line.X(t+e),n=this.line.Y(t+e)),o=new base_coords.A(constants.A.COORDS_BY_USER,[s,n],this.board),this.line.elementClass===constants.A.OBJECT_CLASS_CURVE&&(c=t+e,this.setTicksSizeVariables(c)),o.major=Math.round(e/i)%(utils_type.A.evaluate(this.visProp.minorticks)+1)===0,u||(u=utils_type.A.evaluate(this.visProp.minorticks)+1),l=Math.round(e/i)%u===0,3===(a=this.createTickPath(o,o.major)).length&&(this.ticks.push(a),l&&utils_type.A.evaluate(this.visProp.drawlabels)?this.labelsData.push(this.generateLabelData(this.generateLabelText(o,t,c),o,this.ticks.length)):this.labelsData.push(null))},generateFixedTicks:function(t,e){var i,r,s,n,o,a,l,u,c=math.A.eps,h=utils_type.A.isArray(this.visProp.labels),d=utils_type.A.evaluate(this.visProp.drawlabels);for(this.line.elementClass===constants.A.OBJECT_CLASS_LINE&&(u=this.getXandYdeltas()),s=0;s<this.fixedTicks.length;s++)this.line.elementClass===constants.A.OBJECT_CLASS_LINE?(l=this.fixedTicks[s],o=t.usrCoords[1]+l*u.x,a=t.usrCoords[2]+l*u.y):(l=t+this.fixedTicks[s],o=this.line.X(l),a=this.line.Y(l)),i=new base_coords.A(constants.A.COORDS_BY_USER,[o,a],this.board),this.line.elementClass===constants.A.OBJECT_CLASS_CURVE&&this.setTicksSizeVariables(l),3===(n=this.createTickPath(i,!0)).length&&l>=e.lower-c&&l<=e.upper+c&&(this.ticks.push(n),d&&(h||utils_type.A.exists(this.visProp.labels[s]))?(r=h?utils_type.A.evaluate(this.visProp.labels[s]):l,this.labelsData.push(this.generateLabelData(this.generateLabelText(i,t,r),i,s))):this.labelsData.push(null))},getXandYdeltas:function(){var t,e,i=this.line.point1.Dist(this.line.point2);return t=this.line.point1.coords.usrCoords,{x:((e=this.line.point2.coords.usrCoords)[1]-t[1])/i,y:(e[2]-t[2])/i}},_isInsideCanvas:function(t,e,i){var r=this.board.canvasWidth,s=this.board.canvasHeight;return void 0===i&&(i=0),t[0]>=i&&t[0]<=r-i&&e[0]>=i&&e[0]<=s-i||t[1]>=i&&t[1]<=r-i&&e[1]>=i&&e[1]<=s-i},createTickPath:function(t,e){var i,r,s,n,o,a,l,u,c,h,d,p,f,_,m,g,y,v=[-2e6,-2e6],A=[-2e6,-2e6];if(i=t.scrCoords,e?(n=this.dxMaj,o=this.dyMaj,c=this.majStyle,m=utils_type.A.evaluate(this.visProp.majortickendings[0])>0,g=utils_type.A.evaluate(this.visProp.majortickendings[1])>0):(n=this.dxMin,o=this.dyMin,c=this.minStyle,m=utils_type.A.evaluate(this.visProp.tickendings[0])>0,g=utils_type.A.evaluate(this.visProp.tickendings[1])>0),r=[-o*i[1]-n*i[2],o,n],e&&"polar"===utils_type.A.evaluate(this.visProp.type)){if(p=this.board.getBoundingBox(),_=(f=2*Math.PI)/180,i=t.usrCoords,(d=math.A.hypot(i[1],i[2]))<Math.max(math.A.hypot(p[0],p[1]),math.A.hypot(p[2],p[3]))){for(v=[],A=[],h=0;h<=f;h+=_)v.push(this.board.origin.scrCoords[1]+d*Math.cos(h)*this.board.unitX),A.push(this.board.origin.scrCoords[2]+d*Math.sin(h)*this.board.unitY);return[v,A,e]}}else{if("infinite"===c){if(utils_type.A.evaluate(this.visProp.ignoreinfinitetickendings)&&(m=g=!0),s=geometry.A.meetLineBoard(r,this.board),m&&g)v[0]=s[0].scrCoords[1],v[1]=s[1].scrCoords[1],A[0]=s[0].scrCoords[2],A[1]=s[1].scrCoords[2];else if((y=[math.A.innerProduct(s[0].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0],math.A.innerProduct(s[1].usrCoords.slice(1,3),this.line.stdform.slice(1,3))+this.line.stdform[0]])[0]<y[1]&&(s.reverse(),y.reverse()),m){if(y[0]<0)return[];y[1]<0?(v[0]=s[0].scrCoords[1],A[0]=s[0].scrCoords[2],v[1]=i[1],A[1]=i[2]):(v[0]=s[0].scrCoords[1],A[0]=s[0].scrCoords[2],v[1]=s[1].scrCoords[1],A[1]=s[1].scrCoords[2])}else if(g){if(y[1]>0)return[];y[0]>0?(v[0]=i[1],A[0]=i[2],v[1]=s[1].scrCoords[1],A[1]=s[1].scrCoords[2]):(v[0]=s[0].scrCoords[1],A[0]=s[0].scrCoords[2],v[1]=s[1].scrCoords[1],A[1]=s[1].scrCoords[2])}}else u=">"===utils_type.A.evaluate(this.visProp.face)?Math.PI/4:"<"===utils_type.A.evaluate(this.visProp.face)?-Math.PI/4:0,a=Math.cos(u)*n-Math.sin(u)*o,l=Math.sin(u)*n+Math.cos(u)*o,v[0]=i[1]+a*m,A[0]=i[2]-l*m,v[1]=i[1],A[1]=i[2],u=-u,a=Math.cos(u)*n-Math.sin(u)*o,l=Math.sin(u)*n+Math.cos(u)*o,v[2]=i[1]-a*g,A[2]=i[2]+l*g;if(this._isInsideCanvas(v,A))return[v,A,e]}return[]},formatLabelText:function(t){var e,i,r=utils_type.A.evaluate(this.visProp.label.usemathjax),s=utils_type.A.evaluate(this.visProp.label.usekatex),n=utils_type.A.evaluate(this.visProp.scalesymbol);return utils_type.A.isNumber(t)?(utils_type.A.evaluate(this.visProp.label.tofraction)?e=r?"\\("+utils_type.A.toFraction(t,!0)+"\\)":utils_type.A.toFraction(t,s):(i=utils_type.A.evaluate(this.visProp.digits),this.useLocale()?e=this.formatNumberLocale(t,i):((e=(Math.round(1e11*t)/1e11).toString()).length>utils_type.A.evaluate(this.visProp.maxlabellength)||-1!==e.indexOf("e"))&&(3!==utils_type.A.evaluate(this.visProp.precision)&&3===i&&(i=utils_type.A.evaluate(this.visProp.precision)),e=t.toExponential(i).toString())),utils_type.A.evaluate(this.visProp.beautifulscientificticklabels)&&(e=this.beautifyScientificNotationLabel(e)),e.indexOf(".")>-1&&-1===e.indexOf("e")&&(e=(e=e.replace(/0+$/,"")).replace(/\.$/,""))):e=t.toString(),n.length>0&&("1"===e?e=n:"-1"===e?e="-"+n:"0"!==e&&(e+=n)),utils_type.A.evaluate(this.visProp.useunicodeminus)&&(e=e.replace(/-/g,"\u2212")),e},beautifyScientificNotationLabel:function(t){return-1===t.indexOf("e")?t:(parseFloat(t.substring(0,t.indexOf("e")))+t.substring(t.indexOf("e"))).replace(/e(.*)$/g,(function(t,e){var i="\u202210";return i+=e.replace(/-/g,"\u207b").replace(/\+/g,"").replace(/0/g,"\u2070").replace(/1/g,"\xb9").replace(/2/g,"\xb2").replace(/3/g,"\xb3").replace(/4/g,"\u2074").replace(/5/g,"\u2075").replace(/6/g,"\u2076").replace(/7/g,"\u2077").replace(/8/g,"\u2078").replace(/9/g,"\u2079")}))},generateLabelText:function(t,e,i){var r;if(!utils_type.A.exists(i)){if(r=this.getDistanceFromZero(e,t),Math.abs(r)<math.A.eps)return"0";i=r/utils_type.A.evaluate(this.visProp.scale)}return this.formatLabelText(i)},generateLabelData:function(t,e,i){var r,s,n,o;return o=utils_type.A.evaluate(this.visProp.label.fontsize),r=[e.scrCoords[1],e.scrCoords[1]],s=[e.scrCoords[2],e.scrCoords[2]],n=void 0===o?12:o,n*=.5,this._isInsideCanvas(r,s,n)?(r=utils_type.A.evaluate(this.visProp.label.offset[0]),s=utils_type.A.evaluate(this.visProp.label.offset[1]),{x:e.usrCoords[1]+r/this.board.unitX,y:e.usrCoords[2]+s/this.board.unitY,t:t,i:i}):null},update:function(){return this.needsUpdate&&0!==this.board.canvasWidth&&0!==this.board.canvasHeight&&this.calculateTicksCoordinates(),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&this.board.renderer.updateTicks(this),this.updateRendererLabels(),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateRendererLabels:function(){var t,e,i,r,s,n,o,a;for(i=this.labelsData.length,r=this.labels.length,t=0,e=0;t<i;t++)null!==this.labelsData[t]&&(o=this.labelsData[t],e<r?((n=this.labels[e]).setText(o.t),n.setCoords(o.x,o.y),e++):(this.labelCounter+=1,s={isLabel:!0,layer:this.board.options.layer.line,highlightStrokeColor:this.board.options.text.strokeColor,highlightStrokeWidth:this.board.options.text.strokeWidth,highlightStrokeOpacity:this.board.options.text.strokeOpacity,priv:this.visProp.priv},(s=utils_type.A.deepCopy(s,this.visProp.label)).id=this.id+o.i+"Label"+this.labelCounter,n=jxg.A.createText(this.board,[o.x,o.y,o.t],s),this.addChild(n),n.setParents(this),n.isDraggable=!1,n.dump=!1,this.labels.push(n)),"inherit"===(a=utils_type.A.evaluate(this.visProp.label.visible))&&(a=this.visPropCalc.visible),n.prepareUpdate().updateVisibility(a).updateRenderer(),n.distanceX=utils_type.A.evaluate(this.visProp.label.offset[0]),n.distanceY=utils_type.A.evaluate(this.visProp.label.offset[1]));for(e=i=e;e<r;e++)this.board.renderer.display(this.labels[e],!1),this.labels[e].visProp.visible=this.labels[e].visPropCalc.visible=!1;return this},hideElement:function(){var t;for(jxg.A.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),t=0;t<this.labels.length;t++)utils_type.A.exists(this.labels[t])&&this.labels[t].hideElement();return this},showElement:function(){var t;for(jxg.A.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!1),t=0;t<this.labels.length;t++)utils_type.A.exists(this.labels[t])&&this.labels[t].showElement();return this}}),jxg.A.createTicks=function(t,e,i){var r,s,n=utils_type.A.copyAttributes(i,t.options,"ticks");if(s=e.length<2?n.ticksdistance:e[1],e[0].elementClass!==constants.A.OBJECT_CLASS_LINE&&e[0].elementClass!==constants.A.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create Ticks with parent types '"+typeof e[0]+"'.");return r=new jxg.A.Ticks(e[0],s,n),utils_type.A.isFunction(n.generatelabelvalue)&&(r.generateLabelText=n.generatelabelvalue),utils_type.A.isFunction(n.generatelabeltext)&&(r.generateLabelText=n.generatelabeltext),r.setParents(e[0]),r.isDraggable=!0,r.fullUpdate(e[0].visPropCalc.visible),r},jxg.A.createHatchmark=function(t,e,i){var r,s,n,o,a,l=[],u=utils_type.A.copyAttributes(i,t.options,"hatch");if(e[0].elementClass!==constants.A.OBJECT_CLASS_LINE&&e[0].elementClass!==constants.A.OBJECT_CLASS_CURVE||"number"!==typeof e[1])throw new Error("JSXGraph: Can't create Hatch mark with parent types '"+typeof e[0]+"' and '"+typeof e[1]+" and ''"+typeof e[2]+"'.");for(n=.5*-(((r=e[1])-1)*(o=u.ticksdistance)),s=0;s<r;s++)l[s]=n+s*o;return(a=t.create("ticks",[e[0],l],u)).elType="hatch",e[0].inherits.push(a),a},jxg.A.registerElement("ticks",jxg.A.createTicks),jxg.A.registerElement("hash",jxg.A.createHatchmark),jxg.A.registerElement("hatch",jxg.A.createHatchmark);const ticks=jxg.A.Ticks;jxg.A.CA=function(t,e,i){this.node=t,this.createNode=e,this.parser=i},jxg.A.extend(jxg.A.CA.prototype,{findMapNode:function(t,e){var i,r,s;if("op_assign"===e.value&&e.children[0].value===t)return e.children[1];if(e.children)for(r=e.children.length,i=0;i<r;++i)if(null!==(s=this.findMapNode(t,e.children[i])))return s;return null},setMath:function(t){var e,i;if(("node_op"!=t.type||"op_add"!=t.value&&"op_sub"!=t.value&&"op_mul"!=t.value&&"op_div"!=t.value&&"op_neg"!=t.value&&"op_execfun"!=t.value&&"op_exp"!=t.value)&&"node_var"!=t.type&&"node_const"!=t.type||(t.isMath=!0),t.children)for(i=t.children.length,e=0;e<i;++e)this.setMath(t.children[e])},deriveElementary:function(t,e){var i,r=t.children[0].value,s=t.children[1];switch(r){case"abs":i=this.createNode("node_op","op_div",s[0],this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_mul",utils_type.A.deepCopy(s[0]),utils_type.A.deepCopy(s[0]))]));break;case"sqrt":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_mul",this.createNode("node_const",2),this.createNode(t.type,t.value,utils_type.A.deepCopy(t.children[0]),utils_type.A.deepCopy(t.children[1]))));break;case"sin":i=this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),utils_type.A.deepCopy(s));break;case"cos":i=this.createNode("node_op","op_neg",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),utils_type.A.deepCopy(s)));break;case"tan":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),utils_type.A.deepCopy(s)),this.createNode("node_const",2)));break;case"cot":i=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),utils_type.A.deepCopy(s)),this.createNode("node_const",2))));break;case"exp":i=this.createNode(t.type,t.value,utils_type.A.deepCopy(t.children[0]),utils_type.A.deepCopy(t.children[1]));break;case"pow":i=this.createNode("node_op","op_mul",this.createNode("node_op","op_execfun",utils_type.A.deepCopy(t.children[0]),utils_type.A.deepCopy(t.children[1])),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(t.children[1][0],e),this.createNode("node_op","op_div",utils_type.A.deepCopy(t.children[1][1]),utils_type.A.deepCopy(t.children[1][0]))),this.createNode("node_op","op_mul",this.derivative(t.children[1][1],e),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[utils_type.A.deepCopy(t.children[1][0])]))));break;case"log":case"ln":i=this.createNode("node_op","op_div",this.createNode("node_const",1),utils_type.A.deepCopy(s[0]));break;case"log2":case"lb":case"ld":i=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),utils_type.A.deepCopy(s[0])),this.createNode("node_const",1.4426950408889634));break;case"log10":case"lg":i=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),utils_type.A.deepCopy(s[0])),this.createNode("node_const",.43429448190325176));break;case"asin":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",utils_type.A.deepCopy(s[0]),utils_type.A.deepCopy(s[0])))]));break;case"acos":i=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",utils_type.A.deepCopy(s[0]),utils_type.A.deepCopy(s[0])))])));break;case"atan":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",utils_type.A.deepCopy(s[0]),utils_type.A.deepCopy(s[0]))));break;case"acot":i=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",utils_type.A.deepCopy(s[0]),utils_type.A.deepCopy(s[0])))));break;case"sinh":i=this.createNode("node_op","op_execfun",this.createNode("node_var","cosh"),[utils_type.A.deepCopy(s[0])]);break;case"cosh":i=this.createNode("node_op","op_execfun",this.createNode("node_var","sinh"),[utils_type.A.deepCopy(s[0])]);break;case"tanh":i=this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","tanh"),[utils_type.A.deepCopy(s[0])]),this.createNode("node_const",2)));break;case"asinh":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_add",this.createNode("node_op","op_mul",utils_type.A.deepCopy(s[0]),utils_type.A.deepCopy(s[0])),this.createNode("node_const",1))]));break;case"acosh":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",utils_type.A.deepCopy(s[0]),utils_type.A.deepCopy(s[0])),this.createNode("node_const",1))]));break;case"atanh":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",utils_type.A.deepCopy(s[0]),utils_type.A.deepCopy(s[0]))));break;default:throw i=this.createNode("node_const",0),console.log('Derivative of "'+r+'" not yet implemented'),new Error("Error("+this.line+"): ")}return i},derivative:function(t,e){var i;switch(t.type){case"node_op":switch(t.value){case"op_execfun":i="pow"==t.children[0].value?this.deriveElementary(t,e):0===t.children[1].length?this.createNode("node_const",0):this.createNode("node_op","op_mul",this.deriveElementary(t,e),this.derivative(t.children[1][0],e));break;case"op_div":i=this.createNode("node_op","op_div",this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",this.derivative(t.children[0],e),utils_type.A.deepCopy(t.children[1])),this.createNode("node_op","op_mul",utils_type.A.deepCopy(t.children[0]),this.derivative(t.children[1],e))),this.createNode("node_op","op_mul",utils_type.A.deepCopy(t.children[1]),utils_type.A.deepCopy(t.children[1])));break;case"op_mul":i=this.createNode("node_op","op_add",this.createNode("node_op","op_mul",utils_type.A.deepCopy(t.children[0]),this.derivative(t.children[1],e)),this.createNode("node_op","op_mul",this.derivative(t.children[0],e),utils_type.A.deepCopy(t.children[1])));break;case"op_neg":i=this.createNode("node_op","op_neg",this.derivative(t.children[0],e));break;case"op_add":case"op_sub":i=this.createNode("node_op",t.value,this.derivative(t.children[0],e),this.derivative(t.children[1],e));break;case"op_exp":i=this.createNode("node_op","op_mul",utils_type.A.deepCopy(t),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(t.children[0],e),this.createNode("node_op","op_div",utils_type.A.deepCopy(t.children[1]),utils_type.A.deepCopy(t.children[0]))),this.createNode("node_op","op_mul",this.derivative(t.children[1],e),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[utils_type.A.deepCopy(t.children[0])]))))}break;case"node_var":i=t.value===e?this.createNode("node_const",1):this.createNode("node_const",0);break;case"node_const":i=this.createNode("node_const",0)}return i},expandDerivatives:function(t,e,i){var r,s,n,o,a,l,u,c,h,d,p,f;if(!t)return 0;for(this.line=t.line,this.col=t.col,r=t.children.length,s=0;s<r;++s)if(t.children[s]&&t.children[s].type)t.children[s]=this.expandDerivatives(t.children[s],t,i);else if(utils_type.A.isArray(t.children[s]))for(n=0;n<t.children[s].length;++n)t.children[s][n]&&t.children[s][n].type&&(t.children[s][n]=this.expandDerivatives(t.children[s][n],t,i));if("node_op"===t.type)if("op_execfun"===t.value)if(t.children[0]&&"D"===t.children[0].value){if(f=!1,"node_var"==t.children[1][0].type&&(c=t.children[1][0].value,null!==(o=this.findMapNode(c,i))&&(f=!0)),f?(d=o.children[0],h=t.children[1].length>=2?t.children[1][1].value:o.children[0][0],a=o.children[1]):(a=t.children[1][0],d=["x"],h=t.children[1].length>=2?t.children[1][1].value:"x"),u=a,(p=t.children[1].length>=3?t.children[1][2].value:1)>=1)for(;p>=1;)u=this.derivative(u,h),u=this.removeTrivialNodes(u),p--;l="node_op"==e.type&&"op_assign"==e.value?this.createNode("node_op","op_map",d,u):u,this.setMath(l),t.type=l.type,t.value=l.value,l.children.length>0&&(t.children[0]=l.children[0]),l.children.length>1&&(t.children[1]=l.children[1])}return t},removeTrivialNodes:function(t){var e,i,r,s,n;if(utils_type.A.isArray(t))for(i=t.length,e=0;e<i;++e)t[e]=this.removeTrivialNodes(t[e]);if("node_op"!=t.type||!t.children)return t;for(i=t.children.length,e=0;e<i;++e){this.mayNotBeSimplified=!1;do{t.children[e]=this.removeTrivialNodes(t.children[e])}while(this.mayNotBeSimplified)}switch(t.value){case"op_map":if(r=t.children[0],"node_var"==(s=t.children[1]).type)for(e=0;e<r.length;++e)if(r[e]==s.value){s.isMath=!0;break}break;case"op_add":if(r=t.children[0],s=t.children[1],"node_const"==r.type&&0===r.value)return s;if("node_const"==s.type&&0===s.value)return r;if("node_const"==r.type&&"node_const"==s.type)return r.value+=s.value,r;break;case"op_mul":if(r=t.children[0],s=t.children[1],"node_const"==r.type&&1==r.value)return s;if("node_const"==s.type&&1==s.value)return r;if("node_const"==r.type&&0===r.value)return r;if("node_const"==s.type&&0===s.value)return s;if("node_const"==s.type&&0===s.value)return s;if("node_op"==r.type&&"op_neg"==r.value&&"node_op"==s.type&&"op_neg"==s.value)return t.children=[r.children[0],s.children[0]],this.mayNotBeSimplified=!0,t;if("op_neg"==r.value&&"op_neg"!=s.value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_mul",r.children[0],s)],this.mayNotBeSimplified=!0,t;if("op_neg"!=r.value&&"op_neg"==s.value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_mul",r,s.children[0])],this.mayNotBeSimplified=!0,t;if("op_div"==r.value&&"node_const"==r.children[0].type&&1==r.children[0].value)return t.type="node_op",t.value="op_div",t.children=[s,r.children[1]],this.mayNotBeSimplified=!0,t;if("op_div"==s.value&&"node_const"==s.children[0].type&&1==s.children[0].value)return t.type="node_op",t.value="op_div",t.children=[r,s.children[1]],this.mayNotBeSimplified=!0,t;if("node_const"!=r.type&&"node_const"==s.type)return t.children=[s,r],this.mayNotBeSimplified=!0,t;if("node_const"!=r.type&&"node_op"==s.type&&"op_neg"==s.value&&"node_const"==s.children[0].type)return t.children=[s,r],this.mayNotBeSimplified=!0,t;if("node_op"==r.type&&"op_execfun"!=r.value&&("node_var"==s.type||"node_op"==s.type&&"op_execfun"==s.value))return t.children=[s,r],this.mayNotBeSimplified=!0,t;if("node_op"!=r.type&&"node_op"==s.type&&"op_neg"==s.value&&"node_var"==s.children[0].type)return t.children=[s,r],this.mayNotBeSimplified=!0,t;if("node_const"!=r.type&&"node_op"==s.type&&("op_mul"==s.value||"op_div"==s.value)&&"node_const"==s.children[0].type)return n=s.children[0],s.children[0]=r,t.children=[n,s],this.mayNotBeSimplified=!0,t;if("node_const"!=s.type&&"node_op"==r.type&&"op_mul"==r.value&&"node_const"==r.children[0].type)return t.children=[r.children[0],this.createNode("node_op","op_mul",r.children[1],s)],this.mayNotBeSimplified=!0,t;if("node_const"==r.type&&"node_const"==s.type)return r.value*=s.value,r;if("node_const"==r.type&&"node_op"==s.type&&("op_mul"==s.value||"op_div"==s.value)&&"node_const"==s.children[0].type)return s.children[0].value*=r.value,s;if(r.hash=this.parser.compile(r),s.hash=this.parser.compile(s),r.hash===s.hash)return t.value="op_exp",t.children[1]=this.createNode("node_const",2),t;if("node_const"==r.type&&"node_op"==s.type&&("op_mul"==s.value||"op_div"==s.value)&&"node_const"==s.children[0].type)return s.children[0].value*=r.value,s;if("node_op"==s.type&&"op_exp"==s.value&&(r.hash||(r.hash=this.parser.compile(r)),s.children[0].hash||(s.children[0].hash=this.parser.compile(s.children[0])),r.hash===s.children[0].hash))return s.children[1]=this.createNode("node_op","op_add",s.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,s;if("node_op"==r.type&&"op_exp"==r.value&&"node_op"==s.type&&"op_exp"==s.value&&(r.children[0].hash=this.parser.compile(r.children[0]),s.children[0].hash=this.parser.compile(s.children[0]),r.children[0].hash===s.children[0].hash))return r.children[1]=this.createNode("node_op","op_add",r.children[1],s.children[1]),this.mayNotBeSimplified=!0,r;break;case"op_sub":if(r=t.children[0],s=t.children[1],"node_const"==r.type&&0===r.value)return t.value="op_neg",t.children[0]=s,t;if("node_const"==s.type&&0===s.value)return r;if("node_const"==r.type&&"node_const"==s.type&&r.value==s.value)return this.createNode("node_const",0);if("node_var"==r.type&&"node_var"==s.type&&r.value==s.value)return this.createNode("node_const",0);if("node_const"==r.type&&"node_const"==s.type)return r.value-=s.value,r;if("node_op"==r.type&&"op_mul"==r.value&&"node_op"==s.type&&"op_mul"==s.value&&(r.children[1].hash=this.parser.compile(r.children[1]),s.children[1].hash=this.parser.compile(s.children[1]),r.children[1].hash===s.children[1].hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",r.children[0],s.children[0]),r.children[1]],this.mayNotBeSimplified=!0,t;if("node_op"==r.type&&"op_mul"==r.value&&(r.children[1].hash=this.parser.compile(r.children[1]),s.hash=this.parser.compile(s),r.children[1].hash===s.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",r.children[0],this.createNode("node_const",1)),s],this.mayNotBeSimplified=!0,t;if("node_op"==s.type&&"op_mul"==s.value&&(s.children[1].hash=this.parser.compile(s.children[1]),r.hash=this.parser.compile(r),s.children[1].hash===r.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",this.createNode("node_const",1),s.children[0]),r],this.mayNotBeSimplified=!0,t;break;case"op_neg":if("node_const"==(r=t.children[0]).type&&0===r.value)return r;if("node_op"==r.type&&"op_neg"==r.value)return r.children[0];break;case"op_div":if(r=t.children[0],s=t.children[1],"node_const"==r.type&&"node_const"==s.type&&r.value==s.value&&0!==r.value)return r.value=1,r;if("node_const"==r.type&&0===r.value&&"node_const"==s.type&&0!==s.value)return r.value=0,r;if("node_const"==r.type&&0===r.value&&("node_op"==s.type||"node_var"==s.type))return t.type="node_const",t.value=0,t;if("node_var"==r.type&&"node_var"==s.type&&r.value==s.value)return this.createNode("node_const",1);if("node_const"==r.type&&0!==r.value&&"node_const"==s.type&&0===s.value)return r.value>0?r.value=1/0:r.value=-1/0,r;if("node_op"==r.type&&"op_neg"==r.value&&"node_op"==s.type&&"op_neg"==s.value)return t.children=[r.children[0],s.children[0]],this.mayNotBeSimplified=!0,t;if("op_neg"==r.value&&"op_neg"!=s.value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_div",r.children[0],s)],this.mayNotBeSimplified=!0,t;if("op_neg"!=r.value&&"op_neg"==s.value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_div",r,s.children[0])],this.mayNotBeSimplified=!0,t;if("node_op"==r.type&&"op_exp"==r.value&&(s.hash||(s.hash=this.parser.compile(s)),r.children[0].hash||(r.children[0].hash=this.parser.compile(r.children[0])),s.hash===r.children[0].hash))return r.children[1]=this.createNode("node_op","op_sub",r.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,r;if("node_const"!=s.type&&"node_op"==r.type&&"op_mul"==r.value&&"node_const"==r.children[0].type)return t.value="op_mul",t.children=[r.children[0],this.createNode("node_op","op_div",r.children[1],s)],this.mayNotBeSimplified=!0,t;if("node_op"==r.type&&"op_exp"==r.value&&"node_op"==s.type&&"op_exp"==s.value&&(r.children[0].hash=this.parser.compile(r.children[0]),s.children[0].hash=this.parser.compile(s.children[0]),r.children[0].hash===s.children[0].hash))return r.children[1]=this.createNode("node_op","op_sub",r.children[1],s.children[1]),this.mayNotBeSimplified=!0,r;break;case"op_exp":if(r=t.children[0],"node_const"==(s=t.children[1]).type&&0===s.value)return s.value=1,s;if("node_const"==s.type&&1==s.value)return r;if("node_const"==r.type&&1==r.value)return r;if("node_const"==r.type&&0===r.value&&"node_const"==s.type&&0!==s.value)return r;if("node_op"==r.type&&"op_exp"==r.value)return t.children=[r.children[0],this.createNode("node_op","op_mul",r.children[1],s)],t}switch(t.value){case"op_add":if(r=t.children[0],s=t.children[1],"node_const"==r.type&&"node_const"==s.type&&r.value==s.value)return r.value+=s.value,r;if("node_var"==r.type&&"node_var"==s.type&&r.value==s.value)return t.children[0]=this.createNode("node_const",2),t.value="op_mul",t;if("node_op"==r.type&&"op_neg"==r.value)return t.value="op_sub",t.children[0]=s,t.children[1]=r.children[0],this.mayNotBeSimplified=!0,t;if("node_op"==s.type&&"op_neg"==s.value)return t.value="op_sub",t.children[1]=s.children[0],this.mayNotBeSimplified=!0,t;if("node_op"==r.type&&"op_mul"==r.value&&"node_op"==s.type&&"op_mul"==s.value&&(r.children[1].hash=this.parser.compile(r.children[1]),s.children[1].hash=this.parser.compile(s.children[1]),r.children[1].hash===s.children[1].hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_add",r.children[0],s.children[0]),r.children[1]],this.mayNotBeSimplified=!0,t;if("node_op"==r.type&&"op_mul"==r.value&&(r.children[1].hash=this.parser.compile(r.children[1]),s.hash=this.parser.compile(s),r.children[1].hash===s.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_add",r.children[0],this.createNode("node_const",1)),s],this.mayNotBeSimplified=!0,t;if("node_op"==s.type&&"op_mul"==s.value&&(s.children[1].hash=this.parser.compile(s.children[1]),r.hash=this.parser.compile(r),s.children[1].hash===r.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_add",this.createNode("node_const",1),s.children[0]),r],this.mayNotBeSimplified=!0,t;break;case"op_sub":if(r=t.children[0],"node_op"==(s=t.children[1]).type&&"op_neg"==s.value)return t.value="op_add",t.children[1]=s.children[0],this.mayNotBeSimplified=!0,t;break;case"op_execfun":return this.simplifyElementary(t)}return t},simplifyElementary:function(t){var e=t.children[0].value,i=t.children[1];if(0==i.length)return t;switch(e){case"sin":case"tan":if("node_const"==i[0].type&&0===i[0].value)return t.type="node_const",t.value=0,t;if("node_var"==i[0].type&&"PI"==i[0].value)return t.type="node_const",t.value=0,t;if("node_op"==i[0].type&&"op_mul"==i[0].value&&"node_const"==i[0].children[0].type&&i[0].children[0].value%1===0&&"node_var"==i[0].children[1].type&&"PI"==i[0].children[1].value)return t.type="node_const",t.value=0,t;break;case"cos":if("node_const"==i[0].type&&0===i[0].value)return t.type="node_const",t.value=1,t;if("node_var"==i[0].type&&"PI"==i[0].value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_const",1)],t;break;case"exp":if("node_const"==i[0].type&&0===i[0].value)return t.type="node_const",t.value=1,t;break;case"pow":if("node_const"==i[1].type&&0===i[1].value)return t.type="node_const",t.value=1,t}return t}});const ca=jxg.A.CA;jxg.A.Dump={addMarkers:function(t,e,i){var r,s,n;for(r in utils_type.A.isArray(e)||(e=[e]),utils_type.A.isArray(i)||(i=[i]),s=Math.min(e.length,i.length),e.length=s,i.length=s,t.objects)if(t.objects.hasOwnProperty(r))for(n=0;n<s;n++)t.objects[r][e[n]]=i[n]},deleteMarkers:function(t,e){var i,r,s;for(i in utils_type.A.isArray(e)||(e=[e]),r=e.length,e.length=r,t.objects)if(t.objects.hasOwnProperty(i))for(s=0;s<r;s++)delete t.objects[i][e[s]]},str:function(t){return"string"===typeof t&&"function"!==t.slice(0,7)&&(t='"'+t+'"'),t},minimizeObject:function(t,e){var i,r,s,n={},o=utils_type.A.deepCopy(t),a=[];for(s=1;s<arguments.length;s++)a.push(arguments[s]);for(n=utils_type.A.deepCopy(n,jxg.A.Options.elements,!0),s=a.length;s>0;s--)n=utils_type.A.deepCopy(n,a[s-1],!0);for(i in n)n.hasOwnProperty(i)&&(r=i.toLowerCase(),"object"!==typeof n[i]&&n[i]===o[r]&&delete o[r]);return o},prepareAttributes:function(t,e){var i,r;for(r in i=this.minimizeObject(e.getAttributes(),jxg.A.Options[e.elType]),e.subs)e.subs.hasOwnProperty(r)&&(i[r]=this.minimizeObject(e.subs[r].getAttributes(),jxg.A.Options[e.elType][r],jxg.A.Options[e.subs[r].elType]),i[r].id=e.subs[r].id,i[r].name=e.subs[r].name);return i.id=e.id,i.name=e.name,i},setBoundingBox:function(t,e,i){return t.push({obj:i,method:"setBoundingBox",params:[e.getBoundingBox(),e.keepaspectratio]}),t},dump:function(t){var e,i,r,s,n=[],o=[],a=t.objectsList.length;for(this.addMarkers(t,"dumped",!1),e=0;e<a;e++)if(r={},!(i=t.objectsList[e]).dumped&&i.dump){for(r.type=i.getType(),r.parents=i.getParents().slice(),"point"===r.type&&1===r.parents[0]&&(r.parents=r.parents.slice(1)),s=0;s<r.parents.length;s++)utils_type.A.isString(r.parents[s])&&"'"!==r.parents[s][0]&&'"'!==r.parents[s][0]?r.parents[s]='"'+r.parents[s]+'"':utils_type.A.isArray(r.parents[s])&&(r.parents[s]="["+r.parents[s].toString()+"]");r.attributes=this.prepareAttributes(t,i),"glider"===r.type&&i.onPolygon&&n.push({obj:i.id,prop:"onPolygon",val:!0}),o.push(r)}return this.deleteMarkers(t,"dumped"),{elements:o,props:n,methods:[]}},arrayToParamStr:function(t,e){var i,r=[];for(i=0;i<t.length;i++)r.push(e.call(this,t[i]));return r.join(", ")},toJCAN:function(t){var e,i,r;switch(typeof t){case"object":if(t){if(i=[],utils_type.A.isArray(t)){for(e=0;e<t.length;e++)i.push(this.toJCAN(t[e]));return"["+i.join(",")+"]"}for(r in t)t.hasOwnProperty(r)&&i.push(r+": "+this.toJCAN(t[r]));return"<<"+i.join(", ")+">> "}return"null";case"string":return"'"+t.replace(/\\/g,"\\\\").replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return t.toString();case"null":return"null"}},toJessie:function(t){var e,i,r,s=this.dump(t),n=[];for(s.methods=this.setBoundingBox(s.methods,t,"$board"),i=s.elements,e=0;e<i.length;e++)i[e].attributes.name.length>0&&n.push("// "+i[e].attributes.name),n.push("s"+e+" = "+i[e].type+"("+i[e].parents.join(", ")+") "+this.toJCAN(i[e].attributes).replace(/\n/,"\\n")+";"),"axis"===i[e].type&&(r=i[e].attributes.id,null===t.objects[r].defaultTicks&&n.push("s"+e+".removeAllTicks();")),n.push("");for(e=0;e<s.methods.length;e++)n.push(s.methods[e].obj+"."+s.methods[e].method+"("+this.arrayToParamStr(s.methods[e].params,this.toJCAN)+");"),n.push("");for(e=0;e<s.props.length;e++)n.push(s.props[e].obj+"."+s.props[e].prop+" = "+this.toJCAN(s.props[e].val)+";"),n.push("");return n.join("\n")},toJavaScript:function(t){var e,i,r,s=this.dump(t),n=[];for(s.methods=this.setBoundingBox(s.methods,t,"board"),i=s.elements,e=0;e<i.length;e++)n.push('board.create("'+i[e].type+'", ['+i[e].parents.join(", ")+"], "+utils_type.A.toJSON(i[e].attributes)+");"),"axis"===i[e].type&&(r=i[e].attributes.id,null===t.objects[r].defaultTicks&&n.push('board.objects["'+r+'"].removeTicks(board.objects["'+r+'"].defaultTicks);'));for(e=0;e<s.methods.length;e++)n.push(s.methods[e].obj+"."+s.methods[e].method+"("+this.arrayToParamStr(s.methods[e].params,utils_type.A.toJSON)+");"),n.push("");for(e=0;e<s.props.length;e++)n.push(s.props[e].obj+"."+s.props[e].prop+" = "+utils_type.A.toJSON(s.props[e].val)+";"),n.push("");return n.join("\n")}};const dump=jxg.A.Dump;jxg.A.createComb=function(t,e,i){var r,s,n,o,a;if(2!==e.length)throw a=e.map((function(t){return"'"+typeof t+"'"})),new Error("JSXGraph: Can't create comb with parent types "+a.join(", ")+".\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");if(utils_type.A.isArray(e[0])&&e[0].length>1)o=utils_type.A.copyAttributes(i,t.options,"comb","point1"),r=t.create("point",e[0],o);else if(utils_type.A.isString(e[0])||utils_type.A.isPoint(e[0]))r=t.select(e[0]);else if(utils_type.A.isFunction(e[0])&&utils_type.A.isPoint(e[0]()))r=e[0]();else{if(!(utils_type.A.isFunction(e[0])&&e[0]().length&&e[0]().length>=2))throw new Error("JSXGraph: Can't create comb with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");o=utils_type.A.copyAttributes(i,t.options,"comb","point1"),r=jxg.A.createPoint(t,e[0](),o)}if(utils_type.A.isArray(e[1])&&e[1].length>1)o=utils_type.A.copyAttributes(i,t.options,"comb","point2"),s=t.create("point",e[1],o);else if(utils_type.A.isString(e[1])||utils_type.A.isPoint(e[1]))s=t.select(e[1]);else if(utils_type.A.isFunction(e[1])&&utils_type.A.isPoint(e[1]()))s=e[1]();else{if(!(utils_type.A.isFunction(e[1])&&e[1]().length&&e[1]().length>=2))throw new Error("JSXGraph: Can't create comb with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");o=utils_type.A.copyAttributes(i,t.options,"comb","point2"),s=jxg.A.createPoint(t,e[1](),o)}return o=utils_type.A.copyAttributes(i,t.options,"comb"),(n=t.create("curve",[[0],[0]],o)).updateDataArray=function(){var t,e,i,o,a,l,u,c,h,d,p=0,f=r.Dist(s),_=r,m=s;for(c=utils_type.A.evaluate(n.visProp.frequency),h=-utils_type.A.evaluate(n.visProp.angle),d=utils_type.A.evaluate(n.visProp.width),utils_type.A.evaluate(n.visProp.reverse)&&(_=s,m=r,h=-h),t=Math.cos(h),e=Math.sin(h),i=(m.X()-_.X())/f,o=(m.Y()-_.Y())/f,t*=d/Math.abs(e),e*=d/Math.abs(e),this.dataX=[],this.dataY=[];p<f;)a=_.X()+i*p,l=_.Y()+o*p,e*=u=Math.min(t,f-p)/Math.abs(t),t*=u,this.dataX.push(a),this.dataY.push(l),this.dataX.push(a+i*t+o*e),this.dataY.push(l-i*e+o*t),this.dataX.push(NaN),this.dataY.push(NaN),p+=c},n},jxg.A.registerElement("comb",jxg.A.createComb);var priv={removeSlopeTriangle:function(){polygon.prototype.remove.call(this),this.board.removeObject(this.toppoint),this.board.removeObject(this.glider),this.board.removeObject(this.baseline),this.board.removeObject(this.basepoint),this.board.removeObject(this.label),this._isPrivateTangent&&this.board.removeObject(this.tangent)},Value:function(){return this.tangent.getSlope()},Direction:function(){return this.tangent.Direction()}};jxg.A.createSlopeTriangle=function(t,e,i){var r,s,n,o,a,l,u,c,h,d=!1;if(1===e.length&&e[0].type===constants.A.OBJECT_TYPE_TANGENT)s=e[0],n=s.glider;else if(1===e.length&&e[0].type===constants.A.OBJECT_TYPE_GLIDER)n=e[0],h=utils_type.A.copyAttributes(i,t.options,"slopetriangle","tangent"),s=t.create("tangent",[n],h),d=!0;else{if(2!==e.length||e[0].elementClass!==constants.A.OBJECT_CLASS_LINE||!utils_type.A.isPoint(e[1]))throw new Error("JSXGraph: Can't create slope triangle with parent types '"+typeof e[0]+"'.");s=e[0],n=e[1]}return h=utils_type.A.copyAttributes(i,t.options,"slopetriangle","basepoint"),u=t.create("point",[function(){return[n.X()+1,n.Y()]}],h),h=utils_type.A.copyAttributes(i,t.options,"slopetriangle","baseline"),l=t.create("line",[n,u],h),h=utils_type.A.copyAttributes(i,t.options,"slopetriangle","glider"),o=t.create("glider",[n.X()+1,n.Y(),l],h),h=utils_type.A.copyAttributes(i,t.options,"slopetriangle","toppoint"),a=t.create("point",[function(){return[o.X(),o.Y()+(o.X()-n.X())*s.getSlope()]}],h),h=utils_type.A.copyAttributes(i,t.options,"slopetriangle"),(r=t.create("polygon",[n,o,a],h)).Value=priv.Value,r.Direction=priv.Direction,r.tangent=s,r._isPrivateTangent=d,r.borders[2].setArrow(!1,!1),h=utils_type.A.copyAttributes(i,t.options,"slopetriangle","label"),(h=utils_type.A.copyAttributes(h,t.options,"label")).isLabel=!0,h.anchor=r.borders[1],h.priv=r.borders[1].visProp.priv,h.id=r.borders[1].id+"Label",(c=t.create("text",[0,0,function(){return""}],h)).needsUpdate=!0,c.dump=!1,r.borders[1].label=c,r.borders[1].hasLabel=!0,r.borders[1].visProp.withlabel=!0,c._setText((function(){var t=utils_type.A.evaluate(c.visProp.digits);return c.useLocale()?c.formatNumberLocale(r.Value(),t):utils_type.A.toFixed(r.Value(),t)})),c.fullUpdate(),r.glider=o,r.basepoint=u,r.baseline=l,r.toppoint=a,r.label=c,r.subs={glider:o,basePoint:u,baseLine:l,topPoint:a,label:c},r.inherits.push(o,u,l,a,c),r.methodMap=jxg.A.deepCopy(r.methodMap,{tangent:"tangent",glider:"glider",basepoint:"basepoint",baseline:"baseline",toppoint:"toppoint",label:"label",Value:"Value",V:"Value",Direction:"Direction"}),r.remove=priv.removeSlopeTriangle,r},jxg.A.registerElement("slopetriangle",jxg.A.createSlopeTriangle);var checkbox_priv={CheckboxChangeEventHandler:function(){this._value=this.rendNodeCheckbox.checked,this.board.update()}};jxg.A.createCheckbox=function(t,e,i){var r,s,n=utils_type.A.copyAttributes(i,t.options,"checkbox");return s=[e[0],e[1],'<span style="display:inline"><input type="checkbox" /><label for=""></label></span>'],(r=t.create("text",s,n)).type=utils_type.A.OBJECT_TYPE_CHECKBOX,r.rendNodeCheckbox=r.rendNode.childNodes[0].childNodes[0],r.rendNodeLabel=r.rendNode.childNodes[0].childNodes[1],r.rendNodeTag=r.rendNodeCheckbox,r.rendNodeTag.disabled=!!n.disabled,r.rendNodeCheckbox.id=r.rendNode.id+"_checkbox",r.rendNodeLabel.id=r.rendNode.id+"_label",r.rendNodeLabel.setAttribute("for",r.rendNodeCheckbox.id),r.setText(e[2]),r.visPropOld.fontsize="0px",t.renderer.updateTextStyle(r,!1),r.rendNodeCheckbox.checked=n.checked,r._value=n.checked,r.Value=function(){return this._value},r.update=function(){return this.needsUpdate&&(jxg.A.Text.prototype.update.call(this),this._value=this.rendNodeCheckbox.checked),this},env.A.addEvent(r.rendNodeCheckbox,"change",checkbox_priv.CheckboxChangeEventHandler,r),r},jxg.A.registerElement("checkbox",jxg.A.createCheckbox);var input_priv={InputInputEventHandler:function(t){this._value=this.rendNodeInput.value,this.board.update()}};jxg.A.createInput=function(t,e,i){var r,s,n=utils_type.A.copyAttributes(i,t.options,"input");return s=[e[0],e[1],'<span style="display:inline; white-space:nowrap; padding:0px;"><span></span><input type="text" maxlength="'+n.maxlength+'" style="width:100%"/></span>'],(r=t.create("text",s,n)).type=utils_type.A.OBJECT_TYPE_INPUT,r.rendNodeLabel=r.rendNode.childNodes[0].childNodes[0],r.rendNodeInput=r.rendNode.childNodes[0].childNodes[1],r.rendNodeInput.value=e[2],r.rendNodeTag=r.rendNodeInput,r.rendNodeTag.disabled=!!n.disabled,r.rendNodeLabel.id=r.rendNode.id+"_label",r.rendNodeInput.id=r.rendNode.id+"_input",r.setText(e[3]),r._value=e[2],r.update=function(){return this.needsUpdate&&(jxg.A.Text.prototype.update.call(this),this._value=this.rendNodeInput.value),this},r.Value=function(){return this._value},r.set=function(t){return this._value=t,this.rendNodeInput.value=t,this},env.A.addEvent(r.rendNodeInput,"input",input_priv.InputInputEventHandler,r),env.A.addEvent(r.rendNodeInput,"mousedown",(function(t){utils_type.A.exists(t.stopPropagation)&&t.stopPropagation()}),r),env.A.addEvent(r.rendNodeInput,"touchstart",(function(t){utils_type.A.exists(t.stopPropagation)&&t.stopPropagation()}),r),env.A.addEvent(r.rendNodeInput,"pointerdown",(function(t){utils_type.A.exists(t.stopPropagation)&&t.stopPropagation()}),r),r.visPropOld.fontsize="0px",t.renderer.updateTextStyle(r,!1),r},jxg.A.registerElement("input",jxg.A.createInput);var button_priv={ButtonClickEventHandler:function(){this._handler&&this._handler(),this.board.update()}};jxg.A.createButton=function(t,e,i){var r,s,n=utils_type.A.copyAttributes(i,t.options,"button");return s=[e[0],e[1],'<button type="button" style="width:100%;"></button>'],(r=t.create("text",s,n)).type=utils_type.A.OBJECT_TYPE_BUTTON,r.rendNodeButton=r.rendNode.childNodes[0],r.rendNodeButton.id=r.rendNode.id+"_button",r.rendNodeTag=r.rendNodeButton,r.rendNodeTag.disabled=!!n.disabled,r.setText(e[2]),r.visPropOld.fontsize="0px",t.renderer.updateTextStyle(r,!1),e[3]&&(utils_type.A.isString(e[3])?(r._jc=new jxg.A.JessieCode,r._jc.use(t),r._handler=function(){r._jc.parse(e[3])}):r._handler=e[3]),env.A.addEvent(r.rendNodeButton,"click",button_priv.ButtonClickEventHandler,r),env.A.addEvent(r.rendNodeButton,"mousedown",(function(t){utils_type.A.exists(t.stopPropagation)&&t.stopPropagation()}),r),env.A.addEvent(r.rendNodeButton,"touchstart",(function(t){utils_type.A.exists(t.stopPropagation)&&t.stopPropagation()}),r),env.A.addEvent(r.rendNodeButton,"pointerdown",(function(t){utils_type.A.exists(t.stopPropagation)&&t.stopPropagation()}),r),r},jxg.A.registerElement("button",jxg.A.createButton),jxg.A.createVectorField=function(t,e,i){var r,s;if(!(e.length>=3&&(utils_type.A.isArray(e[0])||utils_type.A.isFunction(e[0])||utils_type.A.isString(e[0]))&&utils_type.A.isArray(e[1])&&3===e[1].length&&utils_type.A.isArray(e[2])&&3===e[2].length))throw new Error("JSXGraph: Can't create vector field with parent types '"+typeof e[0]+"', '"+typeof e[1]+"', '"+typeof e[2]+"'.");return s=utils_type.A.copyAttributes(i,t.options,"vectorfield"),(r=t.create("curve",[[],[]],s)).elType="vectorfield",r.setF=function(t,e){var i,s;return utils_type.A.isArray(t)?(i=utils_type.A.createFunction(t[0],this.board,e),s=utils_type.A.createFunction(t[1],this.board,e),this.F=function(t,e){return[i(t,e),s(t,e)]}):this.F=utils_type.A.createFunction(t,r.board,e),this},r.setF(e[0],"x, y"),r.xData=e[1],r.yData=e[2],r.updateDataArray=function(){var e,i,r,s,n,o,a,l,u,c,h,d,p=utils_type.A.evaluate(this.visProp.scale),f=utils_type.A.evaluate(this.xData[0]),_=utils_type.A.evaluate(this.xData[1]),m=(utils_type.A.evaluate(this.xData[2])-f)/_,g=utils_type.A.evaluate(this.yData[0]),y=utils_type.A.evaluate(this.yData[1]),v=(utils_type.A.evaluate(this.yData[2])-g)/y,A=utils_type.A.evaluate(this.visProp.arrowhead.enabled);for(A&&(c=(u=utils_type.A.evaluate(this.visProp.arrowhead.size))/t.unitX,h=u/t.unitY,d=utils_type.A.evaluate(this.visProp.arrowhead.angle)),this.dataX=[],this.dataY=[],r=0,e=f;r<=_;e+=m,r++)for(s=0,i=g;s<=y;i+=v,s++)(n=this.F(e,i))[0]*=p,n[1]*=p,utils_type.A.concat(this.dataX,[e,e+n[0],NaN]),utils_type.A.concat(this.dataY,[i,i+n[1],NaN]),A&&Math.abs(n[0])+Math.abs(n[1])>0&&(a=(o=Math.atan2(n[1],n[0]))+d,l=o-d,utils_type.A.concat(this.dataX,[e+n[0]-Math.cos(a)*c,e+n[0],e+n[0]-Math.cos(l)*c,NaN]),utils_type.A.concat(this.dataY,[i+n[1]-Math.sin(a)*h,i+n[1],i+n[1]-Math.sin(l)*h,NaN]))},r.methodMap=utils_type.A.deepCopy(r.methodMap,{setF:"setF"}),r},jxg.A.registerElement("vectorfield",jxg.A.createVectorField),jxg.A.createSlopeField=function(t,e,i){var r,s,n;if(!(e.length>=3&&(utils_type.A.isFunction(e[0])||utils_type.A.isString(e[0]))&&utils_type.A.isArray(e[1])&&3===e[1].length&&utils_type.A.isArray(e[2])&&3===e[2].length))throw new Error("JSXGraph: Can't create slope field with parent types '"+typeof e[0]+"', '"+typeof e[1]+"', '"+typeof e[2]+"'.");return s=utils_type.A.createFunction(e[0],t,"x, y"),e[0]=function(t,e){var i=s(t,e),r=Math.sqrt(1+i*i);return[1/r,i/r]},n=utils_type.A.copyAttributes(i,t.options,"slopefield"),(r=t.create("vectorfield",e,n)).elType="slopefield",r.setF=function(t,e){var i=utils_type.A.createFunction(t,r.board,e);this.F=function(t,e){var r=i(t,e),s=Math.sqrt(1+r*r);return[1/s,r/s]}},r.methodMap=utils_type.A.deepCopy(r.methodMap,{setF:"setF"}),r},jxg.A.registerElement("slopefield",jxg.A.createSlopeField),jxg.A.createSmartLabel=function(t,e,i){var r,s,n,o,a,l;if(0===e.length||[constants.A.OBJECT_CLASS_POINT,constants.A.OBJECT_CLASS_LINE,constants.A.OBJECT_CLASS_CIRCLE].indexOf(e[0].elementClass)<0&&[constants.A.OBJECT_TYPE_POLYGON,constants.A.OBJECT_TYPE_ANGLE].indexOf(e[0].type)<0)throw new Error("JSXGraph: Can't create smartlabel with parent types '"+typeof e[0]+"', '"+typeof e[1]+"'.");return n=e[0],o=e[1]||"",n.elementClass===constants.A.OBJECT_CLASS_POINT?s=utils_type.A.copyAttributes(i,t.options,"smartlabelpoint"):n.elementClass===constants.A.OBJECT_CLASS_LINE?((s=utils_type.A.copyAttributes(i,t.options,"smartlabelline")).rotate=function(){return 180*Math.atan(n.getSlope())/Math.PI},s.visible=function(){return!(n.L()<1.5)}):n.elementClass===constants.A.OBJECT_CLASS_CIRCLE?(s=utils_type.A.copyAttributes(i,t.options,"smartlabelcircle")).visible=function(){return!(n.Radius()<1.5)}:n.type===constants.A.OBJECT_TYPE_POLYGON?s=utils_type.A.copyAttributes(i,t.options,"smartlabelpolygon"):n.type===constants.A.OBJECT_TYPE_ANGLE&&((s=utils_type.A.copyAttributes(i,t.options,"smartlabelangle")).rotate=function(){var t=n.center.coords.usrCoords,e=n.getLabelAnchor().usrCoords,i=180*Math.atan2(e[2]-t[2],e[1]-t[1])/Math.PI;return i>90&&i<270?i+180:i},s.anchorX=function(){var t=n.center.coords.usrCoords,e=n.getLabelAnchor().usrCoords,i=180*Math.atan2(e[2]-t[2],e[1]-t[1])/Math.PI;return i>90&&i<270?"right":"left"}),a=function(t,e,i,r){var s;switch(r){case"length":s=function(){return e.L()};break;case"slope":s=function(){return e.Slope()};break;case"area":s=function(){return e.Area()};break;case"radius":s=function(){return e.Radius()};break;case"perimeter":s=function(){return e.Perimeter()};break;case"rad":s=function(){return e.Value()};break;case"deg":s=function(){return 180*e.Value()/Math.PI};break;default:s=function(){return 0}}return function(){var e,i="",r=utils_type.A.evaluate(o),n=utils_type.A.evaluate(t.visProp.digits),a=utils_type.A.evaluate(t.visProp.unit),l=utils_type.A.evaluate(t.visProp.prefix),u=utils_type.A.evaluate(t.visProp.suffix),c=utils_type.A.evaluate(t.visProp.usemathjax)||utils_type.A.evaluate(t.visProp.usekatex);return""===r?(e=t.useLocale()?t.formatNumberLocale(s(),n):utils_type.A.toFixed(s(),n),i=c?["\\(",l,e,"\\,",a,u,"\\)"].join(""):[l,e,a,u].join("")):i=r,i}},n.elementClass===constants.A.OBJECT_CLASS_POINT?(r=t.create("text",[function(){return n.X()},function(){return n.Y()},""],s),l=function(){var t,e,i="",s=utils_type.A.evaluate(o),a=utils_type.A.evaluate(r.visProp.digits),l=utils_type.A.evaluate(r.visProp.unit),u=utils_type.A.evaluate(r.visProp.prefix),c=utils_type.A.evaluate(r.visProp.suffix),h=utils_type.A.evaluate(r.visProp.dir),d=utils_type.A.evaluate(r.visProp.usemathjax)||utils_type.A.evaluate(r.visProp.usekatex);return r.useLocale()?(t=r.formatNumberLocale(n.X(),a),e=r.formatNumberLocale(n.Y(),a)):(t=utils_type.A.toFixed(n.X(),a),e=utils_type.A.toFixed(n.Y(),a)),""===s?"row"===h?i=d?["\\(",u,t,"\\,",l," / ",e,"\\,",l,c,"\\)"].join(""):[u,t," ",l," / ",e," ",l,c].join(""):0===h.indexOf("col")&&(i=d?["\\(",u,"\\left(\\array{",t,"\\,",l,"\\\\ ",e,"\\,",l,"}\\right)",c,"\\)"].join(""):[u,t," ",l,"<br/>",e," ",l,c].join("")):i=s,i}):n.elementClass===constants.A.OBJECT_CLASS_LINE?"length"===s.measure?l=a(r=t.create("text",[function(){return.5*(n.point1.X()+n.point2.X())},function(){return.5*(n.point1.Y()+n.point2.Y())},""],s),n,0,"length"):"slope"===s.measure&&(l=a(r=t.create("text",[function(){return.25*n.point1.X()+.75*n.point2.X()},function(){return.25*n.point1.Y()+.75*n.point2.Y()},""],s),n,0,"slope")):n.elementClass===constants.A.OBJECT_CLASS_CIRCLE?"radius"===s.measure?l=a(r=t.create("text",[function(){return n.center.X()+.5*n.Radius()},function(){return n.center.Y()},""],s),n,0,"radius"):"area"===s.measure?l=a(r=t.create("text",[function(){return n.center.X()},function(){return n.center.Y()+.5*n.Radius()},""],s),n,0,"area"):"circumference"!==s.measure&&"perimeter"!==s.measure||(l=a(r=t.create("text",[function(){return n.getLabelAnchor()},""],s),n,0,"perimeter")):n.type===constants.A.OBJECT_TYPE_POLYGON?"area"===s.measure?l=a(r=t.create("text",[function(){return n.getTextAnchor()},""],s),n,0,"area"):"perimeter"===s.measure&&(l=a(r=t.create("text",[function(){var t=n.borders.length-1;return t>=0?[.5*(n.borders[t].point1.X()+n.borders[t].point2.X()),.5*(n.borders[t].point1.Y()+n.borders[t].point2.Y())]:n.getTextAnchor()},""],s),n,0,"perimeter")):n.type===constants.A.OBJECT_TYPE_ANGLE&&(l=a(r=t.create("text",[function(){return n.getLabelAnchor()},""],s),n,0,s.measure)),utils_type.A.exists(r)&&(r.setText(l),n.addChild(r),r.setParents([n])),r},jxg.A.registerElement("smartlabel",jxg.A.createSmartLabel),jxg.A.ForeignObject=function(t,e,i,r,s){this.constructor(t,i,constants.A.OBJECT_TYPE_FOREIGNOBJECT,constants.A.OBJECT_CLASS_OTHER),this.element=this.board.select(i.anchor),this.coordsConstructor(e),this._useUserSize=!1,this.size=[1,1],utils_type.A.exists(s)&&s.length>0&&(this._useUserSize=!0,this.W=utils_type.A.createFunction(s[0],this.board,""),this.H=utils_type.A.createFunction(s[1],this.board,""),this.addParentsFromJCFunctions([this.W,this.H]),this.usrSize=[this.W(),this.H()]),this.content=r,this.elType="foreignobject",this.id=this.board.setId(this,"Im"),this.board.renderer.drawForeignObject(this),this.board.finalizeAdding(this),this.methodMap=jxg.A.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform",W:"W",Width:"W",H:"H",Height:"H"})},jxg.A.ForeignObject.prototype=new base_element.A,utils_type.A.copyPrototypeMethods(jxg.A.ForeignObject,coordselement.A,"coordsConstructor"),jxg.A.extend(jxg.A.ForeignObject.prototype,{hasPoint:function(t,e){var i,r,s,n,o,a,l,u,c,h=this.transformations.length;return utils_type.A.isObject(utils_type.A.evaluate(this.visProp.precision))?(n=this.board._inputDevice,o=utils_type.A.evaluate(this.visProp.precision[n])):o=this.board.options.precision.hasPoint,0===h?(i=t-this.coords.scrCoords[1],r=this.coords.scrCoords[2]-e,i>=-(s=o)&&i-this.size[0]<=s&&r>=-s&&r-this.size[1]<=s):(l=[(a=(a=new base_coords.A(constants.A.COORDS_BY_SCREEN,[t,e],this.board)).usrCoords)[0]-this.span[0][0],a[1]-this.span[0][1],a[2]-this.span[0][2]],0<=(u=(c=math.A.innerProduct)(l,this.span[1]))&&u<=c(this.span[1],this.span[1])&&0<=(u=c(l,this.span[2]))&&u<=c(this.span[2],this.span[2]))},update:function(t){return this.needsUpdate?(this.updateCoords(t),this.updateSize(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateForeignObject")},updateSize:function(){var t=[0,0];return this._useUserSize?(this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)]):this.rendNode.hasChildNodes()&&(t=this.rendNode.childNodes[0].getBoundingClientRect(),this.size=[t.width,t.height]),this},updateSpan:function(){var t,e,i=this.transformations.length,r=[];if(0===i)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(r[0]=[this.Z(),this.X(),this.Y()],r[1]=[this.Z(),this.X()+this.W(),this.Y()],r[2]=[this.Z(),this.X(),this.Y()+this.H()],t=0;t<i;t++)for(e=0;e<3;e++)r[e]=math.A.matVecMult(this.transformations[t].matrix,r[e]);for(e=0;e<3;e++)r[e][1]/=r[e][0],r[e][2]/=r[e][0],r[e][0]/=r[e][0];for(e=1;e<3;e++)r[e][0]-=r[0][0],r[e][1]-=r[0][1],r[e][2]-=r[0][2];this.span=r}return this},addTransform:function(t){var e;if(utils_type.A.isArray(t))for(e=0;e<t.length;e++)this.transformations.push(t[e]);else this.transformations.push(t);return this},getParents:function(){var t=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return 0!==this.parents.length&&(t=this.parents),t},setSize:function(t,e){return this.W=utils_type.A.createFunction(t,this.board,""),this.H=utils_type.A.createFunction(e,this.board,""),this._useUserSize=!0,this.addParentsFromJCFunctions([this.W,this.H]),this},W:function(){},H:function(){}}),jxg.A.createForeignObject=function(t,e,i){var r,s,n=e[0],o=e[1],a=[];if(e.length>=2&&(a=e[2]),r=utils_type.A.copyAttributes(i,t.options,"foreignobject"),!(s=coordselement.A.create(jxg.A.ForeignObject,t,o,r,n,a)))throw new Error("JSXGraph: Can't create foreignObject with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [string, [x, y], [w, h]], [string, [x, y]], [element,transformation]");return s},jxg.A.registerElement("foreignobject",jxg.A.createForeignObject),jxg.A.registerElement("fo",jxg.A.createForeignObject);const foreignobject=jxg.A.ForeignObject;jxg.A.extend(src_options.A,{axes3d:{axesPosition:"center",xAxis:{visible:!0,point2:{name:"x"}},yAxis:{visible:!0,point2:{name:"y"}},zAxis:{visible:!0,point2:{name:"z"}},xPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},yPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},zPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},xPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},yPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},zPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},xPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1}},axis3d:{highlight:!1,fixed:!0,strokecolor:"black",strokeWidth:1,tabindex:null,point1:{visible:!1,name:""},point2:{visible:!1,name:"",label:{visible:!0}}},curve3d:{highlight:!1,tabindex:-1,strokeWidth:1,numberPointsHigh:200},intersectionline3d:{point1:{visible:!1,name:""},point2:{visible:!1,name:""}},line3d:{strokeWidth:1,strokeColor:"black",fixed:!0,tabindex:null,gradient:"linear",gradientSecondColor:"#ffffff",point:{visible:!1,name:""},point1:{visible:!1,name:""},point2:{visible:!1,name:""}},mesh3d:{strokeWidth:1,strokeColor:"#9a9a9a",strokeOpacity:.6,highlight:!1,fillColor:"#9a9a9a",fillOpacity:.1,tabindex:null,visible:"inherit"},plane3d:{strokeWidth:0,strokeColor:"black",strokeOpacity:1,highlight:!1,tabindex:null,gradient:"linear",gradientSecondColor:"#ffffff",gradientAngle:Math.PI,fillColor:"#a7a7a7",fillOpacity:.6,point:{visible:!1,name:"",fixed:!0}},point3d:{infoboxDigits:"auto",strokeWidth:0,gradient:"radial",gradientSecondColor:"#555555",fillColor:"yellow",highlightStrokeColor:"#555555"},polygon3d:{highlight:!1,tabindex:-1,strokeWidth:1,fillColor:"none"},sphere3d:{highlight:!1,strokeWidth:1,strokeColor:"#00ff80",fillColor:"white",gradient:"radial",gradientSecondColor:"#00ff80",gradientFX:.7,gradientFY:.3,fillOpacity:.4},surface3d:{highlight:!1,tabindex:-1,strokeWidth:1,stepsU:30,stepsV:30},vectorfield3d:{scale:1,arrowhead:{enabled:!0,size:5,angle:.125*Math.PI}},view3d:{needsRegularUpdate:!0,projection:"parallel",verticalDrag:{enabled:!0,key:"shift"},az:{pointer:{enabled:!0,speed:1,outside:!0,button:-1,key:"none"},keyboard:{enabled:!0,step:10,key:"ctrl"},continuous:!0,slider:{visible:!0,style:6,point1:{frozen:!0},point2:{frozen:!0},min:0,max:2*Math.PI,start:1}},el:{pointer:{enabled:!0,speed:1,outside:!0,button:-1,key:"none"},keyboard:{enabled:!0,step:10,key:"ctrl"},continuous:!0,slider:{visible:!0,style:6,point1:{frozen:!0},point2:{frozen:!0},min:0,max:2*Math.PI,start:.3}},trackball:{enabled:!1,outside:!0,button:-1,key:"none"},r:"auto",fov:.4*Math.PI,values:[[0,1.57],[.78,.62],[0,0],[5.49,.62],[4.71,0],[3.93,.62],[3.14,0],[2.36,.62],[1.57,1.57]],_currentView:-1}});const options3d=jxg.A.Options;jxg.A.View3D=function(t,e,i){this.constructor(t,i,constants.A.OBJECT_TYPE_VIEW3D,constants.A.OBJECT_CLASS_3D),this.objects={},this.elementsByName={},this.defaultAxes=null,this.matrix3D=[[1,0,0,0],[0,1,0,0],[0,0,1,0]],this.cameraTransform=[],this.llftCorner=e[0],this.size=e[1],this.bbox3D=e[2],this.r=-1,this.focalDist=-1,this.projectionType="parallel",this.timeoutAzimuth=null,this.id=this.board.setId(this,"V"),this.board.finalizeAdding(this),this.elType="view3d",this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.View3D.prototype=new base_element.A,jxg.A.extend(jxg.A.View3D.prototype,{create:function(t,e,i){var r=[];return t.indexOf("3d")>0&&r.push(this),this.board.create(t,r.concat(e),i)},select:function(t,e){var i,r,s,n,o=t;if(null===o)return o;if(utils_type.A.isString(o)&&""!==o)utils_type.A.exists(this.objects[o])?o=this.objects[o]:utils_type.A.exists(this.elementsByName[o])&&(o=this.elementsByName[o]);else if(!e&&(utils_type.A.isFunction(o)||utils_type.A.isObject(o)&&!utils_type.A.isFunction(o.setAttribute))){for(r={},n=(i=utils_type.A.filterElements(this.objectsList,o)).length,s=0;s<n;s++)r[i[s].id]=i[s];o=new composition(r)}else utils_type.A.isObject(o)&&utils_type.A.exists(o.id)&&!utils_type.A.exists(this.objects[o.id])&&(o=null);return o},updateParallelProjection:function(){var t,e,i,r,s=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];return i=this.el_slide.Value(),t=this.r,e=this.az_slide.Value(),r=t*Math.sin(i),s[1][1]=t*Math.cos(e),s[1][2]=-t*Math.sin(e),s[1][3]=0,s[2][1]=r*Math.sin(e),s[2][2]=r*Math.cos(e),s[2][3]=Math.cos(i),s[3][1]=t*Math.cos(i)*Math.sin(e),s[3][2]=t*Math.cos(i)*Math.cos(e),s[3][3]=-Math.sin(i),s},_projectToSphere:function(t,e,i){var r,s=math.A.hypot(e,i);return s<.7071067811865475*t?Math.sqrt(t*t-s*s):(r=t/1.414213562373095)*r/s},updateProjectionTrackball:function(t){var e,i,r,s,n,o,a,l,u,c,h,d,p=100,f=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];return utils_type.A.exists(this._trackball)?((e=this._trackball.dx)*e+(i=this._trackball.dy)*i>math.A.eps&&(p=.25*(this.size[0]*this.board.unitX+this.size[1]*this.board.unitY),n=this._trackball.x,o=this._trackball.y,s=[this._projectToSphere(p,n,o),n,o],n-=e,o-=i,r=[this._projectToSphere(p,n,o),n,o],d=math.A.crossProduct(s,r),u=math.A.hypot(d[0],d[1],d[2]),d[0]/=-u,d[1]/=-u,d[2]/=u,l=(l=(l=geometry.A.distance(s,r,3)/(2*p))>1?1:l)<-1?-1:l,a=2*Math.asin(l),l=1-(c=Math.cos(a)),h=Math.sin(a),f[1][1]=c+d[0]*d[0]*l,f[2][1]=d[0]*d[1]*l-d[2]*h,f[3][1]=d[0]*d[2]*l+d[1]*h,f[1][2]=d[1]*d[0]*l+d[2]*h,f[2][2]=c+d[1]*d[1]*l,f[3][2]=d[1]*d[2]*l-d[0]*h,f[1][3]=d[2]*d[0]*l-d[1]*h,f[2][3]=d[2]*d[1]*l+d[0]*h,f[3][3]=c+d[2]*d[2]*l,null!==t&&(f[1][0]=t[0]-f[1][1]*t[0]-f[1][2]*t[0]-f[1][3]*t[0],f[2][0]=t[1]-f[2][1]*t[1]-f[2][2]*t[1]-f[2][3]*t[1],f[3][0]=t[2]-f[3][1]*t[2]-f[3][2]*t[2]-f[3][3]*t[2])),f=math.A.matMatMult(this.matrix3DRot,f)):this.matrix3DRot},_updateCentralProjection:function(){var t,e,i,r,s,n,o,a,l,u,c,h,d,p=[.5*(this.bbox3D[0][0]+this.bbox3D[0][1]),.5*(this.bbox3D[1][0]+this.bbox3D[1][1]),.5*(this.bbox3D[2][0]+this.bbox3D[2][1])];return d=function(t,e,i){return[i*Math.cos(t)*Math.cos(e),-i*Math.sin(t)*Math.cos(e),i*Math.sin(e)]},i=this.az_slide.Value()+3*Math.PI*.5,e=this.el_slide.Value(),"auto"===(t=utils_type.A.evaluate(this.visProp.r))&&(t=1.01*math.A.hypot(this.bbox3D[0][0]-this.bbox3D[0][1],this.bbox3D[1][0]-this.bbox3D[1][1],this.bbox3D[2][0]-this.bbox3D[2][1])),r=d(i,e+Math.PI/2,1),c=[(u=d(i,e,t))[0],u[1],u[2]],u[0]+=p[0],u[1]+=p[1],u[2]+=p[2],l=math.A.norm(c,3),s=[c[0]/l,c[1]/l,c[2]/l],l=math.A.norm(r,3),a=[r[0]/l,r[1]/l,r[2]/l],n=math.A.crossProduct(a,s),o=math.A.crossProduct(s,n),a=math.A.matVecMult([n,o,s],u),this.cameraTransform=[[1,0,0,0],[-a[0],n[0],n[1],n[2]],[-a[1],o[0],o[1],o[2]],[-a[2],s[0],s[1],s[2]]],this.focalDist=1/Math.tan(.5*utils_type.A.evaluate(this.visProp.fov)),h=[[0,0,0,-1],[0,this.focalDist,0,0],[0,0,this.focalDist,0],[320/-12,0,0,28/-12]],math.A.matMatMult(h,this.cameraTransform)},update:function(){var t,e,i,r,s,n=null,o=!1;if(!utils_type.A.exists(this.el_slide)||!utils_type.A.exists(this.az_slide)||!this.needsUpdate)return this;if(t=[[1,0,0],[0,1,0],[0,0,1]],this.projectionType=utils_type.A.evaluate(this.visProp.projection).toLowerCase(),utils_type.A.evaluate(this.visProp.trackball.enabled)&&utils_type.A.exists(this.matrix3DRot)&&(this._hasMoveTrackball&&("central"===this.projectionType&&(n=[.5*(this.bbox3D[0][0]+this.bbox3D[0][1]),.5*(this.bbox3D[1][0]+this.bbox3D[1][1]),.5*(this.bbox3D[2][0]+this.bbox3D[2][1])]),this.matrix3DRot=this.updateProjectionTrackball(n)),o=!0),"central"===this.projectionType)i=.8,t[1][1]=this.size[0]/i,t[2][2]=this.size[1]/i,t[1][0]=this.llftCorner[0]+.5*t[1][1]*i,t[2][0]=this.llftCorner[1]+.5*t[2][2]*i,this.viewPortTransform=t,o||(this.matrix3DRot=this._updateCentralProjection()),this.matrix3D=this.matrix3DRot.slice();else e=[[1,0,0,0],[-.5*(this.bbox3D[0][0]+this.bbox3D[0][1]),1,0,0],[-.5*(this.bbox3D[1][0]+this.bbox3D[1][1]),0,1,0],[-.5*(this.bbox3D[2][0]+this.bbox3D[2][1]),0,0,1]],r=this.bbox3D[0][1]-this.bbox3D[0][0],s=this.bbox3D[1][1]-this.bbox3D[1][0],t[1][1]=this.size[0]/r,t[2][2]=this.size[1]/s,t[1][0]=this.llftCorner[0]+.5*t[1][1]*r,t[2][0]=this.llftCorner[1]+.5*t[2][2]*s,o||(this.matrix3DRot=this.updateParallelProjection()),this.matrix3D=math.A.matMatMult(t,math.A.matMatMult(this.matrix3DRot,e).slice(0,3));return this},updateRenderer:function(){return this.needsUpdate=!1,this},removeObject:function(t,i){var r;if(utils_type.A.isArray(t)){for(r=0;r<t.length;r++)this.removeObject(t[r]);return this}if(t=this.select(t),!utils_type.A.exists(t)||utils_type.A.isString(t))return this;try{delete this.objects[t.id]}catch(e){jxg.A.debug("View3D "+t.id+": Could not be removed: "+e)}return this.board.removeObject(t,i),this},worldToView:function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var i,r=math.A.matVecMult(this.cameraTransform,t);if(r[3]-=r[0]*this.focalDist,e)return r;for(i=1;i<4;i++)r[i]/=r[0];return r.slice(1,4)},project3DTo2D:function(t,e,i){var r,s;return 3===arguments.length?r=[1,t,e,i]:3===t.length?(r=t.slice()).unshift(1):r=t,s=math.A.matVecMult(this.matrix3D,r),"central"===this.projectionType?(s[1]/=s[0],s[2]/=s[0],s[3]/=s[0],s[0]/=s[0],math.A.matVecMult(this.viewPortTransform,s.slice(0,3))):s},_getW0:function(t,e,i){var r,s=math.A.inverse(t),n=s[0][0]+e[1]*s[0][1]+e[2]*s[0][2],o=s[3][0]+e[1]*s[3][1]+e[2]*s[3][2];return r=i*s[0][3]-s[3][3],[1/((o*s[0][3]-n*s[3][3])/r),(o-n*i)/r]},project2DTo3DPlane:function(t,i,r){var s,n,o,a,l,u,c,h,d=i.slice(1);if(r=r||[1,0,0,0],a=math.A.norm(d,3),o=math.A.innerProduct(r.slice(1),d,3)/a,"parallel"===this.projectionType){(s=this.matrix3D.slice(0,3)).push([0,d[0],d[1],d[2]]),(n=t.coords.usrCoords.slice()).push(o);try{1===s[2][3]&&(s[2][1]=s[2][2]=.001*math.A.eps),l=math.A.Numerics.Gauss(s,n)}catch(e){l=[0,NaN,NaN,NaN]}}else{s=this.matrix3DRot,n=t.coords.usrCoords.slice(),u=math.A.Numerics.Gauss(this.viewPortTransform,n),c=(h=this._getW0(s,u,o))[0],n=[u[0]*c,u[1]*c,u[2]*c,h[1]*c];try{1===s[2][3]&&(s[2][1]=s[2][2]=.001*math.A.eps),(l=math.A.Numerics.Gauss(s,n))[1]/=l[0],l[2]/=l[0],l[3]/=l[0],l[0]/=l[0]}catch(p){l=[0,NaN,NaN,NaN]}}return l},project2DTo3DVertical:function(t,e){var i=this.matrix3D[2],r=i[3],s=t.coords.usrCoords[2];return s-=i[0]*e[0]+i[1]*e[1]+i[2]*e[2],Math.abs(r)<math.A.eps?e:e.slice(0,3).concat([s/r])},project3DToCube:function(t){var e=this.bbox3D;return t[1]<e[0][0]&&(t[1]=e[0][0]),t[1]>e[0][1]&&(t[1]=e[0][1]),t[2]<e[1][0]&&(t[2]=e[1][0]),t[2]>e[1][1]&&(t[2]=e[1][1]),t[3]<e[2][0]&&(t[3]=e[2][0]),t[3]>e[2][1]&&(t[3]=e[2][1]),t},intersectionLineCube:function(t,e,i){var r,s,n,o;for(r=i,s=0;s<3;s++)0!==e[s]&&(n=(this.bbox3D[s][0]-t[s])/e[s],o=(this.bbox3D[s][1]-t[s])/e[s],r=i<0?Math.max(r,Math.min(n,o)):Math.min(r,Math.max(n,o)));return r},isInCube:function(t){return t[0]>this.bbox3D[0][0]-math.A.eps&&t[0]<this.bbox3D[0][1]+math.A.eps&&t[1]>this.bbox3D[1][0]-math.A.eps&&t[1]<this.bbox3D[1][1]+math.A.eps&&t[2]>this.bbox3D[2][0]-math.A.eps&&t[2]<this.bbox3D[2][1]+math.A.eps},intersectionPlanePlane:function(t,e,i){var r,s,n,o,a=[[],[]];return i=i||e.d,r=math.A.Geometry.meet3Planes(t.normal,t.d,e.normal,i,math.A.crossProduct(t.normal,e.normal),0),s=math.A.Geometry.meetPlanePlane(t.vec1,t.vec2,e.vec1,e.vec2),n=this.intersectionLineCube(r,s,1/0),o=math.A.axpy(n,s,r),this.isInCube(o)&&(a[0]=o),n=this.intersectionLineCube(r,s,-1/0),o=math.A.axpy(n,s,r),this.isInCube(o)&&(a[1]=o),a},getMesh:function(t,e,i){var r,s,n,o,a,l,u,c=[0,0,0],h=e[2],d=i[2],p=[],f=[];for(l=(utils_type.A.evaluate(e[1])-utils_type.A.evaluate(e[0]))/h,u=(utils_type.A.evaluate(i[1])-utils_type.A.evaluate(i[0]))/d,r=0;r<=h;r++){for(n=e[0]+l*r,s=0;s<=d;s++)o=i[0]+u*s,c=utils_type.A.isFunction(t)?t(n,o):[t[0](n,o),t[1](n,o),t[2](n,o)],a=this.project3DTo2D(c),p.push(a[1]),f.push(a[2]);p.push(NaN),f.push(NaN)}for(s=0;s<=d;s++){for(o=i[0]+u*s,r=0;r<=h;r++)n=e[0]+l*r,c=utils_type.A.isFunction(t)?t(n,o):[t[0](n,o),t[1](n,o),t[2](n,o)],a=this.project3DTo2D(c),p.push(a[1]),f.push(a[2]);p.push(NaN),f.push(NaN)}return[p,f]},animateAzimuth:function(){var t=this.az_slide._smin,e=this.az_slide._smax-t,i=this.az_slide.Value()+.1;this.az_slide.position=(i-t)/e,this.az_slide.position>1&&(this.az_slide.position=0),this.board.update(),this.timeoutAzimuth=setTimeout(function(){this.animateAzimuth()}.bind(this),200)},stopAzimuth:function(){clearTimeout(this.timeoutAzimuth),this.timeoutAzimuth=null},isVerticalDrag:function(){var t=this.board;return!!utils_type.A.evaluate(this.visProp.verticaldrag.enabled)&&t["_"+utils_type.A.evaluate(this.visProp.verticaldrag.key)+"Key"]},setView:function(t,e,i){return i=i||this.r,this.az_slide.setValue(t),this.el_slide.setValue(e),this.r=i,this.board.update(),this},nextView:function(){var t=utils_type.A.evaluate(this.visProp.values),e=this.visProp._currentview;return e=(e+1)%t.length,this.setCurrentView(e),this},previousView:function(){var t=utils_type.A.evaluate(this.visProp.values),e=this.visProp._currentview;return e=(e+t.length-1)%t.length,this.setCurrentView(e),this},setCurrentView:function(t){var e=utils_type.A.evaluate(this.visProp.values);return(t<0||t>=e.length)&&(t=(t%e.length+e.length)%e.length),this.setView(e[t][0],e[t][1],e[t][2]),this.visProp._currentview=t,this},_azEventHandler:function(t){var e=this.az_slide._smax,i=this.az_slide._smin,r=(e-i)/this.board.canvasWidth*utils_type.A.evaluate(this.visProp.az.pointer.speed),s=t.movementX,n=this.az_slide.Value(),o=this.el_slide.Value();return this.board.mode===this.board.BOARD_MODE_DRAG||(utils_type.A.evaluate(this.visProp.az.keyboard.enabled)&&("ArrowRight"===t.key?n+=utils_type.A.evaluate(this.visProp.az.keyboard.step)*Math.PI/180:"ArrowLeft"===t.key&&(n-=utils_type.A.evaluate(this.visProp.az.keyboard.step)*Math.PI/180)),utils_type.A.evaluate(this.visProp.az.pointer.enabled)&&0!==s&&null==t.key&&(n+=s*r),utils_type.A.evaluate(this.visProp.az.continuous)?n=(n+e)%e:n>0?n=Math.min(e,n):n<0&&(n=Math.max(i,n)),this.setView(n,o)),this},_elEventHandler:function(t){var e=this.el_slide._smax,i=this.el_slide._smin,r=(e-i)/this.board.canvasHeight*utils_type.A.evaluate(this.visProp.el.pointer.speed),s=t.movementY,n=this.az_slide.Value(),o=this.el_slide.Value();return this.board.mode===this.board.BOARD_MODE_DRAG||(utils_type.A.evaluate(this.visProp.el.keyboard.enabled)&&("ArrowUp"===t.key?o-=utils_type.A.evaluate(this.visProp.el.keyboard.step)*Math.PI/180:"ArrowDown"===t.key&&(o+=utils_type.A.evaluate(this.visProp.el.keyboard.step)*Math.PI/180)),utils_type.A.evaluate(this.visProp.el.pointer.enabled)&&0!==s&&null==t.key&&(o+=s*r),utils_type.A.evaluate(this.visProp.el.continuous)?o=(o+e)%e:o>0?o=Math.min(e,o):o<0&&(o=Math.max(i,o)),this.setView(n,o)),this},_trackballHandler:function(t){var e,i,r,s=this.board.getMousePosition(t);return r=new base_coords.A(constants.A.COORDS_BY_USER,[this.llftCorner[0]+.5*this.size[0],this.llftCorner[1]+.5*this.size[1]],this.board),e=s[0]-r.scrCoords[1],i=s[1]-r.scrCoords[2],this._trackball={dx:t.movementX,dy:t.movementY,x:e,y:i},this.board.update(),this},pointerDownHandler:function(t){var e,i,r;this._hasMoveAz=!1,this._hasMoveEl=!1,this._hasMoveTrackball=!1,this.board.mode===this.board.BOARD_MODE_NONE&&(utils_type.A.evaluate(this.visProp.trackball.enabled)?(e=utils_type.A.evaluate(this.visProp.trackball.button),i=utils_type.A.evaluate(this.visProp.trackball.key),-1!==e&&e!==t.button||!("none"===i||i.indexOf("shift")>-1&&t.shiftKey||i.indexOf("ctrl")>-1&&t.ctrlKey)||(r=utils_type.A.evaluate(this.visProp.trackball.outside)?document:this.board.containerObj,env.A.addEvent(r,"pointermove",this._trackballHandler,this),this._hasMoveTrackball=!0)):(utils_type.A.evaluate(this.visProp.az.pointer.enabled)&&(e=utils_type.A.evaluate(this.visProp.az.pointer.button),i=utils_type.A.evaluate(this.visProp.az.pointer.key),-1!==e&&e!==t.button||!("none"===i||i.indexOf("shift")>-1&&t.shiftKey||i.indexOf("ctrl")>-1&&t.ctrlKey)||(r=utils_type.A.evaluate(this.visProp.az.pointer.outside)?document:this.board.containerObj,env.A.addEvent(r,"pointermove",this._azEventHandler,this),this._hasMoveAz=!0)),utils_type.A.evaluate(this.visProp.el.pointer.enabled)&&(e=utils_type.A.evaluate(this.visProp.el.pointer.button),i=utils_type.A.evaluate(this.visProp.el.pointer.key),-1!==e&&e!==t.button||!("none"===i||i.indexOf("shift")>-1&&t.shiftKey||i.indexOf("ctrl")>-1&&t.ctrlKey)||(r=utils_type.A.evaluate(this.visProp.el.pointer.outside)?document:this.board.containerObj,env.A.addEvent(r,"pointermove",this._elEventHandler,this),this._hasMoveEl=!0))),env.A.addEvent(document,"pointerup",this.pointerUpHandler,this))},pointerUpHandler:function(t){var e;this._hasMoveAz&&(e=utils_type.A.evaluate(this.visProp.az.pointer.outside)?document:this.board.containerObj,env.A.removeEvent(e,"pointermove",this._azEventHandler,this),this._hasMoveAz=!1),this._hasMoveEl&&(e=utils_type.A.evaluate(this.visProp.el.pointer.outside)?document:this.board.containerObj,env.A.removeEvent(e,"pointermove",this._elEventHandler,this),this._hasMoveEl=!1),this._hasMoveTrackball&&(e=utils_type.A.evaluate(this.visProp.az.pointer.outside)?document:this.board.containerObj,env.A.removeEvent(e,"pointermove",this._trackballHandler,this),this._hasMoveTrackball=!1),env.A.removeEvent(document,"pointerup",this.pointerUpHandler,this)}}),jxg.A.createView3D=function(t,e,i){var r,s,n,o,a,l,u,c,h=e[0],d=e[1];return s=utils_type.A.copyAttributes(i,t.options,"view3d"),(r=new jxg.A.View3D(t,e,s)).defaultAxes=r.create("axes3d",e,i),a=h[0],l=h[1],u=d[0],c=d[1],(n=utils_type.A.copyAttributes(i,t.options,"view3d","az","slider")).name="az",(o=utils_type.A.copyAttributes(i,t.options,"view3d","el","slider")).name="el",r.az_slide=t.create("slider",[[a-1,l-2],[a+u+1,l-2],[utils_type.A.evaluate(n.min),utils_type.A.evaluate(n.start),utils_type.A.evaluate(n.max)]],n),r.el_slide=t.create("slider",[[a-1,l],[a-1,l+c],[utils_type.A.evaluate(o.min),utils_type.A.evaluate(o.start),utils_type.A.evaluate(o.max)]],o),r.board.highlightInfobox=function(t,e,i){var s,n,o,a,l,u,c='<span style="color:black; font-size:200%">\u21c4 &nbsp;</span>',h=i.board,d=null;for(r.isVerticalDrag()&&(c='<span style="color:black; font-size:200%">\u21c5 &nbsp;</span>'),n=0;n<i.parents.length&&!(d=h.objects[i.parents[n]]).is3D;n++);if(d){if(a=[1,0,0,d.coords[3]],r._w0=math.A.innerProduct(r.matrix3D[0],a,4),o=r.project2DTo3DPlane(d.element2D,[1,0,0,1],a),!r.isInCube(o))return void r.board.highlightCustomInfobox("",d);s=utils_type.A.evaluate(d.visProp.infoboxdigits),u=r.board.infobox,l="auto"===s?u.useLocale()?[c,"(",u.formatNumberLocale(d.X())," | ",u.formatNumberLocale(d.Y())," | ",u.formatNumberLocale(d.Z()),")"]:[c,"(",utils_type.A.autoDigits(d.X())," | ",utils_type.A.autoDigits(d.Y())," | ",utils_type.A.autoDigits(d.Z()),")"]:u.useLocale()?[c,"(",u.formatNumberLocale(d.X(),s)," | ",u.formatNumberLocale(d.Y(),s)," | ",u.formatNumberLocale(d.Z(),s),")"]:[c,"(",utils_type.A.toFixed(d.X(),s)," | ",utils_type.A.toFixed(d.Y(),s)," | ",utils_type.A.toFixed(d.Z(),s),")"],r.board.highlightCustomInfobox(l.join(""),d)}else r.board.highlightCustomInfobox("("+t+", "+e+")",i)},r.BOARD_MODE_NONE=0,env.A.addEvent(t.containerObj,"keydown",(function(t){var e,i=!1;!utils_type.A.evaluate(r.visProp.el.keyboard.enabled)||"ArrowUp"!==t.key&&"ArrowDown"!==t.key||("none"===(e=utils_type.A.evaluate(r.visProp.el.keyboard.key))||e.indexOf("shift")>-1&&t.shiftKey||e.indexOf("ctrl")>-1&&t.ctrlKey)&&(r._elEventHandler(t),i=!0),!utils_type.A.evaluate(r.visProp.el.keyboard.enabled)||"ArrowLeft"!==t.key&&"ArrowRight"!==t.key||("none"===(e=utils_type.A.evaluate(r.visProp.az.keyboard.key))||e.indexOf("shift")>-1&&t.shiftKey||e.indexOf("ctrl")>-1&&t.ctrlKey)&&(r._azEventHandler(t),i=!0),"PageUp"===t.key?(r.nextView(),i=!0):"PageDown"===t.key&&(r.previousView(),i=!0),i&&t.preventDefault()}),r),env.A.addEvent(t.containerObj,"pointerdown",r.pointerDownHandler,r),r.board.update(),r},jxg.A.registerElement("view3d",jxg.A.createView3D);const view3d=jxg.A.View3D;jxg.A.GeometryElement3D=function(t,e){this.elType=e,this.id=this.board.setId(this,e),this.view=t,this.element2D=null,this.is3D=!0,this.view.objects[this.id]=this,""!==this.name&&(this.view.elementsByName[this.name]=this)},jxg.A.extend(jxg.A.GeometryElement3D.prototype,{setAttr2D:function(t){var e=t;return e.name=this.name,e},setAttribute:function(t){var e,i,r,s,n,o={};for(e=0;e<arguments.length;e++)s=arguments[e],utils_type.A.isString(s)?(n=s.split(":"),o[utils_type.A.trim(n[0])]=utils_type.A.trim(n[1])):utils_type.A.isArray(s)?o[s[0]]=s[1]:jxg.A.extend(o,s);for(e in o)if(o.hasOwnProperty(e))switch(i=e.replace(/\s+/g,"").toLowerCase(),r=o[e],i){case"numberpointshigh":case"stepsu":case"stepsv":utils_type.A.exists(this.visProp[i])&&(!jxg.A.Validator[i]||jxg.A.Validator[i]&&jxg.A.Validator[i](r)||jxg.A.Validator[i]&&utils_type.A.isFunction(r)&&jxg.A.Validator[i](r()))&&(r=(!r.toLowerCase||"false"!==r.toLowerCase())&&r,this._set(i,r));break;default:utils_type.A.exists(this.element2D)&&this.element2D.setAttribute(o)}},getAttribute:function(t){var e;switch(t=t.toLowerCase()){case"numberpointshigh":case"stepsu":case"stepsv":e=this.visProp[t];break;default:utils_type.A.exists(this.element2D)&&(e=this.element2D.getAttribute(t))}return e},getAttributes:function(){var t,e,i={},r=["numberpointshigh","stepsu","stepsv"],s=r.length;for(utils_type.A.exists(this.element2D)&&(i=utils_type.A.merge(this.element2D.getAttributes())),t=0;t<s;t++)e=r[t],utils_type.A.exists(this.visProp[e])&&(i[e]=this.visProp[e]);return i},remove:function(){}});const element3d=jxg.A.GeometryElement3D;jxg.A.createAxes3D=function(t,e,i){var r,s,n,o,a,l,u,c,h,d,p,f,_,m,g,y,v,A=e[0],b=["x","y","z"],C="Axis",x=["Rear","Front"],P=[0,0,0],E=[0,0,0],w={};if(utils_type.A.exists(A.bbox3D))for(r=0;r<b.length;r++)P[r]=A.bbox3D[r][0],E[r]=A.bbox3D[r][1];else for(r=0;r<b.length;r++)P[r]=e[1][r],E[r]=e[2][1];for(u=(l=utils_type.A.copyAttributes(i,t.options,"axes3d")).axesposition,r=0;r<b.length;r++)g=(c=b[r])+C,"center"===u?(h=[0,0,0],(d=[0,0,0])[r]=E[r],w[g]=A.create("axis3d",[h,d],l[g.toLowerCase()])):(g+="Border",h=P.slice(),d=E.slice(),2===r?(h[1]=E[1],d[0]=P[0]):(h[r]=E[r],d[2]=P[2]),d[r]=E[r],l[g.toLowerCase()].lastArrow=!1,w[g]=A.create("axis3d",[h,d],l[g.toLowerCase()]),v={visible:!0,minorTicks:0,tickEndings:[0,1],drawLabels:!1},2===r&&(v.tickEndings=[1,0]),w[g+"Ticks"]=A.create("ticks",[w[g],1],v));for(w.O=A.create("intersection",[w[b[0]+C],w[b[1]+C]],{name:"",visible:!1,withLabel:!1}),r=0;r<b.length;r++)for(o=(r+1)%3,a=(r+2)%3,c=b[r],s=0;s<x.length;s++)(h=[0,0,0])[r]=0===s?P[r]:E[r],f=[0,0,0],(p=[0,0,0])[o]=1,f[a]=1,_=[P[o],E[o]],m=[P[a],E[a]],g=c+"Plane"+x[s],l=utils_type.A.copyAttributes(i,t.options,"axes3d",g),w[g]=A.create("plane3d",[h,p,f,_,m],l),w[g].elType="axisplane3d";for(r=0;r<b.length;r++)for(c=b[r],s=0;s<x.length;s++)for(n=1;n<=2;n++)g=c+"Plane"+x[s]+b[o=(r+n)%3].toUpperCase()+"Axis",y=c+"Plane"+x[s],(h=[0,0,0])[r]=(d=[0,0,0])[r]=0===s?P[r]:E[r],h[o]=P[o],d[o]=E[o],l=utils_type.A.copyAttributes(i,t.options,"axes3d",g),w[g]=A.create("axis3d",[h,d],l),w[y].addChild(w[g]),w[y].element2D.inherits.push(w[g]);return w},jxg.A.registerElement("axes3d",jxg.A.createAxes3D),jxg.A.createAxis3D=function(t,e,i){var r,s,n,o,a,l,u=e[0],c=e[1],h=e[2];return r=utils_type.A.copyAttributes(i.point1,t.options,"axis3d","point1"),s=u.create("point",[(o=c[0],a=c[1],l=c[2],function(){return u.project3DTo2D(o,a,l)[1]}),function(t,e,i){return function(){return u.project3DTo2D(t,e,i)[2]}}(c[0],c[1],c[2])],r),r=utils_type.A.copyAttributes(i.point2,t.options,"axis3d","point2"),n=u.create("point",[function(t,e,i){return function(){return u.project3DTo2D(t,e,i)[1]}}(h[0],h[1],h[2]),function(t,e,i){return function(){return u.project3DTo2D(t,e,i)[2]}}(h[0],h[1],h[2])],r),r=utils_type.A.copyAttributes(i,t.options,"axis3d"),u.create("arrow",[s,n],r)},jxg.A.registerElement("axis3d",jxg.A.createAxis3D),jxg.A.createMesh3D=function(t,e,i){var r,s=e[0],n=e[1],o=e[2],a=e[3],l=e[4],u=e[5];return(r=s.create("curve",[[],[]],i)).updateDataArray=function(){var t,e,i,r,c=a[0],h=a[1],d=u[0],p=u[1],f=[0,0,0],_=[0,0,0],m=[0,0,0];if(this.dataX=[],this.dataY=[],utils_type.A.isFunction(n))m=n().slice(1);else for(r=0;r<3;r++)m[r]=utils_type.A.evaluate(n[r]);for(r=0;r<3;r++)f[r]=utils_type.A.evaluate(o[r]),_[r]=utils_type.A.evaluate(l[r]);for(t=jxg.A.Math.norm(f,3),e=jxg.A.Math.norm(_,3),r=0;r<3;r++)f[r]/=t,_[r]/=e;i=s.getMesh([function(t,e){return m[0]+t*f[0]+e*_[0]},function(t,e){return m[1]+t*f[1]+e*_[1]},function(t,e){return m[2]+t*f[2]+e*_[2]}],[Math.ceil(c),Math.floor(h),(Math.ceil(h)-Math.floor(c))/1],[Math.ceil(d),Math.floor(p),(Math.ceil(p)-Math.floor(d))/1]),this.dataX=i[0],this.dataY=i[1]},r},jxg.A.registerElement("mesh3d",jxg.A.createMesh3D),jxg.A.Circle3D=function(t,e,i,r,s){this.constructor(t.board,s,constants.A.OBJECT_TYPE_CIRCLE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(t,"circle3d"),this.center=this.board.select(e),this.normal=[0,0,0],this.curve,this.frame1,this.frame2,this.updateNormal=function(){var t,e;for(t=0;t<3;t++)this.normal[t]=utils_type.A.evaluate(i[t]);if(e=math.A.norm(this.normal),Math.abs(e)>math.A.eps)for(t=0;t<3;t++)this.normal[t]/=e},utils_type.A.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),this.updateRadius=utils_type.A.createFunction(r,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.updateNormal();this.frame1=math.A.crossProduct(this.normal,[1,0,0]);var n=math.A.crossProduct(this.normal,[-.5,.8660254037844386,0]);math.A.norm(n)>math.A.norm(this.frame1)&&(this.frame1=n),this.frame2=math.A.crossProduct(this.normal,this.frame1),this.normalizeFrame(),this.curve=t.create("curve3d",[t=>this.center.X()+this.Radius()*(Math.cos(t)*this.frame1[0]+Math.sin(t)*this.frame2[0]),t=>this.center.Y()+this.Radius()*(Math.cos(t)*this.frame1[1]+Math.sin(t)*this.frame2[1]),t=>this.center.Z()+this.Radius()*(Math.cos(t)*this.frame1[2]+Math.sin(t)*this.frame2[2]),[0,2*Math.PI]],s)},jxg.A.Circle3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Circle3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Circle3D.prototype,{update:function(){return this.updateNormal(),this.updateFrame(),this.curve.visProp.visible=!isNaN(this.Radius()),this},updateRenderer:function(){return this.needsUpdate=!1,this},setRadius:function(t){return this.updateRadius=utils_type.A.createFunction(t,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(t){return utils_type.A.exists(t)?(this.setRadius(t),this.Radius()):Math.abs(this.updateRadius())},normalizeFrame:function(){var t,e=math.A.norm(this.frame1),i=math.A.norm(this.frame2);for(t=0;t<3;t++)this.frame1[t]/=e,this.frame2[t]/=i},updateFrame:function(){this.frame1=math.A.crossProduct(this.frame2,this.normal),this.frame2=math.A.crossProduct(this.normal,this.frame1),this.normalizeFrame()},projectCoords:function(t,e){return this.curve.projectCoords(t,e)},projectScreenCoords:function(t,e){return this.curve.projectScreenCoords(t,e)}}),jxg.A.createCircle3D=function(t,e,i){var r,s=e[0],n=utils_type.A.copyAttributes(i,t.options,"circle3d"),o=utils_type.A.providePoints3D(s,[e[1]],i,"line3d",["point"])[0],a=e[2],l=e[3];return(r=new jxg.A.Circle3D(s,o,a,l,n)).center.addChild(r),r.addChild(r.curve),r.update(),r},jxg.A.registerElement("circle3d",jxg.A.createCircle3D),jxg.A.createIntersectionCircle3D=function(t,i,r){var s,n,o,a=i[0],l=i[1],u=i[2],c=utils_type.A.copyAttributes(r,t.options,"intersectioncircle3d");o=geometry.A.intersectionFunction3D(a,l,u),n=a.create("point3d",o[0],{visible:!1}),s=a.create("circle3d",[n,o[1],o[2]],c);try{l.addChild(s),u.addChild(s)}catch(e){throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.")}return s.type=constants.A.OBJECT_TYPE_INTERSECTION_CIRCLE3D,s.elType="intersectioncircle3d",s.setParents([l.id,u.id]),s},jxg.A.registerElement("intersectioncircle3d",jxg.A.createIntersectionCircle3D),jxg.A.Point3D=function(t,e,i,r){this.constructor(t.board,r,constants.A.OBJECT_TYPE_POINT3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(t,"point3d"),this.board.finalizeAdding(this),this.coords=[0,0,0,0],this.F=e,this.slide=i,this.X=function(){return this.coords[1]},this.Y=function(){return this.coords[2]},this.Z=function(){return this.coords[3]},this._params=[],this._c2d=null,this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Point3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Point3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Point3D.prototype,{updateCoords:function(){var t;if(utils_type.A.isFunction(this.F))this.coords=utils_type.A.evaluate(this.F),this.coords.unshift(1);else for(this.coords[0]=1,t=0;t<3;t++)utils_type.A.isFunction(this.F[t])&&(this.coords[t+1]=utils_type.A.evaluate(this.F[t]));return this},initCoords:function(){var t;if(utils_type.A.isFunction(this.F))this.coords=utils_type.A.evaluate(this.F),this.coords.unshift(1);else for(this.coords[0]=1,t=0;t<3;t++)this.coords[t+1]=utils_type.A.evaluate(this.F[t]);return this},normalizeCoords:function(){return Math.abs(this.coords[0])>math.A.eps&&(this.coords[1]/=this.coords[0],this.coords[2]/=this.coords[0],this.coords[3]/=this.coords[0],this.coords[0]=1),this},setPosition:function(t,e){var i=this.coords;return 3===t.length?(i[0]=1,i[1]=t[0],i[2]=t[1],i[3]=t[2]):(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[2],this.normalizeCoords()),this},update:function(t){var e,i;return this.element2D.draggable()&&0!==geometry.A.distance(this._c2d,this.element2D.coords.usrCoords)?this.slide?(this.coords=this.slide.projectScreenCoords([this.element2D.X(),this.element2D.Y()],this._params),this.element2D.coords.setCoordinates(constants.A.COORDS_BY_USER,this.view.project3DTo2D(this.coords))):(this.view.isVerticalDrag()?e=this.view.project2DTo3DVertical(this.element2D,this.coords):(i=[1,0,0,this.coords[3]],e=this.view.project2DTo3DPlane(this.element2D,[1,0,0,1],i)),0!==e[0]&&(this.coords=this.view.project3DToCube(e))):(this.updateCoords(),this.slide&&(this.coords=this.slide.projectCoords([this.X(),this.Y(),this.Z()],this._params)),this.element2D.coords.setCoordinates(constants.A.COORDS_BY_USER,this.view.project3DTo2D([1,this.X(),this.Y(),this.Z()]))),this._c2d=this.element2D.coords.usrCoords.slice(),this},updateRenderer:function(){return this.needsUpdate=!1,this},isIllDefined:function(){return utils_type.A.cmpArrays(this.coords,[0,0,0,0])},distance:function(t){var e=math.A.eps*math.A.eps,i=this.coords,r=t.coords;return i[0]*i[0]>e&&r[0]*r[0]>e?math.A.hypot(r[1]-i[1],r[2]-i[2],r[3]-i[3]):Number.POSITIVE_INFINITY},__evt__update3D:function(t){}}),jxg.A.createPoint3D=function(t,e,i){var r,s,n,o,a,l=e[0];if(n=e.length>2&&utils_type.A.exists(e[e.length-1].is3D)?e.pop():null,2===e.length)s=e[1];else{if(4!==e.length)throw new Error("JSXGraph: Can't create point3d with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [[x,y,z]], [x,y,z]");s=e.slice(1)}return r=utils_type.A.copyAttributes(i,t.options,"point3d"),(a=new jxg.A.Point3D(l,s,n,r)).initCoords(),o=l.project3DTo2D(a.coords),r=a.setAttr2D(r),a.element2D=l.create("point",o,r),a.addChild(a.element2D),a.inherits.push(a.element2D),a.element2D.setParents(a),a.slide&&(a.slide.addChild(a),a.setParents(a.slide)),a._c2d=a.element2D.coords.usrCoords.slice(),a},jxg.A.registerElement("point3d",jxg.A.createPoint3D),jxg.A.Curve3D=function(t,e,i,r,s,n,o){this.constructor(t.board,o,constants.A.OBJECT_TYPE_CURVE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(t,"curve3d"),this.board.finalizeAdding(this),this.F=e,this.X=i,this.Y=r,this.Z=s,this.dataX=null,this.dataY=null,this.dataZ=null,null!==this.F&&(this.X=function(t){return this.F(t)[0]},this.Y=function(t){return this.F(t)[1]},this.Z=function(t){return this.F(t)[2]}),this.range=n,this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Curve3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Curve3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Curve3D.prototype,{updateDataArray2D:function(){var t,e,i,r,s,n,o,a,l,u=utils_type.A.evaluate(this.visProp.numberpointshigh),c=[0,0,0];if(o=[],a=[],utils_type.A.exists(this.dataX))for(u=this.dataX.length,n=0;n<u;n++)c=[this.dataX[n],this.dataY[n],this.dataZ[n]],s=this.view.project3DTo2D(c),o.push(s[1]),a.push(s[2]);else if(utils_type.A.isArray(this.X))for(u=this.X.length,n=0;n<u;n++)c=[this.X[n],this.Y[n],this.Z[n]],s=this.view.project3DTo2D(c),o.push(s[1]),a.push(s[2]);else for(t=utils_type.A.evaluate(this.range),e=utils_type.A.evaluate(t[0]),r=((i=utils_type.A.evaluate(t[1]))-e)/(u-1),l=0,n=e;l<u&&n<=i;l++,n+=r)c=null!==this.F?this.F(n):[this.X(n),this.Y(n),this.Z(n)],s=this.view.project3DTo2D(c),o.push(s[1]),a.push(s[2]);return{X:o,Y:a}},updateDataArray:function(){},update:function(){return this.updateDataArray(),this},updateRenderer:function(){return this.needsUpdate=!1,this},initParamsIfNeeded:function(t){0===t.length&&t.unshift(.5*(this.range[0]+this.range[1]))},projectCoords:function(t,e){return this.initParamsIfNeeded(e),geometry.A.projectCoordsToParametric(t,this,e)},projectScreenCoords:function(t,e){return this.initParamsIfNeeded(e),geometry.A.projectScreenCoordsToParametric(t,this,e)}}),jxg.A.createCurve3D=function(t,e,i){var r,s,n,o,a,l,u,c=e[0];return 3===e.length?(r=e[1],a=e[2],s=null,n=null,o=null):(s=e[1],n=e[2],o=e[3],a=e[4],r=null),l=utils_type.A.copyAttributes(i,t.options,"curve3d"),l=(u=new jxg.A.Curve3D(c,r,s,n,o,a,l)).setAttr2D(l),u.element2D=c.create("curve",[[],[]],l),u.element2D.updateDataArray=function(){var t=u.updateDataArray2D();this.dataX=t.X,this.dataY=t.Y},u.addChild(u.element2D),u.inherits.push(u.element2D),u.element2D.setParents(u),u.element2D.prepareUpdate().update(),t.isSuspendedUpdate||u.element2D.updateVisibility().updateRenderer(),u},jxg.A.registerElement("curve3d",jxg.A.createCurve3D),jxg.A.createVectorfield3D=function(t,e,i){var r,s,n=e[0];if(!(e.length>=5&&(utils_type.A.isArray(e[1])||utils_type.A.isFunction(e[0])||utils_type.A.isString(e[0]))&&utils_type.A.isArray(e[2])&&3===e[1].length&&utils_type.A.isArray(e[3])&&3===e[2].length&&utils_type.A.isArray(e[4])&&3===e[3].length))throw new Error("JSXGraph: Can't create vector field 3D with parent types '"+typeof e[0]+"', '"+typeof e[1]+"', '"+typeof e[2]+"'.'"+typeof e[1]+"', ");return s=utils_type.A.copyAttributes(i,t.options,"vectorfield3d"),(r=n.create("curve3d",[[],[],[]],s)).setF=function(t,e){var i,s,n;return utils_type.A.isArray(t)?(i=utils_type.A.createFunction(t[0],this.board,e),s=utils_type.A.createFunction(t[1],this.board,e),n=utils_type.A.createFunction(t[2],this.board,e),this.F=function(t,e,r){return[i(t,e,r),s(t,e,r),n(t,e,r)]}):this.F=utils_type.A.createFunction(t,r.board,e),this},r.setF(e[1],"x, y, z"),r.xData=e[2],r.yData=e[3],r.zData=e[4],r.updateDataArray=function(){var e,i,r,s,n,o,a,l,u,c,h,d,p,f,_,m,g,y=utils_type.A.evaluate(this.visProp.scale),v=[utils_type.A.evaluate(this.xData[0]),utils_type.A.evaluate(this.yData[0]),utils_type.A.evaluate(this.zData[0])],A=[utils_type.A.evaluate(this.xData[1]),utils_type.A.evaluate(this.yData[1]),utils_type.A.evaluate(this.zData[1])],b=[utils_type.A.evaluate(this.xData[2]),utils_type.A.evaluate(this.yData[2]),utils_type.A.evaluate(this.zData[2])],C=[(b[0]-v[0])/A[0],(b[1]-v[1])/A[1],(b[2]-v[2])/A[2]],x=utils_type.A.evaluate(this.visProp.arrowhead.enabled);for(x&&(p=utils_type.A.evaluate(this.visProp.arrowhead.size),g=utils_type.A.evaluate(this.visProp.arrowhead.angle),f=p/t.unitX,_=p/t.unitY,m=p/Math.sqrt(t.unitX*t.unitY)),this.dataX=[],this.dataY=[],this.dataZ=[],i=0,o=v[0];i<=A[0];o+=C[0],i++)for(r=0,a=v[1];r<=A[1];a+=C[1],r++)for(e=0,l=v[2];e<=A[2];l+=C[2],e++)s=this.F(o,a,l),(n=math.A.norm(s))<Number.EPSILON||(s[0]*=y,s[1]*=y,s[2]*=y,utils_type.A.concat(this.dataX,[o,o+s[0],NaN]),utils_type.A.concat(this.dataY,[a,a+s[1],NaN]),utils_type.A.concat(this.dataZ,[l,l+s[2],NaN]),x&&(n*=y,u=Math.atan2(s[1],s[0]),c=(d=Math.asin(s[2]/n))-g,h=d+g,utils_type.A.concat(this.dataX,[o+s[0]-f*Math.cos(u)*Math.cos(c),o+s[0],o+s[0]-f*Math.cos(u)*Math.cos(h),NaN]),utils_type.A.concat(this.dataY,[a+s[1]-_*Math.sin(u)*Math.cos(c),a+s[1],a+s[1]-_*Math.sin(u)*Math.cos(h),NaN]),utils_type.A.concat(this.dataZ,[l+s[2]-m*Math.sin(h),l+s[2],l+s[2]-m*Math.sin(c),NaN])))},r.methodMap=utils_type.A.deepCopy(r.methodMap,{setF:"setF"}),r},jxg.A.registerElement("vectorfield3D",jxg.A.createVectorfield3D),jxg.A.Line3D=function(t,e,i,r,s){this.constructor(t.board,s,constants.A.OBJECT_TYPE_LINE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(t,"line3d"),this.board.finalizeAdding(this),this.point=e,this.direction=i,this.range=r||[-1/0,1/0],this.point1=null,this.point2=null,this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Line3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Line3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Line3D.prototype,{getPointCoords:function(t){var e,i,r,s=[];if(e=[this.point.X(),this.point.Y(),this.point.Z()],utils_type.A.isFunction(this.direction))s=this.direction();else for(i=1;i<4;i++)s.push(utils_type.A.evaluate(this.direction[i]));return r=utils_type.A.evaluate(t),t=this.view.intersectionLineCube(e,s,r),[e[0]+s[0]*t,e[1]+s[1]*t,e[2]+s[2]*t]},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords:function(t){var e,i=this.getPointCoords(0),r=this.getPointCoords(1),s=[r[0]-i[0],r[1]-i[1],r[2]-i[2]],n=[t[0]-i[0],t[1]-i[1],t[2]-i[2]],o=math.A.innerProduct(n,s)/math.A.innerProduct(s,s),a=Math.min(Math.max(o,this.range[0]),this.range[1]);return(e=this.getPointCoords(a).slice()).unshift(1),e},projectScreenCoords:function(t){var e,i,r,s=this.getPointCoords(0),n=this.getPointCoords(1),o=this.view.project3DTo2D(s).slice(1,3),a=this.view.project3DTo2D(n).slice(1,3),l=[a[0]-o[0],a[1]-o[1]],u=math.A.innerProduct(l,l),c=[t[0]-o[0],t[1]-o[1]],h=math.A.innerProduct(c,l)/u;if("central"===this.view.projectionType){const t=this.getPointCoords(.5),i=this.view.project3DTo2D(t).slice(1,3),r=[i[0]-o[0],i[1]-o[1]],s=math.A.innerProduct(r,l)/u;e=(1-s)*h/((1-2*s)*h+s)}else e=h;return i=Math.min(Math.max(e,this.range[0]),this.range[1]),(r=this.getPointCoords(i).slice()).unshift(1),r}}),jxg.A.createLine3D=function(t,e,i){var r,s,n,o,a,l,u,c,h,d=e[0];return r=utils_type.A.copyAttributes(i,t.options,"line3d"),utils_type.A.isPoint3D(e[2])||3===e.length&&(utils_type.A.isArray(e[2])||utils_type.A.isFunction(e[2]))?(l=utils_type.A.providePoints3D(d,[e[1]],i,"line3d",["point1"])[0],u=utils_type.A.providePoints3D(d,[e[2]],i,"line3d",["point2"])[0],o=function(){return[u.X()-l.X(),u.Y()-l.Y(),u.Z()-l.Z()]},a=[0,1],h=new jxg.A.Line3D(d,l,o,a,r),(c=utils_type.A.providePoints3D(d,[[0,0,0],[0,0,0]],{visible:!1},"line3d",["point1","point2"]))[0].F=function(){var t=0;return utils_type.A.evaluate(h.visProp.straightfirst)&&(t=-1/0),h.getPointCoords(t)},c[1].F=function(){var t=1;return utils_type.A.evaluate(h.visProp.straightlast)&&(t=1/0),h.getPointCoords(t)},c[0].prepareUpdate().update(),c[1].prepareUpdate().update(),(r=h.setAttr2D(r)).straightfirst=!1,r.straightlast=!1,h.element2D=d.create("segment",[c[0].element2D,c[1].element2D],r),h.endpoints=c,h.addChild(c[0]),h.addChild(c[1]),h.setParents(c)):(n=utils_type.A.providePoints3D(d,[e[1]],i,"line3d",["point"])[0],utils_type.A.isFunction(e[2])?o=e[2]:3===e[2].length?o=[1].concat(e[2]):4===e[2].length&&(o=e[2]),a=e[3],s=utils_type.A.providePoints3D(d,[[0,0,0],[0,0,0]],i,"line3d",["point1","point2"]),h=new jxg.A.Line3D(d,n,o,a,r),s[0].F=function(){return h.getPointCoords(utils_type.A.evaluate(h.range[0]))},s[0].prepareUpdate().update(),l=s[0],s[1].F=function(){return h.getPointCoords(utils_type.A.evaluate(h.range[1]))},s[1].prepareUpdate().update(),u=s[1],(r=h.setAttr2D(r)).straightfirst=!1,r.straightlast=!1,h.element2D=d.create("segment",[l.element2D,u.element2D],r),h.endpoints=s),h.addChild(h.element2D),h.inherits.push(h.element2D),h.element2D.setParents(h),h.point1=l,h.point2=u,h.point1._is_new?(h.addChild(h.point1),delete h.point1._is_new):h.point1.addChild(h),h.point2._is_new?(h.addChild(h.point2),delete h.point2._is_new):h.point2.addChild(h),utils_type.A.exists(n)&&(n._is_new?(h.addChild(n),delete n._is_new):n.addChild(h)),h.update(),h.element2D.prepareUpdate().update().updateRenderer(),h},jxg.A.registerElement("line3d",jxg.A.createLine3D),jxg.A.Plane3D=function(t,e,i,r,s,n,o){this.constructor(t.board,o,constants.A.OBJECT_TYPE_PLANE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(t,"plane3d"),this.board.finalizeAdding(this),this.point=e,this.direction1=i,this.direction2=s,this.range1=r||[-1/0,1/0],this.range2=n||[-1/0,1/0],this.vec1=[0,0,0],this.vec2=[0,0,0],this.grid=null,this.normal=[0,0,0],this.d=0,this.updateNormal(),this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Plane3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Plane3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Plane3D.prototype,{updateNormal:function(){var t,e;for(t=0;t<3;t++)this.vec1[t]=utils_type.A.evaluate(this.direction1[t]),this.vec2[t]=utils_type.A.evaluate(this.direction2[t]);if(this.normal=math.A.crossProduct(this.vec1,this.vec2),e=math.A.norm(this.normal),Math.abs(e)>math.A.eps)for(t=0;t<3;t++)this.normal[t]/=e;return this.d=math.A.innerProduct(this.point.coords.slice(1),this.normal,3),this},updateDataArray:function(){var t,e,i,r,s,n,o,a,l,u,c,h,d,p,f=["xPlaneRear","yPlaneRear","zPlaneRear"],_=[],m=[0,0,0],g=[0,0,0],y=[0,0,0],v=[0,0,0],A=this.view;if(this.dataX=[],this.dataY=[],this.updateNormal(),"axisplane3d"!==this.elType&&A.defaultAxes&&utils_type.A.evaluate(this.range1[0])===-1/0&&utils_type.A.evaluate(this.range1[1])===1/0&&utils_type.A.evaluate(this.range2[0])===-1/0&&utils_type.A.evaluate(this.range2[1])===1/0){for(u=0;u<f.length;u++){if(3===(v=A.intersectionPlanePlane(this,A.defaultAxes[f[u]]))[0].length&&3===v[1].length){for(l=0;l<_.length&&!(geometry.A.distance(v[0],_[l][0],3)<math.A.eps&&geometry.A.distance(v[1],_[l][1],3)<math.A.eps||geometry.A.distance(v[0],_[l][1],3)<math.A.eps&&geometry.A.distance(v[1],_[l][0],3)<math.A.eps);l++);l===_.length&&_.push(v.slice())}if((v=[0,0,0])[u]=A.bbox3D[u][1],a=math.A.innerProduct(v,A.defaultAxes[f[u]].normal,3),3===(v=A.intersectionPlanePlane(this,A.defaultAxes[f[u]],a))[0].length&&3===v[1].length){for(l=0;l<_.length&&!(geometry.A.distance(v[0],_[l][0],3)<math.A.eps&&geometry.A.distance(v[1],_[l][1],3)<math.A.eps||geometry.A.distance(v[0],_[l][1],3)<math.A.eps&&geometry.A.distance(v[1],_[l][0],3)<math.A.eps);l++);l===_.length&&_.push(v.slice())}}d=0,l=0;do{for(3===(v=_[d][l]).length&&(s=A.project3DTo2D(v),this.dataX.push(s[1]),this.dataY.push(s[2])),l=(l+1)%2,v=_[d][l],p=d,u=0;u<_.length;u++){if(u!==d&&geometry.A.distance(v,_[u][0])<math.A.eps){d=u,l=0;break}if(u!==d&&geometry.A.distance(v,_[u][1])<math.A.eps){d=u,l=1;break}}if(d===p){console.log("Error: update plane3d: did not find next",d);break}}while(0!==d);s=A.project3DTo2D(_[0][0]),this.dataX.push(s[1]),this.dataY.push(s[2])}else{for(t=utils_type.A.evaluate(this.range1[0]),e=utils_type.A.evaluate(this.range1[1]),i=utils_type.A.evaluate(this.range2[0]),r=utils_type.A.evaluate(this.range2[1]),y=this.point.coords.slice(1),m=this.vec1.slice(),g=this.vec2.slice(),n=math.A.norm(m,3),o=math.A.norm(g,3),l=0;l<3;l++)m[l]/=n,g[l]/=o;for(u=0;u<4;u++){switch(u){case 0:c=t,h=i;break;case 1:c=e,h=i;break;case 2:c=e,h=r;break;case 3:c=t,h=r}for(l=0;l<3;l++)v[l]=y[l]+c*m[l]+h*g[l];s=A.project3DTo2D(v),this.dataX.push(s[1]),this.dataY.push(s[2])}this.dataX.push(this.dataX[0]),this.dataY.push(this.dataY[0])}return{X:this.dataX,Y:this.dataY}},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),jxg.A.createPlane3D=function(t,e,i){var r,s,n,o,a=e[0],l=e[2],u=e[3],c=e[4]||[-1/0,1/0],h=e[5]||[-1/0,1/0];return s=utils_type.A.providePoints3D(a,[e[1]],i,"plane3d",["point"])[0],r=utils_type.A.copyAttributes(i,t.options,"plane3d"),n=new jxg.A.Plane3D(a,s,l,c,u,h,r),s.addChild(n),r=n.setAttr2D(r),n.element2D=a.create("curve",[[],[]],r),n.element2D.updateDataArray=function(){var t=n.updateDataArray();this.dataX=t.X,this.dataY=t.Y},n.addChild(n.element2D),n.inherits.push(n.element2D),n.element2D.setParents(n),r=utils_type.A.copyAttributes(i.mesh3d,t.options,"mesh3d"),Math.abs(n.range1[0])!==1/0&&Math.abs(n.range1[1])!==1/0&&Math.abs(n.range2[0])!==1/0&&Math.abs(n.range2[1])!==1/0&&(o=a.create("mesh3d",[function(){return s.coords},l,c,u,h],r),n.grid=o,n.addChild(o),n.inherits.push(o),o.setParents(n)),n.element2D.prepareUpdate().update(),t.isSuspendedUpdate||n.element2D.updateVisibility().updateRenderer(),n},jxg.A.registerElement("plane3d",jxg.A.createPlane3D),jxg.A.createIntersectionLine3D=function(t,e,i){var r,s,n,o=e[0],a=e[1],l=e[2],u=utils_type.A.copyAttributes(i,t.options,"intersectionline3d"),c=[];for(s=0;s<2;s++)n=geometry.A.intersectionFunction3D(o,a,l,s),c[s]=o.create("point3d",n,u["point"+(s+1)]);r=o.create("line3d",c,u);try{a.addChild(r),l.addChild(r)}catch(h){throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.")}return r.type=constants.A.OBJECT_TYPE_INTERSECTION_LINE3D,r.elType="intersectionline3d",r.setParents([a.id,l.id]),r},jxg.A.registerElement("intersectionline3d",jxg.A.createIntersectionLine3D),jxg.A.Polygon3D=function(t,e,i){var r;for(this.constructor(t.board,i,constants.A.OBJECT_TYPE_POLYGON3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(t,"polygon3d"),this.board.finalizeAdding(this),this.vertices=[],r=0;r<e.length;r++)this.vertices[r]=this.board.select(e[r]),this.vertices[r]._is_new&&(delete this.vertices[r]._is_new,this.vertices[r]._is_new_pol=!0)},jxg.A.Polygon3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Polygon3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Polygon3D.prototype,{update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),jxg.A.createPolygon3D=function(t,e,i){var r,s,n,o,a,l,u=e[0],c=[],h=[],d=!1;if(a=utils_type.A.copyAttributes(i,t.options,"polygon3d"),null===(o=t.select(e[1]))&&(o=e[1]),utils_type.A.isObject(o)&&o.type===constants.A.OBJECT_TYPE_POLYGON3D&&utils_type.A.isTransformationOrArray(e[2]))for(d=!0,n=o.vertices.length-1,l=utils_type.A.copyAttributes(i,t.options,"polygon3d","vertices"),s=0;s<n;s++)l.withlabel&&(l.name=""===o.vertices[s].name?"":o.vertices[s].name+"'"),c.push(t.create("point3d",[o.vertices[s],e[2]],l));else if(!1===(c=utils_type.A.providePoints3D(u,e.slice(1),i,"polygon3d",["vertices"])))throw new Error("JSXGraph: Can't create polygon3d with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon3d and a transformation can be supplied");for((r=new jxg.A.Polygon3D(u,c,a)).isDraggable=!0,a=r.setAttr2D(a),s=0;s<c.length;s++)h.push(c[s].element2D);if(r.element2D=t.create("polygon",h,a),r.addChild(r.element2D),r.inherits.push(r.element2D),r.element2D.setParents(r),d)for(r.prepareUpdate().update().updateVisibility().updateRenderer(),n=o.vertices.length-1,s=0;s<n;s++)c[s].prepareUpdate().update().updateVisibility().updateRenderer();return r},jxg.A.registerElement("polygon3d",jxg.A.createPolygon3D),jxg.A.Sphere3D=function(t,e,i,r,s){this.constructor(t.board,s,constants.A.OBJECT_TYPE_SPHERE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(t,"sphere3d"),this.board.finalizeAdding(this),this.method=e,this.center=this.board.select(i),this.point2=null,this.points=[],this.element2D=null,this.aux2D=[],this.projectionType=t.projectionType,"twoPoints"===e?(this.point2=this.board.select(r),this.radius=this.Radius()):"pointRadius"===e&&(this.updateRadius=utils_type.A.createFunction(r,this.board),this.updateRadius(),this.addParentsFromJCFunctions([this.updateRadius])),utils_type.A.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),"twoPoints"===e&&(utils_type.A.exists(this.point2._is_new)?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this)),this.methodMap=utils_type.A.deepCopy(this.methodMap,{center:"center",point2:"point2",Radius:"Radius"})},jxg.A.Sphere3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Sphere3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Sphere3D.prototype,{update:function(){return this.projectionType!==this.view.projectionType&&this.rebuildProjection(),this},updateRenderer:function(){return this.needsUpdate=!1,this},setRadius:function(t){return this.updateRadius=utils_type.A.createFunction(t,this.board),this.addParentsFromJCFunctions([this.updateRadius]),this.board.update(),this},Radius:function(t){return utils_type.A.exists(t)?(this.setRadius(t),this.Radius()):"twoPoints"===this.method?this.center.isIllDefined()||this.point2.isIllDefined()?NaN:this.center.distance(this.point2):"pointRadius"===this.method?Math.abs(this.updateRadius()):NaN},focusFn:function(t){const e=this;return function(){const i=e.view.cameraTransform[3],r=e.Radius();return e.view.project3DTo2D([e.center.X()+t*r*i[1],e.center.Y()+t*r*i[2],e.center.Z()+t*r*i[3]]).slice(1,3)}},innerVertexFn:function(){const t=this;return function(){const e=t.view,i=e.worldToView(t.center.coords,!1),r=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=e.cameraTransform,n=[-(i[0]*s[1][1]+i[1]*s[2][1])/r,-(i[0]*s[1][2]+i[1]*s[2][2])/r,-(i[0]*s[1][3]+i[1]*s[2][3])/r],o=t.Radius(),a=Math.atan(-r/i[2])+Math.acos(o/math.A.norm(i)),l=Math.cos(a),u=Math.sin(a);return e.project3DTo2D([t.center.X()+o*(u*n[0]+l*s[3][1]),t.center.Y()+o*(u*n[1]+l*s[3][2]),t.center.Z()+o*(u*n[2]+l*s[3][3])])}},buildCentralProjection:function(){const t=this.view,e={visible:!1,withLabel:!1},i=t.create("point",this.focusFn(-1),e),r=t.create("point",this.focusFn(1),e),s=t.create("point",this.innerVertexFn(t),e);this.aux2D=[i,r,s],this.element2D=t.create("ellipse",this.aux2D,this.visProp)},buildParallelProjection:function(){const t=this;this.aux2D=[],this.element2D=this.view.create("circle",[function(){const e=[1,t.center.X(),t.center.Y(),t.center.Z()];return t.view.project3DTo2D(e)},function(){const e=t.view.bbox3D[0][1]-t.view.bbox3D[0][0];return t.Radius()*t.view.size[0]/e}],this.visProp)},rebuildProjection:function(){if(this.element2D){this.view.board.removeObject(this.element2D);for(let t in this.aux2D)this.view.board.removeObject(this.aux2D[t])}this.projectionType=this.view.projectionType,"central"===this.projectionType?this.buildCentralProjection():this.buildParallelProjection(),this.addChild(this.element2D),this.inherits.push(this.element2D)}}),jxg.A.createSphere3D=function(t,e,i){var r,s,n,o,a,l,u=e[0];for(r=utils_type.A.copyAttributes(i,t.options,"sphere3d"),s=[],l=1;l<e.length;l++)if(utils_type.A.isPointType3D(t,e[l])){if(n=0===s.length?"center":"point",!1===(o=utils_type.A.providePoints3D(u,[e[l]],i,"sphere3d",[n])[0]))throw new Error("JSXGraph: Can't create sphere3d from this type. Please provide a point type.");s.push(o)}else s.push(e[l]);if(utils_type.A.isPoint3D(s[0])&&utils_type.A.isPoint3D(s[1]))a=new jxg.A.Sphere3D(u,"twoPoints",s[0],s[1],r);else if((utils_type.A.isNumber(s[0])||utils_type.A.isFunction(s[0])||utils_type.A.isString(s[0]))&&utils_type.A.isPoint3D(s[1]))a=new jxg.A.Sphere3D(u,"pointRadius",s[1],s[0],r);else{if(!(utils_type.A.isNumber(s[1])||utils_type.A.isFunction(s[1])||utils_type.A.isString(s[1]))||!utils_type.A.isPoint3D(s[0]))throw new Error("JSXGraph: Can't create sphere3d with parent types '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point], [point,number], [point,function]");a=new jxg.A.Sphere3D(u,"pointRadius",s[0],s[1],r)}return a.rebuildProjection(),a.element2D.prepareUpdate().update().updateRenderer(),a},jxg.A.registerElement("sphere3d",jxg.A.createSphere3D),jxg.A.Surface3D=function(t,e,i,r,s,n,o,a){this.constructor(t.board,a,constants.A.OBJECT_TYPE_SURFACE3D,constants.A.OBJECT_CLASS_3D),this.constructor3D(t,"surface3d"),this.board.finalizeAdding(this),this.F=e,this.X=i,this.Y=r,this.Z=s,null!==this.F&&(this.X=function(t,e){return this.F(t,e)[0]},this.Y=function(t,e){return this.F(t,e)[1]},this.Z=function(t,e){return this.F(t,e)[2]}),this.range_u=n,this.range_v=o,this.methodMap=utils_type.A.deepCopy(this.methodMap,{})},jxg.A.Surface3D.prototype=new jxg.A.GeometryElement,utils_type.A.copyPrototypeMethods(jxg.A.Surface3D,jxg.A.GeometryElement3D,"constructor3D"),jxg.A.extend(jxg.A.Surface3D.prototype,{updateDataArray:function(){var t,e,i=utils_type.A.evaluate(this.visProp.stepsu),r=utils_type.A.evaluate(this.visProp.stepsv),s=utils_type.A.evaluate(this.range_u),n=utils_type.A.evaluate(this.range_v);return t=null!==this.F?this.F:[this.X,this.Y,this.Z],s.push(i),n.push(r),{X:(e=this.view.getMesh(t,s,n))[0],Y:e[1]}},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this},initParamsIfNeeded:function(t){0===t.length&&t.unshift(.5*(this.range_u[0]+this.range_u[1]),.5*(this.range_v[0]+this.range_v[1]))},projectCoords:function(t,e){return this.initParamsIfNeeded(e),geometry.A.projectCoordsToParametric(t,this,e)},projectScreenCoords:function(t,e){return this.initParamsIfNeeded(e),geometry.A.projectScreenCoordsToParametric(t,this,e)}}),jxg.A.createParametricSurface3D=function(t,e,i){var r,s,n,o,a,l,u,c,h=e[0];return 4===e.length?(r=e[1],a=e[2],l=e[3],s=null,n=null,o=null):(s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],r=null),u=utils_type.A.copyAttributes(i,t.options,"surface3d"),u=(c=new jxg.A.Surface3D(h,r,s,n,o,a,l,u)).setAttr2D(u),c.element2D=h.create("curve",[[],[]],u),c.element2D.updateDataArray=function(){var t=c.updateDataArray();this.dataX=t.X,this.dataY=t.Y},c.addChild(c.element2D),c.inherits.push(c.element2D),c.element2D.setParents(c),c.element2D.prepareUpdate().update(),t.isSuspendedUpdate||c.element2D.updateVisibility().updateRenderer(),c},jxg.A.registerElement("parametricsurface3d",jxg.A.createParametricSurface3D),jxg.A.createFunctiongraph3D=function(t,e,i){var r=e[0],s=e[1],n=e[2],o=e[3];return r.create("parametricsurface3d",[function(t,e){return t},function(t,e){return e},s,n,o],i)},jxg.A.registerElement("functiongraph3d",jxg.A.createFunctiongraph3D);let size=.75,color="#000";jxg.A.themes.mono_thin={board:{showInfobox:!1,showCopyright:!0,defaultAxes:{x:{ticks:{minorTicks:0,majorHeight:10,majorTickEndings:[1,0]}},y:{ticks:{minorTicks:0,majorHeight:10,majorTickEndings:[0,1]}}}},navbar:{strokeColor:"#bbb",fillColor:"none"},elements:{strokeColor:color,highlightStrokeColor:color,fillColor:"none",highlightFillColor:"none",strokeOpacity:.6,highlightStrokeOpacity:1},angle:{strokeColor:color,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3,label:{strokeColor:color}},arc:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size},axis:{},boxplot:{strokeWidth:size,strokeColor:color,fillColor:color,fillOpacity:.2,highlightStrokeWidth:size,highlightStrokeColor:color,highlightFillColor:color,highlightFillOpacity:.1},circle:{strokeWidth:size,highlightStrokeWidth:1.5*size,strokeColor:color,highlightFillColor:"none",highlightStrokeColor:color,center:{size:size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},point2:{size:size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},circumcircle:{strokeWidth:size,highlightStrokeWidth:1.5*size,strokeColor:color,highlightFillColor:"none",highlightStrokeColor:color,center:{size:size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},circumcirclearc:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size},circumcirclesector:{strokeColor:color,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3},comb:{strokeColor:color,strokeWidth:size},conic:{strokeWidth:size,highlightStrokeWidth:1.5*size,strokeColor:color,highlightStrokeColor:color,fillColor:"none",highlightFillColor:"none"},curve:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size},grid:{strokeWidth:size},hatch:{strokeColor:color,strokeWidth:size},incircle:{strokeWidth:size,highlightStrokeWidth:1.5*size,strokeColor:color,highlightFillColor:"none",highlightStrokeColor:color,center:{size:size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},inequality:{fillColor:"#aaaaaa55",fillOpacity:.2},label:{strokeColor:color},line:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size,point1:{size:size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},point2:{size:size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},normal:{strokeColor:color},parallel:{strokeColor:color},perpendicular:{strokeColor:color},perpendicularsegment:{strokeColor:color},point:{size:size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},polygon:{fillColor:"#aaaaaa55",highlightFillColor:"#aaaaaa33",fillOpacity:.3,highlightFillOpacity:.3,vertices:{size:size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},borders:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size}},sector:{strokeColor:color,fillColor:"#aaaaaa55",fillOpacity:.3,highlightFillColor:"#aaaaaa33",highlightFillOpacity:.3},semicircle:{center:{size:size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color}},slider:{size:size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color,baseline:{strokeWidth:size,strokeColor:color,highlightStrokeColor:color},label:{strokeColor:color},highline:{strokeWidth:3*size,name:"",strokeColor:color,highlightStrokeColor:color},ticks:{strokeColor:color}},slopefield:{strokeWidth:.75*size,highlightStrokeWidth:size,highlightStrokeColor:color,highlightStrokeOpacity:.8},tapemeasure:{strokeColor:color,strokeWidth:size,highlightStrokeColor:color,highlightStrokeWidth:size,point1:{size:size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},point2:{size:size,fillColor:color,strokeColor:color,highlightStrokeWidth:4*size,highlightFillColor:color,highlightStrokeColor:color},ticks:{strokeWidth:size}},text:{strokeColor:color},tracecurve:{strokeColor:color},turtle:{strokeWidth:size,strokeColor:color,arrow:{strokeWidth:2*size,strokeColor:"#aaaaaa55"}},vectorfield:{strokeWidth:.75*size,highlightStrokeWidth:size,highlightStrokeColor:color,highlightStrokeOpacity:.8}};const mono_thin=null,COORDS_BY_SCREEN=jxg.A.COORDS_BY_SCREEN,COORDS_BY_USER=jxg.A.COORDS_BY_USER,Dump=jxg.A.Dump,Expect=jxg.A.Expect,JSXGraph=jxg.A.JSXGraph,Mat=jxg.A.Math,Options=jxg.A.Options,boards=jxg.A.boards,src_elements=jxg.A.elements,palette=jxg.A.palette,paletteWong=jxg.A.paletteWong,Board=jxg.A.Board,Chart=jxg.A.Chart,Circle=jxg.A.Circle,Complex=jxg.A.Complex,Composition=jxg.A.Composition,Coords=jxg.A.Coords,CoordsElement=jxg.A.CoordsElement,Curve=jxg.A.Curve,GeometryElement=jxg.A.GeometryElement,Group=jxg.A.Group,src_Image=jxg.A.Image,JessieCode=jxg.A.JessieCode,Prefix=jxg.A.PrefixParser,Line=jxg.A.Line,Point=jxg.A.Point,Polygon=jxg.A.Polygon,Text=jxg.A.Text,Ticks=jxg.A.Ticks,Transformation=jxg.A.Transformation,Turtle=jxg.A.Turtle,View3D=jxg.A.View3D,LMS2rgb=jxg.A.LMS2rgb,addEvent=jxg.A.addEvent,autoDigits=jxg.A.autoDigits,autoHighlight=jxg.A.autoHighlight,bind=jxg.A.bind,capitalize=jxg.A.capitalize,clearVisPropOld=jxg.A.clearVisPropOld,clone=jxg.A.clone,cloneAndCopy=jxg.A.cloneAndCopy,cmpArrays=jxg.A.cmpArrays,coordsArrayToMatrix=jxg.A.coordsArrayToMatrix,copyAttributes=jxg.A.copyAttributes,createEvalFunction=jxg.A.createEvalFunction,createFunction=jxg.A.createFunction,createHTMLSlider=jxg.A.createHTMLSlider,darkenColor=jxg.A.darkenColor,debug=jxg.A.debug,debugInt=jxg.A.debugInt,debugLine=jxg.A.debugLine,debugWST=jxg.A.debugWST,deepCopy=jxg.A.deepCopy,def=jxg.A.def,deprecated=jxg.A.deprecated,eliminateDuplicates=jxg.A.eliminateDuplicates,escapeHTML=jxg.A.escapeHTML,evalSlider=jxg.A.evalSlider,evaluate=jxg.A.evaluate,filterElements=jxg.A.filterElements,getBoardByContainerId=jxg.A.getBoardByContainerId,getCSSTransformMatrix=jxg.A.getCSSTransformMatrix,getCSSTransform=jxg.A.getCSSTransform,getDimensions=jxg.A.getDimensions,getOffset=jxg.A.getOffset,getPosition=jxg.A.getPosition,getProp=jxg.A.getProp,hex2rgb=jxg.A.hex2rgb,hsv2rgb=jxg.A.hsv2rgb,isAndroid=jxg.A.isAndroid,isApple=jxg.A.isApple,isArray=jxg.A.isArray,isDesktop=jxg.A.isDesktop,isInArray=jxg.A.isInArray,isInObject=jxg.A.isInObject,isMetroApp=jxg.A.isMetroApp,isMobile=jxg.A.isMobile,isMozilla=jxg.A.isMozilla,isBoard=jxg.A.isBoard,isName=jxg.A.isName,isNode=jxg.A.isNode,isNumber=jxg.A.isNumber,isObject=jxg.A.isObject,isPoint=jxg.A.isPoint,isPoint3D=jxg.A.isPoint3D,isPointType=jxg.A.isPointType,isPointType3D=jxg.A.isPointType3D,isString=jxg.A.isString,isTouchDevice=jxg.A.isTouchDevice,isTransformationOrArray=jxg.A.isTransformationOrArray,isWebWorker=jxg.A.isWebWorker,isWebkitAndroid=jxg.A.isWebkitAndroid,isWebkitApple=jxg.A.isWebkitApple,keys=jxg.A.keys,lightenColor=jxg.A.lightenColor,merge=jxg.A.merge,normalizePointFace=jxg.A.normalizePointFace,providePoints=jxg.A.providePoints,registerElement=jxg.A.registerElement,registerReader=jxg.A.registerReader,removeAllEvents=jxg.A.removeAllEvents,removeElementFromArray=jxg.A.removeElementFromArray,removeEvent=jxg.A.removeEvent,rgb2LMS=jxg.A.rgb2LMS,rgb2bw=jxg.A.rgb2bw,rgb2cb=jxg.A.rgb2cb,rgb2css=jxg.A.rgb2css,rgb2hex=jxg.A.rgb2hex,rgb2hsv=jxg.A.rgb2hsv,rgbParser=jxg.A.rgbParser,rgb2rgbo=jxg.A.rgba2rgbo,rgb2rgba=jxg.A.rgbo2rgba,sanitizeHTML=jxg.A.sanitizeHTML,shortcut=jxg.A.shortcut,strBool=jxg.A.str2Bool,supportsCanvas=jxg.A.supportsCanvas,supportsPointerEvents=jxg.A.supportsPointerEvents,supportsSVG=jxg.A.supportsSVG,supportsVML=jxg.A.supportsVML,swap=jxg.A.swap,timeChunk=jxg.A.timedChunk,toFixed=jxg.A.toFixed,toFullscreen=jxg.A.toFullscreen,toJSON=jxg.A.toJSON,trim=jxg.A.trim,trimNumber=jxg.A.trimNumber,truncate=jxg.A.truncate,unescapeHTML=jxg.A.unescapeHTML,uniqueArray=jxg.A.uniqueArray,useBlackWhiteOptions=jxg.A.useBlackWhiteOptions,useStandardOptions=jxg.A.useStandardOptions,warn=jxg.A.warn;env.A.isBrowser?window.JXG=jxg.A:env.A.isWebWorker()&&(self.JXG=jxg.A);const jsxgraph_src=jxg.A,TopSpeedGraph_module={graph:"TopSpeedGraph_graph__X0NSx",jxgbox:"TopSpeedGraph_jxgbox__7uGa+",speedInfoContainer:"TopSpeedGraph_speedInfoContainer__cCXjl",infoContainer:"TopSpeedGraph_infoContainer__OCEG3",speedInfo:"TopSpeedGraph_speedInfo__zAZYB"};function accelerationToPercentOfMaxSpeed(t,e,i,r,s,n,o,a,l,u,c,h,d){let p=0,f=0;const _=[0],m=[0],g=.34,y=u/3.6,v=h*(arguments.length>13&&void 0!==arguments[13]?arguments[13]:.99)/3.6,A=e*n*o*Math.cos(Math.atan(l/100)),b=e*n*Math.sin(Math.atan(l/100)),C=e+2*(.6*d*g*g+.5*(.4*d)*g*g)/.11560000000000002;for(;f<=600&&p<v;){const e=p+y,n=t/Math.max(p,.1);p+=(n-.5*i*r*s*e*e-A-n*a/100-b)/C*c,f+=c,_.push(3.6*p),m.push(f)}return{speeds:_,times:m}}function calculateTheoreticalMaxSpeed(t,e,i,r,s,n,o,a,l,u){let c,h=0,d=50;function p(c){const h=t/Math.max(c,.1),d=u/3.6,p=.5*i*r*s*(c+d)*(c+d),f=Math.cos(Math.atan(l/100)),_=Math.sin(Math.atan(l/100));return h-p-e*n*o*f-h*a/100-e*n*_}for(;d-h>.001;)c=(h+d)/2,p(c)>0?h=c:d=c;return 3.6*c}function accelerationToCoverDistance(t,e,i,r,s,n,o,a,l,u,c,h,d,p){let f=0,_=0,m=0;const g=[0],y=[0],v=[0],A=u/3.6,b=e*n*o*Math.cos(Math.atan(l/100)),C=e*n*Math.sin(Math.atan(l/100)),x=e+2*(.11560000000000002*(.6*h)+.5*(.4*h)*.11560000000000002)/.11560000000000002;for(;m<d&&_<=36e3;){if(m+(0!==p?f*f/(2*p):0)>=d){const t=d,e=_+f/Math.abs(p);g.push(0),y.push(e),v.push(t),m=d,_=e}else{const e=t/Math.max(f,.1);f+=(e-.5*i*r*s*(f+A)*(f+A)-b-e*a/100-C)/x*c,m+=f*c,_+=c,g.push(3.6*f),y.push(_),v.push(m)}}return{speeds:g,times:y,distances:v}}function TopSpeedGraph(t){let{variablesArray:e}=t;const i=(0,react.useRef)(null),[r,s]=(0,react.useState)({time1String:null,time1FasterString:null,time2String:null,time2FasterString:null,speed:null}),[n,o]=(0,react.useState)({maxTheoreticalSpeed1:null,speed1Faster:null,maxTheoreticalSpeed2:null,speed2Faster:null});return(0,react.useEffect)((()=>{if(null==e[0]||null==e[1])return;const t=9.81,r=e[0],n=e[1],a=calculateTheoreticalMaxSpeed(r.power,r.systemWeight,r.airDensity,r.dragCoefficient,r.frontalArea,t,r.rollingResistanceCoefficient,r.drivetrainLossFactor,r.percentGrade,r.windSpeed),l=calculateTheoreticalMaxSpeed(n.power,n.systemWeight,n.airDensity,n.dragCoefficient,n.frontalArea,t,n.rollingResistanceCoefficient,n.drivetrainLossFactor,n.percentGrade,n.windSpeed),u=accelerationToPercentOfMaxSpeed(r.power,r.systemWeight,r.airDensity,r.dragCoefficient,r.frontalArea,t,r.rollingResistanceCoefficient,r.drivetrainLossFactor,r.percentGrade,r.windSpeed,.01,a,r.wheelWeight),c=accelerationToPercentOfMaxSpeed(n.power,n.systemWeight,n.airDensity,n.dragCoefficient,n.frontalArea,t,n.rollingResistanceCoefficient,n.drivetrainLossFactor,n.percentGrade,n.windSpeed,.01,l,n.wheelWeight);var h=null,d=null;a>l?h="+"+(a-l).toFixed(2)+"("+((a-l)/l*100).toFixed(2)+"%)":a<l&&(d="+"+(l-a).toFixed(2)+"("+((l-a)/a*100).toFixed(2)+"%)"),o({maxTheoreticalSpeed1:a,speed1Faster:h,maxTheoreticalSpeed2:l,speed2Faster:d});const p=Math.max(u.speeds[u.speeds.length-1],c.speeds[c.speeds.length-1]),f=Math.max(u.times[u.times.length-1],c.times[c.times.length-1]),_=jsxgraph_src.JSXGraph.initBoard(i.current,{boundingbox:[.2*-f,1.2*p,1.2*f,.2*-p],axis:!0,showCopyright:!1});_.create("text",[.5*f,.1*-p,"Time (s)"],{fixed:!0}),_.create("text",[.19*-f,.5*p,"Speed (km/h)"],{fixed:!1});var m=_.create("curve",[u.times,u.speeds],{strokeColor:"red",strokeWidth:2}),g=_.create("curve",[c.times,c.speeds],{strokeColor:"blue",strokeWidth:2});const y=(t,e)=>{for(let i=0;i<t.speeds.length-1;i++)if(Math.abs(e-t.speeds[i])<.1)return t.times[i];return null},v=t=>{const[,e]=_.getUsrCoordsOfMouse(t),i=e.toFixed(2),r=y(u,i),n=y(c,i),o=null!==r?"".concat(r.toFixed(2),"s"):null,a=null!==n?"".concat(n.toFixed(2),"s"):null;let l=null,h=null;null!==r&&null!==n&&(r<n?l=(r-n).toFixed(2)+"s("+((r-n)/n*100).toFixed(2)+"%)":r>n&&(h=(n-r).toFixed(2)+"s("+((n-r)/r*100).toFixed(2)+"%)")),s({time1String:o,time1FasterString:l,time2String:a,time2FasterString:h,speed:i})};return m.on("move",v),g.on("move",v),()=>{_.off("move",v),jsxgraph_src.JSXGraph.freeBoard(_)}}),[e]),(0,jsx_runtime.jsxs)("div",{className:TopSpeedGraph_module.graph,children:[(0,jsx_runtime.jsxs)("div",{className:TopSpeedGraph_module.speedInfoContainer,children:[(0,jsx_runtime.jsx)("p",{className:TopSpeedGraph_module.infoContainer,children:"Top Speed: "}),(0,jsx_runtime.jsxs)("div",{className:TopSpeedGraph_module.infoContainer,children:[(0,jsx_runtime.jsx)("p",{className:TopSpeedGraph_module.speedInfo,style:{color:"red"},children:null!==n.maxTheoreticalSpeed1?n.maxTheoreticalSpeed1.toFixed(2)+"km/h":"--"}),(0,jsx_runtime.jsx)("p",{className:TopSpeedGraph_module.speedInfo,style:{color:"green"},children:null!==n.speed1Faster?n.speed1Faster:""})]}),(0,jsx_runtime.jsxs)("div",{className:TopSpeedGraph_module.infoContainer,children:[(0,jsx_runtime.jsx)("p",{className:TopSpeedGraph_module.speedInfo,style:{color:"blue"},children:null!==n.maxTheoreticalSpeed2?n.maxTheoreticalSpeed2.toFixed(2)+"km/h":"--"}),(0,jsx_runtime.jsx)("p",{className:TopSpeedGraph_module.speedInfo,style:{color:"green"},children:null!==n.speed2Faster?n.speed2Faster:""})]})]}),(0,jsx_runtime.jsxs)("div",{className:TopSpeedGraph_module.speedInfoContainer,children:[(0,jsx_runtime.jsx)("p",{className:TopSpeedGraph_module.infoContainer,children:null!==r.speed?"@"+r.speed+"km/h:":"--"}),(0,jsx_runtime.jsxs)("div",{className:TopSpeedGraph_module.infoContainer,children:[(0,jsx_runtime.jsx)("p",{className:TopSpeedGraph_module.speedInfo,style:{color:"red"},children:null!==r.time1String?r.time1String:"--"}),(0,jsx_runtime.jsx)("p",{className:TopSpeedGraph_module.speedInfo,style:{color:"green"},children:null!==r.time1FasterString?r.time1FasterString:""})]}),(0,jsx_runtime.jsxs)("div",{className:TopSpeedGraph_module.infoContainer,children:[(0,jsx_runtime.jsx)("p",{className:TopSpeedGraph_module.speedInfo,style:{color:"blue"},children:null!==r.time2String?r.time2String:"--"}),(0,jsx_runtime.jsx)("p",{className:TopSpeedGraph_module.speedInfo,style:{color:"green"},children:null!==r.time2FasterString?r.time2FasterString:""})]})]}),(0,jsx_runtime.jsx)("div",{id:"jxgbox",className:TopSpeedGraph_module.jxgbox,ref:i,style:{width:"600px",height:"600px"}})]})}const VariableForm_module={formContainer:"VariableForm_formContainer__ghnto",row:"VariableForm_row__dYmGf"};function VariableForm(t){let{submitVariables:e}=t;const i=(0,react.useRef)(null),r=(0,react.useRef)(!0);return(0,react.useEffect)((()=>{r.current&&(r.current=!1,i.current.requestSubmit())}),[]),(0,jsx_runtime.jsx)("div",{className:VariableForm_module.formContainer,children:(0,jsx_runtime.jsxs)("form",{onSubmit:t=>{t.preventDefault();const i=new FormData(t.target),r={power:Number(i.get("power1")),systemWeight:Number(i.get("body-weight1"))+Number(i.get("bike-weight1")),wheelWeight:Number(i.get("wheel-weight1")),airDensity:Number(i.get("air-density1")),dragCoefficient:Number(i.get("drag-coefficient1")),frontalArea:Number(i.get("frontal-area1")),rollingResistanceCoefficient:Number(i.get("rolling-resistance-coefficient1")),drivetrainLossFactor:Number(i.get("drivetrain-loss-factor1")),percentGrade:Number(i.get("percent-grade1")),windSpeed:Number(i.get("wind-speed1"))},s={power:Number(i.get("power2")),systemWeight:Number(i.get("body-weight2"))+Number(i.get("bike-weight2")),wheelWeight:Number(i.get("wheel-weight2")),airDensity:Number(i.get("air-density2")),dragCoefficient:Number(i.get("drag-coefficient2")),frontalArea:Number(i.get("frontal-area2")),rollingResistanceCoefficient:Number(i.get("rolling-resistance-coefficient2")),drivetrainLossFactor:Number(i.get("drivetrain-loss-factor2")),percentGrade:Number(i.get("percent-grade2")),windSpeed:Number(i.get("wind-speed2"))};e([r,s])},onReset:()=>i.current.requestSubmit(),ref:i,children:[(0,jsx_runtime.jsxs)("div",{className:VariableForm_module.row,children:[(0,jsx_runtime.jsx)("h3",{style:{color:"red"},children:"Red"}),(0,jsx_runtime.jsx)("h3",{style:{color:"blue"},children:"Blue"})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Power (watts):",(0,jsx_runtime.jsx)("input",{type:"number",name:"power1",defaultValue:250,required:!0,min:1})]}),(0,jsx_runtime.jsxs)("label",{children:["Power (watts):",(0,jsx_runtime.jsx)("input",{type:"number",name:"power2",defaultValue:250,required:!0,min:1})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Body Weight (kg):",(0,jsx_runtime.jsx)("input",{type:"number",name:"body-weight1",defaultValue:75,step:.1,required:!0,min:1})]}),(0,jsx_runtime.jsxs)("label",{children:["Body Weight (kg):",(0,jsx_runtime.jsx)("input",{type:"number",name:"body-weight2",defaultValue:75,step:.1,required:!0,min:1})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Total Bike Weight (kg):",(0,jsx_runtime.jsx)("input",{type:"number",name:"bike-weight1",defaultValue:10,step:.01,required:!0,min:0})]}),(0,jsx_runtime.jsxs)("label",{children:["Total Bike Weight (kg):",(0,jsx_runtime.jsx)("input",{type:"number",name:"bike-weight2",defaultValue:10,step:.01,required:!0,min:0})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Total Wheel Weight (kg):",(0,jsx_runtime.jsx)("input",{type:"number",name:"wheel-weight1",defaultValue:3,step:.001,required:!0,min:0})]}),(0,jsx_runtime.jsxs)("label",{children:["Total Wheel Weight (kg):",(0,jsx_runtime.jsx)("input",{type:"number",name:"wheel-weight2",defaultValue:3,step:.001,required:!0,min:0})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Percent Grade (%):",(0,jsx_runtime.jsx)("input",{type:"number",name:"percent-grade1",defaultValue:0,required:!0})]}),(0,jsx_runtime.jsxs)("label",{children:["Percent Grade (%):",(0,jsx_runtime.jsx)("input",{type:"number",name:"percent-grade2",defaultValue:0,required:!0})]})]}),(0,jsx_runtime.jsxs)("details",{children:[(0,jsx_runtime.jsx)("summary",{children:"Aerodynamics"}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Tailwind (km/h):",(0,jsx_runtime.jsx)("input",{type:"number",name:"wind-speed1",defaultValue:0,step:.1,required:!0})]}),(0,jsx_runtime.jsxs)("label",{children:["Tailwind (km/h):",(0,jsx_runtime.jsx)("input",{type:"number",name:"wind-speed2",defaultValue:0,step:.1,required:!0})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Air Density (kg/m^3):",(0,jsx_runtime.jsx)("input",{type:"number",name:"air-density1",defaultValue:1.225,step:.001,required:!0,min:0})]}),(0,jsx_runtime.jsxs)("label",{children:["Air Density (kg/m^3):",(0,jsx_runtime.jsx)("input",{type:"number",name:"air-density2",defaultValue:1.225,step:.001,required:!0,min:0})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Drag Coefficient:",(0,jsx_runtime.jsx)("input",{type:"number",name:"drag-coefficient1",defaultValue:.7,step:.01,required:!0,min:0})]}),(0,jsx_runtime.jsxs)("label",{children:["Drag Coefficient:",(0,jsx_runtime.jsx)("input",{type:"number",name:"drag-coefficient2",defaultValue:.7,step:.01,required:!0,min:0})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Frontal Area (m^2):",(0,jsx_runtime.jsx)("input",{type:"number",name:"frontal-area1",defaultValue:.5,step:.01,required:!0,min:0})]}),(0,jsx_runtime.jsxs)("label",{children:["Frontal Area (m^2):",(0,jsx_runtime.jsx)("input",{type:"number",name:"frontal-area2",defaultValue:.5,step:.01,required:!0,min:0})]})]})]}),(0,jsx_runtime.jsxs)("details",{children:[(0,jsx_runtime.jsx)("summary",{children:"Friction"}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Rolling Resistance:",(0,jsx_runtime.jsx)("input",{type:"number",name:"rolling-resistance-coefficient1",defaultValue:.005,step:1e-4,required:!0,min:0})]}),(0,jsx_runtime.jsxs)("label",{children:["Rolling Resistance:",(0,jsx_runtime.jsx)("input",{type:"number",name:"rolling-resistance-coefficient2",defaultValue:.005,step:1e-4,required:!0,min:0})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Drivetrain Loss (%):",(0,jsx_runtime.jsx)("input",{type:"number",name:"drivetrain-loss-factor1",defaultValue:2,step:.1,required:!0,min:0})]}),(0,jsx_runtime.jsxs)("label",{children:["Drivetrain Loss (%):",(0,jsx_runtime.jsx)("input",{type:"number",name:"drivetrain-loss-factor2",defaultValue:2,step:.1,required:!0,min:0})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_module.row,children:[(0,jsx_runtime.jsx)("input",{type:"reset",value:"Reset"}),(0,jsx_runtime.jsx)("input",{type:"submit",value:"Submit"})]})]})})}const AccelerationCalculator_module={calculator:"AccelerationCalculator_calculator__GYNmP",mainSection:"AccelerationCalculator_mainSection__xUo9-",section:"AccelerationCalculator_section__6NL8H",description:"AccelerationCalculator_description__GFALB",belowTitle:"AccelerationCalculator_belowTitle__zFGeN",header:"AccelerationCalculator_header__XTEX8",page:"AccelerationCalculator_page__d6J8w",paralax:"AccelerationCalculator_paralax__moiFQ",background:"AccelerationCalculator_background__lSwmW",title:"AccelerationCalculator_title__FmuBY",backgroundOverlay:"AccelerationCalculator_backgroundOverlay__JQDb8",info:"AccelerationCalculator_info__Uelv8",credit:"AccelerationCalculator_credit__d5uC9"},background1_namespaceObject=__webpack_require__.p+"static/media/background1.60124b2df2aae8d88c35.jpg";class d{constructor(){this.callbacks=new Set,this.animationFrameId=null}static getInstance(){return d.instance||(d.instance=new d),d.instance}register(t){this.callbacks.add(t),null===this.animationFrameId&&this.start()}unregister(t){this.callbacks.delete(t),0===this.callbacks.size&&null!==this.animationFrameId&&this.stop()}start(){const t=()=>{this.callbacks.forEach((t=>t())),this.animationFrameId=requestAnimationFrame(t)};this.animationFrameId=requestAnimationFrame(t)}stop(){null!==this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}}const S=d.getInstance(),A=t=>{const[e,i]=(0,react.useState)(0),[r,s]=(0,react.useState)(!1),n=(0,react.useRef)(null),o=(0,react.useCallback)((()=>{n.current&&i(n.current.height)}),[]);return(0,react.useEffect)((()=>{const t=()=>{s(!0),o()},e=n.current;return e&&(e.complete?t():e.addEventListener("load",t)),window.addEventListener("resize",o),()=>{e&&e.removeEventListener("load",t),window.removeEventListener("resize",o)}}),[t,o]),[n,e,r]},j=(t,e)=>t*e-t,q=(t,e)=>Math.ceil(t/100*e-e/2),B=(t,e)=>{const{top:i,height:r}=t,s=-r;if(i<s)return 0;if(i>e)return 100;const n=(i-s)/(e-s)*100;return Math.min(Math.max(n,0),100)},G=(t,e)=>{switch(e){case"up":default:return"0, ".concat(t,"px, 0");case"right":return"".concat(-t,"px, 0, 0");case"down":return"0, ".concat(-t,"px, 0");case"left":return"".concat(t,"px, 0, 0");case"up left":return"".concat(t,"px, ").concat(t,"px, 0");case"up right":return"".concat(-t,"px, ").concat(t,"px, 0");case"down left":return"".concat(t,"px, ").concat(-t,"px, 0");case"left right":return"".concat(-t,"px, ").concat(-t,"px, 0")}},O=()=>{const[t,e]=(0,react.useState)(null);return(0,react.useEffect)((()=>{const t=()=>{e(window.innerHeight)};if(typeof window<"u")return e(window.innerHeight),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[]),t},W=t=>{let{isLoaded:e,imageHeight:i,scale:r,boundingClientRect:s,orientation:n,maxTransition:o}=t;const[a,l]=(0,react.useState)(0),[u,c]=(0,react.useState)(0),[h,d]=(0,react.useState)(""),[p,f]=(0,react.useState)(0),_=O();return(0,react.useEffect)((()=>{if(!e)return;const t=j(i,r);l(t)}),[e,i,r]),(0,react.useEffect)((()=>{if(!e||!_||!s)return;let t=B(s,_);o&&(t=Math.min(t,100-o)),f(t)}),[e,s,_]),(0,react.useEffect)((()=>{const t=q(p,a);c(t)}),[p,a]),(0,react.useEffect)((()=>{const t=G(u,n);d(t)}),[u,n]),h},Y=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[e,i]=(0,react.useState)(!1),r=(0,react.useRef)(null);return(0,react.useEffect)((()=>{const e=new IntersectionObserver((t=>{const[e]=t;e&&(e.isIntersecting?i(!0):i(!1))}),{...t}),{current:s}=r;return s&&e.observe(s),()=>{s&&e.unobserve(s)}}),[t]),[r,e]};var D="/Users/geoffrey/Desktop/perso/simpleParallax.js/src/react/index.tsx";const _=t=>{var e;let{delay:i=.4,orientation:r="up",scale:s=1.4,overflow:n=!1,transition:o="cubic-bezier(0,0,0,1)",maxTransition:a=null,children:l}=t;var u;const c=null!==r&&void 0!==r?r:"up",h=null!==s&&void 0!==s?s:1.2,d=null==(u=null==l?void 0:l.props)?void 0:u.src,[p,f]=(0,react.useState)(!1),[_,m]=(0,react.useState)(0),[g,y]=(0,react.useState)(null),[v,b]=(0,react.useState)(""),[C,x]=(0,react.useState)(""),[P,E,w]=A(d),[O,M]=Y({root:null,rootMargin:"0px",threshold:Array.from(Array(101).keys(),(t=>t/100))}),T=W({isLoaded:w,imageHeight:E,scale:h,boundingClientRect:g,orientation:c,maxTransition:a}),j=(0,react.useCallback)((()=>{var t;if((M||!p)&&(window.scrollY!==_||!p)){const e=null==(t=P.current)?void 0:t.getBoundingClientRect();e&&y(e),p||f(!0),m(window.scrollY)}}),[_,M,P]);(0,react.useEffect)((()=>{let t="translate3d(".concat(T,")");n||(t+=" scale(".concat(h,")")),b(t)}),[T,h]),(0,react.useEffect)((()=>{!o||!i||x("transform ".concat(i,"s ").concat(o))}),[o,i]),(0,react.useEffect)((()=>(S.register(j),()=>{S.unregister(j)})),[j]);const N=react.isValidElement(l)?react.cloneElement(l,{style:{...null!==(e=l.props.style)&&void 0!==e?e:{},transform:v,willChange:"transform",transition:C},ref:P}):null;return react.createElement("div",{ref:O,style:{overflow:n?"visible":"hidden"},__self:void 0,__source:{fileName:D,lineNumber:92,columnNumber:5}},N)};function AccelerationCalculator(){const[t,e]=(0,react.useState)({});return(0,jsx_runtime.jsxs)("div",{className:AccelerationCalculator_module.page,children:[(0,jsx_runtime.jsxs)("div",{className:AccelerationCalculator_module.header,children:[(0,jsx_runtime.jsxs)("div",{className:AccelerationCalculator_module.backgroundOverlay,children:[(0,jsx_runtime.jsx)("h1",{className:AccelerationCalculator_module.title,children:"Acceleration Calculator"}),(0,jsx_runtime.jsx)("p",{className:AccelerationCalculator_module.belowTitle,children:"From zero to hero, how fast can you go? "})]}),(0,jsx_runtime.jsx)(_,{scale:2,delay:1,transition:"cubic-bezier(0,0,0,1)",className:AccelerationCalculator_module.parallax,children:(0,jsx_runtime.jsx)("img",{className:AccelerationCalculator_module.background,src:background1_namespaceObject,alt:"bike"})})]}),(0,jsx_runtime.jsx)("a",{className:AccelerationCalculator_module.credit,children:"Photographer unknown"}),(0,jsx_runtime.jsxs)("div",{className:AccelerationCalculator_module.mainSection,children:[(0,jsx_runtime.jsx)("div",{className:AccelerationCalculator_module.section,children:(0,jsx_runtime.jsx)("p",{className:AccelerationCalculator_module.description,children:"Compare the acceleration curves of two setups to 99% of their top speed. "})}),(0,jsx_runtime.jsxs)("div",{className:AccelerationCalculator_module.calculator,children:[(0,jsx_runtime.jsx)(VariableForm,{submitVariables:function(t){e(t)}}),(0,jsx_runtime.jsx)(TopSpeedGraph,{variablesArray:t})]})]}),(0,jsx_runtime.jsxs)("div",{className:AccelerationCalculator_module.info,children:[(0,jsx_runtime.jsx)("h4",{children:"What are the effects of each parameter?"}),(0,jsx_runtime.jsx)("p",{children:"Power comes from your legs, the stronger you are, the faster you go."}),(0,jsx_runtime.jsx)("h5",{children:"Weight:"}),(0,jsx_runtime.jsxs)("ul",{children:[(0,jsx_runtime.jsx)("li",{children:"Body weight and total weight are added to become total system weight"}),(0,jsx_runtime.jsx)("li",{children:"More mass means more inertia, meaning slower acceleration. Wheels (and tires, and tubes) have a larger impact on acceleration as they are also subject to rotational inertia. In this model, 60% of the mass is assumed to be at the circumference of the wheel, 40% distributed as a disc. Other rotating parts have negligible impact."}),(0,jsx_runtime.jsx)("li",{children:"More weight also increases rolling resistance, reducing top speed and acceleration."}),(0,jsx_runtime.jsx)("li",{children:"Weight also multiplies the effect of grade."})]}),(0,jsx_runtime.jsx)("h5",{children:"Aerodynamics:"}),(0,jsx_runtime.jsxs)("ul",{children:[(0,jsx_runtime.jsx)("li",{children:"Tailwind is effectively subtracted from (or, if negative for headwind, added to) your actual speed to calculate the aerodynamic drag."}),(0,jsx_runtime.jsx)("li",{children:"Drag increases linearly with air density, drag coefficient, and frontal area."}),(0,jsx_runtime.jsx)("li",{children:"Drag increases with the square of speed (minus tailwind)."}),(0,jsx_runtime.jsx)("li",{children:"Aero components, but mostly body position will affect both the drag coefficient and frontal area."}),(0,jsx_runtime.jsx)("li",{children:"With the default values, drag accounts for 50% of the resistive force at 15-20km/h, and 80% of the resistive force at 30-35km/h."})]}),(0,jsx_runtime.jsx)("h5",{children:"Friction:"}),(0,jsx_runtime.jsxs)("ul",{children:[(0,jsx_runtime.jsx)("li",{children:"Friction increases linearly with rolling resistance, drivetrain loss, and speed. "}),(0,jsx_runtime.jsx)("li",{children:"Rolling resistance can be reduced significantly with quality tires and adequate tire pressure."}),(0,jsx_runtime.jsx)("li",{children:"Drivetrain loss can be reduced significantly with proper adjustments and lubrication."}),(0,jsx_runtime.jsx)("li",{children:"With the default values, friction accounts for 50% of the resistive force at 15-20km/h, and 20% of the resistive force at 30-35km/h."})]}),(0,jsx_runtime.jsx)("p",{children:"The graphs show the simulation over a maximum of 600 seconds or until speed reaches 99% of the top speed (maximum of 180km/h) with a time step of 0.01 second."})]})]})}const DistanceGraph_module={graph:"DistanceGraph_graph__j+q4n",jxgbox:"DistanceGraph_jxgbox__o7tKe",speedInfoContainer:"DistanceGraph_speedInfoContainer__jHz35",infoContainer:"DistanceGraph_infoContainer__bfimx",speedInfo:"DistanceGraph_speedInfo__s-1ap"};function DistanceGraph(t){var e,i,r,s;let{variablesArray:n}=t;const o=(0,react.useRef)(null),[a,l]=(0,react.useState)({time1String:null,time1FasterString:null,time2String:null,time2FasterString:null}),[u,c]=(0,react.useState)({maxTheoreticalSpeed1:null,speed1Faster:null,maxTheoreticalSpeed2:null,speed2Faster:null}),h=9.81;var d=.01;const[p,f,_,m]=(0,react.useMemo)((()=>{if(!n[0]||!n[1])return[null,null,0,0];const[t,e]=n;if(t.distance>1e4||e.distance>1e4){const i=Math.max(t.distance,e.distance);d=.01*Math.floor(i/1e4)}const i=accelerationToCoverDistance(t.power,t.systemWeight,t.airDensity,t.dragCoefficient,t.frontalArea,h,t.rollingResistanceCoefficient,t.drivetrainLossFactor,t.percentGrade,t.windSpeed,d,t.wheelWeight,t.distance,t.deceleration),r=accelerationToCoverDistance(e.power,e.systemWeight,e.airDensity,e.dragCoefficient,e.frontalArea,h,e.rollingResistanceCoefficient,e.drivetrainLossFactor,e.percentGrade,e.windSpeed,d,e.wheelWeight,e.distance,e.deceleration),s=calculateTheoreticalMaxSpeed(t.power,t.systemWeight,t.airDensity,t.dragCoefficient,t.frontalArea,h,t.rollingResistanceCoefficient,t.drivetrainLossFactor,t.percentGrade,t.windSpeed),o=calculateTheoreticalMaxSpeed(e.power,e.systemWeight,e.airDensity,e.dragCoefficient,e.frontalArea,h,e.rollingResistanceCoefficient,e.drivetrainLossFactor,e.percentGrade,e.windSpeed);var a=null,l=null;s>o?a="+"+(s-o).toFixed(2)+"("+((s-o)/o*100).toFixed(2)+"%)":s<o&&(l="+"+(o-s).toFixed(2)+"("+((o-s)/s*100).toFixed(2)+"%)"),c({maxTheoreticalSpeed1:s,speed1Faster:a,maxTheoreticalSpeed2:o,speed2Faster:l});return[i,r,Math.max(s,o),Math.max(i.times[i.times.length-1],r.times[r.times.length-1])]}),[n]);return(0,react.useEffect)((()=>{if(!p||!f)return;const t=jsxgraph_src.JSXGraph.initBoard(o.current,{boundingbox:[.2*-m,1.2*_,1.2*m,.2*-_],axis:!0,showCopyright:!1});t.create("text",[.5*m,.1*-_,"Time (s)"],{fixed:!0}),t.create("text",[.19*-m,.5*_,"Speed (km/h)"],{fixed:!1}),t.create("curve",[p.times,p.speeds],{strokeColor:"red",strokeWidth:2}),t.create("curve",[f.times,f.speeds],{strokeColor:"blue",strokeWidth:2});const e=p.times[p.times.length-1],i=f.times[f.times.length-1];var r,s;r=e>36e3?">36000.00s":"".concat(e.toFixed(2),"s"),s=i>36e3?">36000s.00":"".concat(i.toFixed(2),"s");let n=null,a=null;return null!==e&&null!==i&&(e<i?n=(e-i).toFixed(2)+"s("+((e-i)/i*100).toFixed(2)+"%)":e>i&&(a=(i-e).toFixed(2)+"s("+((i-e)/e*100).toFixed(2)+"%)")),l({time1String:r,time1FasterString:n,time2String:s,time2FasterString:a}),()=>{jsxgraph_src.JSXGraph.freeBoard(t)}}),[p,f,_,m]),(0,jsx_runtime.jsxs)("div",{className:DistanceGraph_module.graph,children:[(0,jsx_runtime.jsxs)("div",{className:DistanceGraph_module.speedInfoContainer,children:[(0,jsx_runtime.jsx)("p",{className:DistanceGraph_module.infoContainer,children:"Top Speed: "}),(0,jsx_runtime.jsxs)("div",{className:DistanceGraph_module.infoContainer,children:[(0,jsx_runtime.jsx)("p",{className:DistanceGraph_module.speedInfo,style:{color:"red"},children:null!==u.maxTheoreticalSpeed1?u.maxTheoreticalSpeed1.toFixed(2)+"km/h":"--"}),(0,jsx_runtime.jsx)("p",{className:DistanceGraph_module.speedInfo,style:{color:"green"},children:null!==u.speed1Faster?u.speed1Faster:""})]}),(0,jsx_runtime.jsxs)("div",{className:DistanceGraph_module.infoContainer,children:[(0,jsx_runtime.jsx)("p",{className:DistanceGraph_module.speedInfo,style:{color:"blue"},children:null!==u.maxTheoreticalSpeed2?u.maxTheoreticalSpeed2.toFixed(2)+"km/h":"--"}),(0,jsx_runtime.jsx)("p",{className:DistanceGraph_module.speedInfo,style:{color:"green"},children:null!==u.speed2Faster?u.speed2Faster:""})]})]}),(0,jsx_runtime.jsxs)("div",{className:DistanceGraph_module.speedInfoContainer,children:[(0,jsx_runtime.jsx)("p",{className:DistanceGraph_module.infoContainer,children:"Time: "}),(0,jsx_runtime.jsxs)("div",{className:DistanceGraph_module.infoContainer,children:[(0,jsx_runtime.jsx)("p",{className:DistanceGraph_module.speedInfo,style:{color:"red"},children:null!==(e=a.time1String)&&void 0!==e?e:"--"}),(0,jsx_runtime.jsx)("p",{className:DistanceGraph_module.speedInfo,style:{color:"green"},children:null!==(i=a.time1FasterString)&&void 0!==i?i:""})]}),(0,jsx_runtime.jsxs)("div",{className:DistanceGraph_module.infoContainer,children:[(0,jsx_runtime.jsx)("p",{className:DistanceGraph_module.speedInfo,style:{color:"blue"},children:null!==(r=a.time2String)&&void 0!==r?r:"--"}),(0,jsx_runtime.jsx)("p",{className:DistanceGraph_module.speedInfo,style:{color:"green"},children:null!==(s=a.time2FasterString)&&void 0!==s?s:""})]})]}),(0,jsx_runtime.jsx)("div",{id:"jxgbox",className:DistanceGraph_module.jxgbox,ref:o,style:{width:"600px",height:"600px"}})]})}const VariableForm_VariableForm_module={formContainer:"VariableForm_formContainer__nfR1T",row:"VariableForm_row__btCeO"};function VariableForm_VariableForm(t){let{submitVariables:e}=t;const i=(0,react.useRef)(null),r=(0,react.useRef)(!0);return(0,react.useEffect)((()=>{r.current&&(r.current=!1,i.current.requestSubmit())}),[]),(0,jsx_runtime.jsx)("div",{className:VariableForm_VariableForm_module.formContainer,children:(0,jsx_runtime.jsxs)("form",{onSubmit:t=>{t.preventDefault();const i=new FormData(t.target),r={distance:Number(i.get("distance1")),deceleration:Number(i.get("deceleration1")),power:Number(i.get("power1")),systemWeight:Number(i.get("body-weight1"))+Number(i.get("bike-weight1")),wheelWeight:Number(i.get("wheel-weight1")),airDensity:Number(i.get("air-density1")),dragCoefficient:Number(i.get("drag-coefficient1")),frontalArea:Number(i.get("frontal-area1")),rollingResistanceCoefficient:Number(i.get("rolling-resistance-coefficient1")),drivetrainLossFactor:Number(i.get("drivetrain-loss-factor1")),percentGrade:Number(i.get("percent-grade1")),windSpeed:Number(i.get("wind-speed1"))},s={distance:Number(i.get("distance2")),deceleration:Number(i.get("deceleration2")),power:Number(i.get("power2")),systemWeight:Number(i.get("body-weight2"))+Number(i.get("bike-weight2")),wheelWeight:Number(i.get("wheel-weight2")),airDensity:Number(i.get("air-density2")),dragCoefficient:Number(i.get("drag-coefficient2")),frontalArea:Number(i.get("frontal-area2")),rollingResistanceCoefficient:Number(i.get("rolling-resistance-coefficient2")),drivetrainLossFactor:Number(i.get("drivetrain-loss-factor2")),percentGrade:Number(i.get("percent-grade2")),windSpeed:Number(i.get("wind-speed2"))};e([r,s])},onReset:()=>i.current.requestSubmit(),ref:i,children:[(0,jsx_runtime.jsxs)("div",{className:VariableForm_VariableForm_module.row,children:[(0,jsx_runtime.jsx)("h3",{style:{color:"red"},children:"Red"}),(0,jsx_runtime.jsx)("h3",{style:{color:"blue"},children:"Blue"})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Distance (m):",(0,jsx_runtime.jsx)("input",{type:"number",name:"distance1",defaultValue:1e3,required:!0,min:0})]}),(0,jsx_runtime.jsxs)("label",{children:["Distance (m):",(0,jsx_runtime.jsx)("input",{type:"number",name:"distance2",defaultValue:1e3,required:!0,min:0})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Braking:",(0,jsx_runtime.jsxs)("select",{name:"deceleration1",children:[(0,jsx_runtime.jsx)("option",{value:"0",selected:!0,children:"No"}),(0,jsx_runtime.jsx)("option",{value:"1",children:"Light (1m/s^2)"}),(0,jsx_runtime.jsx)("option",{value:"2",children:"Medium (2m/s^2)"}),(0,jsx_runtime.jsx)("option",{value:"4",children:"Heavy (4m/s^2)"})]})]}),(0,jsx_runtime.jsxs)("label",{children:["Braking:",(0,jsx_runtime.jsxs)("select",{name:"deceleration2",children:[(0,jsx_runtime.jsx)("option",{value:"0",selected:!0,children:"No"}),(0,jsx_runtime.jsx)("option",{value:"1",children:"Light (1m/s^2)"}),(0,jsx_runtime.jsx)("option",{value:"2",children:"Medium (2m/s^2)"}),(0,jsx_runtime.jsx)("option",{value:"4",children:"Heavy (4m/s^2)"})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Power (watts):",(0,jsx_runtime.jsx)("input",{type:"number",name:"power1",defaultValue:250,required:!0,min:1})]}),(0,jsx_runtime.jsxs)("label",{children:["Power (watts):",(0,jsx_runtime.jsx)("input",{type:"number",name:"power2",defaultValue:250,required:!0,min:1})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Body Weight (kg):",(0,jsx_runtime.jsx)("input",{type:"number",name:"body-weight1",defaultValue:75,step:.1,required:!0,min:1})]}),(0,jsx_runtime.jsxs)("label",{children:["Body Weight (kg):",(0,jsx_runtime.jsx)("input",{type:"number",name:"body-weight2",defaultValue:75,step:.1,required:!0,min:1})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Total Bike Weight (kg):",(0,jsx_runtime.jsx)("input",{type:"number",name:"bike-weight1",defaultValue:10,step:.01,required:!0,min:0})]}),(0,jsx_runtime.jsxs)("label",{children:["Total Bike Weight (kg):",(0,jsx_runtime.jsx)("input",{type:"number",name:"bike-weight2",defaultValue:10,step:.01,required:!0,min:0})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Total Wheel Weight (kg):",(0,jsx_runtime.jsx)("input",{type:"number",name:"wheel-weight1",defaultValue:3,step:.001,required:!0,min:0})]}),(0,jsx_runtime.jsxs)("label",{children:["Total Wheel Weight (kg):",(0,jsx_runtime.jsx)("input",{type:"number",name:"wheel-weight2",defaultValue:3,step:.001,required:!0,min:0})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Percent Grade (%):",(0,jsx_runtime.jsx)("input",{type:"number",name:"percent-grade1",defaultValue:0,required:!0})]}),(0,jsx_runtime.jsxs)("label",{children:["Percent Grade (%):",(0,jsx_runtime.jsx)("input",{type:"number",name:"percent-grade2",defaultValue:0,required:!0})]})]}),(0,jsx_runtime.jsxs)("details",{children:[(0,jsx_runtime.jsx)("summary",{children:"Aerodynamics"}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Tailwind (km/h):",(0,jsx_runtime.jsx)("input",{type:"number",name:"wind-speed1",defaultValue:0,step:.1,required:!0})]}),(0,jsx_runtime.jsxs)("label",{children:["Tailwind (km/h):",(0,jsx_runtime.jsx)("input",{type:"number",name:"wind-speed2",defaultValue:0,step:.1,required:!0})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Air Density (kg/m^3):",(0,jsx_runtime.jsx)("input",{type:"number",name:"air-density1",defaultValue:1.225,step:.001,required:!0,min:0})]}),(0,jsx_runtime.jsxs)("label",{children:["Air Density (kg/m^3):",(0,jsx_runtime.jsx)("input",{type:"number",name:"air-density2",defaultValue:1.225,step:.001,required:!0,min:0})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Drag Coefficient:",(0,jsx_runtime.jsx)("input",{type:"number",name:"drag-coefficient1",defaultValue:.7,step:.01,required:!0,min:0})]}),(0,jsx_runtime.jsxs)("label",{children:["Drag Coefficient:",(0,jsx_runtime.jsx)("input",{type:"number",name:"drag-coefficient2",defaultValue:.7,step:.01,required:!0,min:0})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Frontal Area (m^2):",(0,jsx_runtime.jsx)("input",{type:"number",name:"frontal-area1",defaultValue:.5,step:.01,required:!0,min:0})]}),(0,jsx_runtime.jsxs)("label",{children:["Frontal Area (m^2):",(0,jsx_runtime.jsx)("input",{type:"number",name:"frontal-area2",defaultValue:.5,step:.01,required:!0,min:0})]})]})]}),(0,jsx_runtime.jsxs)("details",{children:[(0,jsx_runtime.jsx)("summary",{children:"Friction"}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Rolling Resistance:",(0,jsx_runtime.jsx)("input",{type:"number",name:"rolling-resistance-coefficient1",defaultValue:.005,step:1e-4,required:!0,min:0})]}),(0,jsx_runtime.jsxs)("label",{children:["Rolling Resistance:",(0,jsx_runtime.jsx)("input",{type:"number",name:"rolling-resistance-coefficient2",defaultValue:.005,step:1e-4,required:!0,min:0})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_VariableForm_module.row,children:[(0,jsx_runtime.jsxs)("label",{children:["Drivetrain Loss (%):",(0,jsx_runtime.jsx)("input",{type:"number",name:"drivetrain-loss-factor1",defaultValue:2,step:.1,required:!0,min:0})]}),(0,jsx_runtime.jsxs)("label",{children:["Drivetrain Loss (%):",(0,jsx_runtime.jsx)("input",{type:"number",name:"drivetrain-loss-factor2",defaultValue:2,step:.1,required:!0,min:0})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:VariableForm_VariableForm_module.row,children:[(0,jsx_runtime.jsx)("input",{type:"reset",value:"Reset"}),(0,jsx_runtime.jsx)("input",{type:"submit",value:"Submit"})]})]})})}const DistanceCalculator_module={calculator:"DistanceCalculator_calculator__PtK0q",mainSection:"DistanceCalculator_mainSection__cmaI1",section:"DistanceCalculator_section__sNa7r",description:"DistanceCalculator_description__p4mAM",belowTitle:"DistanceCalculator_belowTitle__6X+4W",header:"DistanceCalculator_header__iYXl8",page:"DistanceCalculator_page__r5TGh",paralax:"DistanceCalculator_paralax__Lc0ki",background:"DistanceCalculator_background__9tqeS",title:"DistanceCalculator_title__Jnx6+",backgroundOverlay:"DistanceCalculator_backgroundOverlay__5XZ-A",info:"DistanceCalculator_info__eXqfT",credit:"DistanceCalculator_credit__q6pBn"},pexels_mkronh_bmb_1149766_2545615_namespaceObject=__webpack_require__.p+"static/media/pexels-mkronh-bmb-1149766-2545615.80e0e1e1a1b75017e74c.jpg";function DistanceCalculator(){const[t,e]=(0,react.useState)({});return(0,jsx_runtime.jsxs)("div",{className:DistanceCalculator_module.page,children:[(0,jsx_runtime.jsxs)("div",{className:DistanceCalculator_module.header,children:[(0,jsx_runtime.jsxs)("div",{className:DistanceCalculator_module.backgroundOverlay,children:[(0,jsx_runtime.jsx)("h1",{className:DistanceCalculator_module.title,children:"Time Calculator"}),(0,jsx_runtime.jsx)("p",{className:DistanceCalculator_module.belowTitle,children:"From start to finish, or from green light to red light. "})]}),(0,jsx_runtime.jsx)(_,{scale:2,delay:1,transition:"cubic-bezier(0,0,0,1)",className:DistanceCalculator_module.parallax,children:(0,jsx_runtime.jsx)("img",{className:DistanceCalculator_module.background,src:pexels_mkronh_bmb_1149766_2545615_namespaceObject,alt:"bike"})})]}),(0,jsx_runtime.jsx)("a",{href:"https://www.pexels.com/@mkronh-bmb-1149766/",className:DistanceCalculator_module.credit,target:"_blank",rel:"noreferrer",children:"Photo by MKronh-BMB on Pexels"}),(0,jsx_runtime.jsxs)("div",{className:DistanceCalculator_module.mainSection,children:[(0,jsx_runtime.jsx)("div",{className:DistanceCalculator_module.section,children:(0,jsx_runtime.jsx)("p",{className:DistanceCalculator_module.description,children:"Compare the acceleration curves of two setups to within a given distance."})}),(0,jsx_runtime.jsxs)("div",{className:DistanceCalculator_module.calculator,children:[(0,jsx_runtime.jsx)(VariableForm_VariableForm,{submitVariables:function(t){e(t)}}),(0,jsx_runtime.jsx)(DistanceGraph,{variablesArray:t})]})]}),(0,jsx_runtime.jsxs)("div",{className:DistanceCalculator_module.info,children:[(0,jsx_runtime.jsx)("h4",{children:"What are the effects of each parameter?"}),(0,jsx_runtime.jsx)("p",{children:"Power comes from your legs, the stronger you are, the faster you go."}),(0,jsx_runtime.jsx)("h5",{children:"Weight:"}),(0,jsx_runtime.jsxs)("ul",{children:[(0,jsx_runtime.jsx)("li",{children:"Body weight and total weight are added to become total system weight"}),(0,jsx_runtime.jsx)("li",{children:"More mass means more inertia, meaning slower acceleration. Wheels (and tires, and tubes) have a larger impact on acceleration as they are also subject to rotational inertia. In this model, 60% of the mass is assumed to be at the circumference of the wheel, 40% distributed as a disc. Other rotating parts have negligible impact."}),(0,jsx_runtime.jsx)("li",{children:"More weight also increases rolling resistance, reducing top speed and acceleration."}),(0,jsx_runtime.jsx)("li",{children:"Weight also multiplies the effect of grade."})]}),(0,jsx_runtime.jsx)("h5",{children:"Aerodynamics:"}),(0,jsx_runtime.jsxs)("ul",{children:[(0,jsx_runtime.jsx)("li",{children:"Tailwind is effectively subtracted from (or, if negative for headwind, added to) your actual speed to calculate the aerodynamic drag."}),(0,jsx_runtime.jsx)("li",{children:"Drag increases linearly with air density, drag coefficient, and frontal area."}),(0,jsx_runtime.jsx)("li",{children:"Drag increases with the square of speed (minus tailwind)."}),(0,jsx_runtime.jsx)("li",{children:"Aero components, but mostly body position will affect both the drag coefficient and frontal area."}),(0,jsx_runtime.jsx)("li",{children:"With the default values, drag accounts for 50% of the resistive force at 15-20km/h, and 80% of the resistive force at 30-35km/h."})]}),(0,jsx_runtime.jsx)("h5",{children:"Friction:"}),(0,jsx_runtime.jsxs)("ul",{children:[(0,jsx_runtime.jsx)("li",{children:"Friction increases linearly with rolling resistance, drivetrain loss, and speed. "}),(0,jsx_runtime.jsx)("li",{children:"Rolling resistance can be reduced significantly with quality tires and adequate tire pressure."}),(0,jsx_runtime.jsx)("li",{children:"Drivetrain loss can be reduced significantly with proper adjustments and lubrication."}),(0,jsx_runtime.jsx)("li",{children:"With the default values, friction accounts for 50% of the resistive force at 15-20km/h, and 20% of the resistive force at 30-35km/h."})]}),(0,jsx_runtime.jsxs)("p",{children:["The graphs show the simulation over a maximum of 36000 seconds or until the distance is completed, with a time step of 0.01 second for every full 10km of the highest distance ",(0,jsx_runtime.jsx)("br",{})," (i.e.: 0.01 seconds for 10km, 0.02 seconds for 20km). "]})]})]})}function App_App(){return(0,jsx_runtime.jsx)("div",{className:"App",children:(0,jsx_runtime.jsxs)(HashRouter,{children:[(0,jsx_runtime.jsx)(Navbar,{}),(0,jsx_runtime.jsxs)(Routes,{children:[(0,jsx_runtime.jsx)(Route,{index:!0,element:(0,jsx_runtime.jsx)(AccelerationCalculator,{})}),(0,jsx_runtime.jsx)(Route,{path:"/time",element:(0,jsx_runtime.jsx)(DistanceCalculator,{})})]}),(0,jsx_runtime.jsx)(Footer,{})]})})}const src_App=App_App,reportWebVitals=t=>{t&&t instanceof Function&&__webpack_require__.e(453).then(__webpack_require__.bind(__webpack_require__,453)).then((e=>{let{getCLS:i,getFID:r,getFCP:s,getLCP:n,getTTFB:o}=e;i(t),r(t),s(t),n(t),o(t)}))},src_reportWebVitals=reportWebVitals,root=client.createRoot(document.getElementById("root"));root.render((0,jsx_runtime.jsx)(src_App,{})),src_reportWebVitals()})();
//# sourceMappingURL=main.a7be225f.js.map